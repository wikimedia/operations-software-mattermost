<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://docs.mattermost.org/install/Upgrade-Guide/index.html">
        <link rel="shortcut icon" href="../../../../favicon.ico">
        

	<title>Upgrade Guide - Mattermost Documentation</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../index.html">Mattermost Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../index.html">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../help/Manage-Members/index.html">Manage Members</a>
</li>

                        
                            
<li >
    <a href="../../help/README/index.html">README</a>
</li>

                        
                            
<li >
    <a href="../../help/Search/index.html">Search</a>
</li>

                        
                            
<li >
    <a href="../../help/Slack-Import/index.html">Slack Import</a>
</li>

                        
                            
<li >
    <a href="../../help/Team-Statistics/index.html">Team Statistics</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../developer/API-Web-Service/index.html">API Web Service</a>
</li>

                        
                            
<li >
    <a href="../../developer/API/index.html">API</a>
</li>

                        
                            
<li >
    <a href="../../developer/Code-Contribution-Guidelines/index.html">Code Contribution Guidelines</a>
</li>

                        
                            
<li >
    <a href="../../developer/Setup/index.html">Setup</a>
</li>

                        
                            
<li >
    <a href="../../developer/Style-Guide/index.html">Style Guide</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Tests</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../developer/tests/test-emoticons/index.html">Test emoticons</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Install <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../Administration/index.html">Administration</a>
</li>

                        
                            
<li >
    <a href="../Amazon-Elastic-Beanstalk/index.html">Amazon Elastic Beanstalk</a>
</li>

                        
                            
<li >
    <a href="../Configuration-Settings/index.html">Configuration Settings</a>
</li>

                        
                            
<li >
    <a href="../Docker-Single-Container/index.html">Docker Single Container</a>
</li>

                        
                            
<li >
    <a href="../Production-Debian/index.html">Production Debian</a>
</li>

                        
                            
<li >
    <a href="../Production-Ubuntu/index.html">Production Ubuntu</a>
</li>

                        
                            
<li >
    <a href="../Release-Numbering/index.html">Release Numbering</a>
</li>

                        
                            
<li >
    <a href="../Requirements/index.html">Requirements</a>
</li>

                        
                            
<li >
    <a href="../SMTP-Email-Setup/index.html">SMTP Email Setup</a>
</li>

                        
                            
<li >
    <a href="../Troubleshooting/index.html">Troubleshooting</a>
</li>

                        
                            
<li class="active">
    <a href="index.html">Upgrade Guide</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Integrations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Single Sign On</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../integrations/Single-Sign-On/Gitlab/index.html">Gitlab</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Webhooks</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../integrations/webhooks/Incoming-Webhooks/index.html">Incoming Webhooks</a>
</li>

        
            
<li >
    <a href="../../integrations/webhooks/Outgoing-Webhooks/index.html">Outgoing Webhooks</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Services</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../integrations/services/Gitlab-Integration-Service-for-Mattermost/index.html">Gitlab Integration Service for Mattermost</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Process <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../process/documentation-guidelines/index.html">Documentation guidelines</a>
</li>

                        
                            
<li >
    <a href="../../process/release-process/index.html">Release process</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../usage/Markdown/index.html">Markdown</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../Troubleshooting/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../integrations/Single-Sign-On/Gitlab/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/mattermost/platform">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#mattermost-upgrade-guide">Mattermost Upgrade Guide</a></li>
        
            <li><a href="#upgrading-mattermost-to-next-major-release">Upgrading Mattermost to Next Major Release</a></li>
        
            <li><a href="#upgrading-from-mattermost-beta-version-07">Upgrading from Mattermost Beta (Version 0.7)</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="mattermost-upgrade-guide">Mattermost Upgrade Guide</h1>
<h3 id="upgrading-mattermost-to-next-major-release">Upgrading Mattermost to Next Major Release</h3>
<p>Each release of Mattermost contains logic to upgrade it from the previously major build version. For example, version 1.2 upgrades the database and configuration data schema for a Mattermost version 1.1 server. The following procedure outlines how to upgrade Mattermost to the next major release version. </p>
<ol>
<li>Download the <strong>next major build release</strong> of your server</li>
<li>Determine the current version of your Mattermost server <ol>
<li>Go to any team site, opening the main menu at the top right of the left-hand sidebar and selecting <strong>About Mattermost</strong></li>
</ol>
</li>
<li>Identify the next major build release of your Mattermost server from the list of <a href="https://github.com/mattermost/platform/releases">stable Mattermost releases</a><ol>
<li>For example, if your current version is 1.1.0, you want to select version 1.2.0. </li>
<li>In some cases there will be <strong>minor build releases</strong>, such as 1.2.1 and 1.2.2. The minor build number indicates a bug fix or security issue release. Testing on minor build versions is less extensive than on major build versions and it is recommended that you use the minor build only if you need the specific additions included. </li>
</ol>
</li>
<li>Review Release Notes <ol>
<li>Check the release notes for the version of Mattermost you are able to install, and note any setting changes in the <strong>Compatibility</strong> section that apply to your deployment</li>
</ol>
</li>
<li>Download the <code>mattermost.tar.gz</code> file with the correct version for your upgrade<ol>
<li>You can use <code>wget</code> to retrieve a specific version. For example, to download v1.1.0 run <code>wget https://github.com/mattermost/platform/releases/download/v1.1.0/mattermost.tar.gz</code></li>
</ol>
</li>
<li>Stop the Mattermost Server</li>
<li>As best practice, consider posting to the Town Square channel of active teams pre-announcing the scheduled downtime to apply these upgrade procedures</li>
<li>To stop the server run <code>sudo stop mattermost</code></li>
<li>Backup your data</li>
<li>Back up your <code>config.json</code> file, which contains your system configuration. This will be used to restore your current settings after the new version is installed</li>
<li>Backup your database using your organization's standard procedures for backing up MySQL or PostgreSQL</li>
<li>If you're using local file storage, back up the location where files are stored</li>
<li>Decompress <code>mattermost.tar.gz</code> and use its contents to replace the current version of Mattermost on disk</li>
<li>Run <code>tar -xvzf mattermost.tar.gz</code></li>
<li>Restore the state of your server by copying the backed up version of <code>config.json</code> in place of the default <code>config.json</code> </li>
<li>Start your server and address any setting changes relevant in the latest version of Mattermost</li>
<li>Run <code>sudo start mattermost</code></li>
<li>The server will upgrade your database schema to be compatibile with the new release, as well as upgrade your <code>config.json</code> file to the latest format, using default values for new settings added</li>
<li>Go to the System Console to update any settings that have been added or modified based on the <strong>Compatibility</strong> documentation in the release notes</li>
<li>Test the system is working by going to the URL of an existing team</li>
</ol>
<h3 id="upgrading-from-mattermost-beta-version-07">Upgrading from Mattermost Beta (Version 0.7)</h3>
<p>The following instructions apply to updating installations of Mattermost v0.7-Beta to Mattermost 1.1. </p>
<h4 id="upgrading-mattermost-in-gitlab-80-to-gitlab-81-with-omnibus">Upgrading Mattermost in GitLab 8.0 to GitLab 8.1 with omnibus</h4>
<p>Mattermost 0.7.1-beta in GitLab 8.0 was a pre-release of Mattermost and Mattermost v1.1.1 in GitLab 8.1 was <a href="https://github.com/mattermost/platform/blob/master/CHANGELOG.md#configjson-changes-from-v07-to-v10">updated significantly</a> to get to a stable, forwards-compatible platform for Mattermost. </p>
<p>The Mattermost team didn't think it made sense for GitLab omnibus to attempt an automated re-configuration of Mattermost (since 0.7.1-beta was a pre-release) given the scale of change, so we're providing instructions for GitLab users who have customized their Mattermost deployments in 8.0 to move to 8.1: </p>
<ol>
<li>Follow the <a href="https://github.com/mattermost/platform/blob/master/doc/install/Upgrade-Guide.md#upgrading-mattermost-v071-beta-to-v111">Upgrading Mattermost v0.7.1-beta to v1.1.1 instructions</a> below to identify the settings in Mattermost's <code>config.json</code> file that differ from defaults and need to be updated from GitLab 8.0 to 8.1</li>
<li>Upgrade to GitLab 8.1 using omnibus, and allowing it overwrite <code>config.json</code> to the new Mattermost v1.1.1 format</li>
<li>Manually update <code>config.json</code> to new settings identified in Step 1</li>
</ol>
<p>Optionally, you can use the new <a href="https://github.com/mattermost/platform/blob/master/doc/install/Configuration-Settings.md">System Console user interface</a> to make changes to your new <code>config.json</code> file.</p>
<h4 id="upgrading-mattermost-v071-beta-to-v111">Upgrading Mattermost v0.7.1-beta to v1.1.1</h4>
<p><em>Note: <a href="https://github.com/mattermost/platform/releases/tag/v1.1.1">Mattermost v1.1.1</a> is a special release of Mattermost v1.1 that upgrades the database to Mattermost v1.1 from EITHER Mattermost v0.7 or Mattermost v1.0. The following instructions are for upgrading from Mattermost v0.7.1-beta to v1.1.1 and skipping the upgrade to Mattermost v1.0.</em></p>
<p>If you've manually changed Mattermost v0.7.1-beta configuration by updating the <code>config.json</code> file, you'll need to port those changes to Mattermost v1.1.1: </p>
<ol>
<li>
<p>Go to the <code>config.json</code> file that you manually updated and note any differences from the <a href="https://github.com/mattermost/platform/blob/v0.7.0/config/config.json">default <code>config.json</code> file in Mattermost 0.7</a>. </p>
</li>
<li>
<p>For each setting that you changed, check <a href="https://github.com/mattermost/platform/blob/master/CHANGELOG.md#configjson-changes-from-v07-to-v10">the changelog documentation</a> on whether the configuration setting has changed between v0.7 and v1.1.1</p>
</li>
<li>
<p>Update your new <a href="https://github.com/mattermost/platform/blob/v1.1.0/config/config.json"><code>config.json</code> file in Mattermost v1.1</a>, based on your preferences and the changelog documentation above</p>
</li>
</ol>
<p>Optionally, you can use the new <a href="https://github.com/mattermost/platform/blob/master/doc/install/Configuration-Settings.md">System Console user interface</a> to make changes to your new <code>config.json</code> file.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Copyright (c) 2015 Mattermost, Inc. All Rights Reserved.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
