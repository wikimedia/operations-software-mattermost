!function e(t,a,s){function n(i,l){if(!a[i]){if(!t[i]){var o="function"==typeof require&&require;if(!l&&o)return o(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[i]={exports:{}};t[i][0].call(u.exports,function(e){var a=t[i][1][e];return n(a?a:e)},u,u.exports,e,t,a,s)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<s.length;i++)n(s[i]);return n}({1:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=ReactBootstrap.Modal,c=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.doHide=this.doHide.bind(this)}return r(t,e),i(t,[{key:"doHide",value:function(){this.props.onModalDismissed()}},{key:"render",value:function(){var e=s.window.mm_config;return React.createElement(o,{show:this.props.show,onHide:this.doHide},React.createElement(o.Header,{closeButton:!0},React.createElement(o.Title,null,"Mattermost "+e.Version)),React.createElement(o.Body,null,React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Build Number:"),React.createElement("div",{className:"col-sm-9"},e.BuildNumber)),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Build Date:"),React.createElement("div",{className:"col-sm-9"},e.BuildDate)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 info__label"},"Build Hash:"),React.createElement("div",{className:"col-sm-9"},e.BuildHash))),React.createElement(o.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doHide},"Close")))}}]),t}(React.Component);a.default=c,c.defaultProps={show:!1},c.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],2:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=ReactBootstrap.Modal,o=e("../stores/user_store.jsx"),c=e("../stores/channel_store.jsx"),u=e("../utils/async_client.jsx"),d=e("./loading_screen.jsx"),h=e("../utils/utils.jsx"),m=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onAuditChange=this.onAuditChange.bind(this),this.handleMoreInfo=this.handleMoreInfo.bind(this),this.onHide=this.onHide.bind(this),this.onShow=this.onShow.bind(this),this.formatAuditInfo=this.formatAuditInfo.bind(this),this.handleRevokedSession=this.handleRevokedSession.bind(this);var a=this.getStateFromStoresForAudits();a.moreInfo=[],this.state=a}return n(t,e),r(t,[{key:"getStateFromStoresForAudits",value:function(){return{audits:o.getAudits()}}},{key:"onShow",value:function(){u.getAudits(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-300),$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar()}},{key:"onHide",value:function(){this.setState({moreInfo:[]}),this.props.onModalDismissed()}},{key:"componentDidMount",value:function(){o.addAuditsChangeListener(this.onAuditChange)}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillUnmount",value:function(){o.removeAuditsChangeListener(this.onAuditChange)}},{key:"onAuditChange",value:function(){var e=this.getStateFromStoresForAudits();h.areStatesEqual(e.audits,this.state.audits)||this.setState(e)}},{key:"handleMoreInfo",value:function(e){var t=this.state.moreInfo;t[e]=!0,this.setState({moreInfo:t})}},{key:"handleRevokedSession",value:function(e){return"The session with id "+e+" was revoked"}},{key:"formatAuditInfo",value:function(e){var t=e.action.replace(/\/api\/v[1-9]/,""),a="";if(0===t.indexOf("/channels")){var s=e.extra_info.split(" "),n=s[0].split("="),r="",i=void 0,l="";switch(n.indexOf("name")>=0&&(r=n[n.indexOf("name")+1],i=c.getByName(r),l=i?i.display_name:r),t){case"/channels/create":a="Created the "+l+" channel/group";break;case"/channels/create_direct":a="Established a direct message channel with "+h.getDirectTeammate(i.id).username;break;case"/channels/update":a="Updated the "+l+" channel/group name";break;case"/channels/update_desc":case"/channels/update_header":a="Updated the "+l+" channel/group header";break;default:var u=[],d="",m="";s[1]&&(u=s[1].split("="),u.indexOf("user_id")>=0&&(d=u[u.indexOf("user_id")+1],m=o.getProfile(d).username)),/\/channels\/[A-Za-z0-9]+\/delete/.test(t)?a="Deleted the channel/group with the URL "+r:/\/channels\/[A-Za-z0-9]+\/add/.test(t)?a="Added "+m+" to the "+l+" channel/group":/\/channels\/[A-Za-z0-9]+\/remove/.test(t)&&(a="Removed "+m+" from the "+l+" channel/group")}}else if(0===t.indexOf("/oauth")){var p=e.extra_info.split(" ");switch(t){case"/oauth/register":var f=p[0].split("=");"client_id"===f[0]&&(a="Attempted to register a new OAuth Application with ID "+f[1]);break;case"/oauth/allow":"attempt"===p[0]?a="Attempted to allow a new OAuth service access":"success"===p[0]?a="Successfully gave a new OAuth service access":"fail - redirect_uri did not match registered callback"===p[0]&&(a="Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback");break;case"/oauth/access_token":if("attempt"===p[0])a="Attempted to get an OAuth access token";else if("success"===p[0])a="Successfully added a new OAuth service";else{var g=p[0].split("-");"fail"===g[0].trim()&&g[1]&&(a="Failed to get an OAuth access token - "+g[1].trim())}}}else if(0===t.indexOf("/users")){var b=e.extra_info.split(" ");switch(t){case"/users/login":"attempt"===b[0]?a="Attempted to login":"success"===b[0]?a="Successfully logged in":b[0]&&(a="FAILED login attempt");break;case"/users/revoke_session":a=this.handleRevokedSession(b[0].split("=")[1]);break;case"/users/newimage":a="Updated your profile picture";break;case"/users/update":a="Updated the general settings of your account";break;case"/users/newpassword":"attempted"===b[0]?a="Attempted to change password":"completed"===b[0]?a="Successfully changed password":"failed - tried to update user password who was logged in through oauth"===b[0]&&(a="Failed to change password - tried to update user password who was logged in through oauth");break;case"/users/update_roles":var v=b[0].split("=")[1];a="Updated user role(s) to ",a+=v.trim()?v:"member";break;case"/users/update_active":var E=b[0].split("=")[0],_=b[0].split("=")[1];if("active"===E){"true"===_?a="Account made active":"false"===_&&(a="Account made inactive");var y=b[1].split("=");if("session_user"===y[0]){var R=o.getProfile(y[1]),C=o.getCurrentUser();C&&R&&(h.isAdmin(C.roles)||h.isSystemAdmin(C.roles))?a+=" by "+R.username:C&&R&&(a+=" by an admin")}}else"session_id"===E&&(a=this.handleRevokedSession(_));break;case"/users/send_password_reset":a="Sent an email to "+b[0].split("=")[1]+" to reset your password";break;case"/users/reset_password":"attempt"===b[0]?a="Attempted to reset password":"success"===b[0]&&(a="Successfully reset password");break;case"/users/update_notify":a="Updated your global notification settings"}}else if(0===t.indexOf("/hooks")){var N=e.extra_info.split(" ");switch(t){case"/hooks/incoming/create":"attempt"===N[0]?a="Attempted to create a webhook":"success"===N[0]?a="Successfully created a webhook":"fail - bad channel permissions"===N[0]&&(a="Failed to create a webhook - bad channel permissions");break;case"/hooks/incoming/delete":"attempt"===N[0]?a="Attempted to delete a webhook":"success"===N[0]?a="Successfully deleted a webhook":"fail - inappropriate conditions"===N[0]&&(a="Failed to delete a webhook - inappropriate conditions")}}else switch(t){case"/logout":a="Logged out of your account";break;case"/verify_email":a="Sucessfully verified your email address"}if(!a)if(e.extra_info.indexOf("revoked_all=")>=0)a="Revoked all current sessions for the team";else{var k="";t&&-1!==t.lastIndexOf("/")&&(k=t.substring(t.lastIndexOf("/")+1).replace("_"," "),k=h.toTitleCase(k));var S="";e.extra_info&&(S=e.extra_info,-1!==S.indexOf("=")&&(S=S.substring(S.indexOf("=")+1))),a=k+" "+S}var w=new Date(e.create_at),x=w.toDateString()+" - "+w.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})+" | "+a;return x}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.audits.length;t++){var a=this.state.audits[t],s=this.formatAuditInfo(a),n=React.createElement("a",{href:"#",className:"theme",onClick:this.handleMoreInfo.bind(this,t)},"More info");this.state.moreInfo[t]&&(a.session_id||(a.session_id="N/A",a.action.search("/users/login")>=0&&("attempt"===a.extra_info?a.session_id+=" (Login attempt)":a.session_id+=" (Login failure)")),n=React.createElement("div",null,React.createElement("div",null,"IP: "+a.ip_address),React.createElement("div",null,"Session ID: "+a.session_id)));var r=null;t<this.state.audits.length-1&&(r=React.createElement("div",{className:"divider-light"})),e[t]=React.createElement("div",{key:"accessHistoryEntryKey"+t,className:"access-history__table"},React.createElement("div",{className:"access__report"},React.createElement("div",{className:"report__time"},s),React.createElement("div",{className:"report__info"},n),r))}var i;return i=this.state.audits.loading?React.createElement(d,null):React.createElement("form",{role:"form"},e),React.createElement(l,{show:this.props.show,onHide:this.onHide,bsSize:"large"},React.createElement(l.Header,{closeButton:!0},React.createElement(l.Title,null,"Access History")),React.createElement(l.Body,{ref:"modalBody"},i))}}]),t}(React.Component);a.default=m,m.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/utils.jsx":293,"./loading_screen.jsx":53,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],3:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../utils/client.jsx"),c=e("../utils/async_client.jsx"),u=ReactBootstrap.Modal,d=e("./loading_screen.jsx"),h=e("../utils/utils.jsx"),m=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitRevoke=this.submitRevoke.bind(this),this.onListenerChange=this.onListenerChange.bind(this),this.handleMoreInfo=this.handleMoreInfo.bind(this),this.onHide=this.onHide.bind(this),this.onShow=this.onShow.bind(this);var a=this.getStateFromStores();a.moreInfo=[],this.state=a}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){return{sessions:l.getSessions(),serverError:null,clientError:null}}},{key:"submitRevoke",value:function(e,t){t.preventDefault();var a=$(t.target).closest(".modal-content");a.addClass("animation--highlight"),setTimeout(function(){a.removeClass("animation--highlight")},1500),o.revokeSession(e,function(){c.getSessions()},function(e){var t=this.getStateFromStores();t.serverError=e,this.setState(t)}.bind(this))}},{key:"onShow",value:function(){c.getSessions(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-300),$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar()}},{key:"onHide",value:function(){this.setState({moreInfo:[]}),this.props.onModalDismissed()}},{key:"componentDidMount",value:function(){l.addSessionsChangeListener(this.onListenerChange)}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillUnmount",value:function(){l.removeSessionsChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();h.areStatesEqual(e.sessions,this.state.sessions)||this.setState(e)}},{key:"handleMoreInfo",value:function(e){var t=this.state.moreInfo;t[e]=!0,this.setState({moreInfo:t})}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.sessions.length;t++){var a=this.state.sessions[t],s=new Date(a.last_activity_at),n=new Date(a.create_at),r=a.props.platform,i="";"Windows"===a.props.platform?i="fa fa-windows":"Macintosh"===a.props.platform||"iPhone"===a.props.platform?i="fa fa-apple":"Linux"===a.props.platform&&(a.props.os.indexOf("Android")>=0?(r="Android",i="fa fa-android"):i="fa fa-linux");var l=void 0;l=this.state.moreInfo[t]?React.createElement("div",null,React.createElement("div",null,"First time active: "+n.toDateString()+", "+s.toLocaleTimeString()),React.createElement("div",null,"OS: "+a.props.os),React.createElement("div",null,"Browser: "+a.props.browser),React.createElement("div",null,"Session ID: "+a.id)):React.createElement("a",{className:"theme",href:"#",onClick:this.handleMoreInfo.bind(this,t)},"More info"),e[t]=React.createElement("div",{key:"activityLogEntryKey"+t,className:"activity-log__table"},React.createElement("div",{className:"activity-log__report"},React.createElement("div",{className:"report__platform"},React.createElement("i",{className:i}),r),React.createElement("div",{className:"report__info"},React.createElement("div",null,"Last activity: "+s.toDateString()+", "+s.toLocaleTimeString()),l)),React.createElement("div",{className:"activity-log__action"},React.createElement("button",{onClick:this.submitRevoke.bind(this,a.id),className:"btn btn-primary"},"Logout")))}var o=void 0;return o=this.state.sessions.loading?React.createElement(d,null):React.createElement("form",{role:"form"},e),React.createElement(u,{show:this.props.show,onHide:this.onHide,bsSize:"large"},React.createElement(u.Header,{closeButton:!0},React.createElement(u.Title,null,"Active Sessions")),React.createElement(u.Body,{ref:"modalBody"},React.createElement("p",{className:"session-help-text"},"Sessions are created when you log in with your email and password to a new browser on a device. Sessions let you use Mattermost for up to 30 days without having to log in again. If you want to log out sooner, use the 'Logout' button below to end a session."),o))}}]),t}(React.Component);a.default=m,m.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./loading_screen.jsx":53,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],4:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/reflect/delete-property").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./admin_sidebar.jsx"),c=e("../../stores/admin_store.jsx"),u=e("../../stores/team_store.jsx"),d=e("../../utils/async_client.jsx"),h=e("../loading_screen.jsx"),m=e("../../utils/utils.jsx"),p=e("./email_settings.jsx"),f=e("./log_settings.jsx"),g=e("./logs.jsx"),b=e("./image_settings.jsx"),v=e("./privacy_settings.jsx"),E=e("./rate_settings.jsx"),_=e("./gitlab_settings.jsx"),y=e("./sql_settings.jsx"),R=e("./team_settings.jsx"),C=e("./service_settings.jsx"),N=e("./team_users.jsx"),k=e("./team_analytics.jsx"),S=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.selectTab=this.selectTab.bind(this),this.removeSelectedTeam=this.removeSelectedTeam.bind(this),this.addSelectedTeam=this.addSelectedTeam.bind(this),this.onConfigListenerChange=this.onConfigListenerChange.bind(this),this.onAllTeamsListenerChange=this.onAllTeamsListenerChange.bind(this);var a=c.getSelectedTeams();if(null==a&&(a={},a[u.getCurrentId()]="true",c.saveSelectedTeams(a)),this.state={config:c.getConfig(),teams:c.getAllTeams(),selectedTeams:a,selected:e.tab||"service_settings",selectedTeam:e.teamId||null},!e.tab){var n=m.getUrlParameter("session_token_index");history.replaceState(null,null,"/admin_console/"+this.state.selected+"?session_token_index="+n)}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){c.addConfigChangeListener(this.onConfigListenerChange),d.getConfig(),c.addAllTeamsChangeListener(this.onAllTeamsListenerChange),d.getAllTeams()}},{key:"componentWillUnmount",value:function(){c.removeConfigChangeListener(this.onConfigListenerChange),c.removeAllTeamsChangeListener(this.onAllTeamsListenerChange)}},{key:"onConfigListenerChange",value:function(){this.setState({config:c.getConfig(),teams:c.getAllTeams(),selectedTeams:c.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"onAllTeamsListenerChange",value:function(){this.setState({config:c.getConfig(),teams:c.getAllTeams(),selectedTeams:c.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"selectTab",value:function(e,t){this.setState({config:c.getConfig(),teams:c.getAllTeams(),selectedTeams:c.getSelectedTeams(),selected:e,selectedTeam:t})}},{key:"removeSelectedTeam",value:function(e){var t=c.getSelectedTeams();l(t,e),c.saveSelectedTeams(t),this.setState({config:c.getConfig(),teams:c.getAllTeams(),selectedTeams:c.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"addSelectedTeam",value:function(e){var t=c.getSelectedTeams();t[e]="true",c.saveSelectedTeams(t),this.setState({config:c.getConfig(),teams:c.getAllTeams(),selectedTeams:c.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"render",value:function(){var e=React.createElement(h,null);return null!=this.state.config&&("email_settings"===this.state.selected?e=React.createElement(p,{config:this.state.config}):"log_settings"===this.state.selected?e=React.createElement(f,{config:this.state.config}):"logs"===this.state.selected?e=React.createElement(g,null):"image_settings"===this.state.selected?e=React.createElement(b,{config:this.state.config}):"privacy_settings"===this.state.selected?e=React.createElement(v,{config:this.state.config}):"rate_settings"===this.state.selected?e=React.createElement(E,{config:this.state.config}):"gitlab_settings"===this.state.selected?e=React.createElement(_,{config:this.state.config}):"sql_settings"===this.state.selected?e=React.createElement(y,{config:this.state.config}):"team_settings"===this.state.selected?e=React.createElement(R,{config:this.state.config}):"service_settings"===this.state.selected?e=React.createElement(C,{config:this.state.config}):"team_users"===this.state.selected?this.state.teams&&(e=React.createElement(N,{team:this.state.teams[this.state.selectedTeam]})):"team_analytics"===this.state.selected&&this.state.teams&&(e=React.createElement(k,{team:this.state.teams[this.state.selectedTeam]}))),React.createElement("div",null,React.createElement("div",{className:"sidebar--menu",id:"sidebar-menu"}),React.createElement(o,{selected:this.state.selected,selectedTeam:this.state.selectedTeam,selectTab:this.selectTab,teams:this.state.teams,selectedTeams:this.state.selectedTeams,removeSelectedTeam:this.removeSelectedTeam,addSelectedTeam:this.addSelectedTeam}),React.createElement("div",{className:"inner__wrap channel__wrap"},React.createElement("div",{className:"row header"}),React.createElement("div",{className:"row main"},React.createElement("div",{id:"app-content",className:"app__content admin"},e))))}}]),t}(React.Component);a.default=S,t.exports=a.default},{"../../stores/admin_store.jsx":274,"../../stores/team_store.jsx":283,"../../utils/async_client.jsx":285,"../../utils/utils.jsx":293,"../loading_screen.jsx":53,"./admin_sidebar.jsx":6,"./email_settings.jsx":8,"./gitlab_settings.jsx":9,"./image_settings.jsx":10,"./log_settings.jsx":12,"./logs.jsx":13,"./privacy_settings.jsx":14,"./rate_settings.jsx":15,"./service_settings.jsx":18,"./sql_settings.jsx":19,"./team_analytics.jsx":20,"./team_settings.jsx":21,"./team_users.jsx":22,"babel-runtime/core-js/reflect/delete-property":158,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],5:[function(e,t,a){"use strict";function s(){return{currentTeam:u.getCurrent()}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../utils/utils.jsx"),c=e("../../utils/client.jsx"),u=e("../../stores/team_store.jsx"),d=e("../../utils/constants.jsx"),h=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.blockToggle=!1,this.handleLogoutClick=this.handleLogoutClick.bind(this),this.state=s()}return r(t,e),i(t,[{key:"handleLogoutClick",value:function(e){e.preventDefault(),c.logout()}},{key:"componentDidMount",value:function(){var e=this;$(ReactDOM.findDOMNode(this.refs.dropdown)).on("hide.bs.dropdown",function(){e.blockToggle=!0,setTimeout(function(){e.blockToggle=!1},100)})}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this.refs.dropdown)).off("hide.bs.dropdown")}},{key:"render",value:function(){return React.createElement("ul",{className:"nav navbar-nav navbar-right"},React.createElement("li",{ref:"dropdown",className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},React.createElement("span",{className:"dropdown__icon",dangerouslySetInnerHTML:{__html:d.MENU_ICON}})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",null,React.createElement("a",{href:o.getWindowLocationOrigin()+"/"+this.state.currentTeam.name},"Switch to "+this.state.currentTeam.display_name)),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleLogoutClick},"Logout")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/help.html"},"Help")),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/report_problem.html"},"Report a Problem")))))}}]),t}(React.Component);a.default=h,t.exports=a.default},{"../../stores/team_store.jsx":283,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],6:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/reflect/delete-property").default,o=e("babel-runtime/core-js/object/keys").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("./admin_sidebar_header.jsx"),u=e("./select_team_modal.jsx"),d=e("../../utils/utils.jsx"),h=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.isSelected=this.isSelected.bind(this),this.handleClick=this.handleClick.bind(this),this.removeTeam=this.removeTeam.bind(this),this.showTeamSelect=this.showTeamSelect.bind(this),this.teamSelectedModal=this.teamSelectedModal.bind(this),this.teamSelectedModalDismissed=this.teamSelectedModalDismissed.bind(this),this.state={showSelectModal:!1}}return n(t,e),r(t,[{key:"handleClick",value:function(e,t,a){a.preventDefault(),this.props.selectTab(e,t);var s=d.getUrlParameter("session_token_index");history.pushState({name:e,teamId:t},null,"/admin_console/"+e+"/"+(t||"")+"?session_token_index="+s)}},{key:"isSelected",value:function(e,t){if(this.props.selected===e){if("team_users"!==e&&"team_analytics"!==e)return"active";if(null!=this.props.selectedTeam&&this.props.selectedTeam===t)return"active"}return""}},{key:"removeTeam",value:function(e,t){t.preventDefault(),l(this.props.selectedTeams,e),this.props.removeSelectedTeam(e),"team_users"===this.props.selected&&null!=this.props.selectedTeam&&this.props.selectedTeam===e&&this.props.selectTab("service_settings",null)}},{key:"componentDidMount",value:function(){$(window).width()>768&&$(".nav-pills__container").perfectScrollbar()}},{key:"showTeamSelect",value:function(e){e.preventDefault(),this.setState({showSelectModal:!0})}},{key:"teamSelectedModal",value:function(e){this.props.selectedTeams[e]="true",this.setState({showSelectModal:!1}),this.props.addSelectedTeam(e),this.forceUpdate()}},{key:"teamSelectedModalDismissed",value:function(){this.setState({showSelectModal:!1})}},{key:"render",value:function(){var e="*",t="Loading";if(null!=this.props.teams){e=""+o(this.props.teams).length,t=[];for(var a in this.props.selectedTeams)if(this.props.selectedTeams.hasOwnProperty(a)){var s=this.props.teams[a];null!=s&&t.push(React.createElement("ul",{key:"team_"+s.id,className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick.bind(this,"team_users",s.id),className:"nav__sub-menu-item "+this.isSelected("team_users",s.id)},s.name,React.createElement("span",{className:"menu-icon--right menu__close",onClick:this.removeTeam.bind(this,s.id),style:{cursor:"pointer"},title:"Remove team from sidebar menu"},"x"))),React.createElement("li",null,React.createElement("ul",{className:"nav nav__inner-menu"},React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("team_users",s.id),onClick:this.handleClick.bind(this,"team_users",s.id)},"- Users")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("team_analytics",s.id),onClick:this.handleClick.bind(this,"team_analytics",s.id)},"- Statistics"))))))}}return React.createElement("div",{className:"sidebar--left sidebar--collapsable"},React.createElement("div",null,React.createElement(c,null),React.createElement("div",{className:"nav-pills__container"},React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,"SETTINGS")))),React.createElement("ul",{className:"nav nav__sub-menu padded"},React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("service_settings"),onClick:this.handleClick.bind(this,"service_settings",null)},"Service Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("team_settings"),onClick:this.handleClick.bind(this,"team_settings",null)},"Team Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("sql_settings"),onClick:this.handleClick.bind(this,"sql_settings",null)},"SQL Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("email_settings"),onClick:this.handleClick.bind(this,"email_settings",null)},"Email Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("image_settings"),onClick:this.handleClick.bind(this,"image_settings",null)},"File Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("log_settings"),onClick:this.handleClick.bind(this,"log_settings",null)},"Log Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("rate_settings"),onClick:this.handleClick.bind(this,"rate_settings",null)},"Rate Limit Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("privacy_settings"),onClick:this.handleClick.bind(this,"privacy_settings",null)},"Privacy Settings")),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("gitlab_settings"),onClick:this.handleClick.bind(this,"gitlab_settings",null)},"GitLab Settings"))),React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,"TEAMS ("+e+")"),React.createElement("span",{className:"menu-icon--right"},React.createElement("a",{href:"#",onClick:this.showTeamSelect},React.createElement("i",{className:"fa fa-plus",title:"Add team to sidebar menu"})))))),React.createElement("ul",{className:"nav nav__sub-menu padded"},React.createElement("li",null,t)),React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,"OTHER")))),React.createElement("ul",{className:"nav nav__sub-menu padded"},React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("logs"),onClick:this.handleClick.bind(this,"logs",null)},"Logs"))))))),React.createElement(u,{teams:this.props.teams,show:this.state.showSelectModal,onModalSubmit:this.teamSelectedModal,onModalDismissed:this.teamSelectedModalDismissed}))}}]),t}(React.Component);a.default=h,h.propTypes={teams:React.PropTypes.object,selectedTeams:React.PropTypes.object,removeSelectedTeam:React.PropTypes.func,addSelectedTeam:React.PropTypes.func,selected:React.PropTypes.string,selectedTeam:React.PropTypes.string,selectTab:React.PropTypes.func},t.exports=a.default},{"../../utils/utils.jsx":293,"./admin_sidebar_header.jsx":7,"./select_team_modal.jsx":17,"babel-runtime/core-js/object/keys":156,"babel-runtime/core-js/reflect/delete-property":158,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],7:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./admin_navbar_dropdown.jsx"),o=e("../../stores/user_store.jsx"),c=e("../../utils/utils.jsx"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.toggleDropdown=this.toggleDropdown.bind(this),this.state={}}return n(t,e),r(t,[{key:"toggleDropdown",value:function(e){return e.preventDefault(),this.refs.dropdown.blockToggle?void(this.refs.dropdown.blockToggle=!1):void $(".team__header").find(".dropdown-toggle").dropdown("toggle")}},{key:"render",value:function(){var e=o.getCurrentUser(),t=null;return e?(e.last_picture_update&&(t=React.createElement("img",{className:"user__picture",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at+"&"+c.getSessionIndex()})),React.createElement("div",{className:"team__header theme"},React.createElement("a",{href:"#",
onClick:this.toggleDropdown},t,React.createElement("div",{className:"header__info"},React.createElement("div",{className:"user__name"},"@"+e.username),React.createElement("div",{className:"team__name"},"System Console"))),React.createElement(l,{ref:"dropdown"}))):null}}]),t}(React.Component);a.default=u,t.exports=a.default},{"../../stores/user_store.jsx":284,"../../utils/utils.jsx":293,"./admin_navbar_dropdown.jsx":5,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],8:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=e("crypto"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleTestConnection=this.handleTestConnection.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.buildConfig=this.buildConfig.bind(this),this.handleGenerateInvite=this.handleGenerateInvite.bind(this),this.handleGenerateReset=this.handleGenerateReset.bind(this),this.state={sendEmailNotifications:this.props.config.EmailSettings.SendEmailNotifications,saveNeeded:!1,serverError:null,emailSuccess:null,emailFail:null}}return n(t,e),r(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"sendEmailNotifications_true"===e&&(t.sendEmailNotifications=!0),"sendEmailNotifications_false"===e&&(t.sendEmailNotifications=!1),this.setState(t)}},{key:"buildConfig",value:function(){var e=this.props.config;return e.EmailSettings.EnableSignUpWithEmail=ReactDOM.findDOMNode(this.refs.allowSignUpWithEmail).checked,e.EmailSettings.SendEmailNotifications=ReactDOM.findDOMNode(this.refs.sendEmailNotifications).checked,e.EmailSettings.RequireEmailVerification=ReactDOM.findDOMNode(this.refs.requireEmailVerification).checked,e.EmailSettings.SendEmailNotifications=ReactDOM.findDOMNode(this.refs.sendEmailNotifications).checked,e.EmailSettings.FeedbackName=ReactDOM.findDOMNode(this.refs.feedbackName).value.trim(),e.EmailSettings.FeedbackEmail=ReactDOM.findDOMNode(this.refs.feedbackEmail).value.trim(),e.EmailSettings.SMTPServer=ReactDOM.findDOMNode(this.refs.SMTPServer).value.trim(),e.EmailSettings.SMTPPort=ReactDOM.findDOMNode(this.refs.SMTPPort).value.trim(),e.EmailSettings.SMTPUsername=ReactDOM.findDOMNode(this.refs.SMTPUsername).value.trim(),e.EmailSettings.SMTPPassword=ReactDOM.findDOMNode(this.refs.SMTPPassword).value.trim(),e.EmailSettings.ConnectionSecurity=ReactDOM.findDOMNode(this.refs.ConnectionSecurity).value.trim(),e.EmailSettings.InviteSalt=ReactDOM.findDOMNode(this.refs.InviteSalt).value.trim(),""===e.EmailSettings.InviteSalt&&(e.EmailSettings.InviteSalt=c.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.InviteSalt).value=e.EmailSettings.InviteSalt),e.EmailSettings.PasswordResetSalt=ReactDOM.findDOMNode(this.refs.PasswordResetSalt).value.trim(),""===e.EmailSettings.PasswordResetSalt&&(e.EmailSettings.PasswordResetSalt=c.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.PasswordResetSalt).value=e.EmailSettings.PasswordResetSalt),e}},{key:"handleGenerateInvite",value:function(e){e.preventDefault(),ReactDOM.findDOMNode(this.refs.InviteSalt).value=c.randomBytes(256).toString("base64").substring(0,32);var t={saveNeeded:!0,serverError:this.state.serverError};this.setState(t)}},{key:"handleGenerateReset",value:function(e){e.preventDefault(),ReactDOM.findDOMNode(this.refs.PasswordResetSalt).value=c.randomBytes(256).toString("base64").substring(0,32);var t={saveNeeded:!0,serverError:this.state.serverError};this.setState(t)}},{key:"handleTestConnection",value:function(e){var t=this;e.preventDefault(),$("#connection-button").button("loading");var a=this.buildConfig();l.testEmail(a,function(){t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:null,saveNeeded:!0,emailSuccess:!0,emailFail:null}),$("#connection-button").button("reset")},function(e){t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:null,saveNeeded:!0,emailSuccess:null,emailFail:e.message+" - "+e.detailed_error}),$("#connection-button").button("reset")})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.buildConfig();l.saveConfig(a,function(){o.getConfig(),t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:null,saveNeeded:!1,emailSuccess:null,emailFail:null}),$("#save-button").button("reset")},function(e){t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:e.message,saveNeeded:!0,emailSuccess:null,emailFail:null}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";this.state.saveNeeded&&(t="btn btn-primary");var a="";this.state.emailSuccess&&(a=React.createElement("div",{className:"alert alert-success"},React.createElement("i",{className:"fa fa-check"}),"No errors were reported while sending an email.  Please check your inbox to make sure."));var s="";return this.state.emailFail&&(a=React.createElement("div",{className:"alert alert-warning"},React.createElement("i",{className:"fa fa-warning"}),"Connection unsuccessful: "+this.state.emailFail)),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Email Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"allowSignUpWithEmail"},"Allow Sign Up With Email: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"allowSignUpWithEmail",value:"true",ref:"allowSignUpWithEmail",defaultChecked:this.props.config.EmailSettings.EnableSignUpWithEmail,onChange:this.handleChange.bind(this,"allowSignUpWithEmail_true")}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"allowSignUpWithEmail",value:"false",defaultChecked:!this.props.config.EmailSettings.EnableSignUpWithEmail,onChange:this.handleChange.bind(this,"allowSignUpWithEmail_false")}),"false"),React.createElement("p",{className:"help-text"},"When true, Mattermost allows team creation and account signup using email and password.  This value should be false only when you want to limit signup to a single-sign-on service like OAuth or LDAP."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"sendEmailNotifications"},"Send Email Notifications: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"sendEmailNotifications",value:"true",ref:"sendEmailNotifications",defaultChecked:this.props.config.EmailSettings.SendEmailNotifications,onChange:this.handleChange.bind(this,"sendEmailNotifications_true")}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"sendEmailNotifications",value:"false",defaultChecked:!this.props.config.EmailSettings.SendEmailNotifications,onChange:this.handleChange.bind(this,"sendEmailNotifications_false")}),"false"),React.createElement("p",{className:"help-text"},"Typically set to true in production. When true, Mattermost attempts to send email notifications. Developers may set this field to false to skip email setup for faster development."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"requireEmailVerification"},"Require Email Verification: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"requireEmailVerification",value:"true",ref:"requireEmailVerification",defaultChecked:this.props.config.EmailSettings.RequireEmailVerification,onChange:this.handleChange.bind(this,"requireEmailVerification_true"),disabled:!this.state.sendEmailNotifications}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"requireEmailVerification",value:"false",defaultChecked:!this.props.config.EmailSettings.RequireEmailVerification,onChange:this.handleChange.bind(this,"requireEmailVerification_false"),disabled:!this.state.sendEmailNotifications}),"false"),React.createElement("p",{className:"help-text"},"Typically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false so skip sending verification emails for faster development."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"feedbackName"},"Notification Display Name:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"feedbackName",ref:"feedbackName",placeholder:'Ex: "Mattermost Notification", "System", "No-Reply"',defaultValue:this.props.config.EmailSettings.FeedbackName,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},"Display name on email account used when sending notification emails from Mattermost."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"feedbackEmail"},"Notification Email Address:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"email",className:"form-control",id:"feedbackEmail",ref:"feedbackEmail",placeholder:'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"',defaultValue:this.props.config.EmailSettings.FeedbackEmail,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},"Email address displayed on email account used when sending notification emails from Mattermost."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPUsername"},"SMTP Username:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPUsername",ref:"SMTPUsername",placeholder:'Ex: "admin@yourcompany.com", "AKIADTOVBGERKLCBV"',defaultValue:this.props.config.EmailSettings.SMTPUsername,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"}," Obtain this credential from administrator setting up your email server."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPPassword"},"SMTP Password:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPPassword",ref:"SMTPPassword",placeholder:'Ex: "yourpassword", "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',defaultValue:this.props.config.EmailSettings.SMTPPassword,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"}," Obtain this credential from administrator setting up your email server."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPServer"},"SMTP Server:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPServer",ref:"SMTPServer",placeholder:'Ex: "smtp.yourcompany.com", "email-smtp.us-east-1.amazonaws.com"',defaultValue:this.props.config.EmailSettings.SMTPServer,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},"Location of SMTP email server."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPPort"},"SMTP Port:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPPort",ref:"SMTPPort",placeholder:'Ex: "25", "465"',defaultValue:this.props.config.EmailSettings.SMTPPort,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},"Port of SMTP email server."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ConnectionSecurity"},"Connection Security:"),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"ConnectionSecurity",ref:"ConnectionSecurity",defaultValue:this.props.config.EmailSettings.ConnectionSecurity,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications},React.createElement("option",{value:""},"None"),React.createElement("option",{value:"TLS"},"TLS (Recommended)"),React.createElement("option",{value:"STARTTLS"},"STARTTLS")),React.createElement("div",{className:"help-text"},React.createElement("table",{className:"table table-bordered",cellPadding:"5"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"help-text"},"None"),React.createElement("td",{className:"help-text"},"Mattermost will send email over an unsecure connection.")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"TLS"),React.createElement("td",{className:"help-text"},"Encrypts the communication between Mattermost and your email server.")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"STARTTLS"),React.createElement("td",{className:"help-text"},"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS."))))),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleTestConnection,disabled:!this.state.sendEmailNotifications,id:"connection-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Testing..."},"Test Connection"),a,s))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"InviteSalt"},"Invite Salt:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"InviteSalt",ref:"InviteSalt",placeholder:'Ex "bjlSR4QqkXFBr7TP4oDzlfZmcNuH9Yo"',defaultValue:this.props.config.EmailSettings.InviteSalt,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},'32-character salt added to signing of email invites. Randomly generated on install. Click "Re-Generate" to create new salt.'),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerateInvite,disabled:!this.state.sendEmailNotifications},"Re-Generate")))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PasswordResetSalt"},"Password Reset Salt:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PasswordResetSalt",ref:"PasswordResetSalt",placeholder:'Ex "bjlSR4QqkXFBr7TP4oDzlfZmcNuH9Yo"',defaultValue:this.props.config.EmailSettings.PasswordResetSalt,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},'32-character salt added to signing of password reset emails. Randomly generated on install. Click "Re-Generate" to create new salt.'),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerateReset,disabled:!this.state.sendEmailNotifications},"Re-Generate")))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=u,u.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,crypto:"crypto"}],9:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={Enable:this.props.config.GitLabSettings.Enable,saveNeeded:!1,serverError:null}}return n(t,e),r(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"EnableTrue"===e&&(t.Enable=!0),"EnableFalse"===e&&(t.Enable=!1),this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.GitLabSettings.Enable=ReactDOM.findDOMNode(this.refs.Enable).checked,a.GitLabSettings.Secret=ReactDOM.findDOMNode(this.refs.Secret).value.trim(),a.GitLabSettings.Id=ReactDOM.findDOMNode(this.refs.Id).value.trim(),a.GitLabSettings.AuthEndpoint=ReactDOM.findDOMNode(this.refs.AuthEndpoint).value.trim(),a.GitLabSettings.TokenEndpoint=ReactDOM.findDOMNode(this.refs.TokenEndpoint).value.trim(),a.GitLabSettings.UserApiEndpoint=ReactDOM.findDOMNode(this.refs.UserApiEndpoint).value.trim(),l.saveConfig(a,function(){o.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"GitLab Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Enable"},"Enable Sign Up With GitLab: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Enable",value:"true",ref:"Enable",defaultChecked:this.props.config.GitLabSettings.Enable,onChange:this.handleChange.bind(this,"EnableTrue")}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Enable",value:"false",defaultChecked:!this.props.config.GitLabSettings.Enable,onChange:this.handleChange.bind(this,"EnableFalse")}),"false"),React.createElement("p",{className:"help-text"},"When true, Mattermost allows team creation and account signup using GitLab OAuth."," ",React.createElement("br",null)),React.createElement("div",{className:"help-text"},React.createElement("ol",null,React.createElement("li",null,"Log in to your GitLab account and go to Applications -> Profile Settings."),React.createElement("li",null,'Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete". '),React.createElement("li",null,'Then use "Secret" and "Id" fields from GitLab to complete the options below.'),React.createElement("li",null,"Complete the Endpoint URLs below. "))))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Id"},"Id:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"Id",ref:"Id",placeholder:'Ex "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',defaultValue:this.props.config.GitLabSettings.Id,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},"Obtain this value via the instructions above for logging into GitLab"))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Secret"},"Secret:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"Secret",ref:"Secret",placeholder:'Ex "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',defaultValue:this.props.config.GitLabSettings.Secret,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},"Obtain this value via the instructions above for logging into GitLab."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AuthEndpoint"},"Auth Endpoint:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AuthEndpoint",ref:"AuthEndpoint",placeholder:'Ex ""',defaultValue:this.props.config.GitLabSettings.AuthEndpoint,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},"Enter https://<your-gitlab-url>/oauth/authorize (example https://example.com:3000/oauth/authorize).   Make sure you use HTTP or HTTPS in your URL depending on your server configuration."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"TokenEndpoint"},"Token Endpoint:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"TokenEndpoint",ref:"TokenEndpoint",placeholder:'Ex ""',defaultValue:this.props.config.GitLabSettings.TokenEndpoint,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},"Enter https://<your-gitlab-url>/oauth/token.   Make sure you use HTTP or HTTPS in your URL depending on your server configuration."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"UserApiEndpoint"},"User API Endpoint:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"UserApiEndpoint",ref:"UserApiEndpoint",placeholder:'Ex ""',defaultValue:this.props.config.GitLabSettings.UserApiEndpoint,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},"Enter https://<your-gitlab-url>/api/v3/user.   Make sure you use HTTP or HTTPS in your URL depending on your server configuration."))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=c,c.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],10:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=e("crypto"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleGenerate=this.handleGenerate.bind(this),this.state={saveNeeded:!1,serverError:null,DriverName:this.props.config.FileSettings.DriverName}}return n(t,e),r(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"DriverName"===e&&(t.DriverName=ReactDOM.findDOMNode(this.refs.DriverName).value),this.setState(t)}},{key:"handleGenerate",value:function(e){e.preventDefault(),ReactDOM.findDOMNode(this.refs.PublicLinkSalt).value=c.randomBytes(256).toString("base64").substring(0,32);var t={saveNeeded:!0,serverError:this.state.serverError};this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.FileSettings.DriverName=ReactDOM.findDOMNode(this.refs.DriverName).value,a.FileSettings.Directory=ReactDOM.findDOMNode(this.refs.Directory).value,a.FileSettings.AmazonS3AccessKeyId=ReactDOM.findDOMNode(this.refs.AmazonS3AccessKeyId).value,a.FileSettings.AmazonS3SecretAccessKey=ReactDOM.findDOMNode(this.refs.AmazonS3SecretAccessKey).value,a.FileSettings.AmazonS3Bucket=ReactDOM.findDOMNode(this.refs.AmazonS3Bucket).value,a.FileSettings.AmazonS3Region=ReactDOM.findDOMNode(this.refs.AmazonS3Region).value,a.FileSettings.EnablePublicLink=ReactDOM.findDOMNode(this.refs.EnablePublicLink).checked,a.FileSettings.PublicLinkSalt=ReactDOM.findDOMNode(this.refs.PublicLinkSalt).value.trim(),""===a.FileSettings.PublicLinkSalt&&(a.FileSettings.PublicLinkSalt=c.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.PublicLinkSalt).value=a.FileSettings.PublicLinkSalt);var s=120;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailWidth).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailWidth).value,10)),a.FileSettings.ThumbnailWidth=s,ReactDOM.findDOMNode(this.refs.ThumbnailWidth).value=s;var n=100;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailHeight).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailHeight).value,10)),a.FileSettings.ThumbnailHeight=n,ReactDOM.findDOMNode(this.refs.ThumbnailHeight).value=n;var r=1024;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.PreviewWidth).value,10))||(r=parseInt(ReactDOM.findDOMNode(this.refs.PreviewWidth).value,10)),a.FileSettings.PreviewWidth=r,ReactDOM.findDOMNode(this.refs.PreviewWidth).value=r;var i=0;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.PreviewHeight).value,10))||(i=parseInt(ReactDOM.findDOMNode(this.refs.PreviewHeight).value,10)),a.FileSettings.PreviewHeight=i,ReactDOM.findDOMNode(this.refs.PreviewHeight).value=i;var u=128;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ProfileWidth).value,10))||(u=parseInt(ReactDOM.findDOMNode(this.refs.ProfileWidth).value,10)),a.FileSettings.ProfileWidth=u,ReactDOM.findDOMNode(this.refs.ProfileWidth).value=u;var d=128;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ProfileHeight).value,10))||(d=parseInt(ReactDOM.findDOMNode(this.refs.ProfileHeight).value,10)),a.FileSettings.ProfileHeight=d,ReactDOM.findDOMNode(this.refs.ProfileHeight).value=d,l.saveConfig(a,function(){o.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";this.state.saveNeeded&&(t="btn btn-primary");var a=!1,s=!1;return"local"===this.state.DriverName&&(a=!0),"amazons3"===this.state.DriverName&&(s=!0),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"File Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DriverName"},"Store Files In:"),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"DriverName",ref:"DriverName",defaultValue:this.props.config.FileSettings.DriverName,onChange:this.handleChange.bind(this,"DriverName")},React.createElement("option",{value:""},"Disable File Storage"),React.createElement("option",{value:"local"},"Local File System"),React.createElement("option",{value:"amazons3"},"Amazon S3")))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Directory"},"Local Directory Location:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"Directory",ref:"Directory",placeholder:'Ex "./data/"',defaultValue:this.props.config.FileSettings.Directory,onChange:this.handleChange,disabled:!a}),React.createElement("p",{className:"help-text"},"Directory to which image files are written. If blank, will be set to ./data/."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3AccessKeyId"},"Amazon S3 Access Key Id:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3AccessKeyId",ref:"AmazonS3AccessKeyId",placeholder:'Ex "AKIADTOVBGERKLCBV"',defaultValue:this.props.config.FileSettings.AmazonS3AccessKeyId,onChange:this.handleChange,disabled:!s}),React.createElement("p",{className:"help-text"},"Obtain this credential from your Amazon EC2 administrator."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3SecretAccessKey"},"Amazon S3 Secret Access Key:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3SecretAccessKey",ref:"AmazonS3SecretAccessKey",placeholder:'Ex "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',defaultValue:this.props.config.FileSettings.AmazonS3SecretAccessKey,onChange:this.handleChange,disabled:!s}),React.createElement("p",{className:"help-text"},"Obtain this credential from your Amazon EC2 administrator."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3Bucket"},"Amazon S3 Bucket:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3Bucket",ref:"AmazonS3Bucket",placeholder:'Ex "mattermost-media"',defaultValue:this.props.config.FileSettings.AmazonS3Bucket,onChange:this.handleChange,disabled:!s}),React.createElement("p",{className:"help-text"},"Name you selected for your S3 bucket in AWS."))),React.createElement("div",{className:"form-group"
},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3Region"},"Amazon S3 Region:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3Region",ref:"AmazonS3Region",placeholder:'Ex "us-east-1"',defaultValue:this.props.config.FileSettings.AmazonS3Region,onChange:this.handleChange,disabled:!s}),React.createElement("p",{className:"help-text"},"AWS region you selected for creating your S3 bucket."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ThumbnailWidth"},"Thumbnail Width:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ThumbnailWidth",ref:"ThumbnailWidth",placeholder:'Ex "120"',defaultValue:this.props.config.FileSettings.ThumbnailWidth,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Width of thumbnails generated from uploaded images. Updating this value changes how thumbnail images render in future, but does not change images created in the past."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ThumbnailHeight"},"Thumbnail Height:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ThumbnailHeight",ref:"ThumbnailHeight",placeholder:'Ex "100"',defaultValue:this.props.config.FileSettings.ThumbnailHeight,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Height of thumbnails generated from uploaded images. Updating this value changes how thumbnail images render in future, but does not change images created in the past."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PreviewWidth"},"Preview Width:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PreviewWidth",ref:"PreviewWidth",placeholder:'Ex "1024"',defaultValue:this.props.config.FileSettings.PreviewWidth,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Maximum width of preview image. Updating this value changes how preview images render in future, but does not change images created in the past."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PreviewHeight"},"Preview Height:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PreviewHeight",ref:"PreviewHeight",placeholder:'Ex "0"',defaultValue:this.props.config.FileSettings.PreviewHeight,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},'Maximum height of preview image ("0": Sets to auto-size). Updating this value changes how preview images render in future, but does not change images created in the past.'))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ProfileWidth"},"Profile Width:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ProfileWidth",ref:"ProfileWidth",placeholder:'Ex "1024"',defaultValue:this.props.config.FileSettings.ProfileWidth,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Width of profile picture."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ProfileHeight"},"Profile Height:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ProfileHeight",ref:"ProfileHeight",placeholder:'Ex "0"',defaultValue:this.props.config.FileSettings.ProfileHeight,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Height of profile picture."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnablePublicLink"},"Share Public File Link: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePublicLink",value:"true",ref:"EnablePublicLink",defaultChecked:this.props.config.FileSettings.EnablePublicLink,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePublicLink",value:"false",defaultChecked:!this.props.config.FileSettings.EnablePublicLink,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"Allow users to share public links to files and images."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PublicLinkSalt"},"Public Link Salt:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PublicLinkSalt",ref:"PublicLinkSalt",placeholder:'Ex "gxHVDcKUyP2y1eiyW8S8na1UYQAfq6J6"',defaultValue:this.props.config.FileSettings.PublicLinkSalt,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},'32-character salt added to signing of public image links. Randomly generated on install. Click "Re-Generate" to create new salt.'),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerate},"Re-Generate")))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=u,u.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,crypto:"crypto"}],11:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.initChart=this.initChart.bind(this),this.chart=null}return n(t,e),r(t,[{key:"componentDidMount",value:function(){this.initChart(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.chart&&(this.chart.destroy(),this.initChart(e))}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.destroy()}},{key:"initChart",value:function(e){var t=ReactDOM.findDOMNode(this),a=t.getContext("2d");this.chart=new Chart(a).Line(e.data,e.options||{})}},{key:"render",value:function(){return React.createElement("canvas",{width:this.props.width,height:this.props.height})}}]),t}(React.Component);a.default=l,l.propTypes={width:React.PropTypes.string,height:React.PropTypes.string,data:React.PropTypes.object,options:React.PropTypes.object},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],12:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={consoleEnable:this.props.config.LogSettings.EnableConsole,fileEnable:this.props.config.LogSettings.EnableFile,saveNeeded:!1,serverError:null}}return n(t,e),r(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"console_true"===e&&(t.consoleEnable=!0),"console_false"===e&&(t.consoleEnable=!1),"file_true"===e&&(t.fileEnable=!0),"file_false"===e&&(t.fileEnable=!1),this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.LogSettings.EnableConsole=ReactDOM.findDOMNode(this.refs.consoleEnable).checked,a.LogSettings.ConsoleLevel=ReactDOM.findDOMNode(this.refs.consoleLevel).value,a.LogSettings.EnableFile=ReactDOM.findDOMNode(this.refs.fileEnable).checked,a.LogSettings.FileLevel=ReactDOM.findDOMNode(this.refs.fileLevel).value,a.LogSettings.FileLocation=ReactDOM.findDOMNode(this.refs.fileLocation).value.trim(),a.LogSettings.FileFormat=ReactDOM.findDOMNode(this.refs.fileFormat).value.trim(),l.saveConfig(a,function(){o.getConfig(),t.setState({consoleEnable:a.LogSettings.EnableConsole,fileEnable:a.LogSettings.EnableFile,serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({consoleEnable:a.LogSettings.EnableConsole,fileEnable:a.LogSettings.EnableFile,serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Log Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"consoleEnable"},"Log To The Console: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"consoleEnable",value:"true",ref:"consoleEnable",defaultChecked:this.props.config.LogSettings.EnableConsole,onChange:this.handleChange.bind(this,"console_true")}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"consoleEnable",value:"false",defaultChecked:!this.props.config.LogSettings.EnableConsole,onChange:this.handleChange.bind(this,"console_false")}),"false"),React.createElement("p",{className:"help-text"},"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout)."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"consoleLevel"},"Console Log Level:"),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"consoleLevel",ref:"consoleLevel",defaultValue:this.props.config.LogSettings.consoleLevel,onChange:this.handleChange,disabled:!this.state.consoleEnable},React.createElement("option",{value:"DEBUG"},"DEBUG"),React.createElement("option",{value:"INFO"},"INFO"),React.createElement("option",{value:"ERROR"},"ERROR")),React.createElement("p",{className:"help-text"},"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4"},"Log To File: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"fileEnable",ref:"fileEnable",value:"true",defaultChecked:this.props.config.LogSettings.EnableFile,onChange:this.handleChange.bind(this,"file_true")}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"fileEnable",value:"false",defaultChecked:!this.props.config.LogSettings.EnableFile,onChange:this.handleChange.bind(this,"file_false")}),"false"),React.createElement("p",{className:"help-text"},"Typically set to true in production.  When true, log files are written to the log file specified in file location field below."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"fileLevel"},"File Log Level:"),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"fileLevel",ref:"fileLevel",defaultValue:this.props.config.LogSettings.FileLevel,onChange:this.handleChange,disabled:!this.state.fileEnable},React.createElement("option",{value:"DEBUG"},"DEBUG"),React.createElement("option",{value:"INFO"},"INFO"),React.createElement("option",{value:"ERROR"},"ERROR")),React.createElement("p",{className:"help-text"},"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"fileLocation"},"File Location:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"fileLocation",ref:"fileLocation",placeholder:"Enter your file location",defaultValue:this.props.config.LogSettings.FileLocation,onChange:this.handleChange,disabled:!this.state.fileEnable}),React.createElement("p",{className:"help-text"},"File to which log files are written. If blank, will be set to ./logs/mattermost, which writes logs to mattermost.log. Log rotation is enabled and every 10,000 lines of log information is written to new files stored in the same directory, for example mattermost.2015-09-23.001, mattermost.2015-09-23.002, and so forth."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"fileFormat"},"File Format:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"fileFormat",ref:"fileFormat",placeholder:"Enter your file format",defaultValue:this.props.config.LogSettings.FileFormat,onChange:this.handleChange,disabled:!this.state.fileEnable}),React.createElement("div",{className:"help-text"},'Format of log message output. If blank will be set to "[%D %T] [%L] %M", where:',React.createElement("div",{className:"help-text"},React.createElement("table",{className:"table table-bordered",cellPadding:"5"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%T"),React.createElement("td",{className:"help-text"},"Time (15:04:05 MST)")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%D"),React.createElement("td",{className:"help-text"},"Date (2006/01/02)")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%d"),React.createElement("td",{className:"help-text"},"Date (01/02/06)")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%L"),React.createElement("td",{className:"help-text"},"Level (DEBG, INFO, EROR)")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%S"),React.createElement("td",{className:"help-text"},"Source")),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%M"),React.createElement("td",{className:"help-text"},"Message")))))))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=c,c.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],13:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../stores/admin_store.jsx"),o=e("../loading_screen.jsx"),c=e("../../utils/async_client.jsx"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onLogListenerChange=this.onLogListenerChange.bind(this),this.reload=this.reload.bind(this),this.state={logs:l.getLogs()}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){l.addLogChangeListener(this.onLogListenerChange),c.getLogs()}},{key:"componentWillUnmount",value:function(){l.removeLogChangeListener(this.onLogListenerChange)}},{key:"onLogListenerChange",value:function(){this.setState({logs:l.getLogs()})}},{key:"reload",value:function(){l.saveLogs(null),this.setState({logs:null}),c.getLogs()}},{key:"render",value:function(){var e=null;if(null===this.state.logs)e=React.createElement(o,null);else{e=[];for(var t=0;t<this.state.logs.length;t++){var a={whiteSpace:"nowrap",fontFamily:"monospace"};this.state.logs[t].indexOf("[EROR]")>0&&(a.color="red"),e.push(React.createElement("br",{key:"br_"+t})),e.push(React.createElement("span",{key:"log_"+t,style:a},this.state.logs[t]))}}return React.createElement("div",{className:"panel"},React.createElement("h3",null,"Server Logs"),React.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.reload},"Reload"),React.createElement("div",{className:"log__panel"},e))}}]),t}(React.Component);a.default=u,t.exports=a.default},{"../../stores/admin_store.jsx":274,"../../utils/async_client.jsx":285,"../loading_screen.jsx":53,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],14:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={saveNeeded:!1,serverError:null}}return n(t,e),r(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.PrivacySettings.ShowEmailAddress=ReactDOM.findDOMNode(this.refs.ShowEmailAddress).checked,a.PrivacySettings.ShowFullName=ReactDOM.findDOMNode(this.refs.ShowFullName).checked,l.saveConfig(a,function(){o.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Privacy Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ShowEmailAddress"},"Show Email Address: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowEmailAddress",value:"true",ref:"ShowEmailAddress",defaultChecked:this.props.config.PrivacySettings.ShowEmailAddress,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowEmailAddress",value:"false",defaultChecked:!this.props.config.PrivacySettings.ShowEmailAddress,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When false, hides email address of users from other users in the user interface, including team owners and team administrators. Used when system is set up for managing teams where some users choose to keep their contact information private."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ShowFullName"},"Show Full Name: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowFullName",value:"true",ref:"ShowFullName",defaultChecked:this.props.config.PrivacySettings.ShowFullName,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowFullName",value:"false",defaultChecked:!this.props.config.PrivacySettings.ShowFullName,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When false, hides full name of users from other users including team owner and team administrators."))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=c,c.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],15:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={EnableRateLimiter:this.props.config.RateLimitSettings.EnableRateLimiter,VaryByRemoteAddr:this.props.config.RateLimitSettings.VaryByRemoteAddr,saveNeeded:!1,serverError:null}}return n(t,e),r(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"EnableRateLimiterTrue"===e&&(t.EnableRateLimiter=!0),"EnableRateLimiterFalse"===e&&(t.EnableRateLimiter=!1),"VaryByRemoteAddrTrue"===e&&(t.VaryByRemoteAddr=!0),"VaryByRemoteAddrFalse"===e&&(t.VaryByRemoteAddr=!1),this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.RateLimitSettings.EnableRateLimiter=ReactDOM.findDOMNode(this.refs.EnableRateLimiter).checked,a.RateLimitSettings.VaryByRemoteAddr=ReactDOM.findDOMNode(this.refs.VaryByRemoteAddr).checked,a.RateLimitSettings.VaryByHeader=ReactDOM.findDOMNode(this.refs.VaryByHeader).value.trim();var s=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.PerSec).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.PerSec).value,10)),a.RateLimitSettings.PerSec=s,ReactDOM.findDOMNode(this.refs.PerSec).value=s;var n=1e4;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MemoryStoreSize).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.MemoryStoreSize).value,10)),a.RateLimitSettings.MemoryStoreSize=n,ReactDOM.findDOMNode(this.refs.MemoryStoreSize).value=n,l.saveConfig(a,function(){o.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("div",{className:"banner"},React.createElement("div",{className:"banner__content"},React.createElement("h4",{className:"banner__heading"},"Note:"),React.createElement("p",null,"Changing properties in this section will require a server restart before taking effect."))),React.createElement("h3",null,"Rate Limit Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableRateLimiter"},"Enable Rate Limiter: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableRateLimiter",value:"true",ref:"EnableRateLimiter",defaultChecked:this.props.config.RateLimitSettings.EnableRateLimiter,onChange:this.handleChange.bind(this,"EnableRateLimiterTrue")}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableRateLimiter",value:"false",defaultChecked:!this.props.config.RateLimitSettings.EnableRateLimiter,onChange:this.handleChange.bind(this,"EnableRateLimiterFalse")}),"false"),React.createElement("p",{className:"help-text"},"When true, APIs are throttled at rates specified below."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PerSec"},"Number Of Queries Per Second:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PerSec",ref:"PerSec",placeholder:'Ex "10"',defaultValue:this.props.config.RateLimitSettings.PerSec,onChange:this.handleChange,disabled:!this.state.EnableRateLimiter}),React.createElement("p",{className:"help-text"},"Throttles API at this number of requests per second."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MemoryStoreSize"},"Memory Store Size:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MemoryStoreSize",ref:"MemoryStoreSize",placeholder:'Ex "10000"',defaultValue:this.props.config.RateLimitSettings.MemoryStoreSize,onChange:this.handleChange,disabled:!this.state.EnableRateLimiter}),React.createElement("p",{className:"help-text"},'Maximum number of users sessions connected to the system as determined by "Vary By Remote Address" and "Vary By Header" settings below.'))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"VaryByRemoteAddr"},"Vary By Remote Address: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"VaryByRemoteAddr",value:"true",ref:"VaryByRemoteAddr",defaultChecked:this.props.config.RateLimitSettings.VaryByRemoteAddr,onChange:this.handleChange.bind(this,"VaryByRemoteAddrTrue"),disabled:!this.state.EnableRateLimiter}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"VaryByRemoteAddr",value:"false",defaultChecked:!this.props.config.RateLimitSettings.VaryByRemoteAddr,onChange:this.handleChange.bind(this,"VaryByRemoteAddrFalse"),disabled:!this.state.EnableRateLimiter}),"false"),React.createElement("p",{className:"help-text"},"When true, rate limit API access by IP address."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"VaryByHeader"},"Vary By HTTP Header:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"VaryByHeader",ref:"VaryByHeader",placeholder:'Ex "X-Real-IP", "X-Forwarded-For"',defaultValue:this.props.config.RateLimitSettings.VaryByHeader,onChange:this.handleChange,disabled:!this.state.EnableRateLimiter||this.state.VaryByRemoteAddr}),React.createElement("p",{className:"help-text"},'When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring Ngnix set to "X-Real-IP", when configuring AmazonELB set to "X-Forwarded-For").'))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=c,c.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],16:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=ReactBootstrap.Modal,c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.doSubmit=this.doSubmit.bind(this),this.doCancel=this.doCancel.bind(this),this.state={serverError:null}}return n(t,e),r(t,[{key:"doSubmit",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.password).value;if(!a||a.length<5)return void this.setState({serverError:"Please enter at least 5 characters."});this.setState({serverError:null});var s={};s.new_password=a,s.name=this.props.team.name,s.user_id=this.props.user.id,l.resetPassword(s,function(){t.props.onModalSubmit(ReactDOM.findDOMNode(t.refs.password).value)},function(e){t.setState({serverError:e.message})})}},{key:"doCancel",value:function(){this.setState({serverError:null}),this.props.onModalDismissed()}},{key:"render",value:function(){if(null==this.props.user)return React.createElement("div",null);var e="input-group input-group--limit",t=null;return this.state.serverError&&(e+=" has-error",t=React.createElement("div",{
className:"form-group has-error"},React.createElement("p",{className:"input__help error"},this.state.serverError))),React.createElement(o,{show:this.props.show,onHide:this.doCancel},React.createElement(o.Header,{closeButton:!0},React.createElement(o.Title,null,"Reset Password")),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(o.Body,null,React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-10"},React.createElement("div",{className:e},React.createElement("span",{"data-toggle":"tooltip",title:"New Password",className:"input-group-addon"},"New Password"),React.createElement("input",{type:"password",ref:"password",className:"form-control",maxLength:"22",autoFocus:!0,tabIndex:"1"})),t))),React.createElement(o.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},"Close"),React.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},"Select"))))}}]),t}(React.Component);a.default=c,c.defaultProps={show:!1},c.propTypes={user:React.PropTypes.object,team:React.PropTypes.object,show:React.PropTypes.bool.isRequired,onModalSubmit:React.PropTypes.func,onModalDismissed:React.PropTypes.func},t.exports=a.default},{"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],17:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=ReactBootstrap.Modal,o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.doSubmit=this.doSubmit.bind(this),this.doCancel=this.doCancel.bind(this)}return n(t,e),r(t,[{key:"doSubmit",value:function(e){e.preventDefault(),this.props.onModalSubmit(ReactDOM.findDOMNode(this.refs.team).value)}},{key:"doCancel",value:function(){this.props.onModalDismissed()}},{key:"render",value:function(){if(null==this.props.teams)return React.createElement("div",null);var e=[];for(var t in this.props.teams)if(this.props.teams.hasOwnProperty(t)){var a=this.props.teams[t];e.push(React.createElement("option",{key:"opt_"+a.id,value:a.id},a.name))}return React.createElement(l,{show:this.props.show,onHide:this.doCancel},React.createElement(l.Header,{closeButton:!0},React.createElement(l.Title,null,"Select Team")),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(l.Body,null,React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},React.createElement("select",{ref:"team",size:"10",style:{width:"100%"}},e)))),React.createElement(l.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},"Close"),React.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},"Select"))))}}]),t}(React.Component);a.default=o,o.defaultProps={show:!1},o.propTypes={teams:React.PropTypes.object,show:React.PropTypes.bool.isRequired,onModalSubmit:React.PropTypes.func,onModalDismissed:React.PropTypes.func},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],18:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={saveNeeded:!1,serverError:null}}return n(t,e),r(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.ServiceSettings.ListenAddress=ReactDOM.findDOMNode(this.refs.ListenAddress).value.trim(),""===a.ServiceSettings.ListenAddress&&(a.ServiceSettings.ListenAddress=":8065",ReactDOM.findDOMNode(this.refs.ListenAddress).value=a.ServiceSettings.ListenAddress),a.ServiceSettings.SegmentDeveloperKey=ReactDOM.findDOMNode(this.refs.SegmentDeveloperKey).value.trim(),a.ServiceSettings.GoogleDeveloperKey=ReactDOM.findDOMNode(this.refs.GoogleDeveloperKey).value.trim(),a.ServiceSettings.EnableIncomingWebhooks=ReactDOM.findDOMNode(this.refs.EnableIncomingWebhooks).checked,a.ServiceSettings.EnableOutgoingWebhooks=React.findDOMNode(this.refs.EnableOutgoingWebhooks).checked,a.ServiceSettings.EnablePostUsernameOverride=ReactDOM.findDOMNode(this.refs.EnablePostUsernameOverride).checked,a.ServiceSettings.EnablePostIconOverride=ReactDOM.findDOMNode(this.refs.EnablePostIconOverride).checked,a.ServiceSettings.EnableTesting=ReactDOM.findDOMNode(this.refs.EnableTesting).checked,a.ServiceSettings.EnableSecurityFixAlert=ReactDOM.findDOMNode(this.refs.EnableSecurityFixAlert).checked;var s=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaximumLoginAttempts).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.MaximumLoginAttempts).value,10)),a.ServiceSettings.MaximumLoginAttempts=s,ReactDOM.findDOMNode(this.refs.MaximumLoginAttempts).value=s,l.saveConfig(a,function(){o.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Service Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ListenAddress"},"Listen Address:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ListenAddress",ref:"ListenAddress",placeholder:'Ex ":8065"',defaultValue:this.props.config.ServiceSettings.ListenAddress,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},'The address to which to bind and listen. Entering ":8065" will bind to all interfaces or you can choose one like "127.0.0.1:8065".  Changing this will require a server restart before taking effect.'))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaximumLoginAttempts"},"Maximum Login Attempts:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaximumLoginAttempts",ref:"MaximumLoginAttempts",placeholder:'Ex "10"',defaultValue:this.props.config.ServiceSettings.MaximumLoginAttempts,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Login attempts allowed before user is locked out and required to reset password via email."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SegmentDeveloperKey"},"Segment Developer Key:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SegmentDeveloperKey",ref:"SegmentDeveloperKey",placeholder:'Ex "g3fgGOXJAQ43QV7rAh6iwQCkV4cA1Gs"',defaultValue:this.props.config.ServiceSettings.SegmentDeveloperKey,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"For users running a SaaS services, sign up for a key at Segment.com to track metrics."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"GoogleDeveloperKey"},"Google Developer Key:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"GoogleDeveloperKey",ref:"GoogleDeveloperKey",placeholder:'Ex "7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV"',defaultValue:this.props.config.ServiceSettings.GoogleDeveloperKey,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Set this key to enable embedding of YouTube video previews based on hyperlinks appearing in messages or comments. Instructions to obtain a key available at ",React.createElement("a",{href:"https://www.youtube.com/watch?v=Im69kzhpR3I"},"https://www.youtube.com/watch?v=Im69kzhpR3I"),". Leaving field blank disables the automatic generation of YouTube video previews from links."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableIncomingWebhooks"},"Enable Incoming Webhooks: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableIncomingWebhooks",value:"true",ref:"EnableIncomingWebhooks",defaultChecked:this.props.config.ServiceSettings.EnableIncomingWebhooks,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableIncomingWebhooks",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableIncomingWebhooks,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableOutgoingWebhooks"},"Enable Outgoing Webhooks: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableOutgoingWebhooks",value:"true",ref:"EnableOutgoingWebhooks",defaultChecked:this.props.config.ServiceSettings.EnableOutgoingWebhooks,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableOutgoingWebhooks",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableOutgoingWebhooks,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, outgoing webhooks will be allowed."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnablePostUsernameOverride"},"Enable Overriding Usernames from Webhooks: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostUsernameOverride",value:"true",ref:"EnablePostUsernameOverride",defaultChecked:this.props.config.ServiceSettings.EnablePostUsernameOverride,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostUsernameOverride",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnablePostUsernameOverride,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, webhooks will be allowed to change the username they are posting as. Note, combined with allowing icon overriding, this could open users up to phishing attacks."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnablePostIconOverride"},"Enable Overriding Icon from Webhooks: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostIconOverride",value:"true",ref:"EnablePostIconOverride",defaultChecked:this.props.config.ServiceSettings.EnablePostIconOverride,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostIconOverride",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnablePostIconOverride,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, webhooks will be allowed to change the icon they post with. Note, combined with allowing username overriding, this could open users up to phishing attacks."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableTesting"},"Enable Testing: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTesting",value:"true",ref:"EnableTesting",defaultChecked:this.props.config.ServiceSettings.EnableTesting,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTesting",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableTesting,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"(Developer Option) When true, /loadtest slash command is enabled to load test accounts and test data. Changing this will require a server restart before taking effect."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableSecurityFixAlert"},"Enable Security Alerts: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableSecurityFixAlert",value:"true",ref:"EnableSecurityFixAlert",defaultChecked:this.props.config.ServiceSettings.EnableSecurityFixAlert,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableSecurityFixAlert",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableSecurityFixAlert,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled."))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=c,c.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],19:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../utils/client.jsx"),c=e("../../utils/async_client.jsx"),u=e("crypto"),d=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleGenerate=this.handleGenerate.bind(this),this.state={saveNeeded:!1,serverError:null}}return r(t,e),i(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.SqlSettings.Trace=ReactDOM.findDOMNode(this.refs.Trace).checked,a.SqlSettings.AtRestEncryptKey=ReactDOM.findDOMNode(this.refs.AtRestEncryptKey).value.trim(),""===a.SqlSettings.AtRestEncryptKey&&(a.SqlSettings.AtRestEncryptKey=u.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.AtRestEncryptKey).value=a.SqlSettings.AtRestEncryptKey);var s=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaxOpenConns).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.MaxOpenConns).value,10)),a.SqlSettings.MaxOpenConns=s,ReactDOM.findDOMNode(this.refs.MaxOpenConns).value=s;var n=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaxIdleConns).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.MaxIdleConns).value,10)),a.SqlSettings.MaxIdleConns=n,ReactDOM.findDOMNode(this.refs.MaxIdleConns).value=n,o.saveConfig(a,function(){c.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"handleGenerate",value:function(e){e.preventDefault();var t=s.window.confirm("Warning: re-generating this salt may cause some columns in the database to return empty results.");if(t!==!1){ReactDOM.findDOMNode(this.refs.AtRestEncryptKey).value=u.randomBytes(256).toString("base64").substring(0,32);var a={saveNeeded:!0,serverError:this.state.serverError};this.setState(a)}}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";this.state.saveNeeded&&(t="btn btn-primary");var a="**********"+this.props.config.SqlSettings.DataSource.substring(this.props.config.SqlSettings.DataSource.indexOf("@")),s="";return this.props.config.SqlSettings.DataSourceReplicas.forEach(function(e){s+="[**********"+e.substring(e.indexOf("@"))+"] "}),0===this.props.config.SqlSettings.DataSourceReplicas.length&&(s="none"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("div",{className:"banner"},React.createElement("div",{className:"banner__content"},React.createElement("h4",{className:"banner__heading"},"Note:"),React.createElement("p",null,"Changing properties in this section will require a server restart before taking effect."))),React.createElement("h3",null,"SQL Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DriverName"},"Driver Name:"),React.createElement("div",{className:"col-sm-8"},React.createElement("p",{className:"help-text"},this.props.config.SqlSettings.DriverName))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DataSource"},"Data Source:"),React.createElement("div",{className:"col-sm-8"},React.createElement("p",{className:"help-text"},a))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DataSourceReplicas"},"Data Source Replicas:"),React.createElement("div",{className:"col-sm-8"},React.createElement("p",{className:"help-text"},s))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaxIdleConns"},"Maximum Idle Connections:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaxIdleConns",ref:"MaxIdleConns",placeholder:'Ex "10"',defaultValue:this.props.config.SqlSettings.MaxIdleConns,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Maximum number of idle connections held open to the database."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaxOpenConns"},"Maximum Open Connections:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaxOpenConns",ref:"MaxOpenConns",placeholder:'Ex "10"',defaultValue:this.props.config.SqlSettings.MaxOpenConns,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Maximum number of open connections held open to the database."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AtRestEncryptKey"},"At Rest Encrypt Key:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AtRestEncryptKey",ref:"AtRestEncryptKey",placeholder:'Ex "gxHVDcKUyP2y1eiyW8S8na1UYQAfq6J6"',defaultValue:this.props.config.SqlSettings.AtRestEncryptKey,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"32-character salt available to encrypt and decrypt sensitive fields in database."),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerate},"Re-Generate")))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Trace"},"Trace: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Trace",value:"true",ref:"Trace",defaultChecked:this.props.config.SqlSettings.Trace,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Trace",value:"false",defaultChecked:!this.props.config.SqlSettings.Trace,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"(Development Mode) When true, executing SQL statements are written to the log."))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=d,d.propTypes={config:React.PropTypes.object},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,crypto:"crypto"}],20:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/object/keys").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../utils/client.jsx"),c=e("../../utils/utils.jsx"),u=e("./line_chart.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getData=this.getData.bind(this),this.state={users:null,serverError:null,channel_open_count:null,channel_private_count:null,post_count:null,post_counts_day:null,user_counts_with_posts_day:null,recent_active_users:null,newly_created_users:null}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){this.getData(this.props.team.id)}},{key:"getData",value:function(e){var t=this;o.getAnalytics(e,"standard",function(e){for(var a in e)"channel_open_count"===e[a].name&&t.setState({channel_open_count:e[a].value}),"channel_private_count"===e[a].name&&t.setState({channel_private_count:e[a].value}),"post_count"===e[a].name&&t.setState({post_count:e[a].value})},function(e){t.setState({serverError:e.message})}),o.getAnalytics(e,"post_counts_day",function(e){e.reverse();var a={labels:[],datasets:[{label:"Total Posts",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]};for(var s in e)if(e[s]){var n=e[s];a.labels.push(n.name),a.datasets[0].data.push(n.value)}t.setState({post_counts_day:a})},function(e){t.setState({serverError:e.message})}),o.getAnalytics(e,"user_counts_with_posts_day",function(e){e.reverse();var a={labels:[],datasets:[{label:"Active Users With Posts",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]};for(var s in e)if(e[s]){var n=e[s];a.labels.push(n.name),a.datasets[0].data.push(n.value)}t.setState({user_counts_with_posts_day:a})},function(e){t.setState({serverError:e.message})}),o.getProfilesForTeam(e,function(e){t.setState({users:e});var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push(e[s]);a.sort(function(e,t){return e.last_activity_at<t.last_activity_at?1:e.last_activity_at>t.last_activity_at?-1:0});for(var n=[],r=0;r<a.length&&(n.push(a[r]),!(r>19));r++);t.setState({recent_active_users:n}),a.sort(function(e,t){return e.create_at<t.create_at?1:e.create_at>t.create_at?-1:0});for(var i=[],r=0;r<a.length&&(i.push(a[r]),!(r>19));r++);t.setState({newly_created_users:i})},function(e){t.setState({serverError:e.message})})}},{key:"componentWillReceiveProps",value:function(e){this.setState({users:null,serverError:null,channel_open_count:null,channel_private_count:null,post_count:null,post_counts_day:null,user_counts_with_posts_day:null,recent_active_users:null,newly_created_users:null}),this.getData(e.team.id)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},"Total Users",React.createElement("i",{className:"fa fa-users"})),React.createElement("div",{className:"content"},null==this.state.users?"Loading...":l(this.state.users).length))),a=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},"Public Groups",React.createElement("i",{className:"fa fa-unlock-alt"})),React.createElement("div",{className:"content"},null==this.state.channel_open_count?"Loading...":this.state.channel_open_count))),s=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},"Private Groups",React.createElement("i",{className:"fa fa-lock"})),React.createElement("div",{className:"content"},null==this.state.channel_private_count?"Loading...":this.state.channel_private_count))),n=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},"Total Posts",React.createElement("i",{className:"fa fa-comment"})),React.createElement("div",{className:"content"},null==this.state.post_count?"Loading...":this.state.post_count))),r=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},"Total Posts"),React.createElement("div",{className:"content"},"Loading...")));null!=this.state.post_counts_day&&(r=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},"Total Posts"),React.createElement("div",{className:"content"},React.createElement(u,{data:this.state.post_counts_day,width:"740",height:"225"})))));var i=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},"Total Posts"),React.createElement("div",null,"Loading...")));null!=this.state.user_counts_with_posts_day&&(i=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},"Active Users With Posts"),React.createElement("div",{className:"content"},React.createElement(u,{data:this.state.user_counts_with_posts_day,width:"740",height:"225"})))));var o=React.createElement("div",{className:"recent-active-users"},React.createElement("div",null,"Recent Active Users"),React.createElement("div",null,"Loading..."));null!=this.state.recent_active_users&&(o=React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"total-count recent-active-users"},React.createElement("div",{className:"title"},"Recent Active Users"),React.createElement("div",{className:"content"},React.createElement("table",null,React.createElement("tbody",null,this.state.recent_active_users.map(function(e){return React.createElement("tr",{key:e.id},React.createElement("td",null,e.email),React.createElement("td",null,c.displayDateTime(e.last_activity_at)))})))))));var d=React.createElement("div",{className:"recent-active-users"},React.createElement("div",null,"Newly Created Users"),React.createElement("div",null,"Loading..."));return null!=this.state.newly_created_users&&(d=React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"total-count recent-active-users"},React.createElement("div",{className:"title"},"Newly Created Users"),React.createElement("div",{className:"content"},React.createElement("table",null,React.createElement("tbody",null,this.state.newly_created_users.map(function(e){return React.createElement("tr",{key:e.id},React.createElement("td",null,e.email),React.createElement("td",null,c.displayDateTime(e.create_at)))}))))))),React.createElement("div",{className:"wrapper--fixed team_statistics"},React.createElement("h3",null,"Statistics for "+this.props.team.name),e,React.createElement("div",{className:"row"},t,n,a,s),React.createElement("div",{className:"row"},r),React.createElement("div",{className:"row"},i),React.createElement("div",{className:"row"},o,d))}}]),t}(React.Component);a.default=d,d.propTypes={team:React.PropTypes.object},t.exports=a.default},{"../../utils/client.jsx":287,"../../utils/utils.jsx":293,"./line_chart.jsx":11,"babel-runtime/core-js/object/keys":156,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],21:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={saveNeeded:!1,serverError:null}}return n(t,e),r(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError
};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.TeamSettings.SiteName=ReactDOM.findDOMNode(this.refs.SiteName).value.trim(),a.TeamSettings.RestrictCreationToDomains=ReactDOM.findDOMNode(this.refs.RestrictCreationToDomains).value.trim(),a.TeamSettings.EnableTeamCreation=ReactDOM.findDOMNode(this.refs.EnableTeamCreation).checked,a.TeamSettings.EnableUserCreation=ReactDOM.findDOMNode(this.refs.EnableUserCreation).checked,a.TeamSettings.RestrictTeamNames=ReactDOM.findDOMNode(this.refs.RestrictTeamNames).checked,a.TeamSettings.EnableTeamListing=ReactDOM.findDOMNode(this.refs.EnableTeamListing).checked;var s=50;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaxUsersPerTeam).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.MaxUsersPerTeam).value,10)),a.TeamSettings.MaxUsersPerTeam=s,ReactDOM.findDOMNode(this.refs.MaxUsersPerTeam).value=s,l.saveConfig(a,function(){o.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Team Settings"),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SiteName"},"Site Name:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SiteName",ref:"SiteName",placeholder:'Ex "Mattermost"',defaultValue:this.props.config.TeamSettings.SiteName,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Name of service shown in login screens and UI."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaxUsersPerTeam"},"Max Users Per Team:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaxUsersPerTeam",ref:"MaxUsersPerTeam",placeholder:'Ex "25"',defaultValue:this.props.config.TeamSettings.MaxUsersPerTeam,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},"Maximum total number of users per team, including both active and inactive users."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableTeamCreation"},"Enable Team Creation: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamCreation",value:"true",ref:"EnableTeamCreation",defaultChecked:this.props.config.TeamSettings.EnableTeamCreation,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamCreation",value:"false",defaultChecked:!this.props.config.TeamSettings.EnableTeamCreation,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When false, the ability to create teams is disabled. The create team button displays error when pressed."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableUserCreation"},"Enable User Creation: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableUserCreation",value:"true",ref:"EnableUserCreation",defaultChecked:this.props.config.TeamSettings.EnableUserCreation,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableUserCreation",value:"false",defaultChecked:!this.props.config.TeamSettings.EnableUserCreation,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When false, the ability to create accounts is disabled. The create account button displays error when pressed."))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"RestrictCreationToDomains"},"Restrict Creation To Domains:"),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"RestrictCreationToDomains",ref:"RestrictCreationToDomains",placeholder:'Ex "corp.mattermost.com, mattermost.org"',defaultValue:this.props.config.TeamSettings.RestrictCreationToDomains,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},'Teams can only be created from a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org").'))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"RestrictTeamNames"},"Restrict Team Names: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"RestrictTeamNames",value:"true",ref:"RestrictTeamNames",defaultChecked:this.props.config.TeamSettings.RestrictTeamNames,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"RestrictTeamNames",value:"false",defaultChecked:!this.props.config.TeamSettings.RestrictTeamNames,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, You cannot create a team name with reserved words like www, admin, support, test, channel, etc"))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableTeamListing"},"Enable Team Directory: "),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamListing",value:"true",ref:"EnableTeamListing",defaultChecked:this.props.config.TeamSettings.EnableTeamListing,onChange:this.handleChange}),"true"),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamListing",value:"false",defaultChecked:!this.props.config.TeamSettings.EnableTeamListing,onChange:this.handleChange}),"false"),React.createElement("p",{className:"help-text"},"When true, teams that are configured to show in team directory will show on main page inplace of creating a new team."))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Saving Config..."},"Save")))))}}]),t}(React.Component);a.default=c,c.propTypes={config:React.PropTypes.object},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],22:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../loading_screen.jsx"),c=e("./user_item.jsx"),u=e("./reset_password_modal.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getTeamProfiles=this.getTeamProfiles.bind(this),this.getCurrentTeamProfiles=this.getCurrentTeamProfiles.bind(this),this.doPasswordReset=this.doPasswordReset.bind(this),this.doPasswordResetDismiss=this.doPasswordResetDismiss.bind(this),this.doPasswordResetSubmit=this.doPasswordResetSubmit.bind(this),this.state={teamId:e.team.id,users:null,serverError:null,showPasswordModal:!1,user:null}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){this.getCurrentTeamProfiles()}},{key:"getCurrentTeamProfiles",value:function(){this.getTeamProfiles(this.props.team.id)}},{key:"getTeamProfiles",value:function(e){var t=this;l.getProfilesForTeam(e,function(e){var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push(e[s]);a.sort(function(e,t){return e.username<t.username?-1:e.username>t.username?1:0}),t.setState({teamId:t.state.teamId,users:a,serverError:t.state.serverError,showPasswordModal:t.state.showPasswordModal,user:t.state.user})},function(e){t.setState({teamId:t.state.teamId,users:null,serverError:e.message,showPasswordModal:t.state.showPasswordModal,user:t.state.user})})}},{key:"doPasswordReset",value:function(e){this.setState({teamId:this.state.teamId,users:this.state.users,serverError:this.state.serverError,showPasswordModal:!0,user:e})}},{key:"doPasswordResetDismiss",value:function(){this.setState({teamId:this.state.teamId,users:this.state.users,serverError:this.state.serverError,showPasswordModal:!1,user:null})}},{key:"doPasswordResetSubmit",value:function(){this.setState({teamId:this.state.teamId,users:this.state.users,serverError:this.state.serverError,showPasswordModal:!1,user:null})}},{key:"componentWillReceiveProps",value:function(e){this.getTeamProfiles(e.team.id)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t="";if(this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),null==this.state.users)return React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Users for "+this.props.team.name),t,React.createElement(o,null));var a=this.state.users.map(function(t){return React.createElement(c,{key:"user_"+t.id,user:t,refreshProfiles:e.getCurrentTeamProfiles,doPasswordReset:e.doPasswordReset})});return React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,"Users for "+this.props.team.name+" ("+this.state.users.length+")"),t,React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("table",{className:"table more-table member-list-holder"},React.createElement("tbody",null,a))),React.createElement(u,{user:this.state.user,show:this.state.showPasswordModal,team:this.props.team,onModalSubmit:this.doPasswordResetSubmit,onModalDismissed:this.doPasswordResetDismiss}))}}]),t}(React.Component);a.default=d,d.propTypes={team:React.PropTypes.object},t.exports=a.default},{"../../utils/client.jsx":287,"../loading_screen.jsx":53,"./reset_password_modal.jsx":16,"./user_item.jsx":23,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],23:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/utils.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleMakeMember=this.handleMakeMember.bind(this),this.handleMakeActive=this.handleMakeActive.bind(this),this.handleMakeNotActive=this.handleMakeNotActive.bind(this),this.handleMakeAdmin=this.handleMakeAdmin.bind(this),this.handleMakeSystemAdmin=this.handleMakeSystemAdmin.bind(this),this.handleResetPassword=this.handleResetPassword.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleMakeMember",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.id,new_roles:""};l.updateRoles(a,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeActive",value:function(e){var t=this;e.preventDefault(),l.updateActive(this.props.user.id,!0,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeNotActive",value:function(e){var t=this;e.preventDefault(),l.updateActive(this.props.user.id,!1,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeAdmin",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.id,new_roles:"admin"};l.updateRoles(a,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeSystemAdmin",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.id,new_roles:"system_admin"};l.updateRoles(a,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleResetPassword",value:function(e){e.preventDefault(),this.props.doPasswordReset(this.props.user)}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"has-error"},React.createElement("label",{className:"has-error control-label"},this.state.serverError)));var t=this.props.user,a="Member";t.roles.length>0&&(a=o.isSystemAdmin(t.roles)?"System Admin":o.isAdmin(t.roles)?"Team Admin":t.roles.charAt(0).toUpperCase()+t.roles.slice(1));var s=t.email,n="admin"===t.roles||"system_admin"===t.roles,r=""===t.roles||"system_admin"===t.roles,i=""===t.roles||"admin"===t.roles,l=!1,c="system_admin"!==t.roles;t.delete_at>0&&(a="Inactive",n=!1,r=!1,i=!1,l=!0,c=!1);var u=null;i&&(u=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeSystemAdmin},"Make System Admin")));var d=null;r&&(d=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeAdmin},"Make Team Admin")));var h=null;n&&(h=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeMember},"Make Member")));var m=null;l&&(m=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeActive},"Make Active")));var p=null;return c&&(p=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeNotActive},"Make Inactive"))),React.createElement("tr",null,React.createElement("td",{className:"row member-div"},React.createElement("img",{className:"post-profile-img pull-left",src:"/api/v1/users/"+t.id+"/image?time="+t.update_at+"&"+o.getSessionIndex(),height:"36",width:"36"}),React.createElement("span",{className:"member-name"},o.getDisplayName(t)),React.createElement("span",{className:"member-email"},s),React.createElement("div",{className:"dropdown member-drop"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button",id:"channel_header_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",null,a," "),React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu member-menu",role:"menu","aria-labelledby":"channel_header_dropdown"},d,h,m,p,u,React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleResetPassword},"Reset Password")))),e))}}]),t}(React.Component);a.default=c,c.propTypes={user:React.PropTypes.object.isRequired,refreshProfiles:React.PropTypes.func.isRequired,doPasswordReset:React.PropTypes.func.isRequired},t.exports=a.default},{"../../utils/client.jsx":287,"../../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],24:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleAllow=this.handleAllow.bind(this),this.handleDeny=this.handleDeny.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleAllow",value:function(){var e=this.props.responseType,t=this.props.clientId,a=this.props.redirectUri,s=this.props.state,n=this.props.scope;l.allowOAuth2(e,t,a,s,n,function(e){e.redirect&&window.location.replace(e.redirect)},function(){})}},{key:"handleDeny",value:function(){window.location.replace(this.props.redirectUri+"?error=access_denied")}},{key:"render",value:function(){return React.createElement("div",{className:"authorize-box"},React.createElement("div",{className:"authorize-inner"},React.createElement("h3",null,"An application would like to connect to your ",this.props.teamName," account"),React.createElement("label",null,"The app ",this.props.appName," would like the ability to access and modify your basic information."),React.createElement("br",null),React.createElement("br",null),React.createElement("label",null,"Allow ",this.props.appName," access?"),React.createElement("br",null),React.createElement("button",{type:"submit",className:"btn authorize-btn",onClick:this.handleDeny},"Deny"),React.createElement("button",{type:"submit",className:"btn btn-primary authorize-btn",onClick:this.handleAllow},"Allow")))}}]),t}(React.Component);a.default=o,o.propTypes={appName:React.PropTypes.string,teamName:React.PropTypes.string,responseType:React.PropTypes.string,clientId:React.PropTypes.string,redirectUri:React.PropTypes.string,state:React.PropTypes.string,scope:React.PropTypes.string},t.exports=a.default},{"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],25:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./tutorial/tutorial_intro_screens.jsx"),o=e("./create_post.jsx"),c=e("./posts_view_container.jsx"),u=e("./channel_header.jsx"),d=e("./navbar.jsx"),h=e("./file_upload_overlay.jsx"),m=e("../stores/preference_store.jsx"),p=e("../stores/user_store.jsx"),f=e("../utils/constants.jsx"),g=f.TutorialSteps,b=f.Preferences,v=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onPreferenceChange=this.onPreferenceChange.bind(this);var a=m.getPreference(b.TUTORIAL_STEP,p.getCurrentId(),{value:"999"});this.state={showTutorialScreens:parseInt(a.value,10)===g.INTRO_SCREENS}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){m.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){m.removeChangeListener(this.onPreferenceChange)}},{key:"onPreferenceChange",value:function(){var e=m.getPreference(b.TUTORIAL_STEP,p.getCurrentId(),{value:"999"});this.setState({showTutorialScreens:parseInt(e.value,10)<=g.INTRO_SCREENS})}},{key:"render",value:function(){var e=void 0;return e=this.state.showTutorialScreens?React.createElement(l,null):React.createElement(c,null),React.createElement("div",{className:"inner__wrap channel__wrap"},React.createElement("div",{className:"row header"},React.createElement("div",{id:"navbar"},React.createElement(d,null))),React.createElement("div",{className:"row main"},React.createElement(h,{id:"file_upload_overlay",overlayType:"center"}),React.createElement("div",{id:"app-content",className:"app__content"},React.createElement("div",{id:"channel-header"},React.createElement(u,null)),e,React.createElement("div",{className:"post-create__container",id:"post-create"},React.createElement(o,null)))))}}]),t}(React.Component);a.default=v,v.defaultProps={},v.propTypes={},t.exports=a.default},{"../stores/preference_store.jsx":280,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"./channel_header.jsx":27,"./create_post.jsx":37,"./file_upload_overlay.jsx":49,"./navbar.jsx":65,"./posts_view_container.jsx":83,"./tutorial/tutorial_intro_screens.jsx":126,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],26:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=ReactBootstrap.Modal,o=e("../utils/utils.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onURLChanged=this.onURLChanged.bind(this),this.doSubmit=this.doSubmit.bind(this),this.doCancel=this.doCancel.bind(this),this.state={currentURL:e.currentURL,urlError:"",userEdit:!1}}return n(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.state.userEdit||this.setState({currentURL:e.currentURL})}},{key:"componentDidUpdate",value:function(e){this.props.show===!0&&e.show===!1&&ReactDOM.findDOMNode(this.refs.urlinput).select()}},{key:"onURLChanged",value:function(e){var t=e.target.value.trim();this.setState({currentURL:t.replace(/[^A-Za-z0-9-_]/g,"").toLowerCase(),userEdit:!0})}},{key:"getURLError",value:function(e){var t=[];return e.length<2&&t.push(React.createElement("span",{key:"error1"},"Must be longer than two characters",React.createElement("br",null))),("-"===e.charAt(0)||"_"===e.charAt(0))&&t.push(React.createElement("span",{key:"error2"},"Must start with a letter or number",React.createElement("br",null))),e.length>1&&("-"===e.charAt(e.length-1)||"_"===e.charAt(e.length-1))&&t.push(React.createElement("span",{key:"error3"},"Must end with a letter or number",React.createElement("br",null))),e.indexOf("__")>-1&&t.push(React.createElement("span",{key:"error4"},"Can not contain two underscores in a row.",React.createElement("br",null))),0===t.length&&t.push(React.createElement("span",{key:"errorlast"},"Invalid URL",React.createElement("br",null))),t}},{key:"doSubmit",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.urlinput).value,a=o.cleanUpUrlable(t);return a!==t||t.length<2||t.indexOf("__")>-1?void this.setState({urlError:this.getURLError(t)}):(this.setState({urlError:"",userEdit:!1}),void this.props.onModalSubmit(t))}},{key:"doCancel",value:function(){this.setState({urlError:"",userEdit:!1}),this.props.onModalDismissed()}},{key:"render",value:function(){var e="input-group input-group--limit",t=null,a=null;this.state.urlError&&(e+=" has-error",t=React.createElement("p",{className:"input__help error"},this.state.urlError)),this.props.serverError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("p",{className:"input__help error"},this.props.serverError)));var s=o.getTeamURLFromAddressBar(),n=o.getShortenedTeamURL();return React.createElement(l,{show:this.props.show,onHide:this.doCancel},React.createElement(l.Header,{closeButton:!0},React.createElement(l.Title,null,this.props.title)),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(l.Body,null,React.createElement("div",{className:"modal-intro"},this.props.description),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-2 form__label control-label"},this.props.urlLabel),React.createElement("div",{className:"col-sm-10"},React.createElement("div",{className:e},React.createElement("span",{"data-toggle":"tooltip",title:s,className:"input-group-addon"},n),React.createElement("input",{type:"text",ref:"urlinput",className:"form-control",maxLength:"22",onChange:this.onURLChanged,value:this.state.currentURL,autoFocus:!0,tabIndex:"1"})),t,a))),React.createElement(l.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},"Close"),React.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},this.props.submitButtonText))))}}]),t}(React.Component);a.default=c,c.defaultProps={show:!1,title:"Change URL",desciption:"",urlLabel:"URL",submitButtonText:"Save",currentURL:"",serverError:""},c.propTypes={show:React.PropTypes.bool.isRequired,title:React.PropTypes.string,description:React.PropTypes.string,urlLabel:React.PropTypes.string,submitButtonText:React.PropTypes.string,currentURL:React.PropTypes.string,serverError:React.PropTypes.string,onModalSubmit:React.PropTypes.func.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],27:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./search_bar.jsx"),o=e("./message_wrapper.jsx"),c=e("./popover_list_members.jsx"),u=e("./edit_channel_purpose_modal.jsx"),d=e("./channel_invite_modal.jsx"),h=e("./channel_members_modal.jsx"),m=e("../stores/channel_store.jsx"),p=e("../stores/user_store.jsx"),f=e("../stores/search_store.jsx"),g=e("../stores/preference_store.jsx"),b=e("../dispatcher/app_dispatcher.jsx"),v=e("../utils/utils.jsx"),E=e("../utils/text_formatting.jsx"),_=e("../utils/async_client.jsx"),y=e("../utils/client.jsx"),R=e("../utils/constants.jsx"),C=R.ActionTypes,N=ReactBootstrap.Popover,k=ReactBootstrap.OverlayTrigger,S=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onListenerChange=this.onListenerChange.bind(this),this.handleLeave=this.handleLeave.bind(this),this.searchMentions=this.searchMentions.bind(this);var a=this.getStateFromStores();a.showEditChannelPurposeModal=!1,a.showInviteModal=!1,a.showMembersModal=!1,this.state=a}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){return{channel:m.getCurrent(),memberChannel:m.getCurrentMember(),memberTeam:p.getCurrentUser(),users:m.getCurrentExtraInfo().members,searchVisible:null!==f.getSearchResults()}}},{key:"componentDidMount",value:function(){m.addChangeListener(this.onListenerChange),m.addExtraInfoChangeListener(this.onListenerChange),f.addSearchChangeListener(this.onListenerChange),p.addChangeListener(this.onListenerChange),g.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){m.removeChangeListener(this.onListenerChange),m.removeExtraInfoChangeListener(this.onListenerChange),f.removeSearchChangeListener(this.onListenerChange),p.removeChangeListener(this.onListenerChange),g.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();v.areStatesEqual(e,this.state)||this.setState(e),$(".channel-header__info .description").popover({placement:"bottom",trigger:"hover",html:!0,delay:{show:500,hide:500}})}},{key:"handleLeave",value:function(){var e=this;y.leaveChannel(this.state.channel.id,function(){b.handleViewAction({type:C.LEAVE_CHANNEL,id:e.state.channel.id});var t=m.getByName("town-square");v.switchChannel(t)},function(e){_.dispatchError(e,"handleLeave")})}},{key:"searchMentions",value:function(e){e.preventDefault();var t=p.getCurrentUser(),a="";if(t.notify_props&&t.notify_props.mention_keys){var s=p.getCurrentMentionKeys();"true"===t.notify_props.all&&-1!==s.indexOf("@all")&&s.splice(s.indexOf("@all"),1),"true"===t.notify_props.channel&&-1!==s.indexOf("@channel")&&s.splice(s.indexOf("@channel"),1),a=s.join(" ")}b.handleServerAction({type:C.RECIEVED_SEARCH_TERM,term:a,do_search:!0,is_mention_search:!0})}},{key:"render",value:function(){var e=this;if(null===this.state.channel)return null;var t=this.state.channel,a=React.createElement(N,{id:"hader-popover",bStyle:"info",bSize:"large",placement:"bottom",className:"description",onMouseOver:function(){return e.refs.headerOverlay.show()},onMouseOut:function(){return e.refs.headerOverlay.hide()}},React.createElement(o,{message:t.header})),s=t.display_name,n=p.getCurrentId(),r=v.isAdmin(this.state.memberChannel.roles)||v.isAdmin(this.state.memberTeam.roles),i="D"===this.state.channel.type;if(i&&this.state.users.length>1){var f=void 0;f=this.state.users[0].id===n?this.state.users[1]:this.state.users[0],s=v.displayUsername(f.id)}var g="Channel";"P"===t.type&&(g="Group");var b=[];return i?b.push(React.createElement("li",{key:"edit_header_direct",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":t.header,"data-title":t.display_name,"data-channelid":t.id},"Set Channel Header..."))):(b.push(React.createElement("li",{key:"view_info",role:"presentation"},React.createElement("a",{role:"menuitem","data-toggle":"modal","data-target":"#channel_info","data-channelid":t.id,href:"#"},"View Info"))),m.isDefault(t)||(b.push(React.createElement("li",{key:"add_members",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return e.setState({showInviteModal:!0})}},"Add Members"))),r&&b.push(React.createElement("li",{key:"manage_members",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return e.setState({showMembersModal:!0})}},"Manage Members")))),b.push(React.createElement("li",{key:"set_channel_header",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":t.header,"data-title":t.display_name,"data-channelid":t.id},"Set ",g," Header..."))),b.push(React.createElement("li",{key:"set_channel_purpose",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return e.setState({showEditChannelPurposeModal:!0})}},"Set ",g," Purpose..."))),b.push(React.createElement("li",{key:"notification_preferences",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#channel_notifications","data-title":t.display_name,"data-channelid":t.id},"Notification Preferences"))),m.isDefault(t)||(r&&(b.push(React.createElement("li",{key:"rename_channel",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#rename_channel","data-display":t.display_name,"data-name":t.name,"data-channelid":t.id},"Rename ",g,"..."))),b.push(React.createElement("li",{key:"delete_channel",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#delete_channel","data-title":t.display_name,"data-channelid":t.id},"Delete ",g,"...")))),b.push(React.createElement("li",{key:"leave_channel",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleLeave},"Leave ",g))))),React.createElement("div",null,React.createElement("table",{className:"channel-header alt"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("th",null,React.createElement("div",{className:"channel-header__info"},React.createElement("div",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",
type:"button",id:"channel_header_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("strong",{className:"heading"},s," "),React.createElement("span",{className:"glyphicon glyphicon-chevron-down header-dropdown__icon"})),React.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"channel_header_dropdown"},b)),React.createElement(k,{trigger:["hover","focus"],placement:"bottom",overlay:a,ref:"headerOverlay"},React.createElement("div",{onClick:E.handleClick,className:"description",dangerouslySetInnerHTML:{__html:E.formatText(t.header,{singleline:!0,mentionHighlight:!1})}})))),React.createElement("th",null,React.createElement(c,{members:this.state.users,channelId:t.id})),React.createElement("th",{className:"search-bar__container"},React.createElement(l,null)),React.createElement("th",null,React.createElement("div",{className:"dropdown channel-header__links"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button",id:"channel_header_right_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{dangerouslySetInnerHTML:{__html:R.MENU_ICON}})),React.createElement("ul",{className:"dropdown-menu dropdown-menu-right",role:"menu","aria-labelledby":"channel_header_right_dropdown"},React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.searchMentions},"Recent Mentions")))))))),React.createElement(u,{show:this.state.showEditChannelPurposeModal,onModalDismissed:function(){return e.setState({showEditChannelPurposeModal:!1})},channel:t}),React.createElement(d,{show:this.state.showInviteModal,onModalDismissed:function(){return e.setState({showInviteModal:!1})}}),React.createElement(h,{show:this.state.showMembersModal,onModalDismissed:function(){return e.setState({showMembersModal:!1})}}))}}]),t}(React.Component);a.default=S,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/preference_store.jsx":280,"../stores/search_store.jsx":281,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/text_formatting.jsx":292,"../utils/utils.jsx":293,"./channel_invite_modal.jsx":29,"./channel_members_modal.jsx":31,"./edit_channel_purpose_modal.jsx":41,"./message_wrapper.jsx":61,"./popover_list_members.jsx":73,"./search_bar.jsx":92,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],28:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/channel_store.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={channel_id:l.getCurrentId()}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;this.refs.modal&&$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",function(t){var a=t.relatedTarget;e.setState({channel_id:$(a).attr("data-channelid")})})}},{key:"render",value:function(){var e=l.get(this.state.channel_id);return e||(e={},e.display_name="No Channel Found",e.name="No Channel Found",e.id="No Channel Found"),React.createElement("div",{className:"modal fade",ref:"modal",id:"channel_info",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",id:"myModalLabel"},React.createElement("span",{className:"name"},e.display_name))),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel Name: "),React.createElement("div",{className:"col-sm-9"},e.display_name)),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel Handle:"),React.createElement("div",{className:"col-sm-9"},e.name)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel ID:"),React.createElement("div",{className:"col-sm-9"},e.id))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close")))))}}]),t}(React.Component);a.default=o,t.exports=a.default},{"../stores/channel_store.jsx":276,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],29:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./member_list.jsx"),o=e("./loading_screen.jsx"),c=e("../stores/user_store.jsx"),u=e("../stores/channel_store.jsx"),d=e("../utils/utils.jsx"),h=e("../utils/client.jsx"),m=e("../utils/async_client.jsx"),p=ReactBootstrap.Modal,f=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.onListenerChange=this.onListenerChange.bind(this),this.handleInvite=this.handleInvite.bind(this),this.state=this.getStateFromStores()}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){function e(e){return e.id}var t=c.getActiveOnlyProfiles(),a=u.getCurrentExtraInfo().members.map(e),s=$.isEmptyObject(t),n=[];for(var r in t)-1===a.indexOf(r)&&n.push(t[r]);n.sort(function(e,t){return e.username.localeCompare(t.username)});var i="";return u.getCurrent()&&(i=u.getCurrent().display_name),{nonmembers:n,memberIds:a,channelName:i,loading:s}}},{key:"onShow",value:function(){$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillReceiveProps",value:function(e){!this.props.show&&e.show?(u.addExtraInfoChangeListener(this.onListenerChange),u.addChangeListener(this.onListenerChange),c.addChangeListener(this.onListenerChange),this.onListenerChange()):this.props.show&&!e.show&&(u.removeExtraInfoChangeListener(this.onListenerChange),u.removeChangeListener(this.onListenerChange),c.removeChangeListener(this.onListenerChange))}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();d.areStatesEqual(this.state,e)||this.setState(e)}},{key:"handleInvite",value:function(e){var t=this;if(!(this.state.memberIds.indexOf(e)>-1)){var a={};a.user_id=e,h.addChannelMember(u.getCurrentId(),a,function(){for(var a=t.state.nonmembers,s=t.state.memberIds,n=0;n<a.length;n++)if(e===a[n].id){a[n].invited=!0,s.push(e);break}t.setState({inviteError:null,memberIds:s,nonmembers:a}),m.getChannelExtraInfo(!0)},function(e){t.setState({inviteError:e.message})})}}},{key:"render",value:function(){var e=1e3;d.windowHeight()<=1200&&(e=d.windowHeight()-300);var t=null;this.state.inviteError&&(t=React.createElement("label",{className:"has-error control-label"},this.state.inviteError));var a=u.getCurrentMember(),s=!1;a&&(s=d.isAdmin(a.roles)||d.isAdmin(c.getCurrentUser().roles));var n;return n=this.state.loading?React.createElement(o,null):React.createElement(l,{memberList:this.state.nonmembers,isAdmin:s,handleInvite:this.handleInvite}),React.createElement(p,{dialogClassName:"more-modal",show:this.props.show,onHide:this.props.onModalDismissed},React.createElement(p.Header,{closeButton:!0},React.createElement(p.Title,null,"Add New Members to ",React.createElement("span",{className:"name"},this.state.channelName))),React.createElement(p.Body,{ref:"modalBody",style:{maxHeight:e}},t,n),React.createElement(p.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onModalDismissed},"Close")))}}]),t}(React.Component);a.default=f,f.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./loading_screen.jsx":53,"./member_list.jsx":55,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],30:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/async_client.jsx"),o=e("../stores/socket_store.jsx"),c=e("../stores/channel_store.jsx"),u=e("../stores/post_store.jsx"),d=e("../stores/user_store.jsx"),h=e("../utils/utils.jsx"),m=e("../utils/constants.jsx"),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.intervalId=null,this.onSocketChange=this.onSocketChange.bind(this),this.state={}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){l.getPosts(c.getCurrentId()),l.getChannels(!0,!0),l.getChannelExtraInfo(!0),l.findTeams(),l.getMyTeam(),setTimeout(function(){return l.getStatuses()},3e3),u.clearPendingPosts(),this.intervalId=setInterval(function(){return l.getStatuses()},3e4);var e=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);e&&$("body").addClass("ios"),window.isActive=!0,$(window).on("focus",function(){l.updateLastViewedAt(),window.isActive=!0}),$(window).on("blur",function(){window.isActive=!1}),o.addChangeListener(this.onSocketChange);var t=d.getCurrentUser();$.isPlainObject(t.theme_props)&&!$.isEmptyObject(t.theme_props)?h.applyTheme(t.theme_props):h.applyTheme(m.THEMES.default),$("body").on("mouseenter mouseleave",".post",function(e){"mouseenter"===e.type?($(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--after"),$(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--before")):($(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--after"),$(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--before"))}),$("body").on("mouseenter mouseleave",".post.post--comment.same--root",function(e){"mouseenter"===e.type?($(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--comment"),$(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--comment")):($(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--comment"),$(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--comment"))}),$(window).on("keydown.preventBackspace",function(e){8!==e.which||$(e.target).is("input, textarea")||e.preventDefault()})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId),$(window).off("focus"),$(window).off("blur"),o.removeChangeListener(this.onSocketChange),$("body").off("click.userpopover"),$("body").off("mouseenter mouseleave",".post"),$("body").off("mouseenter mouseleave",".post.post--comment.same--root"),$(".modal").off("show.bs.modal"),$(window).off("keydown.preventBackspace")}},{key:"onSocketChange",value:function(e){e&&e.user_id&&e.user_id!==d.getCurrentId()&&d.setStatus(e.user_id,"online")}},{key:"render",value:function(){return React.createElement("div",null)}}]),t}(React.Component);a.default=p,t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../stores/socket_store.jsx":282,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],31:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./member_list.jsx"),o=e("./channel_invite_modal.jsx"),c=e("../stores/user_store.jsx"),u=e("../stores/channel_store.jsx"),d=e("../utils/async_client.jsx"),h=e("../utils/client.jsx"),m=e("../utils/utils.jsx"),p=ReactBootstrap.Modal,f=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getStateFromStores=this.getStateFromStores.bind(this),this.onChange=this.onChange.bind(this),this.handleRemove=this.handleRemove.bind(this);var a=this.getStateFromStores();a.showInviteModal=!1,this.state=a}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){function e(e,t){return e.username<t.username?-1:e.username>t.username?1:0}var t=c.getActiveOnlyProfiles(),a=u.getCurrentExtraInfo().members,s=[];for(var n in t)if(t.hasOwnProperty(n)){for(var r=!1,i=0;i<a.length;i++)if(a[i].id===n){r=!0;break}r||s.push(t[n])}a.sort(e),s.sort(e);var l=u.getCurrent(),o="";return l&&(o=l.display_name),{nonmemberList:s,memberList:a,channelName:o}}},{key:"onShow",value:function(){$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillReceiveProps",value:function(e){!this.props.show&&e.show?(u.addExtraInfoChangeListener(this.onChange),u.addChangeListener(this.onChange)):this.props.show&&!e.show&&(u.removeExtraInfoChangeListener(this.onChange),u.removeChangeListener(this.onChange))}},{key:"onChange",value:function(){var e=this.getStateFromStores();m.areStatesEqual(this.state,e)||this.setState(e)}},{key:"handleRemove",value:function(e){for(var t=this,a=this.state.memberList,s=!1,n=0;n<a.length;n++)if(a[n].id===e){s=!0;break}if(s){var r={};r.user_id=e,h.removeChannelMember(u.getCurrentId(),r,function(){for(var s=void 0,n=0;n<a.length;n++)if(e===a[n].id){s=a[n],a.splice(n,1);break}var r=t.state.nonmemberList;s&&r.push(s),t.setState({memberList:a,nonmemberList:r}),d.getChannelExtraInfo(!0)},function(e){t.setState({inviteError:e.message})})}}},{key:"render",value:function(){var e=this,t=1e3;m.windowHeight()<=1200&&(t=m.windowHeight()-300);var a=u.getCurrentMember(),s=!1;return a&&(s=m.isAdmin(a.roles)||m.isAdmin(c.getCurrentUser().roles)),React.createElement("div",null,React.createElement(p,{dialogClassName:"more-modal",show:this.props.show,onHide:this.props.onModalDismissed},React.createElement(p.Header,{closeButton:!0},React.createElement(p.Title,null,React.createElement("span",{className:"name"},this.state.channelName)," Members"),React.createElement("a",{className:"btn btn-md btn-primary",href:"#",onClick:function(){e.setState({showInviteModal:!0}),e.props.onModalDismissed()}},React.createElement("i",{className:"glyphicon glyphicon-envelope"})," Add New Members")),React.createElement(p.Body,{ref:"modalBody",style:{maxHeight:t}},React.createElement("div",{className:"team-member-list"},React.createElement(l,{memberList:this.state.memberList,isAdmin:s,handleRemove:this.handleRemove}))),React.createElement(p.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onModalDismissed},"Close"))),React.createElement(o,{show:this.state.showInviteModal,onModalDismissed:function(){return e.setState({showInviteModal:!1})}}))}}]),t}(React.Component);a.default=f,f.defaultProps={show:!1},f.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./channel_invite_modal.jsx":29,"./member_list.jsx":55,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],32:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./setting_item_min.jsx"),o=e("./setting_item_max.jsx"),c=e("../utils/utils.jsx"),u=e("../utils/client.jsx"),d=e("../stores/user_store.jsx"),h=e("../stores/channel_store.jsx"),m=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onListenerChange=this.onListenerChange.bind(this),this.updateSection=this.updateSection.bind(this),this.handleSubmitNotifyLevel=this.handleSubmitNotifyLevel.bind(this),this.handleUpdateNotifyLevel=this.handleUpdateNotifyLevel.bind(this),this.createNotifyLevelSection=this.createNotifyLevelSection.bind(this),this.handleSubmitMarkUnreadLevel=this.handleSubmitMarkUnreadLevel.bind(this),this.handleUpdateMarkUnreadLevel=this.handleUpdateMarkUnreadLevel.bind(this),this.createMarkUnreadLevelSection=this.createMarkUnreadLevelSection.bind(this),this.onShow=this.onShow.bind(this),this.state={notifyLevel:"",markUnreadLevel:"",title:"",channelId:"",activeSection:""}}return n(t,e),r(t,[{key:"onShow",value:function(e){var t=e.relatedTarget,a=t.getAttribute("data-channelid"),s=h.getMember(a),n=s.notify_props.desktop,r=s.notify_props.mark_unread;this.setState({notifyLevel:n,markUnreadLevel:r,title:t.getAttribute("data-title"),channelId:a})}},{key:"componentDidMount",value:function(){h.addChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.onShow)}},{key:"componentWillUnmount",value:function(){h.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){if(this.state.channelId){var e=h.getMember(this.state.channelId),t=e.notify_props.desktop,a=e.notify_props.mark_unread,s=this.state;s.notifyLevel=t,s.markUnreadLevel=a,c.areStatesEqual(this.state,s)||this.setState(s)}}},{key:"updateSection",value:function(e){this.setState({activeSection:e})}},{key:"handleSubmitNotifyLevel",value:function(){var e=this,t=this.state.channelId,a=this.state.notifyLevel;if(h.getMember(t).notify_props.desktop===a)return void this.updateSection("");var s={};s.channel_id=t,s.user_id=d.getCurrentId(),s.desktop=a,u.updateNotifyProps(s,function(){var s=h.getMember(t);s.notify_props.desktop=a,h.setChannelMember(s),e.updateSection("")},function(t){e.setState({serverError:t.message})})}},{key:"handleUpdateNotifyLevel",value:function(e){this.setState({notifyLevel:e}),ReactDOM.findDOMNode(this.refs.modal).focus()}},{key:"createNotifyLevelSection",value:function(e){var t,a=d.getCurrentUser(),s=a.notify_props.desktop,n=void 0;if(n="all"===s?"For all activity":"mention"===s?"Only for mentions":"Never","desktop"===this.state.activeSection){var r=[!1,!1,!1,!1];"default"===this.state.notifyLevel?r[0]=!0:"all"===this.state.notifyLevel?r[1]=!0:"mention"===this.state.notifyLevel?r[2]=!0:r[3]=!0;var i=[];i.push(React.createElement("div",{key:"channel-notification-level-radio"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[0],onChange:this.handleUpdateNotifyLevel.bind(this,"default")}),"Global default ("+n+")"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[1],onChange:this.handleUpdateNotifyLevel.bind(this,"all")}),"For all activity"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[2],onChange:this.handleUpdateNotifyLevel.bind(this,"mention")}),"Only for mentions"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[3],onChange:this.handleUpdateNotifyLevel.bind(this,"none")}),"Never")))),t=function(e){this.updateSection(""),this.onListenerChange(),e.preventDefault()}.bind(this);var c=React.createElement("span",null,'Selecting an option other than "Default" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.');return React.createElement(o,{title:"Send desktop notifications",inputs:i,submit:this.handleSubmitNotifyLevel,server_error:e,updateSection:t,extraInfo:c})}var u;return u="default"===this.state.notifyLevel?"Global default ("+n+")":"mention"===this.state.notifyLevel?"Only for mentions":"all"===this.state.notifyLevel?"For all activity":"Never",t=function(e){this.updateSection("desktop"),e.preventDefault()}.bind(this),React.createElement(l,{title:"Send desktop notifications",describe:u,updateSection:t})}},{key:"handleSubmitMarkUnreadLevel",value:function(){var e=this,t=this.state.channelId,a=this.state.markUnreadLevel;if(h.getMember(t).notify_props.mark_unread===a)return void this.updateSection("");var s={channel_id:t,user_id:d.getCurrentId(),mark_unread:a};u.updateNotifyProps(s,function(){var s=h.getMember(t);s.notify_props.mark_unread=a,h.setChannelMember(s),e.updateSection("")},function(t){e.setState({serverError:t.message})})}},{key:"handleUpdateMarkUnreadLevel",value:function(e){this.setState({markUnreadLevel:e}),ReactDOM.findDOMNode(this.refs.modal).focus()}},{key:"createMarkUnreadLevelSection",value:function(e){var t=void 0;if("markUnreadLevel"===this.state.activeSection){var a=[React.createElement("div",{key:"channel-notification-unread-radio"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:"all"===this.state.markUnreadLevel,onChange:this.handleUpdateMarkUnreadLevel.bind(this,"all")}),"For all unread messages"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:"mention"===this.state.markUnreadLevel,onChange:this.handleUpdateMarkUnreadLevel.bind(this,"mention")}),"Only for mentions"),React.createElement("br",null)))],s=function(e){this.updateSection(""),this.onListenerChange(),e.preventDefault()}.bind(this),n=React.createElement("span",null,'The channel name is bolded in the sidebar when there are unread messages. Selecting "Only for mentions" will bold the channel only when you are mentioned.');t=React.createElement(o,{title:"Mark Channel Unread",inputs:a,submit:this.handleSubmitMarkUnreadLevel,server_error:e,updateSection:s,extraInfo:n})}else{var r=void 0;r=this.state.markUnreadLevel&&"all"!==this.state.markUnreadLevel?"Only for mentions":"For all unread messages";var s=function(e){this.updateSection("markUnreadLevel"),e.preventDefault()}.bind(this);t=React.createElement(l,{title:"Mark Channel Unread",describe:r,updateSection:s})}return t}},{key:"render",value:function(){var e=null;return this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement("div",{className:"modal fade",id:"channel_notifications",ref:"modal",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog settings-modal"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h4",{className:"modal-title"},"Notification Preferences for ",React.createElement("span",{className:"name"},this.state.title))),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"settings-table"},React.createElement("div",{className:"settings-content"},React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("br",null),React.createElement("div",{className:"divider-dark first"}),this.createNotifyLevelSection(e),React.createElement("div",{className:"divider-light"}),this.createMarkUnreadLevelSection(e),React.createElement("div",{className:"divider-dark"})))),e))))}}]),t}(React.Component);a.default=m,t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./setting_item_max.jsx":96,"./setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],33:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../components/center_panel.jsx"),o=e("../components/sidebar.jsx"),c=e("../components/sidebar_right.jsx"),u=e("../components/sidebar_right_menu.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return n(t,e),r(t,[{key:"render",value:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"sidebar--right",id:"sidebar-right"},React.createElement(c,null)),React.createElement("div",{className:"sidebar--menu",id:"sidebar-menu"},React.createElement(u,null)),React.createElement("div",{className:"sidebar--left",id:"sidebar-left"},React.createElement(o,null)),React.createElement(l,null))}}]),t}(React.Component);a.default=d,d.defaultProps={},d.propTypes={},t.exports=a.default},{"../components/center_panel.jsx":25,"../components/sidebar.jsx":101,"../components/sidebar_right.jsx":103,"../components/sidebar_right_menu.jsx":104,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],34:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.addFirstCommand=this.addFirstCommand.bind(this),this.isEmpty=this.isEmpty.bind(this),this.getSuggestedCommands=this.getSuggestedCommands.bind(this),this.state={suggestions:[],cmd:""}}return n(t,e),r(t,[{key:"handleClick",value:function(e){this.props.addCommand(this.state.suggestions[e].suggestion),this.setState({suggestions:[],cmd:""})}},{key:"addFirstCommand",value:function(){0!==this.state.suggestions.length&&this.handleClick(0)}},{key:"isEmpty",value:function(){return 0===this.state.suggestions.length}},{key:"getSuggestedCommands",value:function(e){return e&&"/"===e.charAt(0)?void l.executeCommand(this.props.channelId,e,!0,function(t){1===t.suggestions.length&&t.suggestions[0].suggestion===e&&(t.suggestions=[]),this.setState({suggestions:t.suggestions,cmd:e})}.bind(this),function(){}):void this.setState({suggestions:[],cmd:""})}},{key:"render",value:function(){if(0===this.state.suggestions.length)return React.createElement("div",null);for(var e=[],t=0;t<this.state.suggestions.length;t++)this.state.suggestions[t].suggestion!==this.state.cmd&&e.push(React.createElement("div",{key:t,className:"command-name",onClick:this.handleClick.bind(this,t)},React.createElement("div",{className:"command__title"},React.createElement("strong",null,this.state.suggestions[t].suggestion)),React.createElement("div",{className:"command__desc"},this.state.suggestions[t].description)));return React.createElement("div",{ref:"mentionlist",className:"command-box",style:{height:56*this.state.suggestions.length+2}},e)}}]),t}(React.Component);a.default=o,o.defaultProps={channelId:null},o.propTypes={addCommand:React.PropTypes.func,channelId:React.PropTypes.string},t.exports=a.default},{"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],35:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=ReactBootstrap.Modal,o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleConfirm=this.handleConfirm.bind(this)}return n(t,e),r(t,[{key:"handleConfirm",value:function(){this.props.onConfirm()}},{key:"render",value:function(){return React.createElement(l,{className:"modal-confirm",show:this.props.show,onHide:this.props.onCancel},React.createElement(l.Header,{closeButton:!1},React.createElement(l.Title,null,this.props.title)),React.createElement(l.Body,null,this.props.message),React.createElement(l.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onCancel},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.props.onConfirm},this.props.confirm_button)))}}]),t}(React.Component);a.default=o,o.defaultProps={title:"",message:"",confirm_button:""},o.propTypes={show:React.PropTypes.bool.isRequired,title:React.PropTypes.string,message:React.PropTypes.string,confirm_button:React.PropTypes.string,onConfirm:React.PropTypes.func.isRequired,onCancel:React.PropTypes.func.isRequired},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],36:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("../utils/client.jsx"),c=e("../utils/async_client.jsx"),u=e("../stores/socket_store.jsx"),d=e("../stores/channel_store.jsx"),h=e("../stores/user_store.jsx"),m=e("../stores/post_store.jsx"),p=e("../stores/preference_store.jsx"),f=e("./textbox.jsx"),g=e("./msg_typing.jsx"),b=e("./file_upload.jsx"),v=e("./file_preview.jsx"),E=e("../utils/utils.jsx"),_=e("../utils/constants.jsx"),y=_.ActionTypes,R=_.KeyCodes,C=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.lastTime=0,this.handleSubmit=this.handleSubmit.bind(this),this.commentMsgKeyPress=this.commentMsgKeyPress.bind(this),this.handleUserInput=this.handleUserInput.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleUploadStart=this.handleUploadStart.bind(this),this.handleFileUploadComplete=this.handleFileUploadComplete.bind(this),this.handleUploadError=this.handleUploadError.bind(this),this.handleTextDrop=this.handleTextDrop.bind(this),this.removePreview=this.removePreview.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.getFileCount=this.getFileCount.bind(this),this.handleResize=this.handleResize.bind(this),
this.onPreferenceChange=this.onPreferenceChange.bind(this),m.clearCommentDraftUploads();var a=m.getCommentDraft(this.props.rootId);this.state={messageText:a.message,uploadsInProgress:a.uploadsInProgress,previews:a.previews,submitting:!1,windowWidth:E.windowWidth(),ctrlSend:p.getPreference(_.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){p.addChangeListener(this.onPreferenceChange),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){p.removeChangeListener(this.onPreferenceChange),window.removeEventListener("resize",this.handleResize)}},{key:"onPreferenceChange",value:function(){this.setState({ctrlSend:p.getPreference(_.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value})}},{key:"handleResize",value:function(){this.setState({windowWidth:E.windowWidth()})}},{key:"componentDidUpdate",value:function(e,t){t.uploadsInProgress<this.state.uploadsInProgress&&($(".post-right__scroll").scrollTop($(".post-right__scroll")[0].scrollHeight),this.state.windowWidth>768&&$(".post-right__scroll").perfectScrollbar("update"))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!(this.state.uploadsInProgress.length>0||this.state.submitting)){var t={};if(t.filenames=[],t.message=this.state.messageText,0!==t.message.trim().length||0!==this.state.previews.length){if(t.message.length>_.CHARACTER_LIMIT)return void this.setState({postError:"Comment length must be less than "+_.CHARACTER_LIMIT+" characters."});var a=h.getCurrentId();t.channel_id=this.props.channelId,t.root_id=this.props.rootId,t.parent_id=this.props.rootId,t.filenames=this.state.previews;var s=E.getTimestamp();t.pending_post_id=a+":"+s,t.user_id=a,t.create_at=s,m.storePendingPost(t),m.storeCommentDraft(this.props.rootId,null),o.createPost(t,d.getCurrent(),function(e){c.getPosts(this.props.channelId);var t=d.get(this.props.channelId),a=d.getMember(this.props.channelId);a.msg_count=t.total_msg_count,a.last_viewed_at=Date.now(),d.setChannelMember(a),l.handleServerAction({type:y.RECIEVED_POST,post:e})}.bind(this),function(e){var a={};"Invalid RootId parameter"===e.message?(m.removePendingPost(t.channel_id,t.pending_post_id),$("#post_deleted").length>0&&$("#post_deleted").modal("show")):(t.state=_.POST_FAILED,m.updatePendingPost(t)),a.submitting=!1,this.setState(a)}.bind(this)),this.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null})}}}},{key:"commentMsgKeyPress",value:function(e){("true"===this.state.ctrlSend&&e.ctrlKey||"false"===this.state.ctrlSend)&&(e.which!==R.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),ReactDOM.findDOMNode(this.refs.textbox).blur(),this.handleSubmit(e)));var t=Date.now();t-this.lastTime>_.UPDATE_TYPING_MS&&(u.sendMessage({channel_id:this.props.channelId,action:"typing",props:{parent_id:this.props.rootId}}),this.lastTime=t)}},{key:"handleUserInput",value:function(e){var t=m.getCommentDraft(this.props.rootId);t.message=e,m.storeCommentDraft(this.props.rootId,t),$(".post-right__scroll").scrollTop($(".post-right__scroll")[0].scrollHeight),$(".post-right__scroll").perfectScrollbar("update"),this.setState({messageText:e})}},{key:"handleKeyDown",value:function(e){if("true"===this.state.ctrlSend&&e.keyCode===R.ENTER&&e.ctrlKey===!0)return void this.commentMsgKeyPress(e);if(e.keyCode===R.UP&&""===this.state.messageText){e.preventDefault();var t=d.getCurrentId(),a=m.getCurrentUsersLatestPost(t,this.props.rootId);if(!a)return;l.handleViewAction({type:y.RECIEVED_EDIT_POST,refocusId:"#reply_textbox",title:"Comment",message:a.message,postId:a.id,channelId:a.channel_id})}}},{key:"handleUploadStart",value:function(e){var t=m.getCommentDraft(this.props.rootId);t.uploadsInProgress=t.uploadsInProgress.concat(e),m.storeCommentDraft(this.props.rootId,t),this.setState({uploadsInProgress:t.uploadsInProgress})}},{key:"handleFileUploadComplete",value:function(e,t){for(var a=m.getCommentDraft(this.props.rootId),s=0;s<t.length;s++){var n=a.uploadsInProgress.indexOf(t[s]);-1!==n&&a.uploadsInProgress.splice(n,1)}a.previews=a.previews.concat(e),m.storeCommentDraft(this.props.rootId,a),this.setState({uploadsInProgress:a.uploadsInProgress,previews:a.previews})}},{key:"handleUploadError",value:function(e,t){if(-1===t)this.setState({serverError:e});else{var a=m.getCommentDraft(this.props.rootId),s=a.uploadsInProgress.indexOf(t);-1!==s&&a.uploadsInProgress.splice(s,1),m.storeCommentDraft(this.props.rootId,a),this.setState({uploadsInProgress:a.uploadsInProgress,serverError:e})}}},{key:"handleTextDrop",value:function(e){var t=this.state.messageText+e;this.handleUserInput(t),E.setCaretPosition(ReactDOM.findDOMNode(this.refs.textbox.refs.message),t.length)}},{key:"removePreview",value:function(e){var t=this.state.previews,a=this.state.uploadsInProgress,s=t.indexOf(e);-1===s?(s=a.indexOf(e),-1!==s&&(a.splice(s,1),this.refs.fileUpload.cancelUpload(e))):t.splice(s,1);var n=m.getCommentDraft(this.props.rootId);n.previews=t,n.uploadsInProgress=a,m.storeCommentDraft(this.props.rootId,n),this.setState({previews:t,uploadsInProgress:a})}},{key:"componentWillReceiveProps",value:function(e){if(e.rootId!==this.props.rootId){var t=m.getCommentDraft(e.rootId);this.setState({messageText:t.message,uploadsInProgress:t.uploadsInProgress,previews:t.previews})}}},{key:"getFileCount",value:function(){return this.state.previews.length+this.state.uploadsInProgress.length}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t=null;this.state.postError&&(t=React.createElement("label",{className:"control-label"},this.state.postError));var a=null;(this.state.previews.length>0||this.state.uploadsInProgress.length>0)&&(a=React.createElement(v,{files:this.state.previews,onRemove:this.removePreview,uploadsInProgress:this.state.uploadsInProgress}));var s="post-create-footer";t&&(s+=" has-error");var n=null;return this.state.uploadsInProgress.length>0&&(n=React.createElement("span",{className:"pull-right post-right-comments-upload-in-progress"},1===this.state.uploadsInProgress.length?"File uploading":"Files uploading")),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"post-create"},React.createElement("div",{id:this.props.rootId,className:"post-create-body comment-create-body"},React.createElement("div",{className:"post-body__cell"},React.createElement(f,{onUserInput:this.handleUserInput,onKeyPress:this.commentMsgKeyPress,onKeyDown:this.handleKeyDown,messageText:this.state.messageText,createMessage:"Add a comment...",initialText:"",id:"reply_textbox",ref:"textbox"}),React.createElement(b,{ref:"fileUpload",getFileCount:this.getFileCount,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onTextDrop:this.handleTextDrop,postType:"comment",channelId:this.props.channelId}))),React.createElement(g,{channelId:this.props.channelId,parentId:this.props.rootId}),React.createElement("div",{className:s},React.createElement("input",{type:"button",className:"btn btn-primary comment-btn pull-right",value:"Add Comment",onClick:this.handleSubmit}),n,t,e)),a)}}]),t}(React.Component);a.default=C,C.propTypes={channelId:React.PropTypes.string.isRequired,rootId:React.PropTypes.string.isRequired},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../stores/preference_store.jsx":280,"../stores/socket_store.jsx":282,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./file_preview.jsx":47,"./file_upload.jsx":48,"./msg_typing.jsx":64,"./textbox.jsx":124,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],37:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/object/assign").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./msg_typing.jsx"),c=e("./textbox.jsx"),u=e("./file_upload.jsx"),d=e("./file_preview.jsx"),h=e("./tutorial/tutorial_tip.jsx"),m=e("../dispatcher/app_dispatcher.jsx"),p=e("../utils/client.jsx"),f=e("../utils/async_client.jsx"),g=e("../utils/utils.jsx"),b=e("../stores/channel_store.jsx"),v=e("../stores/post_store.jsx"),E=e("../stores/user_store.jsx"),_=e("../stores/preference_store.jsx"),y=e("../stores/socket_store.jsx"),R=e("../utils/constants.jsx"),C=R.Preferences,N=R.TutorialSteps,k=R.ActionTypes,S=R.KeyCodes,w=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.lastTime=0,this.getCurrentDraft=this.getCurrentDraft.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.postMsgKeyPress=this.postMsgKeyPress.bind(this),this.handleUserInput=this.handleUserInput.bind(this),this.resizePostHolder=this.resizePostHolder.bind(this),this.handleUploadStart=this.handleUploadStart.bind(this),this.handleFileUploadComplete=this.handleFileUploadComplete.bind(this),this.handleUploadError=this.handleUploadError.bind(this),this.handleTextDrop=this.handleTextDrop.bind(this),this.removePreview=this.removePreview.bind(this),this.onChange=this.onChange.bind(this),this.onPreferenceChange=this.onPreferenceChange.bind(this),this.getFileCount=this.getFileCount.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleResize=this.handleResize.bind(this),this.sendMessage=this.sendMessage.bind(this),v.clearDraftUploads();var a=this.getCurrentDraft(),n=_.getPreference(C.TUTORIAL_STEP,E.getCurrentId(),{value:"999"});this.state={channelId:b.getCurrentId(),messageText:a.messageText,uploadsInProgress:a.uploadsInProgress,previews:a.previews,submitting:!1,initialText:a.messageText,windowWidth:g.windowWidth(),windowHeight:g.windowHeight(),ctrlSend:_.getPreference(R.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value,showTutorialTip:parseInt(n.value,10)===N.POST_POPOVER},_.addChangeListener(this.onPreferenceChange)}return n(t,e),r(t,[{key:"handleResize",value:function(){this.setState({windowWidth:g.windowWidth(),windowHeight:g.windowHeight()})}},{key:"componentDidUpdate",value:function(e,t){return t.previews.length!==this.state.previews.length?void this.resizePostHolder():t.uploadsInProgress!==this.state.uploadsInProgress?void this.resizePostHolder():t.windowWidth!==this.state.windowWidth||t.windowHeight!==this.state.windowHeight?void this.resizePostHolder():void 0}},{key:"getCurrentDraft",value:function(){var e=v.getCurrentDraft(),t={previews:[],messageText:"",uploadsInProgress:[]};return e&&(e.message&&(t.messageText=e.message),e.previews&&(t.previews=e.previews),e.uploadsInProgress&&(t.uploadsInProgress=e.uploadsInProgress)),t}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!(this.state.uploadsInProgress.length>0||this.state.submitting)){var a={};if(a.filenames=[],a.message=this.state.messageText,0!==a.message.trim().length||0!==this.state.previews.length){if(a.message.length>R.CHARACTER_LIMIT)return void this.setState({postError:"Post length must be less than "+R.CHARACTER_LIMIT+" characters."});this.setState({submitting:!0,serverError:null}),0===a.message.indexOf("/")?p.executeCommand(this.state.channelId,a.message,!1,function(e){return"not implemented"===e.response?void t.sendMessage(a):(v.storeDraft(e.channel_id,null),t.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null}),void(e.goto_location.length>0&&(window.location.href=e.goto_location)))},function(e){if(e.sendMessage)t.sendMessage(a);else{var s={};s.serverError=e.message,s.submitting=!1,t.setState(s)}}):this.sendMessage(a)}}}},{key:"sendMessage",value:function(e){var t=this;e.channel_id=this.state.channelId,e.filenames=this.state.previews;var a=g.getTimestamp(),s=E.getCurrentId();e.pending_post_id=s+":"+a,e.user_id=s,e.create_at=a,e.root_id=this.state.rootId,e.parent_id=this.state.parentId;var n=b.get(this.state.channelId);v.storePendingPost(e),v.storeDraft(n.id,null),v.jumpPostsViewToBottom(),this.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null}),p.createPost(e,n,function(e){f.getPosts();var t=b.getMember(n.id);t.msg_count=n.total_msg_count,t.last_viewed_at=Date.now(),b.setChannelMember(t),m.handleServerAction({type:k.RECIEVED_POST,post:e})},function(a){var s={};"Invalid RootId parameter"===a.message?($("#post_deleted").length>0&&$("#post_deleted").modal("show"),v.removePendingPost(e.pending_post_id)):(e.state=R.POST_FAILED,v.updatePendingPost(e)),s.submitting=!1,t.setState(s)})}},{key:"postMsgKeyPress",value:function(e){("true"===this.state.ctrlSend&&e.ctrlKey||"false"===this.state.ctrlSend)&&(e.which!==S.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),ReactDOM.findDOMNode(this.refs.textbox).blur(),this.handleSubmit(e)));var t=Date.now();t-this.lastTime>R.UPDATE_TYPING_MS&&(y.sendMessage({channel_id:this.state.channelId,action:"typing",props:{parent_id:""},state:{}}),this.lastTime=t)}},{key:"handleUserInput",value:function(e){this.setState({messageText:e});var t=v.getCurrentDraft();t.message=e,v.storeCurrentDraft(t)}},{key:"resizePostHolder",value:function(){this.state.windowWidth>960&&$("#post_textbox").focus()}},{key:"handleUploadStart",value:function(e,t){var a=v.getDraft(t);a.uploadsInProgress=a.uploadsInProgress.concat(e),v.storeDraft(t,a),this.setState({uploadsInProgress:a.uploadsInProgress})}},{key:"handleFileUploadComplete",value:function(e,t,a){for(var s=v.getDraft(a),n=0;n<t.length;n++){var r=s.uploadsInProgress.indexOf(t[n]);-1!==r&&s.uploadsInProgress.splice(r,1)}s.previews=s.previews.concat(e),v.storeDraft(a,s),this.setState({uploadsInProgress:s.uploadsInProgress,previews:s.previews})}},{key:"handleUploadError",value:function(e,t){var a=e;if(a&&"string"!=typeof a&&(a=e.message),-1===t)this.setState({serverError:a});else{var s=v.getDraft(this.state.channelId),n=s.uploadsInProgress.indexOf(t);-1!==n&&s.uploadsInProgress.splice(n,1),v.storeDraft(this.state.channelId,s),this.setState({uploadsInProgress:s.uploadsInProgress,serverError:a})}}},{key:"handleTextDrop",value:function(e){var t=this.state.messageText+e;this.handleUserInput(t),g.setCaretPosition(ReactDOM.findDOMNode(this.refs.textbox.refs.message),t.length)}},{key:"removePreview",value:function(e){var t=l([],this.state.previews),a=this.state.uploadsInProgress,s=t.indexOf(e);-1===s?(s=a.indexOf(e),-1!==s&&(a.splice(s,1),this.refs.fileUpload.cancelUpload(e))):t.splice(s,1);var n=v.getCurrentDraft();n.previews=t,n.uploadsInProgress=a,v.storeCurrentDraft(n),this.setState({previews:t,uploadsInProgress:a})}},{key:"componentDidMount",value:function(){b.addChangeListener(this.onChange),_.addChangeListener(this.onPreferenceChange),this.resizePostHolder(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){b.removeChangeListener(this.onChange),_.removeChangeListener(this.onPreferenceChange),window.removeEventListener("resize",this.handleResize)}},{key:"onChange",value:function(){var e=b.getCurrentId();if(this.state.channelId!==e){var t=this.getCurrentDraft();this.setState({channelId:e,messageText:t.messageText,initialText:t.messageText,submitting:!1,serverError:null,postError:null,previews:t.previews,uploadsInProgress:t.uploadsInProgress})}}},{key:"onPreferenceChange",value:function(){var e=_.getPreference(C.TUTORIAL_STEP,E.getCurrentId(),{value:"999"});this.setState({showTutorialTip:parseInt(e.value,10)===N.POST_POPOVER,ctrlSend:_.getPreference(R.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value})}},{key:"getFileCount",value:function(e){if(e===this.state.channelId)return this.state.previews.length+this.state.uploadsInProgress.length;var t=v.getDraft(e);return t.previews.length+t.uploadsInProgress.length}},{key:"handleKeyDown",value:function(e){if("true"===this.state.ctrlSend&&e.keyCode===S.ENTER&&e.ctrlKey===!0)return void this.postMsgKeyPress(e);if(e.keyCode===S.UP&&""===this.state.messageText){e.preventDefault();var t=b.getCurrentId(),a=v.getCurrentUsersLatestPost(t);if(!a)return;var s=a.root_id&&a.root_id.length>0?"Comment":"Post";m.handleViewAction({type:k.RECIEVED_EDIT_POST,refocusId:"#post_textbox",title:s,message:a.message,postId:a.id,channelId:a.channel_id})}}},{key:"createTutorialTip",value:function(){var e=[];return e.push(React.createElement("div",null,React.createElement("h4",null,"Sending Messages"),React.createElement("p",null,"Type here to write a message."),React.createElement("p",null,"Click the attachment button to upload an image or a file."))),React.createElement(h,{placement:"top",screens:e,overlayClass:"tip-overlay--chat"})}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t=null;this.state.postError&&(t=React.createElement("label",{className:"control-label"},this.state.postError));var a=null;(this.state.previews.length>0||this.state.uploadsInProgress.length>0)&&(a=React.createElement(d,{files:this.state.previews,onRemove:this.removePreview,uploadsInProgress:this.state.uploadsInProgress}));var s="post-create-footer";t&&(s+=" has-error");var n=null;return this.state.showTutorialTip&&(n=this.createTutorialTip()),React.createElement("form",{id:"create_post",ref:"topDiv",role:"form",onSubmit:this.handleSubmit},React.createElement("div",{className:"post-create"},React.createElement("div",{className:"post-create-body"},React.createElement("div",{className:"post-body__cell"},React.createElement(c,{onUserInput:this.handleUserInput,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onHeightChange:this.resizePostHolder,messageText:this.state.messageText,createMessage:"Write a message...",channelId:this.state.channelId,id:"post_textbox",ref:"textbox"}),React.createElement(u,{ref:"fileUpload",getFileCount:this.getFileCount,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onTextDrop:this.handleTextDrop,postType:"post",channelId:""})),React.createElement("a",{className:"send-button theme",onClick:this.handleSubmit},React.createElement("i",{className:"fa fa-paper-plane"})),n),React.createElement("div",{className:s},t,e,a,React.createElement(o,{channelId:this.state.channelId,parentId:""}))))}}]),t}(React.Component);a.default=w,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../stores/preference_store.jsx":280,"../stores/socket_store.jsx":282,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./file_preview.jsx":47,"./file_upload.jsx":48,"./msg_typing.jsx":64,"./textbox.jsx":124,"./tutorial/tutorial_tip.jsx":127,"babel-runtime/core-js/object/assign":152,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],38:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../utils/async_client.jsx"),c=e("../stores/channel_store.jsx"),u=e("../stores/team_store.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleDelete=this.handleDelete.bind(this),this.onShow=this.onShow.bind(this),this.state={title:"",channelId:""}}return n(t,e),r(t,[{key:"handleDelete",value:function(){26===this.state.channelId.length&&l.deleteChannel(this.state.channelId,function(){o.getChannels(!0),window.location.href=u.getCurrentTeamUrl()+"/channels/town-square"},function(e){o.dispatchError(e,"handleDelete")})}},{key:"onShow",value:function(e){var t=$(e.relatedTarget);this.setState({title:t.attr("data-title"),channelId:t.attr("data-channelid")})}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.onShow)}},{key:"render",value:function(){var e=c.getCurrent(),t="channel";return e&&"P"===e.type&&(t="private group"),React.createElement("div",{className:"modal fade",ref:"modal",id:"delete_channel",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Confirm DELETE Channel")),React.createElement("div",{className:"modal-body"},React.createElement("p",null,"Are you sure you wish to delete the ",this.state.title," ",t,"?")),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete},"Delete")))))}}]),t}(React.Component);a.default=d,t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/team_store.jsx":283,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],39:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../stores/post_store.jsx"),c=e("../stores/browser_store.jsx"),u=e("../utils/utils.jsx"),d=e("../utils/async_client.jsx"),h=e("../dispatcher/app_dispatcher.jsx"),m=e("../utils/constants.jsx"),p=m.ActionTypes,f=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleDelete=this.handleDelete.bind(this),this.onListenerChange=this.onListenerChange.bind(this),this.onShow=this.onShow.bind(this),this.state={title:"",postId:"",channelId:"",selectedList:o.getSelectedPost(),comments:0}}return n(t,e),r(t,[{key:"handleDelete",value:function(){l.deletePost(this.state.channelId,this.state.postId,function(){var e=this.state.selectedList;if(e&&e.order&&e.order.length>0){var t=e.posts[e.order[0]];t.id===this.state.postId&&"Post"===this.state.title||t.root_id===this.state.postId?(h.handleServerAction({type:p.RECIEVED_SEARCH,results:null}),h.handleServerAction({type:p.RECIEVED_POST_SELECTED,results:null})):t.id===this.state.postId&&"Comment"===this.state.title&&t.root_id&&t.root_id.length>0&&e.posts[t.root_id]&&(e.order=[t.root_id],delete e.posts[t.id],h.handleServerAction({type:p.RECIEVED_POST_SELECTED,post_list:e}),h.handleServerAction({type:p.RECIEVED_SEARCH,results:null}))}o.removePost(this.state.postId,this.state.channelId),d.getPosts(this.state.channelId)}.bind(this),function(e){d.dispatchError(e,"deletePost")})}},{key:"onShow",value:function(e){var t={};if(c.getItem("edit_state_transfer"))t=c.getItem("edit_state_transfer"),c.removeItem("edit_state_transfer");else{var a=e.relatedTarget;t={title:$(a).attr("data-title"),channelId:$(a).attr("data-channelid"),postId:$(a).attr("data-postid"),comments:$(a).attr("data-comments")}}this.setState(t)}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.onShow),o.addSelectedPostChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){o.removeSelectedPostChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=o.getSelectedPost();u.areStatesEqual(this.state.selectedList,e)||this.setState({selectedList:e})}},{key:"render",value:function(){var e=null;this.state.error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var t="";return this.state.comments>0&&(t="This post has "+this.state.comments+" comment(s) on it."),React.createElement("div",{className:"modal fade",id:"delete_post",ref:"modal",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog modal-push-down"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Confirm ",this.state.title," Delete")),React.createElement("div",{className:"modal-body"},"Are you sure you want to delete the ",this.state.title.toLowerCase(),"?",React.createElement("br",null),React.createElement("br",null),t),e,React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete},"Delete")))))}}]),t}(React.Component);a.default=f,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../stores/post_store.jsx":279,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],40:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../utils/async_client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleEdit=this.handleEdit.bind(this),this.handleUserInput=this.handleUserInput.bind(this),this.handleClose=this.handleClose.bind(this),this.onShow=this.onShow.bind(this),this.handleShown=this.handleShown.bind(this),this.state={header:"",title:"",channelId:"",serverError:""}}return n(t,e),r(t,[{key:"handleEdit",value:function(){var e=this,t={};t.channel_id=this.state.channelId,26===t.channel_id.length&&(t.channel_header=this.state.header.trim(),l.updateChannelHeader(t,function(){e.setState({serverError:""}),o.getChannel(e.state.channelId),$(ReactDOM.findDOMNode(e.refs.modal)).modal("hide")},function(t){"Invalid channel_header parameter"===t.message?e.setState({serverError:"This channel header is too long, please enter a shorter one"}):e.setState({serverError:t.message})}))}},{key:"handleUserInput",value:function(e){this.setState({header:e.target.value})}},{key:"handleClose",value:function(){this.setState({header:"",serverError:""})}},{key:"onShow",value:function(e){var t=e.relatedTarget;this.setState({header:$(t).attr("data-header"),title:$(t).attr("data-title"),channelId:$(t).attr("data-channelid"),serverError:""})}},{key:"handleShown",value:function(){$("#edit_channel #edit_header").focus()}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.onShow),$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",this.handleClose),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",this.handleShown)}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).off("hidden.bs.modal",this.handleClose)}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("br",null),React.createElement("label",{className:"control-label"},this.state.serverError)));var t=React.createElement("h4",{className:"modal-title",ref:"title"},"Edit Header");return this.state.title&&(t=React.createElement("h4",{className:"modal-title",ref:"title"},"Edit Header for ",React.createElement("span",{className:"name"},this.state.title))),React.createElement("div",{className:"modal fade",ref:"modal",id:"edit_channel",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),t),React.createElement("div",{className:"modal-body"},React.createElement("p",null,"Edit the text appearing next to the channel name in the channel header."),React.createElement("textarea",{className:"form-control no-resize",rows:"6",id:"edit_header",maxLength:"1024",value:this.state.header,onChange:this.handleUserInput}),e),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleEdit},"Save")))))}}]),t}(React.Component);a.default=c,t.exports=a.default},{"../utils/async_client.jsx":285,"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],41:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/async_client.jsx"),o=e("../utils/client.jsx"),c=e("../utils/utils.jsx"),u=ReactBootstrap.Modal,d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleHide=this.handleHide.bind(this),this.handleSave=this.handleSave.bind(this),this.state={serverError:""}}return n(t,e),r(t,[{key:"componentDidUpdate",value:function(){this.props.show&&$(ReactDOM.findDOMNode(this.refs.purpose)).focus()}},{key:"handleHide",value:function(){this.setState({serverError:""}),this.props.onModalDismissed&&this.props.onModalDismissed()}},{key:"handleSave",value:function(){var e=this;if(this.props.channel){var t={channel_id:this.props.channel.id,channel_purpose:ReactDOM.findDOMNode(this.refs.purpose).value.trim()};o.updateChannelPurpose(t,function(){l.getChannel(e.props.channel.id),e.handleHide()},function(t){"Invalid channel_purpose parameter"===t.message?e.setState({serverError:"This channel purpose is too long, please enter a shorter one"}):e.setState({serverError:t.message})})}}},{key:"render",value:function(){if(!this.props.show)return null;var e=null;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("br",null),React.createElement("label",{className:"control-label"},this.state.serverError)));var t=React.createElement("span",null,"Edit Purpose");return this.props.channel.display_name&&(t=React.createElement("span",null,"Edit Purpose for ",React.createElement("span",{className:"name"},this.props.channel.display_name))),
React.createElement(u,{className:"modal-edit-channel-purpose",ref:"modal",show:this.props.show,onHide:this.handleHide},React.createElement(u.Header,{closeButton:!0},React.createElement(u.Title,null,t)),React.createElement(u.Body,null,React.createElement("p",null,"Describe how this "+c.getChannelTerm(this.props.channel.channelType)+" should be used."),React.createElement("textarea",{ref:"purpose",className:"form-control no-resize",rows:"6",maxLength:"128",defaultValue:this.props.channel.purpose}),e),React.createElement(u.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleSave},"Save")))}}]),t}(React.Component);a.default=d,d.propTypes={show:React.PropTypes.bool.isRequired,channel:React.PropTypes.object,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],42:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../utils/async_client.jsx"),c=e("./textbox.jsx"),u=e("../stores/browser_store.jsx"),d=e("../stores/post_store.jsx"),h=e("../stores/preference_store.jsx"),m=e("../utils/constants.jsx"),p=m.KeyCodes,f=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.handleEdit=this.handleEdit.bind(this),this.handleEditInput=this.handleEditInput.bind(this),this.handleEditKeyPress=this.handleEditKeyPress.bind(this),this.handleUserInput=this.handleUserInput.bind(this),this.handleEditPostEvent=this.handleEditPostEvent.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.onPreferenceChange=this.onPreferenceChange.bind(this),this.state={editText:"",title:"",post_id:"",channel_id:"",comments:0,refocusId:""}}return n(t,e),r(t,[{key:"handleEdit",value:function(){var e={};if(e.message=this.state.editText.trim(),0===e.message.length){var t=this.state;return delete t.editText,u.setItem("edit_state_transfer",t),$("#edit_post").modal("hide"),void $("#delete_post").modal("show")}e.id=this.state.post_id,e.channel_id=this.state.channel_id,l.updatePost(e,function(){o.getPosts(e.channel_id),window.scrollTo(0,0)},function(e){o.dispatchError(e,"updatePost")}),$("#edit_post").modal("hide")}},{key:"handleEditInput",value:function(e){this.setState({editText:e})}},{key:"handleEditKeyPress",value:function(e){"false"!==this.state.ctrlSend||e.which!==p.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),ReactDOM.findDOMNode(this.refs.editbox).blur(),this.handleEdit(e))}},{key:"handleUserInput",value:function(e){this.setState({editText:e.target.value})}},{key:"handleEditPostEvent",value:function(e){this.setState({editText:e.message||"",title:e.title||"",post_id:e.postId||"",channel_id:e.channelId||"",comments:e.comments||0,refocusId:e.refocusId||""}),$(ReactDOM.findDOMNode(this.refs.modal)).modal("show")}},{key:"handleKeyDown",value:function(e){"true"===this.state.ctrlSend&&e.keyCode===p.ENTER&&e.ctrlKey===!0&&this.handleEdit(e)}},{key:"onPreferenceChange",value:function(){this.setState({ctrlSend:h.getPreference(m.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value})}},{key:"componentDidMount",value:function(){var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",function(){e.setState({editText:"",title:"",channel_id:"",post_id:"",comments:0,refocusId:"",error:""})}),$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",function(t){var a=t.relatedTarget;a&&e.setState({editText:$(a).attr("data-message"),title:$(a).attr("data-title"),channel_id:$(a).attr("data-channelid"),post_id:$(a).attr("data-postid"),comments:$(a).attr("data-comments"),refocusId:$(a).attr("data-refocusid")})}),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",function(){e.refs.editbox.resize(),$("#edit_textbox").get(0).focus()}),$(ReactDOM.findDOMNode(this.refs.modal)).on("hide.bs.modal",function(){""!==e.state.refocusId&&setTimeout(function(){$(e.state.refocusId).get(0).focus()})}),d.addEditPostListener(this.handleEditPostEvent),h.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){d.removeEditPostListner(this.handleEditPostEvent),h.removeChangeListener(this.onPreferenceChange)}},{key:"render",value:function(){var e=React.createElement("div",{className:"form-group"},React.createElement("br",null));return this.state.error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("br",null),React.createElement("label",{className:"control-label"},this.state.error))),React.createElement("div",{className:"modal fade edit-modal",ref:"modal",id:"edit_post",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog modal-push-down"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.handleEditClose},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Edit ",this.state.title)),React.createElement("div",{className:"edit-modal-body modal-body"},React.createElement(c,{onUserInput:this.handleEditInput,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,messageText:this.state.editText,createMessage:"Edit the post...",id:"edit_textbox",ref:"editbox"}),e),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleEdit},"Save")))))}}]),t}(React.Component);a.default=f,t.exports=a.default},{"../stores/browser_store.jsx":275,"../stores/post_store.jsx":279,"../stores/preference_store.jsx":280,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"./textbox.jsx":124,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],43:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleResend=this.handleResend.bind(this),this.state={}}return r(t,e),i(t,[{key:"handleResend",value:function(){var e=window.location.href.replace("&resend_success=true","");window.location.href=e+"&resend=true"}},{key:"render",value:function(){var e="",t="",a="",n="";return"true"===this.props.isVerified?(e=s.window.mm_config.SiteName+" Email Verified",t=React.createElement("p",null,"Your email has been verified! Click ",React.createElement("a",{href:this.props.teamURL+"?email="+this.props.userEmail},"here")," to log in.")):(e=s.window.mm_config.SiteName+": You are almost done",t=React.createElement("p",null,"Please verify your email address. Check your inbox for an email."),a=React.createElement("button",{onClick:this.handleResend,className:"btn btn-primary"},"Resend Email"),this.props.resendSuccess&&(n=React.createElement("div",null,React.createElement("br",null),React.createElement("p",{className:"alert alert-success"},React.createElement("i",{className:"fa fa-check"})," Verification email sent.")))),React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,e),React.createElement("div",null,t,a,n)))}}]),t}(React.Component);a.default=o,o.defaultProps={isVerified:"false",teamURL:"",userEmail:"",resendSuccess:"false"},o.propTypes={isVerified:React.PropTypes.string,teamURL:React.PropTypes.string,userEmail:React.PropTypes.string,resendSuccess:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],44:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/error_store.jsx"),o=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.onErrorChange=this.onErrorChange.bind(this),this.handleClose=this.handleClose.bind(this),this.state=l.getLastError()}return n(t,e),r(t,[{key:"isValidError",value:function(e){return e&&e.message?e.connErrorCount&&e.connErrorCount>=1&&e.connErrorCount<7?!1:!0:!1}},{key:"isConnectionError",value:function(e){return e.connErrorCount&&0!==e.connErrorCount&&e.connErrorCount>7?!0:!1}},{key:"componentDidMount",value:function(){l.addChangeListener(this.onErrorChange)}},{key:"componentWillUnmount",value:function(){l.removeChangeListener(this.onErrorChange)}},{key:"onErrorChange",value:function(){var e=l.getLastError();e?this.setState(e):this.setState({message:null})}},{key:"handleClose",value:function(e){e&&e.preventDefault(),this.setState({message:null})}},{key:"render",value:function(){return this.isValidError(this.state)?React.createElement("div",{className:"error-bar"},React.createElement("span",null,this.state.message),React.createElement("a",{href:"#",className:"error-bar__close",onClick:this.handleClose},"×")):React.createElement("div",null)}}]),t}(React.Component);a.default=o,t.exports=a.default},{"../stores/error_store.jsx":277,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],45:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=e("../utils/constants.jsx"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.loadFiles=this.loadFiles.bind(this),this.playGif=this.playGif.bind(this),this.stopGif=this.stopGif.bind(this),this.addBackgroundImage=this.addBackgroundImage.bind(this),this.canSetState=!1,this.state={fileSize:-1,mime:"",playing:!1,loading:!1,format:""}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){this.loadFiles()}},{key:"componentDidUpdate",value:function(e){this.props.filename!==e.filename&&this.loadFiles()}},{key:"loadFiles",value:function(){this.canSetState=!0;var e=this.props.filename;if(e){var t=this.getFileInfoFromName(e),a=l.getFileType(t.ext);if("image"===a){var s=this;$("<img/>").attr("src",t.path+"_thumb.jpg?"+l.getSessionIndex()).load(function(e,t){return function(){if($(this).remove(),t in s.refs){var a=ReactDOM.findDOMNode(s.refs[t]);$(a).removeClass("post__load"),$(a).addClass("post__image");var n=this.width||$(this).width(),r=this.height||$(this).height();n<c.THUMBNAIL_WIDTH&&r<c.THUMBNAIL_HEIGHT?$(a).addClass("small"):$(a).addClass("normal"),s.addBackgroundImage(t,e)}}}(t.path,e))}}}},{key:"componentWillUnmount",value:function(){this.canSetState=!1}},{key:"shouldComponentUpdate",value:function(e,t){return l.areStatesEqual(e,this.props)&&t.fileSize!==this.state.fileSize&&this.refs.fileSize?(ReactDOM.findDOMNode(this.refs.fileSize).innerHTML=l.fileSizeToString(t.fileSize),!1):!0}},{key:"playGif",value:function(e,t){var a=this,s=new Image,n=l.getFileUrl(t);this.setState({loading:!0}),s.load(n),s.onload=function(){var e={playing:!0,loading:!1};switch(!0){case s.width>s.height:e.format="landscape";break;case s.height>s.width:e.format="portrait";break;default:e.format="quadrat"}a.setState(e),setTimeout(function(){return a.removeBackgroundImage.bind(a)(t)},100)},s.onError=function(){return a.setState({loading:!1})},e.stopPropagation()}},{key:"stopGif",value:function(e,t){this.setState({playing:!1}),this.addBackgroundImage(t),e.stopPropagation()}},{key:"getFileInfoFromName",value:function(e){var t=l.splitFileLocation(e);return-1!==t.path.indexOf("/api/v1/files/get")&&(t.path=t.path.split("/api/v1/files/get")[1]),t.path=l.getWindowLocationOrigin()+"/api/v1/files/get"+t.path,t}},{key:"addBackgroundImage",value:function(e,t){var a=t;if(e in this.refs){t||(a=this.getFileInfoFromName(e).path);var s=ReactDOM.findDOMNode(this.refs[e]),n=new RegExp(" ","g"),r=new RegExp("\\(","g"),i=new RegExp("\\)","g"),o=a.replace(n,"%20").replace(r,"%28").replace(i,"%29");$(s).css("background-image","url("+o+"_thumb.jpg?"+l.getSessionIndex()+")")}}},{key:"removeBackgroundImage",value:function(e){e in this.refs&&$(ReactDOM.findDOMNode(this.refs[e])).css("background-image","initial")}},{key:"render",value:function(){var e=this,t=this.props.filename,a=l.splitFileLocation(t),s=l.getFileUrl(t),n=l.getFileType(a.ext),r="",i="",c="";"image/gif"===this.state.mime&&(r=React.createElement("div",{className:"file-playback-controls play",onClick:function(a){return e.playGif(a,t)}},"►")),this.state.playing&&(i=React.createElement("img",{className:"file__loaded "+this.state.format,src:s}),r=React.createElement("div",{className:"file-playback-controls stop",onClick:function(a){return e.stopGif(a,t)}},"■")),this.state.loading&&(c=React.createElement("img",{className:"spinner file__loading",src:"/static/images/load.gif"}),r="");var u;u="image"===n?this.state.playing?React.createElement("div",{ref:t,className:"post__load",style:{backgroundImage:"url(/static/images/load.gif)"}},r,i):React.createElement("div",{ref:t,className:"post__load",style:{backgroundImage:"url(/static/images/load.gif)"}},c,r,i):React.createElement("div",{className:"file-icon "+l.getIconClassName(n)});var d="";this.state.fileSize<0?o.getFileInfo(t,function(e){this.canSetState&&this.setState({fileSize:parseInt(e.size,10),mime:e.mime})}.bind(this),function(){}):d=l.fileSizeToString(this.state.fileSize);var h,m=decodeURIComponent(l.getFileName(t));return h=m.length>35?m.substring(0,Math.min(35,m.length))+"...":m,React.createElement("div",{className:"post-image__column",key:t},React.createElement("a",{className:"post-image__thumbnail",href:"#",onClick:function(){return e.props.handleImageClick(e.props.index)}},u),React.createElement("div",{className:"post-image__details"},React.createElement("a",{href:s,download:m,"data-toggle":"tooltip",title:"Download "+m,className:"post-image__name"},h),React.createElement("div",null,React.createElement("a",{href:s,download:m,className:"post-image__download"},React.createElement("span",{className:"fa fa-download"})),React.createElement("span",{className:"post-image__type"},a.ext.toUpperCase()),React.createElement("span",{className:"post-image__size"},d))))}}]),t}(React.Component);a.default=u,u.propTypes={filename:React.PropTypes.string.isRequired,index:React.PropTypes.number.isRequired,handleImageClick:React.PropTypes.func},t.exports=a.default},{"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],46:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./view_image.jsx"),o=e("./file_attachment.jsx"),c=e("../utils/constants.jsx"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleImageClick=this.handleImageClick.bind(this),this.state={showPreviewModal:!1,startImgId:0}}return n(t,e),r(t,[{key:"handleImageClick",value:function(e){this.setState({showPreviewModal:!0,startImgId:e})}},{key:"render",value:function(){for(var e=this,t=this.props.filenames,a=[],s=0;s<t.length&&s<c.MAX_DISPLAY_FILES;s++)a.push(React.createElement(o,{key:"file_attachment_"+s,filename:t[s],index:s,handleImageClick:this.handleImageClick}));return React.createElement("div",null,React.createElement("div",{className:"post-image__columns"},a),React.createElement(l,{show:this.state.showPreviewModal,onModalDismissed:function(){return e.setState({showPreviewModal:!1})},channelId:this.props.channelId,userId:this.props.userId,startId:this.state.startImgId,filenames:t}))}}]),t}(React.Component);a.default=u,u.propTypes={filenames:React.PropTypes.arrayOf(React.PropTypes.string).isRequired,channelId:React.PropTypes.string,userId:React.PropTypes.string},t.exports=a.default},{"../utils/constants.jsx":288,"./file_attachment.jsx":45,"./view_image.jsx":145,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],47:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleRemove=this.handleRemove.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleRemove",value:function(e){var t=e.target.parentNode.parentNode;t.hasAttribute("data-filename")?this.props.onRemove(t.getAttribute("data-filename")):t.hasAttribute("data-client-id")&&this.props.onRemove(t.getAttribute("data-client-id"))}},{key:"render",value:function(){var e=[];return this.props.files.forEach(function(t){var a=t,s=a,n=a.split("."),r=n[n.length-1],i=l.getFileType(r);-1!==a.indexOf("/api/v1/files/get")&&(a=a.split("/api/v1/files/get")[1]),a=l.getWindowLocationOrigin()+"/api/v1/files/get"+a+"?"+l.getSessionIndex(),"image"===i?e.push(React.createElement("div",{key:a,className:"preview-div","data-filename":s},React.createElement("img",{className:"preview-img",src:a}),React.createElement("a",{className:"remove-preview",onClick:this.handleRemove},React.createElement("i",{className:"glyphicon glyphicon-remove"})))):e.push(React.createElement("div",{key:a,className:"preview-div custom-file","data-filename":s},React.createElement("div",{className:"file-icon "+l.getIconClassName(i)}),React.createElement("a",{className:"remove-preview",onClick:this.handleRemove},React.createElement("i",{className:"glyphicon glyphicon-remove"}))))}.bind(this)),this.props.uploadsInProgress.forEach(function(t){e.push(React.createElement("div",{key:t,className:"preview-div","data-client-id":t},React.createElement("img",{className:"spinner",src:"/static/images/load.gif"}),React.createElement("a",{className:"remove-preview",onClick:this.handleRemove},React.createElement("i",{className:"glyphicon glyphicon-remove"}))))}.bind(this)),React.createElement("div",{className:"preview-container"},e)}}]),t}(React.Component);a.default=o,o.defaultProps={files:null,uploadsInProgress:null},o.propTypes={onRemove:React.PropTypes.func.isRequired,files:React.PropTypes.array,uploadsInProgress:React.PropTypes.array},t.exports=a.default},{"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],48:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../utils/constants.jsx"),c=e("../stores/channel_store.jsx"),u=e("../utils/utils.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.uploadFiles=this.uploadFiles.bind(this),this.handleChange=this.handleChange.bind(this),this.handleDrop=this.handleDrop.bind(this),this.state={requests:{}}}return n(t,e),r(t,[{key:"fileUploadSuccess",value:function(e,t){this.props.onFileUpload(t.filenames,t.client_ids,e);for(var a=this.state.requests,s=0;s<t.client_ids.length;s++)delete a[t.client_ids[s]];this.setState({requests:a})}},{key:"fileUploadFail",value:function(e,t){this.props.onUploadError(t,e)}},{key:"uploadFiles",value:function(e){this.props.onUploadError(null);for(var t=this.props.channelId||c.getCurrentId(),a=o.MAX_UPLOAD_FILES-this.props.getFileCount(t),s=0,n=[],r=0;r<e.length&&a>s;r++)if(e[r].size>o.MAX_FILE_SIZE)n.push(e[r]);else{var i=u.generateId(),d=new FormData;d.append("channel_id",t),d.append("files",e[r],e[r].name),d.append("client_ids",i);var h=l.uploadFile(d,this.fileUploadSuccess.bind(this,t),this.fileUploadFail.bind(this,i)),m=this.state.requests;m[i]=h,this.setState({requests:m}),this.props.onUploadStart([i],t),s+=1}if(e.length>a)this.props.onUploadError("Uploads limited to "+o.MAX_UPLOAD_FILES+" files maximum. Please use additional posts for more files.");else if(n.length>1){var p=n.map(function(e){return e.name}).join(", ");this.props.onUploadError("Files above "+o.MAX_FILE_SIZE/1e6+"MB could not be uploaded: "+p)}else n.length>0&&this.props.onUploadError("File above "+o.MAX_FILE_SIZE/1e6+"MB could not be uploaded: "+n[0].name)}},{key:"handleChange",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.fileInput));this.uploadFiles(e.prop("files"));try{e[0].value="",e.value&&(e[0].type="text",e[0].type="file")}catch(e){}}},{key:"handleDrop",value:function(e){this.props.onUploadError(null);var t=e.originalEvent.dataTransfer.files;"string"!=typeof t&&t.length?this.uploadFiles(t):this.props.onTextDrop(e.originalEvent.dataTransfer.getData("Text"))}},{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this.refs.input),t=this;"post"===this.props.postType?$(".row.main").dragster({enter:function(){$(".center-file-overlay").removeClass("hidden")},leave:function(){$(".center-file-overlay").addClass("hidden")},drop:function(e,a){$(".center-file-overlay").addClass("hidden"),t.handleDrop(a)}}):"comment"===this.props.postType&&$(".post-right__container").dragster({enter:function(){$(".right-file-overlay").removeClass("hidden")},leave:function(){$(".right-file-overlay").addClass("hidden")},drop:function(e,a){$(".right-file-overlay").addClass("hidden"),t.handleDrop(a)}}),document.addEventListener("paste",function(a){var s=$(e.parentNode.parentNode).find(".custom-textarea")[0];if(s===a.target||$.contains(s,a.target)){t.props.onUploadError(null);var n=a.clipboardData.items,r=0;if(n){for(var i=0;i<n.length;i++)if(-1!==n[i].type.indexOf("image")){var d=n[i].type.split("/")[1].toLowerCase();if(o.IMAGE_TYPES.indexOf(d)<0)continue;r++}var h=Math.min(o.MAX_UPLOAD_FILES-t.props.getFileCount(c.getCurrentId()),r);r>h&&t.props.onUploadError("Uploads limited to "+o.MAX_UPLOAD_FILES+" files maximum. Please use additional posts for more files.");for(var m=0;m<n.length&&h>m;m++)if(-1!==n[m].type.indexOf("image")){var p=n[m].getAsFile(),f=n[m].type.split("/")[1].toLowerCase();if(o.IMAGE_TYPES.indexOf(f)<0)continue;var g=t.props.channelId||c.getCurrentId(),b=u.generateId(),v=new FormData;v.append("channel_id",g);var E,_=new Date;E=_.getHours()<10?"0"+_.getHours():String(_.getHours());var y;y=_.getMinutes()<10?"0"+_.getMinutes():String(_.getMinutes());var R="Image Pasted at "+_.getFullYear()+"-"+_.getMonth()+"-"+_.getDate()+" "+E+"-"+y+"."+f;v.append("files",p,R),v.append("client_ids",b);var C=l.uploadFile(v,t.fileUploadSuccess.bind(t,g),t.fileUploadFail.bind(t,b)),N=t.state.requests;N[b]=C,t.setState({requests:N}),t.props.onUploadStart([b],g)}}}})}},{key:"cancelUpload",value:function(e){var t=this.state.requests,a=t[e];a&&(a.abort(),delete t[e],this.setState({requests:t}))}},{key:"render",value:function(){return React.createElement("span",{ref:"input",className:"btn btn-file"},React.createElement("span",null,React.createElement("i",{className:"glyphicon glyphicon-paperclip"})),React.createElement("input",{ref:"fileInput",type:"file",onChange:this.handleChange,multiple:"true"}))}}]),t}(React.Component);a.default=d,d.propTypes={onUploadError:React.PropTypes.func,getFileCount:React.PropTypes.func,onFileUpload:React.PropTypes.func,onUploadStart:React.PropTypes.func,onTextDrop:React.PropTypes.func,channelId:React.PropTypes.string,postType:React.PropTypes.string},t.exports=a.default},{"../stores/channel_store.jsx":276,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],49:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return n(t,e),r(t,[{key:"render",value:function(){var e="file-overlay hidden";return"right"===this.props.overlayType?e+=" right-file-overlay":"center"===this.props.overlayType&&(e+=" center-file-overlay"),React.createElement("div",{className:e},React.createElement("div",{className:"overlay__indent"},React.createElement("div",{className:"overlay__circle"},React.createElement("img",{className:"overlay__files",src:"/static/images/filesOverlay.png",alt:"Files"}),React.createElement("span",null,React.createElement("i",{className:"fa fa-upload"}),"Drop a file to upload it."),React.createElement("img",{className:"overlay__logo",src:"/static/images/logoWhite.png",width:"100",alt:"Logo"}))))}}]),t}(React.Component);a.default=l,l.propTypes={overlayType:React.PropTypes.string},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],50:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={},this.handleSubmit=this.handleSubmit.bind(this)}return n(t,e),r(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={},a=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();return a&&l.isEmail(a)?(t.email_error="",void o.findTeamsSendEmail(a,function(){t.sent=!0,this.setState(t)}.bind(this),function(e){t.email_error=e.message,this.setState(t)}.bind(this))):(t.email_error="Please enter a valid email address",void this.setState(t))}},{key:"render",value:function(){var e=null,t="form-group";return this.state.email_error&&(e=React.createElement("label",{className:"control-label"},this.state.email_error),t="form-group has-error"),this.state.sent?React.createElement("div",null,React.createElement("h4",null,"Find Your teams"),React.createElement("p",null,"An email was sent with links to any teams to which you are a member.")):React.createElement("div",null,React.createElement("h4",null,"Find Your Team"),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("p",null,"Get an email with links to any teams to which you are a member."),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Email"),React.createElement("div",{className:t},React.createElement("input",{type:"text",ref:"email",className:"form-control",placeholder:"you@domain.com",maxLength:"128",spellCheck:"false"}),e)),React.createElement("button",{className:"btn btn-md btn-primary",type:"submit"},"Send")))}}]),t}(React.Component);a.default=c,t.exports=a.default},{"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],51:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.onShow=this.onShow.bind(this),this.onHide=this.onHide.bind(this),this.state={copiedLink:!1}}return n(t,e),r(t,[{key:"onShow",value:function(e){var t=e.relatedTarget;this.setState({title:$(t).attr("data-title"),value:$(t).attr("data-value")})}},{key:"onHide",value:function(){this.setState({copiedLink:!1})}},{key:"componentDidMount",value:function(){this.refs.modal&&($(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.onShow),$(ReactDOM.findDOMNode(this.refs.modal)).on("hide.bs.modal",this.onHide))}},{key:"handleClick",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.textarea));e.select();try{var t=document.execCommand("copy");t?this.setState({copiedLink:!0}):this.setState({copiedLink:!1})}catch(e){this.setState({copiedLink:!1})}}},{key:"render",value:function(){var e=l.getCurrentUser(),t=null;document.queryCommandSupported("copy")&&(t=React.createElement("button",{"data-copy-btn":"true",type:"button",className:"btn btn-primary pull-left",onClick:this.handleClick,"data-clipboard-text":this.state.value},"Copy Link"));var a=null;return this.state.copiedLink&&(a=React.createElement("p",{className:"alert alert-success copy-link-confirm"},React.createElement("i",{className:"fa fa-check"})," Link copied to clipboard.")),null!=e?React.createElement("div",{className:"modal fade",ref:"modal",id:"get_link",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",id:"myModalLabel"},this.state.title," Link")),React.createElement("div",{className:"modal-body"},React.createElement("p",null,"Send teammates the link below for them to sign-up to this team site.",React.createElement("br",null),React.createElement("br",null)),React.createElement("textarea",{className:"form-control no-resize min-height",readOnly:"true",ref:"textarea",value:this.state.value})),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),t,a)))):React.createElement("div",null)}}]),t}(React.Component);a.default=o,t.exports=a.default},{"../stores/user_store.jsx":284,
"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],52:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/constants.jsx").ActionTypes,u=e("../dispatcher/app_dispatcher.jsx"),d=e("../utils/client.jsx"),h=e("../stores/modal_store.jsx"),m=e("../stores/user_store.jsx"),p=e("../stores/team_store.jsx"),f=e("./confirm_modal.jsx"),g=ReactBootstrap.Modal,b=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleToggle=this.handleToggle.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleHide=this.handleHide.bind(this),this.addInviteFields=this.addInviteFields.bind(this),this.clearFields=this.clearFields.bind(this),this.removeInviteFields=this.removeInviteFields.bind(this),this.state={show:!1,inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{},emailEnabled:"true"===s.window.mm_config.SendEmailNotifications,showConfirmModal:!1}}return r(t,e),i(t,[{key:"componentDidMount",value:function(){h.addModalListener(c.TOGGLE_INVITE_MEMBER_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){h.removeModalListener(c.TOGGLE_INVITE_MEMBER_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e){this.setState({show:e})}},{key:"handleSubmit",value:function(){var e=this;if(this.state.emailEnabled){for(var t=this.state.inviteIds,a=t.length,s=[],n=this.state.emailErrors,r=this.state.firstNameErrors,i=this.state.lastNameErrors,l=!0,c=0;a>c;c++){var u=t[c],h={};h.email=ReactDOM.findDOMNode(this.refs["email"+u]).value.trim(),h.email&&o.isEmail(h.email)?n[u]="":(n[u]="Please enter a valid email address",l=!1),h.firstName=ReactDOM.findDOMNode(this.refs["first_name"+u]).value.trim(),h.lastName=ReactDOM.findDOMNode(this.refs["last_name"+u]).value.trim(),s.push(h)}if(this.setState({emailErrors:n,firstNameErrors:r,lastNameErrors:i}),l&&0!==s.length){var m={};m.invites=s,d.inviteMembers(m,function(){e.handleHide(!1)},function(t){"This person is already on your team"===t.message?(n[t.detailed_error]=t.message,e.setState({emailErrors:n})):e.setState({serverError:t.message})})}}}},{key:"handleHide",value:function(e){if(e){for(var t=!1,a=0;a<this.state.inviteIds.length;a++){var s=this.state.inviteIds[a];if(""!==ReactDOM.findDOMNode(this.refs["email"+s]).value.trim()){t=!0;break}}if(t)return void this.setState({showConfirmModal:!0})}this.clearFields(),this.setState({show:!1,showConfirmModal:!1})}},{key:"componentDidUpdate",value:function(e,t){!t.show&&this.state.show&&($(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-300),$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar())}},{key:"addInviteFields",value:function(){var e=this.state.idCount+1,t=this.state.inviteIds;t.push(e),this.setState({inviteIds:t,idCount:e})}},{key:"clearFields",value:function(){for(var e=this.state.inviteIds,t=0;t<e.length;t++){var a=e[t];ReactDOM.findDOMNode(this.refs["email"+a]).value="",ReactDOM.findDOMNode(this.refs["first_name"+a]).value="",ReactDOM.findDOMNode(this.refs["last_name"+a]).value=""}this.setState({inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{}})}},{key:"removeInviteFields",value:function(e){var t=this.state.idCount,a=this.state.inviteIds,s=a.indexOf(e);s>-1&&a.splice(s,1),a.length||a.push(++t),this.setState({inviteIds:a,idCount:t})}},{key:"render",value:function(){var e=this,t=m.getCurrentUser();if(null!=t){for(var a=[],s=this.state.inviteIds,n=0;n<s.length;n++){var r=s[n],i=null;this.state.emailErrors[r]&&(i=React.createElement("label",{className:"control-label"},this.state.emailErrors[r]));var l=null;this.state.firstNameErrors[r]&&(l=React.createElement("label",{className:"control-label"},this.state.firstNameErrors[r]));var c=null;this.state.lastNameErrors[r]&&(c=React.createElement("label",{className:"control-label"},this.state.lastNameErrors[r]));var u=null;r&&(u=React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-link remove__member",onClick:this.removeInviteFields.bind(this,r)},React.createElement("span",{className:"fa fa-trash"}))));var d="form-group invite";i&&(d+=" has-error");var h=null,b="form-group";l&&(b+=" has-error");var v="form-group";c&&(v+=" has-error"),h=React.createElement("div",{className:"row--invite"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:b},React.createElement("input",{type:"text",className:"form-control",ref:"first_name"+r,placeholder:"First name",maxLength:"64",disabled:!this.state.emailEnabled,spellCheck:"false"}),l)),React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:v},React.createElement("input",{type:"text",className:"form-control",ref:"last_name"+r,placeholder:"Last name",maxLength:"64",disabled:!this.state.emailEnabled,spellCheck:"false"}),c))),a[r]=React.createElement("div",{key:"key"+r},u,React.createElement("div",{className:d},React.createElement("input",{onKeyUp:this.displayNameKeyUp,type:"text",ref:"email"+r,className:"form-control",placeholder:"email@domain.com",maxLength:"64",disabled:!this.state.emailEnabled,spellCheck:"false"}),i),h)}var E=null;this.state.serverError&&(E=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var _=null,y=null,R="Send Invitation";if(this.state.inviteIds.length>1&&(R="Send Invitations"),this.state.emailEnabled)_=React.createElement("div",null,E,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.addInviteFields},"Add another"),React.createElement("br",null),React.createElement("br",null),React.createElement("span",null,"People invited automatically join Town Square channel.")),y=React.createElement("button",{onClick:this.handleSubmit,type:"button",className:"btn btn-primary"},R);else{var C=null;if(t&&"O"===p.getCurrent().type){var N=o.getWindowLocationOrigin()+"/signup_user_complete/?id="+p.getCurrent().invite_id,k=React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#get_link","data-title":"Team Invite","data-value":N,onClick:function(){return e.handleHide(e,!1)}},"Team Invite Link");C=React.createElement("p",null,"You can also invite people using the ",k,".")}_=React.createElement("div",null,React.createElement("p",null,"Email is currently disabled for your team, and email invitations cannot be sent. Contact your system administrator to enable email and email invitations."),C)}return React.createElement("div",null,React.createElement(g,{className:"modal-invite-member",show:this.state.show,onHide:this.handleHide.bind(this,!0),enforceFocus:!this.state.showConfirmModal},React.createElement(g.Header,{closeButton:!0},React.createElement(g.Title,null,"Invite New Member")),React.createElement(g.Body,{ref:"modalBody"},React.createElement("form",{role:"form"},a),_),React.createElement(g.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide.bind(this,!0)},"Cancel"),y)),React.createElement(f,{title:"Discard Invitations?",message:"You have unsent invitations, are you sure you want to discard them?",confirm_button:"Yes, Discard",show:this.state.showConfirmModal,onConfirm:this.handleHide.bind(this,!1),onCancel:function(){return e.setState({showConfirmModal:!1})}}))}return null}}],[{key:"show",value:function(){u.handleViewAction({type:c.TOGGLE_INVITE_MEMBER_MODAL,value:!0})}}]),t}(React.Component);a.default=b,b.propTypes={},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":147,"../stores/modal_store.jsx":278,"../stores/team_store.jsx":283,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./confirm_modal.jsx":35,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],53:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return n(t,e),r(t,[{key:"render",value:function(){return React.createElement("div",{className:"loading-screen",style:{position:this.props.position}},React.createElement("div",{className:"loading__content"},React.createElement("h3",null,"Loading"),React.createElement("div",{className:"round round-1"}),React.createElement("div",{className:"round round-2"}),React.createElement("div",{className:"round round-3"})))}}]),t}(React.Component);a.default=l,l.defaultProps={position:"relative"},l.propTypes={position:React.PropTypes.oneOf(["absolute","fixed","relative","static","inherit"])},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],54:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/client.jsx"),u=e("../stores/user_store.jsx"),d=e("../stores/browser_store.jsx"),h=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this),this.state={}}return r(t,e),i(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={},s=this.props.teamName;if(!s)return a.serverError="Bad team name",void this.setState(a);var n=ReactDOM.findDOMNode(this.refs.email).value.trim();if(!n)return a.serverError="An email is required",void this.setState(a);var r=ReactDOM.findDOMNode(this.refs.password).value.trim();return r?d.isLocalStorageSupported()?(a.serverError="",this.setState(a),void c.loginByEmail(s,n,r,function(){u.setLastEmail(n);var e=o.getUrlParameter("redirect");e?window.location.href=decodeURIComponent(e):window.location.href="/"+s+"/channels/town-square"},function(e){return"Login failed because email address has not been verified"===e.message?void(window.location.href="/verify_email?teamname="+encodeURIComponent(s)+"&email="+encodeURIComponent(n)):(a.serverError=e.message,t.valid=!1,void t.setState(a))})):(a.serverError="This service requires local storage to be enabled. Please enable it or exit private browsing.",void this.setState(a)):(a.serverError="A password is required",void this.setState(a))}},{key:"render",value:function(){var e=void 0;this.state.serverError&&(e=React.createElement("label",{className:"control-label"},this.state.serverError));var t=u.getLastEmail(),a=o.getUrlParameter("email");a&&(t=decodeURIComponent(a));var n=this.props.teamDisplayName,r=this.props.teamName,i=!1,l=!1;""===t?i=!0:l=!0;var c=[];"true"===s.window.mm_config.EnableSignUpWithGitLab&&c.push(React.createElement("a",{className:"btn btn-custom-login gitlab",href:"/"+r+"/login/gitlab"},React.createElement("span",{className:"icon"}),React.createElement("span",null,"with GitLab")));var d="";e&&(d=" has-error");var h=o.getUrlParameter("verified"),m="";h&&(m=React.createElement("div",{className:"alert alert-success"},React.createElement("i",{className:"fa fa-check"})," Email Verified"));var p=void 0;"true"===s.window.mm_config.EnableSignUpWithEmail&&(p=React.createElement("div",null,React.createElement("div",{className:"form-group"+d},React.createElement("input",{autoFocus:i,type:"email",className:"form-control",name:"email",defaultValue:t,ref:"email",placeholder:"Email",spellCheck:"false"})),React.createElement("div",{className:"form-group"+d},React.createElement("input",{autoFocus:l,type:"password",className:"form-control",name:"password",ref:"password",placeholder:"Password",spellCheck:"false"})),React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign in")))),c.length>0&&p&&(c=React.createElement("div",null,c,React.createElement("div",{className:"or__container"},React.createElement("span",null,"or"))));var f=void 0;p&&(f=React.createElement("div",{className:"form-group"},React.createElement("a",{href:"/"+r+"/reset_password"},"I forgot my password")));var g=null;this.props.inviteId&&(g=React.createElement("div",null,React.createElement("span",null,"Don't have an account? ",React.createElement("a",{href:"/signup_user_complete/?id="+this.props.inviteId,className:"signup-team-login"},"Create one now"))));var b=null;return"true"===s.window.mm_config.EnableTeamCreation&&(b=React.createElement("div",{className:"margin--extra"},React.createElement("span",null,"Want to create your own team? ",React.createElement("a",{href:"/",className:"signup-team-login"},"Sign up now")))),React.createElement("div",{className:"signup-team__container"},React.createElement("h5",{className:"margin--less"},"Sign in to:"),React.createElement("h2",{className:"signup-team__name"},n),React.createElement("h2",{className:"signup-team__subdomain"},"on ",s.window.mm_config.SiteName),React.createElement("form",{onSubmit:this.handleSubmit},m,React.createElement("div",{className:"form-group"+d},e),c,p,g,React.createElement("div",{className:"form-group margin--extra form-group--small"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},"Find other teams"))),f,b))}}]),t}(React.Component);a.default=h,h.defaultProps={teamName:"",teamDisplayName:""},h.propTypes={teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string,inviteId:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":275,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],55:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./member_list_item.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return n(t,e),r(t,[{key:"render",value:function(){var e=[];null!==this.props.memberList&&(e=this.props.memberList);var t=null;return 0===e.length&&(t=React.createElement("tr",null,React.createElement("td",null,"No users to add."))),React.createElement("table",{className:"table more-table member-list-holder"},React.createElement("tbody",null,e.map(function(e){return React.createElement(l,{key:e.id,member:e,isAdmin:this.props.isAdmin,handleInvite:this.props.handleInvite,handleRemove:this.props.handleRemove,handleMakeAdmin:this.props.handleMakeAdmin})},this),t))}}]),t}(React.Component);a.default=o,o.propTypes={memberList:React.PropTypes.array,isAdmin:React.PropTypes.bool,handleInvite:React.PropTypes.func,handleRemove:React.PropTypes.func,handleMakeAdmin:React.PropTypes.func},t.exports=a.default},{"./member_list_item.jsx":56,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],56:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../utils/utils.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleInvite=this.handleInvite.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleMakeAdmin=this.handleMakeAdmin.bind(this)}return n(t,e),r(t,[{key:"handleInvite",value:function(e){e.preventDefault(),this.props.handleInvite(this.props.member.id)}},{key:"handleRemove",value:function(e){e.preventDefault(),this.props.handleRemove(this.props.member.id)}},{key:"handleMakeAdmin",value:function(e){e.preventDefault(),this.props.handleMakeAdmin(this.props.member.id)}},{key:"render",value:function(){var e,t=this.props.member,a=this.props.isAdmin,s=o.isAdmin(t.roles),n=l.getCurrentUser().update_at;if(t.invited&&this.props.handleInvite)e=React.createElement("span",{className:"member-role"},"Added");else if(this.props.handleInvite)e=React.createElement("a",{onClick:this.handleInvite,className:"btn btn-sm btn-primary"},React.createElement("i",{className:"glyphicon glyphicon-envelope"})," Add");else if(a&&!s&&t.id!==l.getCurrentId()){var r=this,i=null;this.props.handleMakeAdmin&&(i=React.createElement("li",{role:"presentation"},React.createElement("a",{href:"",role:"menuitem",onClick:r.handleMakeAdmin},"Make Admin")));var c=null;this.props.handleRemove&&(c=React.createElement("li",{role:"presentation"},React.createElement("a",{href:"",role:"menuitem",onClick:r.handleRemove},"Remove Member"))),e=React.createElement("div",{className:"dropdown member-drop"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button",id:"channel_header_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{className:"text-capitalize"},t.roles||"Member"," "),React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu member-menu",role:"menu","aria-labelledby":"channel_header_dropdown"},i,c))}else e=React.createElement("div",{className:"member-role text-capitalize"},t.roles||"Member",React.createElement("span",{className:"caret hidden"}));return React.createElement("tr",null,React.createElement("td",{className:"direct-channel"},React.createElement("img",{className:"profile-img pull-left",src:"/api/v1/users/"+t.id+"/image?time="+n+"&"+o.getSessionIndex(),height:"36",width:"36"}),React.createElement("div",{className:"member-name"},t.username),React.createElement("div",{className:"member-description"},t.email)),React.createElement("td",{className:"td--action lg"},e))}}]),t}(React.Component);a.default=c,c.propTypes={handleInvite:React.PropTypes.func,handleRemove:React.PropTypes.func,handleMakeAdmin:React.PropTypes.func,member:React.PropTypes.object,isAdmin:React.PropTypes.bool},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],57:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./member_list_team_item.jsx"),o=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return n(t,e),r(t,[{key:"render",value:function(){var e=this.props.users.map(function(e){return React.createElement(l,{key:e.id,user:e})},this);return React.createElement("table",{className:"table more-table member-list-holder"},React.createElement("tbody",null,e))}}]),t}(React.Component);a.default=o,o.propTypes={users:React.PropTypes.arrayOf(React.PropTypes.object).isRequired},t.exports=a.default},{"./member_list_team_item.jsx":58,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],58:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../utils/client.jsx"),c=e("../utils/async_client.jsx"),u=e("../utils/utils.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleMakeMember=this.handleMakeMember.bind(this),this.handleMakeActive=this.handleMakeActive.bind(this),this.handleMakeNotActive=this.handleMakeNotActive.bind(this),this.handleMakeAdmin=this.handleMakeAdmin.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleMakeMember",value:function(){var e=this,t={user_id:this.props.user.id,new_roles:""};o.updateRoles(t,function(){c.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"handleMakeActive",value:function(){var e=this;o.updateActive(this.props.user.id,!0,function(){c.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"handleMakeNotActive",value:function(){var e=this;o.updateActive(this.props.user.id,!1,function(){c.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"handleMakeAdmin",value:function(){var e=this,t={user_id:this.props.user.id,new_roles:"admin"};o.updateRoles(t,function(){c.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"has-error"},React.createElement("label",{className:"has-error control-label"},this.state.serverError)));var t=this.props.user,a="Member",s=l.getCurrentUser().update_at;t.roles.length>0&&(a=u.isSystemAdmin(t.roles)?"System Admin":u.isAdmin(t.roles)?"Team Admin":t.roles.charAt(0).toUpperCase()+t.roles.slice(1));var n=t.email,r="admin"===t.roles||"system_admin"===t.roles,i=""===t.roles||"system_admin"===t.roles,o=!1,c="system_admin"!==t.roles;t.delete_at>0&&(a="Inactive",r=!1,i=!1,o=!0,c=!1);var d=null;i&&(d=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeAdmin},"Make Team Admin")));var h=null;r&&(h=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeMember},"Make Member")));var m=null;o&&(m=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeActive},"Make Active")));var p=null;return c&&(p=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeNotActive},"Make Inactive"))),React.createElement("tr",null,React.createElement("td",{className:"row member-div"},React.createElement("img",{className:"post-profile-img pull-left",src:"/api/v1/users/"+t.id+"/image?time="+s+"&"+u.getSessionIndex(),height:"36",width:"36"}),React.createElement("span",{className:"member-name"},u.getDisplayName(t)),React.createElement("span",{className:"member-email"},n),React.createElement("div",{className:"dropdown member-drop"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button",id:"channel_header_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",null,a," "),React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu member-menu",role:"menu","aria-labelledby":"channel_header_dropdown"},d,h,m,p)),e))}}]),t}(React.Component);a.default=d,d.propTypes={user:React.PropTypes.object.isRequired},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],59:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../utils/utils.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.state=null}return n(t,e),r(t,[{key:"handleClick",value:function(){this.props.handleClick(this.props.username)}},{key:"render",value:function(){var e,t=l.getCurrentUser().update_at;return e="allmention"===this.props.id||"channelmention"===this.props.id?React.createElement("span",null,React.createElement("i",{className:"mention-img fa fa-users fa-2x"})):null==this.props.id?React.createElement("span",null,React.createElement("i",{className:"mention-img fa fa-users fa-2x"})):React.createElement("span",null,React.createElement("img",{className:"mention-img",src:"/api/v1/users/"+this.props.id+"/image?time="+t+"&"+o.getSessionIndex()})),React.createElement("div",{className:"mentions-name "+this.props.isFocused,id:this.props.id+"_mentions",onClick:this.handleClick,onMouseEnter:this.props.handleMouseEnter},React.createElement("div",{className:"pull-left"},e),React.createElement("div",{className:"pull-left mention-align"},React.createElement("span",null,"@",this.props.username),React.createElement("span",{className:"mention-fullname"},this.props.secondary_text)))}}]),t}(React.Component);a.default=c,c.defaultProps={username:"",id:"",isFocused:"",secondary_text:""},c.propTypes={handleClick:React.PropTypes.func.isRequired,handleMouseEnter:React.PropTypes.func.isRequired,username:React.PropTypes.string,id:React.PropTypes.string,isFocused:React.PropTypes.string,secondary_text:React.PropTypes.string},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],60:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../stores/search_store.jsx"),c=e("../dispatcher/app_dispatcher.jsx"),u=e("./mention.jsx"),d=e("../utils/constants.jsx"),h=e("../utils/utils.jsx"),m=d.ActionTypes,p=292,f=25,g=36,b=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onListenerChange=this.onListenerChange.bind(this),this.handleClick=this.handleClick.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.getSelection=this.getSelection.bind(this),this.addCurrentMention=this.addCurrentMention.bind(this),this.addFirstMention=this.addFirstMention.bind(this),this.isEmpty=this.isEmpty.bind(this),this.scrollToMention=this.scrollToMention.bind(this),this.onScroll=this.onScroll.bind(this),this.onMentionListKey=this.onMentionListKey.bind(this),this.onClick=this.onClick.bind(this),this.state={excludeUsers:[],mentionText:"-1",selectedMention:0,selectedUsername:""}}return n(t,e),r(t,[{key:"onScroll",value:function(){$(".mentions--top").length&&$("#reply_mention_tab .mentions--top").css({bottom:$(window).height()-$(".post-right__scroll #reply_textbox").offset().top})}},{key:"onMentionListKey",value:function(e){this.isEmpty()||"-1"===this.state.mentionText||13!==e.which&&9!==e.which?this.isEmpty()||"-1"===this.state.mentionText||38!==e.which&&40!==e.which||(e.stopPropagation(),e.preventDefault(),38===e.which?this.getSelection(this.state.selectedMention-1)&&this.setState({selectedMention:this.state.selectedMention-1,selectedUsername:this.refs["mention"+(this.state.selectedMention-1)].props.username}):40===e.which&&this.getSelection(this.state.selectedMention+1)&&this.setState({selectedMention:this.state.selectedMention+1,selectedUsername:this.refs["mention"+(this.state.selectedMention+1)].props.username}),this.scrollToMention(e.which)):(e.stopPropagation(),e.preventDefault(),this.addCurrentMention())}},{key:"onClick",value:function(e){$("#"+this.props.id).is(e.target)||$("#"+this.props.id).has(e.target).length||"mentionlist"in this.refs&&$(ReactDOM.findDOMNode(this.refs.mentionlist)).has(e.target).length||this.setState({mentionText:"-1"})}},{key:"componentDidMount",value:function(){o.addMentionDataChangeListener(this.onListenerChange),$(".post-right__scroll").scroll(this.onScroll),$("body").on("keydown.mentionlist","#"+this.props.id,this.onMentionListKey),$(document).click(this.onClick)}},{key:"componentWillUnmount",value:function(){o.removeMentionDataChangeListener(this.onListenerChange),$("body").off("keydown.mentionlist","#"+this.props.id)}},{key:"componentDidUpdate",value:function(){if("-1"!==this.state.mentionText){if(""!==this.state.selectedUsername&&(!this.getSelection(this.state.selectedMention)||this.state.selectedUsername!==this.refs["mention"+this.state.selectedMention].props.username)){for(var e=-1,t=!1;e<this.state.selectedMention&&this.getSelection(++e);)if(this.state.selectedUsername===this.refs["mention"+e].props.username){this.setState({selectedMention:e}),t=!0;break}this.getSelection(0)&&!t&&this.setState({selectedMention:0,selectedUsername:this.refs.mention0.props.username})}}else 0!==this.state.selectedMention&&this.setState({selectedMention:0,selectedUsername:""})}},{key:"onListenerChange",value:function(e,t){if(e===this.props.id){var a=this.state;null!=t&&(a.mentionText=t),this.setState(a)}}},{key:"handleClick",value:function(e){c.handleViewAction({type:m.RECIEVED_ADD_MENTION,id:this.props.id,username:e}),this.setState({mentionText:"-1"})}},{key:"handleMouseEnter",value:function(e){this.setState({selectedMention:e,selectedUsername:this.refs["mention"+e].props.username})}},{key:"getSelection",value:function(e){return this.refs["mention"+e]?!0:!1}},{key:"addCurrentMention",value:function(){this.getSelection(this.state.selectedMention)?this.refs["mention"+this.state.selectedMention].handleClick():this.addFirstMention()}},{key:"addFirstMention",value:function(){this.refs.mention0&&this.refs.mention0.handleClick()}},{key:"isEmpty",value:function(){return!this.refs.mention0}},{key:"scrollToMention",value:function(e){var t;t=38===e?"up":"down";var a=0;"up"===t?a="-="+($("#"+this.refs["mention"+this.state.selectedMention].props.id+"_mentions").innerHeight()-5):"down"===t&&(a="+="+($("#"+this.refs["mention"+this.state.selectedMention].props.id+"_mentions").innerHeight()-5)),$("#mentionsbox").animate({scrollTop:a},75)}},{key:"render",value:function(){var e=this.state.mentionText;if("-1"===e)return null;var t=l.getActiveOnlyProfiles(),a=[];for(var s in t)t[s]&&a.push(t[s]);var n={};n.username="all",n.nickname="",n.secondary_text="Notifies everyone in the team",n.id="allmention",a.push(n);var r={};r.username="channel",r.nickname="",r.secondary_text="Notifies everyone in the channel",r.id="channelmention",a.push(r),a.sort(function(e,t){return e.username<t.username?-1:e.username>t.username?1:0});for(var i=[],o=0,c=0;c<a.length&&f>o;c++)if(a[c].first_name&&0===a[c].first_name.lastIndexOf(e,0)||a[c].last_name&&0===a[c].last_name.lastIndexOf(e,0)||0===a[c].username.lastIndexOf(e,0)){var d="";this.state.selectedMention===o&&(d="mentions-focus"),a[c].secondary_text||(a[c].secondary_text=h.getFullName(a[c])),i[o]=React.createElement(u,{
key:"mention_key_"+o,ref:"mention"+o,username:a[c].username,secondary_text:a[c].secondary_text,id:a[c].id,listId:o,isFocused:d,handleMouseEnter:this.handleMouseEnter.bind(this,o),handleClick:this.handleClick}),o++}var m=i.length;if(1>m)return null;var b=$("#"+this.props.id),v=Math.min(p,b.offset().top-10),E={height:Math.min(v,m*g+4),width:b.parent().width(),bottom:$(window).height()-b.offset().top,left:b.offset().left};return React.createElement("div",{className:"mentions--top",style:E},React.createElement("div",{ref:"mentionlist",className:"mentions-box",id:"mentionsbox"},i))}}]),t}(React.Component);a.default=b,b.propTypes={id:React.PropTypes.string},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/search_store.jsx":281,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./mention.jsx":59,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],61:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/text_formatting.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return n(t,e),r(t,[{key:"render",value:function(){return this.props.message?React.createElement("div",{dangerouslySetInnerHTML:{__html:l.formatText(this.props.message,this.props.options)}}):React.createElement("div",null)}}]),t}(React.Component);a.default=o,o.defaultProps={message:""},o.propTypes={message:React.PropTypes.string,options:React.PropTypes.object},t.exports=a.default},{"../utils/text_formatting.jsx":292,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],62:[function(e,t,a){"use strict";function s(){return{channels:d.getMoreAll(),serverError:null}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/client.jsx"),u=e("../utils/async_client.jsx"),d=e("../stores/channel_store.jsx"),h=e("./loading_screen.jsx"),m=e("./new_channel_flow.jsx"),p=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onListenerChange=this.onListenerChange.bind(this),this.handleJoin=this.handleJoin.bind(this),this.handleNewChannel=this.handleNewChannel.bind(this);var a=s();a.channelType="",a.joiningChannel=-1,a.showNewChannelModal=!1,this.state=a}return r(t,e),i(t,[{key:"componentDidMount",value:function(){d.addMoreChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",function(){u.getMoreChannels(!0)});var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",function(t){var a=t.relatedTarget;e.setState({channelType:$(a).attr("data-channeltype")})})}},{key:"componentWillUnmount",value:function(){d.removeMoreChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=s();o.areStatesEqual(e.channels,this.state.channels)||this.setState(e)}},{key:"handleJoin",value:function(e,t){this.setState({joiningChannel:t}),c.joinChannel(e.id,function(){$(ReactDOM.findDOMNode(this.refs.modal)).modal("hide"),u.getChannel(e.id),o.switchChannel(e),this.setState({joiningChannel:-1})}.bind(this),function(e){this.setState({joiningChannel:-1,serverError:e.message})}.bind(this))}},{key:"handleNewChannel",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).modal("hide"),this.setState({showNewChannelModal:!0})}},{key:"render",value:function(){var e,t=this;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a,s=this;if(null!=this.state.channels){var n=this.state.channels;a=n.loading?React.createElement(h,null):n.length?React.createElement("table",{className:"more-table table"},React.createElement("tbody",null,n.map(function(e,t){var a;return a=s.state.joiningChannel===t?React.createElement("img",{className:"join-channel-loading-gif",src:"/static/images/load.gif"}):React.createElement("button",{onClick:s.handleJoin.bind(s,e,t),className:"btn btn-primary"},"Join"),React.createElement("tr",{key:e.id},React.createElement("td",null,React.createElement("p",{className:"more-name"},e.display_name),React.createElement("p",{className:"more-purpose"},e.purpose)),React.createElement("td",{className:"td--action"},a))}))):React.createElement("div",{className:"no-channel-message"},React.createElement("p",{className:"primary-message"},"No more channels to join"),React.createElement("p",{className:"secondary-message"},"Click 'Create New Channel' to make a new one"))}return React.createElement("div",{className:"modal fade",id:"more_channels",ref:"modal",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h4",{className:"modal-title"},"More Channels"),React.createElement("button",{type:"button",className:"btn btn-primary channel-create-btn",onClick:this.handleNewChannel},"Create New Channel"),React.createElement(m,{show:this.state.showNewChannelModal,channelType:this.state.channelType,onModalDismissed:function(){return t.setState({showNewChannelModal:!1})}})),React.createElement("div",{className:"modal-body"},a,e),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close")))))}}]),t}(React.Component);a.default=p,t.exports=a.default},{"../stores/channel_store.jsx":276,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./loading_screen.jsx":53,"./new_channel_flow.jsx":67,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],63:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=ReactBootstrap.Modal,o=e("../stores/user_store.jsx"),c=e("../utils/utils.jsx"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleFilterChange=this.handleFilterChange.bind(this),this.handleHide=this.handleHide.bind(this),this.handleShowDirectChannel=this.handleShowDirectChannel.bind(this),this.handleUserChange=this.handleUserChange.bind(this),this.createRowForUser=this.createRowForUser.bind(this),this.state={users:this.getUsersFromStore(),filter:"",loadingDMChannel:-1}}return n(t,e),r(t,[{key:"getUsersFromStore",value:function(){var e=o.getCurrentId(),t=o.getActiveOnlyProfiles(),a=[];for(var s in t)s!==e&&a.push(t[s]);return a.sort(function(e,t){return e.username.localeCompare(t.username)}),a}},{key:"componentDidMount",value:function(){o.addChangeListener(this.handleUserChange)}},{key:"componentWillUnmount",value:function(){o.addChangeListener(this.handleUserChange)}},{key:"handleFilterChange",value:function(){var e=ReactDOM.findDOMNode(this.refs.filter).value;$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.userList)).scrollTop(0),e!==this.state.filter&&this.setState({filter:e})}},{key:"handleHide",value:function(){this.props.onModalDismissed&&this.props.onModalDismissed(),this.setState({filter:""})}},{key:"handleShowDirectChannel",value:function(e,t){var a=this;t.preventDefault(),-1===this.state.loadingDMChannel&&(this.setState({loadingDMChannel:e.id}),c.openDirectChannelToUser(e,function(e){c.switchChannel(e),a.setState({loadingDMChannel:-1}),a.handleHide()},function(){a.setState({loadingDMChannel:-1})}))}},{key:"handleUserChange",value:function(){this.setState({users:this.getUsersFromStore()})}},{key:"createRowForUser",value:function(e){var t=[],a=c.getFullName(e);if(a&&t.push(React.createElement("span",{key:e.id+"__full-name",className:"full-name"},a)),e.nickname){var s=a?" - ":"";t.push(React.createElement("span",{key:e.nickname+"__nickname"},s+e.nickname))}var n=void 0;return n=this.state.loadingDMChannel===e.id?React.createElement("img",{className:"channel-loading-gif",src:"/static/images/load.gif"}):React.createElement("button",{type:"button",className:"btn btn-primary btn-message",onClick:this.handleShowDirectChannel.bind(this,e)},"Message"),React.createElement("tr",{key:"direct-channel-row-user"+e.id},React.createElement("td",{key:e.id,className:"direct-channel"},React.createElement("img",{className:"profile-img pull-left",width:"38",height:"38",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at+"&"+c.getSessionIndex()}),React.createElement("div",{className:"more-name"},e.username),React.createElement("div",{className:"more-description"},t)),React.createElement("td",{className:"td--action lg"},n))}},{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&($(ReactDOM.findDOMNode(this.refs.userList)).css("max-height",$(window).height()-300),$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.userList)).perfectScrollbar())}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=this.state.users;this.state.filter&&!function(){var a=e.state.filter.toLowerCase();t=t.filter(function(e){return-1!==e.username.toLowerCase().indexOf(a)||-1!==e.first_name.toLowerCase().indexOf(a)||-1!==e.last_name.toLowerCase().indexOf(a)||-1!==e.nickname.toLowerCase().indexOf(a)})}();var a=t.map(this.createRowForUser);0===a.length&&a.push(React.createElement("tr",{key:"no-users-found"},React.createElement("td",null,"No users found :(")));var s="Member";1!==t.length&&(s+="s");var n=void 0;return n=t.length===this.state.users.length?t.length+" "+s:t.length+" "+s+" of "+this.state.users.length+" Total",React.createElement(l,{dialogClassName:"more-modal",show:this.props.show,onHide:this.handleHide},React.createElement(l.Header,{closeButton:!0},React.createElement(l.Title,null,"Direct Messages")),React.createElement(l.Body,null,React.createElement("div",{className:"row filter-row"},React.createElement("div",{className:"col-sm-6"},React.createElement("input",{ref:"filter",className:"form-control filter-textbox",placeholder:"Search members",onInput:this.handleFilterChange})),React.createElement("div",{className:"col-sm-6"},React.createElement("span",{className:"member-count"},n))),React.createElement("div",{ref:"userList",className:"user-list"},React.createElement("table",{className:"more-table table"},React.createElement("tbody",null,a)))),React.createElement(l.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},"Close")))}}]),t}(React.Component);a.default=u,u.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],64:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/object/keys").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../stores/socket_store.jsx"),c=e("../stores/user_store.jsx"),u=e("../utils/constants.jsx"),d=u.SocketEvents,h=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChange=this.onChange.bind(this),this.updateTypingText=this.updateTypingText.bind(this),this.componentWillReceiveProps=this.componentWillReceiveProps.bind(this),this.typingUsers={},this.state={text:""}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){o.addChangeListener(this.onChange)}},{key:"componentWillReceiveProps",value:function(e){this.props.channelId!==e.channelId&&this.updateTypingText()}},{key:"componentWillUnmount",value:function(){o.removeChangeListener(this.onChange)}},{key:"onChange",value:function(e){var t="Someone";e.action===d.TYPING&&this.props.channelId===e.channel_id&&this.props.parentId===e.props.parent_id?(c.hasProfile(e.user_id)&&(t=c.getProfile(e.user_id).username),this.typingUsers[t]&&clearTimeout(this.typingUsers[t]),this.typingUsers[t]=setTimeout(function(e){delete this.typingUsers[e],this.updateTypingText()}.bind(this,t),u.UPDATE_TYPING_MS),this.updateTypingText()):e.action===d.POSTED&&e.channel_id===this.props.channelId&&(c.hasProfile(e.user_id)&&(t=c.getProfile(e.user_id).username),clearTimeout(this.typingUsers[t]),delete this.typingUsers[t],this.updateTypingText())}},{key:"updateTypingText",value:function(){var e=l(this.typingUsers),t="";switch(e.length){case 0:t="";break;case 1:t=e[0]+" is typing...";break;default:var a=e.pop();t=e.join(", ")+" and "+a+" are typing..."}this.setState({text:t})}},{key:"render",value:function(){return React.createElement("span",{className:"msg-typing"},this.state.text)}}]),t}(React.Component);a.default=h,h.propTypes={channelId:React.PropTypes.string,parentId:React.PropTypes.string},t.exports=a.default},{"../stores/socket_store.jsx":282,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"babel-runtime/core-js/object/keys":156,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],65:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./edit_channel_purpose_modal.jsx"),o=e("./message_wrapper.jsx"),c=e("./notify_counts.jsx"),u=e("./channel_members_modal.jsx"),d=e("./channel_invite_modal.jsx"),h=e("../stores/user_store.jsx"),m=e("../stores/channel_store.jsx"),p=e("../stores/team_store.jsx"),f=e("../utils/client.jsx"),g=e("../utils/async_client.jsx"),b=e("../utils/utils.jsx"),v=e("../utils/constants.jsx"),E=v.ActionTypes,_=e("../dispatcher/app_dispatcher.jsx"),y=ReactBootstrap.Popover,R=ReactBootstrap.OverlayTrigger,C=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChange=this.onChange.bind(this),this.handleLeave=this.handleLeave.bind(this),this.createCollapseButtons=this.createCollapseButtons.bind(this),this.createDropdown=this.createDropdown.bind(this);var a=this.getStateFromStores();a.showEditChannelPurposeModal=!1,a.showMembersModal=!1,a.showInviteModal=!1,this.state=a}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){return{channel:m.getCurrent(),member:m.getCurrentMember(),users:m.getCurrentExtraInfo().members}}},{key:"componentDidMount",value:function(){m.addChangeListener(this.onChange),m.addExtraInfoChangeListener(this.onChange),$(".inner__wrap").click(this.hideSidebars)}},{key:"componentWillUnmount",value:function(){m.removeChangeListener(this.onChange),m.removeExtraInfoChangeListener(this.onChange)}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleLeave",value:function(){f.leaveChannel(this.state.channel.id,function(){g.getChannels(!0),window.location.href=p.getCurrentTeamUrl()+"/channels/town-square"},function(e){g.dispatchError(e,"handleLeave")})}},{key:"hideSidebars",value:function(e){var t=$(window).outerWidth();768>=t&&(_.handleServerAction({type:E.RECIEVED_SEARCH,results:null}),_.handleServerAction({type:E.RECIEVED_POST_SELECTED,results:null}),"navbar-toggle"!==e.target.className&&"icon-bar"!==e.target.className&&($(".inner__wrap").removeClass("move--right move--left move--left-small"),$(".sidebar--left").removeClass("move--right"),$(".sidebar--right").removeClass("move--left"),$(".sidebar--menu").removeClass("move--left")))}},{key:"toggleLeftSidebar",value:function(){$(".inner__wrap").toggleClass("move--right"),$(".sidebar--left").toggleClass("move--right")}},{key:"toggleRightSidebar",value:function(){$(".inner__wrap").toggleClass("move--left-small"),$(".sidebar--menu").toggleClass("move--left")}},{key:"onChange",value:function(){this.setState(this.getStateFromStores()),$("#navbar .navbar-brand .description").popover({placement:"bottom",trigger:"click",html:!0})}},{key:"createDropdown",value:function(e,t,a,s,n){var r=this;if(e){var i=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem","data-toggle":"modal","data-target":"#channel_info","data-channelid":e.id,href:"#"},"View Info")),l=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":e.header,"data-title":e.display_name,"data-channelid":e.id},"Set Channel Header...")),o=null;s||(o=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return r.setState({showEditChannelPurposeModal:!0})}},"Set Channel Purpose...")));var c,u;s||m.isDefault(e)||(c=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return r.setState({showInviteModal:!1})}},"Add Members")),u=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleLeave},"Leave Channel")));var d,h,f;s||!a||m.isDefault(e)||(d=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return r.setState({showMembersModal:!0})}},"Manage Members")),h=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#rename_channel","data-display":e.display_name,"data-name":e.name,"data-channelid":e.id},"Rename Channel...")),f=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#delete_channel","data-title":e.display_name,"data-channelid":e.id},"Delete Channel...")));var g;return s||(g=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#channel_notifications","data-title":e.display_name,"data-channelid":e.id},"Notification Preferences"))),React.createElement("div",{className:"navbar-brand"},React.createElement("div",{className:"dropdown"},React.createElement(R,{trigger:"click",placement:"bottom",overlay:n,className:"description",rootClose:!0},React.createElement("div",{className:"description info-popover"})),React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button",id:"channel_header_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{className:"heading"},t," "),React.createElement("span",{className:"glyphicon glyphicon-chevron-down header-dropdown__icon"})),React.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"channel_header_dropdown"},i,c,d,l,o,g,h,f,u)))}return React.createElement("div",{className:"navbar-brand"},React.createElement("a",{href:p.getCurrentTeamUrl()+"/channels/town-square",className:"heading"},t))}},{key:"createCollapseButtons",value:function(e){var t=[];return null==e?t.push(React.createElement("button",{key:"navbar-toggle-collapse",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#navbar-collapse-1"},React.createElement("span",{className:"sr-only"},"Toggle sidebar"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}))):(t.push(React.createElement("button",{key:"navbar-toggle-sidebar",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:this.toggleLeftSidebar},React.createElement("span",{className:"sr-only"},"Toggle sidebar"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement(c,null))),t.push(React.createElement("button",{key:"navbar-toggle-menu",type:"button",className:"navbar-toggle menu-toggle pull-right","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:this.toggleRightSidebar},React.createElement("span",{dangerouslySetInnerHTML:{__html:v.MENU_ICON}})))),t}},{key:"render",value:function(){var e,t=this,a=h.getCurrentId(),s=this.state.channel,n=this.props.teamDisplayName,r=!1,i=!1;s&&(e=React.createElement(y,{bsStyle:"info",placement:"bottom",id:"header-popover"},React.createElement(o,{message:s.header,options:{singleline:!0,mentionHighlight:!1}})),r=b.isAdmin(this.state.member.roles),"O"===s.type?n=s.display_name:"P"===s.type?n=s.display_name:"D"===s.type&&(i=!0,this.state.users.length>1&&(n=this.state.users[0].id===a?h.getProfile(this.state.users[1].id).username:h.getProfile(this.state.users[0].id).username)),0===s.header.length&&(e=React.createElement(y,{bsStyle:"info",placement:"bottom",id:"header-popover"},React.createElement("div",null,"No channel header yet.",React.createElement("br",null),React.createElement("a",{href:"#","data-toggle":"modal","data-header":s.header,"data-title":s.display_name,"data-channelid":s.id,"data-target":"#edit_channel"},"Click here")," to add one."))));var c=this.createCollapseButtons(a),m=this.createDropdown(s,n,r,i,e);return React.createElement("div",null,React.createElement("nav",{className:"navbar navbar-default navbar-fixed-top",role:"navigation"},React.createElement("div",{className:"container-fluid theme"},React.createElement("div",{className:"navbar-header"},c,m))),React.createElement(l,{show:this.state.showEditChannelPurposeModal,onModalDismissed:function(){return t.setState({showEditChannelPurposeModal:!1})},channel:s}),React.createElement(u,{show:this.state.showMembersModal,onModalDismissed:function(){return t.setState({showMembersModal:!1})}}),React.createElement(d,{show:this.state.showInviteModal,onModalDismissed:function(){return t.setState({showInviteModal:!1})}}))}}]),t}(React.Component);a.default=C,C.defaultProps={teamDisplayName:""},C.propTypes={teamDisplayName:React.PropTypes.string},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/team_store.jsx":283,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./channel_invite_modal.jsx":29,"./channel_members_modal.jsx":31,"./edit_channel_purpose_modal.jsx":41,"./message_wrapper.jsx":61,"./notify_counts.jsx":69,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],66:[function(e,t,a){(function(s){"use strict";function n(){var e=[],t=d.getTeams();for(var a in t)t.hasOwnProperty(a)&&e.push(t[a]);return e.sort(c.sortByDisplayName),{teams:e}}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/create-class").default,o=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("../utils/utils.jsx"),u=e("../utils/client.jsx"),d=e("../stores/user_store.jsx"),h=e("../stores/team_store.jsx"),m=e("./about_build_modal.jsx"),p=e("./invite_member_modal.jsx"),f=e("./user_settings/user_settings_modal.jsx"),g=e("../utils/constants.jsx"),b=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.blockToggle=!1,this.handleLogoutClick=this.handleLogoutClick.bind(this),this.handleAboutModal=this.handleAboutModal.bind(this),this.onListenerChange=this.onListenerChange.bind(this),this.aboutModalDismissed=this.aboutModalDismissed.bind(this);var a=n();a.showUserSettingsModal=!1,a.showAboutModal=!1,this.state=a}return i(t,e),l(t,[{key:"handleLogoutClick",value:function(e){e.preventDefault(),u.logout()}},{key:"handleAboutModal",value:function(){this.setState({showAboutModal:!0})}},{key:"aboutModalDismissed",value:function(){this.setState({showAboutModal:!1})}},{key:"componentDidMount",value:function(){var e=this;d.addTeamsChangeListener(this.onListenerChange),h.addChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.dropdown)).on("hide.bs.dropdown",function(){$(".sidebar--left .dropdown-menu").scrollTop(0),e.blockToggle=!0,setTimeout(function(){e.blockToggle=!1},100)})}},{key:"componentWillUnmount",value:function(){d.removeTeamsChangeListener(this.onListenerChange),h.removeChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.dropdown)).off("hide.bs.dropdown")}},{key:"onListenerChange",value:function(){var e=n();c.areStatesEqual(e,this.state)||this.setState(e)}},{key:"render",value:function(){var e=this,t="",a="",n="",r="",i="",l=d.getCurrentUser(),o=!1,u=!1,b=null;null!=l&&(o=c.isAdmin(l.roles),u=c.isSystemAdmin(l.roles),a=React.createElement("li",null,React.createElement("a",{href:"#",onClick:p.show},"Invite New Member")),this.props.teamType===g.OPEN_TEAM&&(t=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#get_link","data-title":"Team Invite","data-value":c.getWindowLocationOrigin()+"/signup_user_complete/?id="+h.getCurrent().invite_id},"Get Team Invite Link")))),o&&(n=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_members"},"Manage Members")),i=React.createElement("li",{className:"divider"}),b=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_settings"},"Team Settings"))),u&&(r=React.createElement("li",null,React.createElement("a",{href:"/admin_console?"+c.getSessionIndex()},"System Console")));var v=[];return this.state.teams.length>1&&(v.push(React.createElement("li",{className:"divider",key:"div"})),this.state.teams.forEach(function(t){t.name!==e.props.teamName&&v.push(React.createElement("li",{key:t.name},React.createElement("a",{href:c.getWindowLocationOrigin()+"/"+t.name},"Switch to "+t.display_name)))})),"true"===s.window.mm_config.EnableTeamCreation&&v.push(React.createElement("li",{key:"newTeam_li"},React.createElement("a",{key:"newTeam_a",target:"_blank",href:c.getWindowLocationOrigin()+"/signup_team"},"Create a New Team"))),React.createElement("ul",{className:"nav navbar-nav navbar-right"},React.createElement("li",{ref:"dropdown",className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},React.createElement("span",{className:"dropdown__icon",dangerouslySetInnerHTML:{__html:g.MENU_ICON}})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:function(){return e.setState({showUserSettingsModal:!0})}},"Account Settings")),a,t,React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleLogoutClick},"Logout")),i,b,n,r,v,React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/help.html"},"Help")),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/report_problem.html"},"Report a Problem")),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleAboutModal},"About Mattermost")),React.createElement(f,{show:this.state.showUserSettingsModal,onModalDismissed:function(){return e.setState({showUserSettingsModal:!1})}}),React.createElement(m,{show:this.state.showAboutModal,onModalDismissed:this.aboutModalDismissed}))))}}]),t}(React.Component);a.default=b,b.defaultProps={teamType:""},b.propTypes={teamType:React.PropTypes.string,teamDisplayName:React.PropTypes.string,teamName:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/team_store.jsx":283,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./about_build_modal.jsx":1,"./invite_member_modal.jsx":52,"./user_settings/user_settings_modal.jsx":142,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],67:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/async_client.jsx"),c=e("../utils/client.jsx"),u=e("../stores/user_store.jsx"),d=e("./new_channel_modal.jsx"),h=e("./change_url_modal.jsx"),m=1,p=2,f=3,g=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.doSubmit=this.doSubmit.bind(this),this.typeSwitched=this.typeSwitched.bind(this),this.urlChangeRequested=this.urlChangeRequested.bind(this),this.urlChangeSubmitted=this.urlChangeSubmitted.bind(this),this.urlChangeDismissed=this.urlChangeDismissed.bind(this),this.channelDataChanged=this.channelDataChanged.bind(this),this.state={serverError:"",channelType:"O",flowState:m,channelDisplayName:"",channelName:"",channelPurpose:"",nameModified:!1}}return n(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){e.show===!0&&this.props.show===!1&&this.setState({serverError:"",channelType:e.channelType,flowState:m,channelDisplayName:"",channelName:"",channelPurpose:"",nameModified:!1})}},{key:"doSubmit",value:function(){var e=this,t={};if(t.display_name=this.state.channelDisplayName,!t.display_name)return void this.setState({serverError:"Invalid Channel Name"});if(t.name=this.state.channelName,t.name.length<2)return void this.setState({flowState:f});var a=u.getCurrentUser();t.team_id=a.team_id,t.purpose=this.state.channelPurpose,t.type=this.state.channelType,c.createChannel(t,function(t){e.props.onModalDismissed(),o.getChannel(t.id),l.switchChannel(t)},function(t){return"Name must be 2 or more lowercase alphanumeric characters"===t.message&&e.setState({flowState:f}),"A channel with that handle already exists"===t.message?void e.setState({serverError:"A channel with that URL already exists"}):void e.setState({serverError:t.message})})}},{key:"typeSwitched",value:function(){"P"===this.state.channelType?this.setState({channelType:"O"}):this.setState({channelType:"P"})}},{key:"urlChangeRequested",value:function(){this.setState({flowState:p})}},{key:"urlChangeSubmitted",value:function(e){this.state.flowState===f?this.setState({channelName:e,nameModified:!0},this.doSubmit):this.setState({flowState:m,serverError:"",channelName:e,nameModified:!0})}},{key:"urlChangeDismissed",value:function(){this.setState({flowState:m})}},{key:"channelDataChanged",value:function(e){this.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose}),this.state.nameModified||this.setState({channelName:l.cleanUpUrlable(e.displayName.trim())
})}},{key:"render",value:function(){var e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose},t=!1,a=!1,s=!1,n="",r="",i="";if(this.props.show)switch(this.state.flowState){case m:"O"===this.state.channelType?(t=!0,i="Channel"):(a=!0,i="Group");break;case p:s=!0,n="Change "+i+" URL",r="Change "+i+" URL";break;case f:s=!0,n="Set "+i+" URL",r="Create "+i}return React.createElement("span",null,React.createElement(d,{show:t,channelType:"O",channelData:e,serverError:this.state.serverError,onSubmitChannel:this.doSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),React.createElement(d,{show:a,channelType:"P",channelData:e,serverError:this.state.serverError,onSubmitChannel:this.doSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),React.createElement(h,{show:s,title:n,description:"Some characters are not allowed in URLs and may be removed.",urlLabel:i+" URL",submitButtonText:r,currentURL:this.state.channelName,serverError:this.state.serverError,onModalSubmit:this.urlChangeSubmitted,onModalDismissed:this.urlChangeDismissed}))}}]),t}(React.Component);a.default=g,g.defaultProps={show:!1,channelType:"O"},g.propTypes={show:React.PropTypes.bool.isRequired,channelType:React.PropTypes.string.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./change_url_modal.jsx":26,"./new_channel_modal.jsx":68,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],68:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=ReactBootstrap.Modal,c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this),this.state={displayNameError:""}}return n(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){e.show===!0&&this.props.show===!1&&this.setState({displayNameError:""})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.display_name).value.trim();return t.length<1?void this.setState({displayNameError:"This field is required"}):void this.props.onSubmitChannel()}},{key:"handleChange",value:function(){var e={displayName:ReactDOM.findDOMNode(this.refs.display_name).value,purpose:ReactDOM.findDOMNode(this.refs.channel_purpose).value};this.props.onDataChanged(e)}},{key:"render",value:function(){var e=null,t=null,a="form-group";this.state.displayNameError&&(e=React.createElement("p",{className:"input__help error"},this.state.displayNameError),a+=" has-error"),this.props.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("p",{className:"input__help error"},this.props.serverError)));var s="",n="";switch(this.props.channelType){case"P":s="Group",n=React.createElement("div",{className:"modal-intro"},"Create a new private group with restricted membership. ",React.createElement("a",{href:"#",onClick:this.props.onTypeSwitched},"Create a public channel"));break;case"O":s="Channel",n=React.createElement("div",{className:"modal-intro"},"Create a new public channel anyone can join. ",React.createElement("a",{href:"#",onClick:this.props.onTypeSwitched},"Create a private group"))}var r=l.getShortenedTeamURL();return React.createElement("span",null,React.createElement(o,{show:this.props.show,bsSize:"large",onHide:this.props.onModalDismissed},React.createElement(o.Header,{closeButton:!0},React.createElement(o.Title,null,"New "+s)),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(o.Body,null,React.createElement("div",null,n),React.createElement("div",{className:a},React.createElement("label",{className:"col-sm-3 form__label control-label"},"Name"),React.createElement("div",{className:"col-sm-9"},React.createElement("input",{onChange:this.handleChange,type:"text",ref:"display_name",className:"form-control",placeholder:'Ex: "Bugs", "Marketing", "办公室恋情"',maxLength:"22",value:this.props.channelData.displayName,autoFocus:!0,tabIndex:"1"}),e,React.createElement("p",{className:"input__help dark"},"URL: "+r+this.props.channelData.name+" (",React.createElement("a",{href:"#",onClick:this.props.onChangeURLPressed},"Edit"),")"))),React.createElement("div",{className:"form-group less"},React.createElement("div",{className:"col-sm-3"},React.createElement("label",{className:"form__label control-label"},"Purpose"),React.createElement("label",{className:"form__label light"},"(optional)")),React.createElement("div",{className:"col-sm-9"},React.createElement("textarea",{className:"form-control no-resize",ref:"channel_purpose",rows:"4",placeholder:"Purpose",maxLength:"128",value:this.props.channelData.purpose,onChange:this.handleChange,tabIndex:"2"}),React.createElement("p",{className:"input__help"},"Describe how this "+s+" should be used."),t))),React.createElement(o.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onModalDismissed},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},"Create New "+s)))))}}]),t}(React.Component);a.default=c,c.defaultProps={show:!1,channelType:"O",serverError:""},c.propTypes={show:React.PropTypes.bool.isRequired,channelType:React.PropTypes.string.isRequired,channelData:React.PropTypes.object.isRequired,serverError:React.PropTypes.string,onSubmitChannel:React.PropTypes.func.isRequired,onModalDismissed:React.PropTypes.func.isRequired,onTypeSwitched:React.PropTypes.func.isRequired,onChangeURLPressed:React.PropTypes.func.isRequired,onDataChanged:React.PropTypes.func.isRequired},t.exports=a.default},{"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],69:[function(e,t,a){"use strict";function s(){var e=0,t=c.getAll(),a=c.getAllMembers();return t.forEach(function(t){var s=a[t.id];"D"===t.type?e+=t.total_msg_count-s.msg_count:s.mention_count>0?e+=s.mention_count:"mention"!==s.notify_props.mark_unread&&t.total_msg_count-s.msg_count>0&&(e+=1)}),{count:e}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../stores/channel_store.jsx"),u=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onListenerChange=this.onListenerChange.bind(this),this.state=s()}return r(t,e),i(t,[{key:"componentDidMount",value:function(){c.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){c.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=s();o.areStatesEqual(e,this.state)||this.setState(e)}},{key:"render",value:function(){return this.state.count?React.createElement("span",{className:"badge badge-notify"},this.state.count):null}}]),t}(React.Component);a.default=u,t.exports=a.default},{"../stores/channel_store.jsx":276,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],70:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./password_reset_send_link.jsx"),o=e("./password_reset_form.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return n(t,e),r(t,[{key:"render",value:function(){return"false"===this.props.isReset?React.createElement(l,{teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName}):React.createElement(o,{teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName,hash:this.props.hash,data:this.props.data})}}]),t}(React.Component);a.default=c,c.defaultProps={isReset:"",teamName:"",teamDisplayName:"",hash:"",data:""},c.propTypes={isReset:React.PropTypes.string,teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string,hash:React.PropTypes.string,data:React.PropTypes.string},t.exports=a.default},{"./password_reset_form.jsx":71,"./password_reset_send_link.jsx":72,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],71:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/client.jsx"),c=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handlePasswordReset=this.handlePasswordReset.bind(this),this.state={}}return r(t,e),i(t,[{key:"handlePasswordReset",value:function(e){e.preventDefault();var t={},a=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!a||a.length<5)return t.error="Please enter at least 5 characters.",void this.setState(t);t.error=null,this.setState(t);var s={};s.new_password=a,s.hash=this.props.hash,s.data=this.props.data,s.name=this.props.teamName,o.resetPassword(s,function(){this.setState({error:null,updateText:"Your password has been updated successfully."})}.bind(this),function(e){this.setState({error:e.message,updateText:null})}.bind(this))}},{key:"render",value:function(){var e=null;this.state.updateText&&(e=React.createElement("div",{className:"form-group"},React.createElement("br",null),React.createElement("label",{className:"control-label reset-form"},this.state.updateText," Click ",React.createElement("a",{href:"/"+this.props.teamName+"/login"},"here")," to log in.")));var t=null;this.state.error&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";return t&&(a+=" has-error"),React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,"Password Reset"),React.createElement("form",{onSubmit:this.handlePasswordReset},React.createElement("p",null,"Enter a new password for your "+this.props.teamDisplayName+" "+s.window.mm_config.SiteName+" account."),React.createElement("div",{className:a},React.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:"Password",spellCheck:"false"})),t,React.createElement("button",{type:"submit",className:"btn btn-primary"},"Change my password"),e)))}}]),t}(React.Component);a.default=c,c.defaultProps={teamName:"",teamDisplayName:"",hash:"",data:""},c.propTypes={teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string,hash:React.PropTypes.string,data:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],72:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSendLink=this.handleSendLink.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleSendLink",value:function(e){e.preventDefault();var t={},a=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();if(!a||!l.isEmail(a))return t.error="Please enter a valid email address.",void this.setState(t);t.error=null,this.setState(t);var s={};s.email=a,s.name=this.props.teamName,o.sendPasswordReset(s,function(){this.setState({error:null,updateText:React.createElement("p",null,"A password reset link has been sent to ",React.createElement("b",null,a)," for your ",React.createElement("b",null,this.props.teamDisplayName)," team on ",window.location.hostname,"."),moreUpdateText:"Please check your inbox."}),$(ReactDOM.findDOMNode(this.refs.reset_form)).hide()}.bind(this),function(e){this.setState({error:e.message,update_text:null,moreUpdateText:null})}.bind(this))}},{key:"render",value:function(){var e=null;this.state.updateText&&(e=React.createElement("div",{className:"reset-form alert alert-success"},this.state.updateText,this.state.moreUpdateText));var t=null;this.state.error&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";return t&&(a+=" has-error"),React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,"Password Reset"),e,React.createElement("form",{onSubmit:this.handleSendLink,ref:"reset_form"},React.createElement("p",null,"To reset your password, enter the email address you used to sign up for "+this.props.teamDisplayName+"."),React.createElement("div",{className:a},React.createElement("input",{type:"email",className:"form-control",name:"email",ref:"email",placeholder:"Email",spellCheck:"false"})),t,React.createElement("button",{type:"submit",className:"btn btn-primary"},"Reset my password"))))}}]),t}(React.Component);a.default=c,c.defaultProps={teamName:"",teamDisplayName:""},c.propTypes={teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string},t.exports=a.default},{"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],73:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=ReactBootstrap.Popover,c=ReactBootstrap.Overlay,u=e("../utils/utils.jsx"),d=e("../stores/channel_store.jsx"),h=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleShowDirectChannel=this.handleShowDirectChannel.bind(this),this.closePopover=this.closePopover.bind(this)}return n(t,e),r(t,[{key:"componentWillMount",value:function(){this.setState({showPopover:!1})}},{key:"componentDidMount",value:function(){var e=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(t){var a=void 0;a=t instanceof this.constructor?t:$(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type),e.call(this,t),t.currentTarget&&a.$tip&&a.$tip.one("mouseenter",function(){clearTimeout(a.timeout),a.$tip.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(a,a)})})}}},{key:"componentDidUpdate",value:function(){$(ReactDOM.findDOMNode(this.refs.memebersPopover)).find(".popover-content").perfectScrollbar()}},{key:"handleShowDirectChannel",value:function(e,t){var a=this;t.preventDefault(),u.openDirectChannelToUser(e,function(e,t){u.switchChannel(e),t&&a.closePopover()},function(){a.closePopover()})}},{key:"closePopover",value:function(){this.setState({showPopover:!1})}},{key:"render",value:function(){var e=this,t=[],a=0,s="-",n=this.props.members,r=l.getProfilesUsernameMap(),i=l.getCurrentId(),h=d.getCurrent();return n&&r&&(n.sort(function(e,t){return e.username.localeCompare(t.username)}),n.forEach(function(s,n){var l=[],o=u.getFullName(s);if(o&&l.push(React.createElement("span",{key:s.id+"__full-name",className:"full-name"},o)),s.nickname){var c=o?" - ":"";l.push(React.createElement("span",{key:s.nickname+"__nickname"},c+s.nickname))}var d="";i!==s.id&&"D"!==h.type&&(d=React.createElement("a",{href:"#",className:"btn-message",onClick:function(t){return e.handleShowDirectChannel(s,t)}},"Message")),r[s.username]&&r[s.username].delete_at<=0&&(t.push(React.createElement("div",{className:"text-nowrap",key:"popover-member-"+n},React.createElement("img",{className:"profile-img rounded pull-left",width:"26px",height:"26px",src:"/api/v1/users/"+s.id+"/image?time="+s.update_at+"&"+u.getSessionIndex()}),React.createElement("div",{className:"pull-left"},React.createElement("div",{className:"more-name"},s.username)),React.createElement("div",{className:"pull-right"},d))),a++)}),a>20?s="20+":a>0&&(s=a.toString())),React.createElement("div",null,React.createElement("div",{id:"member_popover",ref:"member_popover_target",onClick:function(t){return e.setState({popoverTarget:t.target,showPopover:!e.state.showPopover})}},React.createElement("div",null,s,React.createElement("span",{className:"fa fa-user","aria-hidden":"true"}))),React.createElement(c,{rootClose:!0,onHide:this.closePopover,show:this.state.showPopover,target:function(){return e.state.popoverTarget},placement:"bottom"},React.createElement(o,{ref:"memebersPopover",title:"Members",id:"member-list-popover"},t)))}}]),t}(React.Component);a.default=h,h.propTypes={members:React.PropTypes.array.isRequired,channelId:React.PropTypes.string.isRequired},t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],74:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./post_header.jsx"),c=e("./post_body.jsx"),u=e("../dispatcher/app_dispatcher.jsx"),d=e("../utils/constants.jsx"),h=e("../stores/user_store.jsx"),m=e("../stores/post_store.jsx"),p=e("../stores/channel_store.jsx"),f=e("../utils/client.jsx"),g=e("../utils/async_client.jsx"),b=d.ActionTypes,v=e("../utils/utils.jsx"),E=e("./post_info.jsx"),_=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleCommentClick=this.handleCommentClick.bind(this),this.forceUpdateInfo=this.forceUpdateInfo.bind(this),this.retryPost=this.retryPost.bind(this),this.state={}}return r(t,e),i(t,[{key:"handleCommentClick",value:function(e){e.preventDefault();var t={};t.order=[this.props.post.id],t.posts=this.props.posts,u.handleServerAction({type:b.RECIEVED_POST_SELECTED,post_list:t}),u.handleServerAction({type:b.RECIEVED_SEARCH,results:null})}},{key:"forceUpdateInfo",value:function(){this.refs.info.forceUpdate(),this.refs.header.forceUpdate()}},{key:"retryPost",value:function(e){var t=this;e.preventDefault();var a=this.props.post;f.createPost(a,a.channel_id,function(e){g.getPosts();var t=p.get(a.channel_id),s=p.getMember(a.channel_id);s.msg_count=t.total_msg_count,s.last_viewed_at=v.getTimestamp(),p.setChannelMember(s),u.handleServerAction({type:b.RECIEVED_POST,post:e})},function(){a.state=d.POST_FAILED,m.updatePendingPost(a),t.forceUpdate()}),a.state=d.POST_LOADING,m.updatePendingPost(a),this.forceUpdate()}},{key:"shouldComponentUpdate",value:function(e){return v.areStatesEqual(e.post,this.props.post)?e.sameRoot!==this.props.sameRoot?!0:e.sameUser!==this.props.sameUser?!0:this.getCommentCount(e)!==this.getCommentCount(this.props)?!0:!1:!0}},{key:"getCommentCount",value:function(e){var t=e.post,a=e.parentPost,s=e.posts,n=0,r=void 0;r=a?t.root_id:t.id;for(var i in s)s[i].root_id===r&&(n+=1);return n}},{key:"render",value:function(){var e=this.props.post,t=this.props.parentPost,a=this.props.posts;e.props||(e.props={});var n="Post";e.root_id&&e.root_id.length>0&&(n="Comment");var r,i=this.getCommentCount(this.props);r=this.props.sameRoot?"same--root":"other--root";var l="";"Post"!==n&&(l="post--comment");var u="";h.getCurrentId()!==e.user_id||e.props.from_webhook||(u="current--user");var d=h.getProfile(e.user_id),m=h.getCurrentUser().update_at;d&&(m=d.update_at);var p="";this.props.sameUser&&(p="same--user");var f=null;if(!this.props.hideProfilePic){var g="/api/v1/users/"+e.user_id+"/image?time="+m+"&"+v.getSessionIndex();e.props&&e.props.from_webhook&&"true"===s.window.mm_config.EnablePostIconOverride&&e.props.override_icon_url&&(g=e.props.override_icon_url),f=React.createElement("div",{className:"post-profile-img__container"},React.createElement("img",{className:"post-profile-img",src:g,height:"36",width:"36"}))}return React.createElement("div",null,React.createElement("div",{id:"post_"+e.id,className:"post "+p+" "+r+" "+l+" "+u},f,React.createElement("div",{className:"post__content"},React.createElement(o,{ref:"header",post:e,sameRoot:this.props.sameRoot,commentCount:i,handleCommentClick:this.handleCommentClick,isLastComment:this.props.isLastComment}),React.createElement(c,{post:e,sameRoot:this.props.sameRoot,parentPost:t,posts:a,handleCommentClick:this.handleCommentClick,retryPost:this.retryPost}),React.createElement(E,{ref:"info",post:e,sameRoot:this.props.sameRoot,commentCount:i,handleCommentClick:this.handleCommentClick,allowReply:"true"}))))}}]),t}(React.Component);a.default=_,_.propTypes={post:React.PropTypes.object,posts:React.PropTypes.object,parentPost:React.PropTypes.object,sameUser:React.PropTypes.bool,sameRoot:React.PropTypes.bool,hideProfilePic:React.PropTypes.bool,isLastComment:React.PropTypes.bool},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./post_body.jsx":77,"./post_header.jsx":80,"./post_info.jsx":81,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],75:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/text_formatting.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getFieldsTable=this.getFieldsTable.bind(this),this.getInitState=this.getInitState.bind(this),this.shouldCollapse=this.shouldCollapse.bind(this),this.toggleCollapseState=this.toggleCollapseState.bind(this)}return n(t,e),r(t,[{key:"componentDidMount",value:function(){$(this.refs.attachment).on("click",".attachment-link-more",this.toggleCollapseState)}},{key:"componentWillUnmount",value:function(){$(this.refs.attachment).off("click",".attachment-link-more",this.toggleCollapseState)}},{key:"componentWillMount",value:function(){this.setState(this.getInitState())}},{key:"getInitState",value:function(){var e=this.shouldCollapse(),t=l.formatText(this.props.attachment.text||""),a=t+(e?'<a class="attachment-link-more" href="#">▲ collapse text</a>':""),s=e?this.getCollapsedText():t;return{shouldCollapse:e,collapsedText:s,uncollapsedText:a,text:e?s:a,collapsed:e}}},{key:"toggleCollapseState",value:function(e){e.preventDefault();var t=this.state;t.text=t.collapsed?t.uncollapsedText:t.collapsedText,t.collapsed=!t.collapsed,this.setState(t)}},{key:"shouldCollapse",value:function(){var e=this.props.attachment.text||"";return(e.match(/\n/g)||[]).length>=5||e.length>700}},{key:"getCollapsedText",value:function(){var e=this.props.attachment.text||"";return(e.match(/\n/g)||[]).length>=5?e=e.split("\n").splice(0,5).join("\n"):e.length>700&&(e=e.substr(0,700)),l.formatText(e)+'<a class="attachment-link-more" href="#">▼ read more</a>'}},{key:"getFieldsTable",value:function(){var e=this.props.attachment.fields;if(!e||!e.length)return"";var t=e.filter(function(e){return e.short}).length>0,a=void 0,s=void 0;return t?!function(){var t=[],n=[];e.forEach(function(e,a){t.push(React.createElement("th",{className:"attachment___field-caption",key:"attachment__field-caption-"+a},e.title)),n.push(React.createElement("td",{className:"attachment___field",key:"attachment__field-"+a,dangerouslySetInnerHTML:{__html:l.formatText(e.value||"")}}))}),a=React.createElement("tr",null,t),s=React.createElement("tr",null,n)}():(s=[],e.forEach(function(e,t){s.push(React.createElement("tr",{key:"attachment__field-"+t},React.createElement("td",{className:"attachment___field-caption"},e.title),React.createElement("td",{className:"attachment___field",dangerouslySetInnerHTML:{__html:l.formatText(e.value||"")}})))})),React.createElement("table",{className:"attachment___fields"},React.createElement("thead",null,a),React.createElement("tbody",null,s))}},{key:"render",value:function(){var e=this.props.attachment,t=void 0;e.pretext&&(t=React.createElement("div",{className:"attachment__thumb-pretext",dangerouslySetInnerHTML:{__html:l.formatText(e.pretext)}}));var a=[];(e.author_name||e.author_icon)&&(e.author_icon&&a.push(React.createElement("img",{className:"attachment__author-icon",src:e.author_icon,key:"attachment__author-icon",height:"14",width:"14"})),e.author_name&&a.push(React.createElement("span",{className:"attachment__author-name",key:"attachment__author-name"},e.author_name))),e.author_link&&(a=React.createElement("a",{href:e.author_link,target:"_blank"},a));var s=void 0;e.title&&(s=e.title_link?React.createElement("h1",{className:"attachment__title"},React.createElement("a",{className:"attachment__title-link",href:e.title_link,target:"_blank"},e.title)):React.createElement("h1",{className:"attachment__title"},e.title));var n=void 0;e.text&&(n=React.createElement("div",{className:"attachment__text",dangerouslySetInnerHTML:{__html:this.state.text}}));var r=void 0;e.image_url&&(r=React.createElement("img",{className:"attachment__image",src:e.image_url}));var i=void 0;e.thumb_url&&(i=React.createElement("div",{className:"attachment__thumb-container"},React.createElement("img",{src:e.thumb_url})));var o=this.getFieldsTable(),c=void 0;return e.color&&"#"===e.color[0]&&(c={borderLeftColor:e.color}),React.createElement("div",{className:"attachment",ref:"attachment"},t,React.createElement("div",{className:"attachment__content"},React.createElement("div",{className:c?"clearfix attachment__container":"clearfix attachment__container attachment__container--"+e.color,style:c},a,s,React.createElement("div",null,React.createElement("div",{className:i?"attachment__body":"attachment__body attachment__body--no_thumb"},n,r,o),i,React.createElement("div",{style:{clear:"both"}})))))}}]),t}(React.Component);a.default=o,o.propTypes={attachment:React.PropTypes.object.isRequired},t.exports=a.default},{"../utils/text_formatting.jsx":292,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],76:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./post_attachment.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return n(t,e),r(t,[{key:"render",value:function(){var e=[];return this.props.attachments.forEach(function(t,a){e.push(React.createElement(l,{attachment:t,key:"att_"+a}))}),React.createElement("div",{className:"attachment_list"},e)}}]),t}(React.Component);a.default=o,o.propTypes={attachments:React.PropTypes.array.isRequired},t.exports=a.default},{"./post_attachment.jsx":75,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],77:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default,o=e("babel-runtime/core-js/object/keys").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("./file_attachment_list.jsx"),u=e("../stores/user_store.jsx"),d=e("../utils/utils.jsx"),h=e("../utils/constants.jsx"),m=e("../utils/text_formatting.jsx"),p=e("twemoji"),f=e("./post_body_additional_content.jsx"),g=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.receivedYoutubeData=!1,this.isGifLoading=!1,this.handleUserChange=this.handleUserChange.bind(this),this.parseEmojis=this.parseEmojis.bind(this),this.createEmbed=this.createEmbed.bind(this),this.createGifEmbed=this.createGifEmbed.bind(this),this.loadGif=this.loadGif.bind(this),this.createYoutubeEmbed=this.createYoutubeEmbed.bind(this);var a=d.extractLinks(this.props.post.message),s=u.getProfiles();this.state={links:a.links,message:a.text,hasUserProfiles:s&&o(s).length>1}}return r(t,e),i(t,[{key:"getAllChildNodes",value:function(e){function t(e){a.push(e);for(var s=0,n=e.childNodes.length;n>s;++s)t(e.childNodes[s])}var a=[];return t(e),a}},{key:"parseEmojis",value:function(){p.parse(ReactDOM.findDOMNode(this),{size:h.EMOJI_SIZE})}},{key:"componentDidMount",value:function(){this.parseEmojis(),u.addChangeListener(this.handleUserChange)}},{key:"componentDidUpdate",value:function(){this.parseEmojis()}},{key:"componentWillUnmount",value:function(){u.removeChangeListener(this.handleUserChange)}},{key:"handleUserChange",value:function(){if(!this.state.hasProfiles){var e=u.getProfiles();this.setState({hasProfiles:e&&o(e).length>1})}}},{key:"componentWillReceiveProps",value:function(e){var t=d.extractLinks(e.post.message);this.setState({links:t.links,message:t.text})}},{key:"createEmbed",value:function(e){var t=this.createYoutubeEmbed(e);return null!=t?t:t=this.createGifEmbed(e)}},{key:"loadGif",value:function(e){var t=this;if(!this.isGifLoading){this.isGifLoading=!0;var a=new Image;a.onload=function(){t.setState({gifLoaded:!0})},a.src=e}}},{key:"createGifEmbed",value:function(e){return".gif"!==e.substring(e.length-4)?null:this.state.gifLoaded?React.createElement("img",{className:"gif-div",src:e}):(this.loadGif(e),React.createElement("img",{className:"gif-div placeholder",height:"500px"}))}},{key:"handleYoutubeTime",value:function(e){var t=/[\\?&]t=([0-9hms]+)/,a=e.trim().match(t);if(!a||!a[1])return"";var s=a[1].match(/([0-9]+)h/),n=a[1].match(/([0-9]+)m/),r=a[1].match(/([0-9]+)s/),i=0;return s&&s[1]&&(i+=3600*parseInt(s[1],10)),
n&&n[1]&&(i+=60*parseInt(n[1],10)),r&&r[1]&&(i+=parseInt(r[1],10)),"&start="+i.toString()}},{key:"createYoutubeEmbed",value:function(e){function t(e){var t=$(e.target).closest(".video-thumbnail__container")[0],a=document.createElement("iframe");a.setAttribute("src","https://www.youtube.com/embed/"+t.id+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+l),a.setAttribute("width","480px"),a.setAttribute("height","360px"),a.setAttribute("type","text/html"),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","allowfullscreen"),t.parentNode.replaceChild(a,t)}function a(e){if(!e.items.length||!e.items[0].snippet)return null;var t=e.items[0].snippet;this.receivedYoutubeData=!0,this.setState({youtubeTitle:t.title})}var n=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|watch\?(?:[a-zA-Z-_]+=[a-zA-Z0-9-_]+&)+v=)([^#\&\?]*).*/,r=e.trim().match(n);if(!r||11!==r[1].length)return null;var i=r[1],l=this.handleYoutubeTime(e);s.window.mm_config.GoogleDeveloperKey&&!this.receivedYoutubeData&&$.ajax({async:!0,url:"https://www.googleapis.com/youtube/v3/videos",type:"GET",data:{part:"snippet",id:i,key:s.window.mm_config.GoogleDeveloperKey},success:a.bind(this)});var o="Youtube";return this.state.youtubeTitle&&(o+=" - "),React.createElement("div",{className:"post-comment"},React.createElement("h4",null,React.createElement("span",{className:"video-type"},o),React.createElement("span",{className:"video-title"},React.createElement("a",{href:e},this.state.youtubeTitle))),React.createElement("div",{className:"video-div embed-responsive-item",id:i,onClick:t},React.createElement("div",{className:"embed-responsive embed-responsive-4by3 video-div__placeholder"},React.createElement("div",{id:i,className:"video-thumbnail__container"},React.createElement("img",{className:"video-thumbnail",src:"https://i.ytimg.com/vi/"+i+"/hqdefault.jpg"}),React.createElement("div",{className:"block"},React.createElement("span",{className:"play-button"},React.createElement("span",null)))))))}},{key:"render",value:function(){var e=this.props.post,t=this.props.post.filenames,a=this.props.parentPost,s="",n="";if(a){var r=u.getProfile(a.user_id),i="",l="...";null!=r&&(i="s"===r.username.slice(-1)?"'":"'s",l=React.createElement("a",{className:"theme",onClick:d.searchForTerm.bind(null,r.username)},r.username));var o="";a.message?o=d.replaceHtmlEntities(a.message):a.filenames.length&&(o=a.filenames[0].split("/").pop(),2===a.filenames.length?o+=" plus 1 other file":a.filenames.length>2&&(o+=" plus "+(a.filenames.length-1)+" other files")),s=React.createElement("p",{className:"post-link"},React.createElement("span",null,"Commented on ",l,i," message: ",React.createElement("a",{className:"theme",onClick:this.props.handleCommentClick},o))),n+=" post-comment"}var p=void 0;e.state===h.POST_FAILED?(n+=" post-fail",p=React.createElement("a",{className:"theme post-retry pull-right",href:"#",onClick:this.props.retryPost},"Retry")):e.state===h.POST_LOADING&&(n+=" post-waiting",p=React.createElement("img",{className:"post-loading-gif pull-right",src:"/static/images/load.gif"}));var g=void 0;0===t.length&&this.state.links&&this.state.links.length>0&&(g=this.createEmbed(this.state.links[0]));var b="";return t&&t.length>0&&(b=React.createElement(c,{filenames:t,channelId:e.channel_id,userId:e.user_id})),React.createElement("div",{className:"post-body"},s,React.createElement("div",{key:e.id+"_message",id:e.id+"_message",className:n},p,React.createElement("span",{ref:"message_span",onClick:m.handleClick,dangerouslySetInnerHTML:{__html:m.formatText(this.state.message)}})),React.createElement(f,{post:e}),b,g)}}]),t}(React.Component);a.default=g,g.propTypes={post:React.PropTypes.object.isRequired,parentPost:React.PropTypes.object,retryPost:React.PropTypes.func.isRequired,handleCommentClick:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/text_formatting.jsx":292,"../utils/utils.jsx":293,"./file_attachment_list.jsx":46,"./post_body_additional_content.jsx":78,"babel-runtime/core-js/object/keys":156,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,twemoji:"twemoji"}],78:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./post_attachment_list.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getSlackAttachment=this.getSlackAttachment.bind(this),this.getComponent=this.getComponent.bind(this)}return n(t,e),r(t,[{key:"componentWillMount",value:function(){this.setState({type:this.props.post.type,shouldRender:Boolean(this.props.post.type)})}},{key:"getSlackAttachment",value:function(){var e=this.props.post.props&&this.props.post.props.attachments||[];return React.createElement(l,{key:"post_body_additional_content"+this.props.post.id,attachments:e})}},{key:"getComponent",value:function(){switch(this.state.type){case"slack_attachment":return this.getSlackAttachment()}}},{key:"render",value:function(){var e=[];if(this.state.shouldRender){var t=this.getComponent();t&&(e=t)}return React.createElement("div",null,e)}}]),t}(React.Component);a.default=o,o.propTypes={post:React.PropTypes.object.isRequired},t.exports=a.default},{"./post_attachment_list.jsx":76,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],79:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../dispatcher/app_dispatcher.jsx"),c=e("../utils/constants.jsx"),u=c.ActionTypes,d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClose=this.handleClose.bind(this),this.state={}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",function(){e.handleClose()})}},{key:"handleClose",value:function(){o.handleServerAction({type:u.RECIEVED_SEARCH,results:null}),o.handleServerAction({type:u.RECIEVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),o.handleServerAction({type:u.RECIEVED_POST_SELECTED,results:null})}},{key:"render",value:function(){var e=l.getCurrentUser();return null!=e?React.createElement("div",{className:"modal fade",ref:"modal",id:"post_deleted",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",id:"myModalLabel"},"Comment could not be posted")),React.createElement("div",{className:"modal-body"},React.createElement("p",null,"Someone deleted the message on which you tried to post a comment.")),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},"Okay"))))):React.createElement("div",null)}}]),t}(React.Component);a.default=d,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],80:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./user_profile.jsx"),c=e("./post_info.jsx"),u=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return r(t,e),i(t,[{key:"render",value:function(){var e=this.props.post,t=React.createElement(o,{userId:e.user_id}),a=void 0;return e.props&&e.props.from_webhook&&(e.props.override_username&&"true"===s.window.mm_config.EnablePostUsernameOverride&&(t=React.createElement(o,{userId:e.user_id,overwriteName:e.props.override_username,disablePopover:!0})),a=React.createElement("li",{className:"post-header-col post-header__name bot-indicator"},"BOT")),React.createElement("ul",{className:"post-header post-header-post"},React.createElement("li",{className:"post-header-col post-header__name"},React.createElement("strong",null,t)),a,React.createElement("li",{className:"post-info--hidden"},React.createElement(c,{post:e,commentCount:this.props.commentCount,handleCommentClick:this.props.handleCommentClick,allowReply:"true",isLastComment:this.props.isLastComment})))}}]),t}(React.Component);a.default=u,u.defaultProps={post:null,commentCount:0,isLastComment:!1},u.propTypes={post:React.PropTypes.object,commentCount:React.PropTypes.number,isLastComment:React.PropTypes.bool,handleCommentClick:React.PropTypes.func},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./post_info.jsx":81,"./user_profile.jsx":129,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],81:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../utils/utils.jsx"),c=e("./time_since.jsx"),u=e("../utils/constants.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return n(t,e),r(t,[{key:"createDropdown",value:function(){var e=this.props.post,t=l.getCurrentId()===e.user_id,a=o.isAdmin(l.getCurrentUser().roles);if(e.state===u.POST_FAILED||e.state===u.POST_LOADING||e.state===u.POST_DELETED)return"";var s="Post";e.root_id&&e.root_id.length>0&&(s="Comment");var n=[],r=0;return"Post"===s&&(r=this.props.commentCount),t&&n.push(React.createElement("li",{key:"editPost",role:"presentation"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#post_textbox","data-title":s,"data-message":e.message,"data-postid":e.id,"data-channelid":e.channel_id,"data-comments":r},"Edit"))),(t||a)&&n.push(React.createElement("li",{key:"deletePost",role:"presentation"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#delete_post","data-title":s,"data-postid":e.id,"data-channelid":e.channel_id,"data-comments":r},"Delete"))),"true"===this.props.allowReply&&n.push(React.createElement("li",{key:"replyLink",role:"presentation"},React.createElement("a",{className:"reply-link theme",href:"#",onClick:this.props.handleCommentClick},"Reply"))),0===n.length?"":React.createElement("div",null,React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),React.createElement("ul",{className:"dropdown-menu",role:"menu"},n))}},{key:"render",value:function(){var e=this.props.post,t="",a=" comment-icon__container__hide";this.props.isLastComment&&(a=" comment-icon__container__show"),this.props.commentCount>=1&&e.state!==u.POST_FAILED&&e.state!==u.POST_LOADING&&e.state!==u.POST_DELETED&&(t=React.createElement("a",{href:"#",className:"comment-icon__container theme"+a,onClick:this.props.handleCommentClick},React.createElement("span",{className:"comment-icon",dangerouslySetInnerHTML:{__html:u.COMMENT_ICON}}),this.props.commentCount));var s=this.createDropdown();return React.createElement("ul",{className:"post-header post-info"},React.createElement("li",{className:"post-header-col"},React.createElement(c,{eventTime:e.create_at})),React.createElement("li",{className:"post-header-col post-header__reply"},React.createElement("div",{className:"dropdown"},s),t))}}]),t}(React.Component);a.default=d,d.defaultProps={post:null,commentCount:0,isLastComment:!1,allowReply:!1},d.propTypes={post:React.PropTypes.object,commentCount:React.PropTypes.number,isLastComment:React.PropTypes.bool,allowReply:React.PropTypes.string,handleCommentClick:React.PropTypes.func},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./time_since.jsx":125,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],82:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/user_store.jsx"),o=e("../utils/utils.jsx"),c=e("./post.jsx"),u=e("../utils/constants.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleScroll=this.handleScroll.bind(this),this.isAtBottom=this.isAtBottom.bind(this),this.loadMorePostsTop=this.loadMorePostsTop.bind(this),this.createPosts=this.createPosts.bind(this),this.updateScrolling=this.updateScrolling.bind(this),this.handleResize=this.handleResize.bind(this),this.jumpToPostNode=null,this.wasAtBottom=!0,this.scrollHeight=0}return n(t,e),r(t,[{key:"isAtBottom",value:function(){return this.refs.postlist.scrollHeight-this.refs.postlist.scrollTop===this.refs.postlist.clientHeight}},{key:"handleScroll",value:function(){for(var e=this.refs.postlistcontent.childNodes,t=0;t<e.length;t++)if(e[t].offsetTop>this.refs.postlist.scrollTop+this.refs.postlist.offsetHeight/3){this.jumpToPostNode=e[t];break}this.wasAtBottom=this.isAtBottom(),this.props.postViewScrolled(this.isAtBottom()),this.prevScrollHeight=this.refs.postlist.scrollHeight}},{key:"loadMorePostsTop",value:function(){this.props.loadMorePostsTopClicked()}},{key:"createPosts",value:function(e,t){var a=[],s=new Date(0),n=l.getCurrentId(),r=!1,i=this.props.numPostsToDisplay;t.length-1<i&&(i=t.length-1);for(var d=i;d>=0;d--){var h=e[t[d]],m=e[h.parent_id],p=e[t[d+1]];if(!m||m.state!==u.POST_DELETED){var f=!1,g=!1,b=!1;p&&(f=p.user_id===h.user_id&&h.create_at-p.create_at<=3e5,g=o.isComment(h)&&(p.id===h.root_id||p.root_id===h.root_id),p.user_id!==h.user_id||o.isComment(p)||o.isComment(h)||h.props&&h.props.from_webhook||p.props&&p.props.from_webhook||(b=!0));var v=o.isComment(h)&&(0===d||e[t[d-1]].root_id!==h.root_id),E=React.createElement(c,{key:h.id+"postKey",ref:h.id,sameUser:f,sameRoot:g,post:h,parentPost:m,posts:e,hideProfilePic:b,isLastComment:v}),_=o.getDateForUnixTicks(h.create_at);if(_.toDateString()!==s.toDateString()&&a.push(React.createElement("div",{key:_.toDateString(),className:"date-separator"},React.createElement("hr",{className:"separator__hr"}),React.createElement("div",{className:"separator__text"},_.toDateString()))),h.user_id!==n&&0!==this.props.messageSeparatorTime&&h.create_at>this.props.messageSeparatorTime&&!r){r=!0;var y="";o.isBrowserIE()||(y="new_message_"+h.id),a.push(React.createElement("div",{id:y,key:"unviewed",ref:"newMessageSeparator",className:"new-separator"},React.createElement("hr",{className:"separator__hr"}),React.createElement("div",{className:"separator__text"},"New Messages")))}a.push(E),s=_}}return a}},{key:"updateScrolling",value:function(){var e=this;this.props.scrollType===t.SCROLL_TYPE_BOTTOM?window.requestAnimationFrame(function(){e.refs.postlist.scrollTop=e.refs.postlist.scrollHeight}):this.props.scrollType===t.SCROLL_TYPE_NEW_MESSAGE?window.requestAnimationFrame(function(){e.refs.newMessageSeparator?e.refs.newMessageSeparator.scrollIntoView():e.refs.postlist.scrollTop=e.refs.postlist.scrollHeight}):this.props.scrollType===t.SCROLL_TYPE_POST&&this.props.scrollPost?window.requestAnimationFrame(function(){var t=ReactDOM.findDOMNode(e.refs[e.props.scrollPost]);t.scrollIntoView(),e.refs.postlist.scrollTop===t.offsetTop?e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3:e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3+(e.refs.postlist.scrollTop-t.offsetTop)}):this.props.scrollType===t.SIDEBAR_OPEN?this.wasAtBottom?this.refs.postlist.scrollTop=this.refs.postlist.scrollHeight:window.requestAnimationFrame(function(){e.jumpToPostNode.scrollIntoView(),e.refs.postlist.scrollTop===e.jumpToPostNode.offsetTop?e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3:e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3+(e.refs.postlist.scrollTop-e.jumpToPostNode.offsetTop)}):this.refs.postlist.scrollHeight!==this.prevScrollHeight&&window.requestAnimationFrame(function(){e.refs.postlist.scrollTop+=e.refs.postlist.scrollHeight-e.prevScrollHeight})}},{key:"handleResize",value:function(){this.updateScrolling()}},{key:"componentDidMount",value:function(){this.updateScrolling(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(){this.updateScrolling()}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive!==e.isActive?!0:this.props.postList!==e.postList?!0:this.props.scrollPost!==e.scrollPost?!0:this.props.scrollType!==e.scrollType&&e.scrollType!==t.SCROLL_TYPE_FREE?!0:this.props.numPostsToDisplay!==e.numPostsToDisplay?!0:this.props.messageSeparatorTime!==e.messageSeparatorTime?!0:o.areStatesEqual(this.props.postList,e.postList)?!1:!0}},{key:"render",value:function(){var e=[],t=[],a=void 0,s=void 0,n="inactive";return null!=this.props.postList&&(e=this.props.postList.posts,t=this.props.postList.order,a=t.length>=this.props.numPostsToDisplay?React.createElement("a",{ref:"loadmore",className:"more-messages-text theme",href:"#",onClick:this.loadMorePostsTop},"Load more messages"):this.props.introText,s=this.createPosts(e,t),this.props.isActive&&(n="")),React.createElement("div",{ref:"postlist",className:"post-list-holder-by-time "+n,onScroll:this.handleScroll},React.createElement("div",{className:"post-list__table"},React.createElement("div",{ref:"postlistcontent",className:"post-list__content"},a,s)))}}],[{key:"SCROLL_TYPE_FREE",get:function(){return 1}},{key:"SCROLL_TYPE_BOTTOM",get:function(){return 2}},{key:"SIDEBAR_OPEN",get:function(){return 3}},{key:"SCROLL_TYPE_NEW_MESSAGE",get:function(){return 4}}]),t}(React.Component);a.default=d,d.defaultProps={},d.propTypes={isActive:React.PropTypes.bool,postList:React.PropTypes.object,scrollPost:React.PropTypes.string,scrollType:React.PropTypes.number,postViewScrolled:React.PropTypes.func.isRequired,loadMorePostsTopClicked:React.PropTypes.func.isRequired,numPostsToDisplay:React.PropTypes.number,introText:React.PropTypes.element,messageSeparatorTime:React.PropTypes.number},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./post.jsx":74,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],83:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/object/assign").default,o=e("babel-runtime/core-js/object/keys").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("../utils/channel_intro_mssages.jsx"),u=e("./posts_view.jsx"),d=e("./loading_screen.jsx"),h=e("./channel_invite_modal.jsx"),m=e("../stores/channel_store.jsx"),p=e("../stores/post_store.jsx"),f=e("../utils/utils.jsx"),g=e("../utils/client.jsx"),b=e("../dispatcher/app_dispatcher.jsx"),v=e("../utils/async_client.jsx"),E=e("../utils/constants.jsx"),_=E.ActionTypes,y=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.onChannelChange=this.onChannelChange.bind(this),this.onChannelLeave=this.onChannelLeave.bind(this),this.onPostsChange=this.onPostsChange.bind(this),this.handlePostsViewScroll=this.handlePostsViewScroll.bind(this),this.loadMorePostsTop=this.loadMorePostsTop.bind(this),this.postsLoaded=this.postsLoaded.bind(this),this.postsLoadedFailure=this.postsLoadedFailure.bind(this),this.handlePostsViewJumpRequest=this.handlePostsViewJumpRequest.bind(this);var e=m.getCurrentId(),a={scrollType:u.SCROLL_TYPE_BOTTOM,scrollPost:null,numPostsToDisplay:E.POST_CHUNK_SIZE};e?l(a,{currentChannelIndex:0,channels:[e],postLists:[this.getChannelPosts(e)]}):l(a,{currentChannelIndex:null,channels:[],postLists:[]}),a.showInviteModal=!1,this.state=a}return n(t,e),r(t,[{key:"componentDidMount",value:function(){m.addChangeListener(this.onChannelChange),m.addLeaveListener(this.onChannelLeave),p.addChangeListener(this.onPostsChange),p.addPostsViewJumpListener(this.handlePostsViewJumpRequest)}},{key:"componentWillUnmount",value:function(){m.removeChangeListener(this.onChannelChange),m.removeLeaveListener(this.onChannelLeave),p.removeChangeListener(this.onPostsChange),p.removePostsViewJumpListener(this.handlePostsViewJumpRequest)}},{key:"handlePostsViewJumpRequest",value:function(e,t){switch(e){case E.PostsViewJumpTypes.BOTTOM:this.setState({scrollType:u.SCROLL_TYPE_BOTTOM});break;case E.PostsViewJumpTypes.POST:this.setState({scrollType:u.SCROLL_TYPE_POST,scrollPost:t});break;case E.PostsViewJumpTypes.SIDEBAR_OPEN:this.setState({scrollType:u.SIDEBAR_OPEN})}}},{key:"onChannelChange",value:function(){var e=this.state.postLists.slice(),t=this.state.channels.slice(),a=m.getCurrentId();if(a===t[this.state.currentChannelIndex])return void this.forceUpdate();p.clearUnseenDeletedPosts(a);var s=Number.MAX_VALUE,n=m.getMember(a);null!=n&&(s=n.last_viewed_at);var r=t.indexOf(a);-1===r&&(r=t.length,t.push(a),e[r]=this.getChannelPosts(a)),this.setState({currentChannelIndex:r,currentLastViewed:s,scrollType:u.SCROLL_TYPE_NEW_MESSAGE,channels:t,postLists:e})}},{key:"onChannelLeave",value:function(e){var t=this.state.postLists.slice(),a=this.state.channels.slice(),s=a.indexOf(e);-1!==s&&(t.splice(s,1),a.splice(s,1)),this.setState({channels:a,postLists:t})}},{key:"onPostsChange",value:function(){var e=this.state.channels,t=this.state.postLists.slice(),a=this.getChannelPosts(e[this.state.currentChannelIndex]);t[this.state.currentChannelIndex]=a,this.setState({postLists:t})}},{key:"getChannelPosts",value:function(e){var t=p.getPosts(e);if(null!=t){var a=p.getUnseenDeletedPosts(e);if(a&&o(a).length>0){for(var s in a)a.hasOwnProperty(s)&&(t.posts[s]=a[s],t.order.unshift(s));t.order.sort(function(e,a){return t.posts[e].create_at>t.posts[a].create_at?-1:t.posts[e].create_at<t.posts[a].create_at?1:0})}var n=p.getPendingPosts(e);if(n){t.order=n.order.concat(t.order);for(var r in n.posts)n.posts.hasOwnProperty(r)&&(t.posts[r]=n.posts[r])}}return t}},{key:"loadMorePostsTop",value:function(){var e=this.state.postLists,t=this.state.channels,a=t[this.state.currentChannelIndex],s=e[this.state.currentChannelIndex];this.setState({numPostsToDisplay:this.state.numPostsToDisplay+E.POST_CHUNK_SIZE}),g.getPostsPage(a,s.order.length,E.POST_CHUNK_SIZE,this.postsLoaded,this.postsLoadedFailure)}},{key:"postsLoaded",value:function(e){if(e&&0!==e.order.length){var t=this.state.postLists,a=t[this.state.currentChannelIndex],s=this.state.channels,n=s[this.state.currentChannelIndex],r={};r.posts=l(a.posts,e.posts),r.order=a.order.concat(e.order),b.handleServerAction({type:_.RECIEVED_POSTS,id:n,post_list:r}),g.getProfiles()}}},{key:"postsLoadedFailure",value:function(e){v.dispatchError(e,"getPosts")}},{key:"handlePostsViewScroll",value:function(e){e?this.setState({scrollType:u.SCROLL_TYPE_BOTTOM}):this.setState({scrollType:u.SCROLL_TYPE_FREE})}},{key:"shouldComponentUpdate",value:function(e,t){return f.areStatesEqual(this.state,t)?!1:!0}},{key:"render",value:function(){for(var e=this,t=this.state.postLists,a=this.state.channels,s=a[this.state.currentChannelIndex],n=m.get(s),r=[],i=0;i<a.length;i++){var l=a[i]===s;r.push(React.createElement(u,{key:"postsviewkey"+i,isActive:l,postList:t[i],scrollType:this.state.scrollType,scrollPost:this.state.scrollPost,postViewScrolled:this.handlePostsViewScroll,loadMorePostsTopClicked:this.loadMorePostsTop,numPostsToDisplay:this.state.numPostsToDisplay,introText:n?c.createChannelIntroMessage(n,function(){return e.setState({showInviteModal:!0})}):null,messageSeparatorTime:this.state.currentLastViewed})),t[i]&&n||!l||r.push(React.createElement(d,{position:"absolute",key:"loading"}))}return React.createElement("div",{id:"post-list"},r,React.createElement(h,{show:this.state.showInviteModal,onModalDismissed:function(){return e.setState({showInviteModal:!1})}}))}}]),t}(React.Component);a.default=y,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../utils/async_client.jsx":285,"../utils/channel_intro_mssages.jsx":286,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./channel_invite_modal.jsx":29,"./loading_screen.jsx":53,"./posts_view.jsx":82,"babel-runtime/core-js/object/assign":152,"babel-runtime/core-js/object/keys":156,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],84:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.register=this.register.bind(this),this.onHide=this.onHide.bind(this),this.save=this.save.bind(this),this.state={clientId:"",clientSecret:"",saved:!1}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this)).on("hide.bs.modal",this.onHide)}},{key:"register",value:function(){var e=this,t=this.state;t.serverError=null;var a={},s=this.refs.name.value;if(!s||0===s.length)return t.nameError="Application name must be filled in.",void this.setState(t);t.nameError=null,a.name=s;var n=this.refs.homepage.value;if(!n||0===n.length)return t.homepageError="Homepage must be filled in.",void this.setState(t);t.homepageError=null,a.homepage=n;var r=this.refs.desc.value;a.description=r;var i=this.refs.callback.value.trim();return i&&0!==i.length?(t.callbackError=null,a.callback_urls=i.split("\n"),void l.registerOAuthApp(a,function(a){t.clientId=a.id,t.clientSecret=a.client_secret,e.setState(t)},function(a){t.serverError=a.message,e.setState(t)})):(t.callbackError="At least one callback URL must be filled in.",void this.setState(t))}},{key:"onHide",value:function(e){return this.state.saved||""===this.state.clientId?void this.setState({clientId:"",clientSecret:"",saved:!1}):void e.preventDefault()}},{key:"save",value:function(){this.setState({saved:this.refs.save.checked})}},{key:"render",value:function(){var e;this.state.nameError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.nameError)));var t;this.state.homepageError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.homepageError)));var a;this.state.callbackError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.callbackError)));var s;this.state.serverError&&(s=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var n="";if(""===this.state.clientId)n=React.createElement("div",{className:"settings-modal"},React.createElement("div",{className:"form-horizontal user-settings"},React.createElement("h4",{className:"padding-bottom x3"},"Register a New Application"),React.createElement("div",{className:"row"},React.createElement("label",{className:"col-sm-4 control-label"},"Application Name"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{ref:"name",className:"form-control",type:"text",placeholder:"Required"}),e)),React.createElement("div",{className:"row padding-top x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Homepage URL"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{ref:"homepage",className:"form-control",type:"text",placeholder:"Required"}),t)),React.createElement("div",{className:"row padding-top x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Description"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{ref:"desc",className:"form-control",type:"text",placeholder:"Optional"}))),React.createElement("div",{className:"row padding-top padding-bottom x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Callback URL"),React.createElement("div",{className:"col-sm-7"},React.createElement("textarea",{ref:"callback",className:"form-control",type:"text",placeholder:"Required",rows:"5"}),a)),s,React.createElement("hr",null),React.createElement("a",{className:"btn btn-sm theme pull-right",href:"#","data-dismiss":"modal","aria-label":"Close"},"Cancel"),React.createElement("a",{className:"btn btn-sm btn-primary pull-right",onClick:this.register},"Register")));else{var r=" disabled";this.state.saved&&(r=""),n=React.createElement("div",{className:"form-group user-settings"},React.createElement("h3",null,"Your Application Credentials"),React.createElement("br",null),React.createElement("br",null),React.createElement("label",{className:"col-sm-12 control-label"},"Client ID: ",this.state.clientId),React.createElement("label",{className:"col-sm-12 control-label"},"Client Secret: ",this.state.clientSecret),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null),React.createElement("strong",null,"Save these somewhere SAFE and SECURE. We can retrieve your Client Id if you lose it, but your Client Secret will be lost forever if you were to lose it."),React.createElement("br",null),React.createElement("br",null),React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{ref:"save",type:"checkbox",checked:this.state.saved,onClick:this.save},"I have saved both my Client Id and Client Secret somewhere safe"))),React.createElement("a",{className:"btn btn-sm btn-primary pull-right"+r,href:"#","data-dismiss":"modal","aria-label":"Close"},"Close"))}return React.createElement("div",{className:"modal fade",ref:"modal",id:"register_app",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",
"data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},"Developer Applications")),React.createElement("div",{className:"modal-body"},n))))}}]),t}(React.Component);a.default=o,t.exports=a.default},{"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],85:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/channel_store.jsx"),o=e("../stores/user_store.jsx"),c=e("../stores/browser_store.jsx"),u=e("../utils/utils.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleShow=this.handleShow.bind(this),this.handleClose=this.handleClose.bind(this),this.state={channelName:"",remover:""}}return n(t,e),r(t,[{key:"handleShow",value:function(){var e={};c.getItem("channel-removed-state")&&(e=c.getItem("channel-removed-state"),c.removeItem("channel-removed-state"));var t=l.getByName("town-square");setTimeout(function(){return u.switchChannel(t)},1),this.setState(e)}},{key:"handleClose",value:function(){this.setState({channelName:"",remover:""})}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this)).on("show.bs.modal",this.handleShow),$(ReactDOM.findDOMNode(this)).on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this)).off("show.bs.modal",this.handleShow),$(ReactDOM.findDOMNode(this)).off("hidden.bs.modal",this.handleClose)}},{key:"render",value:function(){var e=o.getCurrentUser(),t="the channel";this.state.channelName&&(t=this.state.channelName);var a="Someone";return this.state.remover&&(a=this.state.remover),null!=e?React.createElement("div",{className:"modal fade",ref:"modal",id:"removed_from_channel",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Removed from ",React.createElement("span",{className:"name"},t))),React.createElement("div",{className:"modal-body"},React.createElement("p",null,a," removed you from ",t)),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},"Okay"))))):React.createElement("div",null)}}]),t}(React.Component);a.default=d,t.exports=a.default},{"../stores/browser_store.jsx":275,"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],86:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=e("../utils/async_client.jsx"),u=e("../stores/channel_store.jsx"),d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this),this.onNameChange=this.onNameChange.bind(this),this.onDisplayNameChange=this.onDisplayNameChange.bind(this),this.displayNameKeyUp=this.displayNameKeyUp.bind(this),this.handleClose=this.handleClose.bind(this),this.handleShow=this.handleShow.bind(this),this.handleShown=this.handleShown.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={displayName:"",channelName:"",channelId:"",serverError:"",nameError:"",displayNameError:"",invalid:!1}}return n(t,e),r(t,[{key:"handleSubmit",value:function(e){if(e.preventDefault(),26===this.state.channelId.length){var t=u.get(this.state.channelId),a=t.name,s=t.displayName,n={serverError:""};if(t.display_name=this.state.displayName.trim(),t.display_name?t.display_name.length>22?(n.displayNameError="This field must be less than 22 characters",n.invalid=!0):n.displayNameError="":(n.displayNameError="This field is required",n.invalid=!0),t.name=this.state.channelName.trim(),t.name)if(t.name.length>22)n.nameError="This field must be less than 22 characters",n.invalid=!0;else{var r=l.cleanUpUrlable(t.name);r===t.name?n.nameError="":(n.nameError="Must be lowercase alphanumeric characters",n.invalid=!0)}else n.nameError="This field is required",n.invalid=!0;this.setState(n),n.invalid||a===t.name&&s===t.display_name||o.updateChannel(t,function(){$(ReactDOM.findDOMNode(this.refs.modal)).modal("hide"),c.getChannel(t.id),l.updateAddressBar(t.name),ReactDOM.findDOMNode(this.refs.displayName).value="",ReactDOM.findDOMNode(this.refs.channelName).value=""}.bind(this),function(e){n.serverError=e.message,n.invalid=!0,this.setState(n)}.bind(this))}}},{key:"onNameChange",value:function(){this.setState({channelName:ReactDOM.findDOMNode(this.refs.channelName).value})}},{key:"onDisplayNameChange",value:function(){this.setState({displayName:ReactDOM.findDOMNode(this.refs.displayName).value})}},{key:"displayNameKeyUp",value:function(){var e=ReactDOM.findDOMNode(this.refs.displayName).value.trim(),t=l.cleanUpUrlable(e);ReactDOM.findDOMNode(this.refs.channelName).value=t,this.setState({channelName:t})}},{key:"handleClose",value:function(){this.setState({displayName:"",channelName:"",channelId:"",serverError:"",nameError:"",displayNameError:"",invalid:!1})}},{key:"handleShow",value:function(e){var t=$(e.relatedTarget);this.setState({displayName:t.attr("data-display"),channelName:t.attr("data-name"),channelId:t.attr("data-channelid")})}},{key:"handleShown",value:function(){$("#rename_channel #display_name").focus()}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.handleShow),$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",this.handleClose),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",this.handleShown)}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).off("hidden.bs.modal",this.handleClose)}},{key:"render",value:function(){var e=null,t="form-group";this.state.displayNameError&&(e=React.createElement("label",{className:"control-label"},this.state.displayNameError),t+=" has-error");var a=null,s="form-group";this.state.nameError&&(a=React.createElement("label",{className:"control-label"},this.state.nameError),s+=" has-error");var n=null;return this.state.serverError&&(n=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement("div",{className:"modal fade",ref:"modal",id:"rename_channel",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h4",{className:"modal-title"},"Rename Channel")),React.createElement("form",{role:"form"},React.createElement("div",{className:"modal-body"},React.createElement("div",{className:t},React.createElement("label",{className:"control-label"},"Display Name"),React.createElement("input",{onKeyUp:this.displayNameKeyUp,onChange:this.onDisplayNameChange,type:"text",ref:"displayName",id:"display_name",className:"form-control",placeholder:"Enter display name",value:this.state.displayName,maxLength:"64"}),e),React.createElement("div",{className:s},React.createElement("label",{className:"control-label"},"Handle"),React.createElement("input",{onChange:this.onNameChange,type:"text",className:"form-control",ref:"channelName",placeholder:"lowercase alphanumeric's only",value:this.state.channelName,maxLength:"64"}),a),n),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary"},"Save"))))))}}]),t}(React.Component);a.default=d,t.exports=a.default},{"../stores/channel_store.jsx":276,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],87:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/post_store.jsx"),o=e("../stores/channel_store.jsx"),c=e("./user_profile.jsx"),u=e("../stores/user_store.jsx"),d=e("../dispatcher/app_dispatcher.jsx"),h=e("../utils/utils.jsx"),m=e("../utils/constants.jsx"),p=e("./file_attachment_list.jsx"),f=e("../utils/client.jsx"),g=e("../utils/async_client.jsx"),b=m.ActionTypes,v=e("../utils/text_formatting.jsx"),E=e("twemoji"),_=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.retryComment=this.retryComment.bind(this),this.parseEmojis=this.parseEmojis.bind(this),this.state={}}return n(t,e),r(t,[{key:"retryComment",value:function(e){var t=this;e.preventDefault();var a=this.props.post;f.createPost(a,a.channel_id,function(e){g.getPosts(a.channel_id);var t=o.get(a.channel_id),s=o.getMember(a.channel_id);s.msg_count=t.total_msg_count,s.last_viewed_at=(new Date).getTime(),o.setChannelMember(s),d.handleServerAction({type:b.RECIEVED_POST,post:e})},function(){a.state=m.POST_FAILED,l.updatePendingPost(a),t.forceUpdate()}),a.state=m.POST_LOADING,l.updatePendingPost(a),this.forceUpdate()}},{key:"parseEmojis",value:function(){E.parse(ReactDOM.findDOMNode(this),{size:m.EMOJI_SIZE})}},{key:"componentDidMount",value:function(){this.parseEmojis()}},{key:"shouldComponentUpdate",value:function(e){return h.areStatesEqual(e.post,this.props.post)?!1:!0}},{key:"componentDidUpdate",value:function(){this.parseEmojis()}},{key:"createDropdown",value:function(){var e=this.props.post;if(e.state===m.POST_FAILED||e.state===m.POST_LOADING||e.state===m.POST_DELETED)return"";var t=u.getCurrentId()===e.user_id,a=h.isAdmin(u.getCurrentUser().roles),s=[];return t&&s.push(React.createElement("li",{role:"presentation",key:"edit-button"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#reply_textbox","data-title":"Comment","data-message":e.message,"data-postid":e.id,"data-channelid":e.channel_id},"Edit"))),(t||a)&&s.push(React.createElement("li",{role:"presentation",key:"delete-button"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#delete_post","data-title":"Comment","data-postid":e.id,"data-channelid":e.channel_id,"data-comments":0},"Delete"))),0===s.length?"":React.createElement("div",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),React.createElement("ul",{className:"dropdown-menu",role:"menu"},s))}},{key:"render",value:function(){var e=this.props.post,t="";u.getCurrentId()===e.user_id&&(t="current--user");var a,s=u.getCurrentUser().update_at,n="";e.state===m.POST_FAILED?(n+=" post-fail",a=React.createElement("a",{className:"theme post-retry pull-right",href:"#",onClick:this.retryComment},"Retry")):e.state===m.POST_LOADING&&(n+=" post-waiting",a=React.createElement("img",{className:"post-loading-gif pull-right",src:"/static/images/load.gif"}));var r,i=this.createDropdown();return e.filenames&&e.filenames.length>0&&(r=React.createElement(p,{filenames:e.filenames,channelId:e.channel_id,userId:e.user_id})),React.createElement("div",{className:"post "+t},React.createElement("div",{className:"post-profile-img__container"},React.createElement("img",{className:"post-profile-img",src:"/api/v1/users/"+e.user_id+"/image?time="+s+"&"+h.getSessionIndex(),height:"36",width:"36"})),React.createElement("div",{className:"post__content"},React.createElement("ul",{className:"post-header"},React.createElement("li",{className:"post-header-col"},React.createElement("strong",null,React.createElement(c,{userId:e.user_id}))),React.createElement("li",{className:"post-header-col"},React.createElement("time",{className:"post-profile-time"},h.displayCommentDateTime(e.create_at))),React.createElement("li",{className:"post-header-col post-header__reply"},i)),React.createElement("div",{className:"post-body"},React.createElement("div",{className:n},a,React.createElement("div",{ref:"message_holder",onClick:v.handleClick,dangerouslySetInnerHTML:{__html:v.formatText(e.message)}})),r)))}}]),t}(React.Component);a.default=_,_.defaultProps={post:null},_.propTypes={post:React.PropTypes.object},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/text_formatting.jsx":292,"../utils/utils.jsx":293,"./file_attachment_list.jsx":46,"./user_profile.jsx":129,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,twemoji:"twemoji"}],88:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("../utils/constants.jsx"),c=o.ActionTypes,u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClose=this.handleClose.bind(this),this.handleBack=this.handleBack.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleClose",value:function(e){e.preventDefault(),l.handleServerAction({type:c.RECIEVED_SEARCH,results:null}),l.handleServerAction({type:c.RECIEVED_POST_SELECTED,results:null})}},{key:"handleBack",value:function(e){e.preventDefault(),l.handleServerAction({type:c.RECIEVED_SEARCH_TERM,term:this.props.fromSearch,do_search:!0,is_mention_search:this.props.isMentionSearch}),l.handleServerAction({type:c.RECIEVED_POST_SELECTED,results:null})}},{key:"render",value:function(){var e=void 0;return this.props.fromSearch&&(e=React.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},React.createElement("i",{className:"fa fa-chevron-left"}))),React.createElement("div",{className:"sidebar--right__header"},React.createElement("span",{className:"sidebar--right__title"},e,"Message Details"),React.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.handleClose},React.createElement("i",{className:"fa fa-sign-out"})))}}]),t}(React.Component);a.default=u,u.defaultProps={isMentionSearch:!1,fromSearch:""},u.propTypes={isMentionSearch:React.PropTypes.bool,fromSearch:React.PropTypes.string},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],89:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../stores/channel_store.jsx"),c=e("./user_profile.jsx"),u=e("../stores/user_store.jsx"),d=e("../utils/text_formatting.jsx"),h=e("../utils/utils.jsx"),m=e("./file_attachment_list.jsx"),p=e("twemoji"),f=e("../utils/constants.jsx"),g=e("./post_body_additional_content.jsx"),b=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.parseEmojis=this.parseEmojis.bind(this),this.state={}}return r(t,e),i(t,[{key:"parseEmojis",value:function(){p.parse(ReactDOM.findDOMNode(this),{size:f.EMOJI_SIZE})}},{key:"componentDidMount",value:function(){this.parseEmojis()}},{key:"shouldComponentUpdate",value:function(e){return h.areStatesEqual(e.post,this.props.post)?!1:!0}},{key:"componentDidUpdate",value:function(){this.parseEmojis()}},{key:"render",value:function(){var e=this.props.post,t=u.getCurrentId()===e.user_id,a=u.getProfile(e.user_id).update_at,n=o.get(e.channel_id),r="Post";e.root_id.length>0&&(r="Comment");var i="";u.getCurrentId()===e.user_id&&(i="current--user");var l;n&&(l="D"===n.type?"Direct Message":n.display_name);var p;t&&(p=React.createElement("div",null,React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",{role:"presentation"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#reply_textbox","data-title":r,"data-message":e.message,"data-postid":e.id,"data-channelid":e.channel_id},"Edit")),React.createElement("li",{role:"presentation"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#delete_post","data-title":r,"data-postid":e.id,"data-channelid":e.channel_id,"data-comments":this.props.commentCount},"Delete")))));var f;e.filenames&&e.filenames.length>0&&(f=React.createElement(m,{filenames:e.filenames,channelId:e.channel_id,userId:e.user_id}));var b=React.createElement(c,{userId:e.user_id}),v=void 0;e.props&&e.props.from_webhook&&(e.props.override_username&&"true"===s.window.mm_config.EnablePostUsernameOverride&&(b=React.createElement(c,{userId:e.user_id,overwriteName:e.props.override_username,disablePopover:!0})),v=React.createElement("li",{className:"post-header-col post-header__name bot-indicator"},"BOT"));var E="/api/v1/users/"+e.user_id+"/image?time="+a+"&"+h.getSessionIndex();e.props&&e.props.from_webhook&&"true"===s.window.mm_config.EnablePostIconOverride&&e.props.override_icon_url&&(E=e.props.override_icon_url);var _=React.createElement("div",{className:"post-profile-img__container"},React.createElement("img",{className:"post-profile-img",src:E,height:"36",width:"36"}));return React.createElement("div",{className:"post post--root "+i},React.createElement("div",{className:"post-right-channel__name"},l),React.createElement("div",{className:"post-profile-img__container"},_),React.createElement("div",{className:"post__content"},React.createElement("ul",{className:"post-header"},React.createElement("li",{className:"post-header-col"},React.createElement("strong",null,b)),v,React.createElement("li",{className:"post-header-col"},React.createElement("time",{className:"post-profile-time"},h.displayCommentDateTime(e.create_at))),React.createElement("li",{className:"post-header-col post-header__reply"},React.createElement("div",{className:"dropdown"},p))),React.createElement("div",{className:"post-body"},React.createElement("div",{ref:"message_holder",onClick:d.handleClick,dangerouslySetInnerHTML:{__html:d.formatText(e.message)}}),React.createElement(g,{post:e}),f)),React.createElement("hr",null))}}]),t}(React.Component);a.default=b,b.defaultProps={post:null,commentCount:0},b.propTypes={post:React.PropTypes.object,commentCount:React.PropTypes.number},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/text_formatting.jsx":292,"../utils/utils.jsx":293,"./file_attachment_list.jsx":46,"./post_body_additional_content.jsx":78,"./user_profile.jsx":129,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,twemoji:"twemoji"}],90:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/post_store.jsx"),o=e("../stores/user_store.jsx"),c=e("../stores/preference_store.jsx"),u=e("../utils/utils.jsx"),d=e("./search_bar.jsx"),h=e("./create_comment.jsx"),m=e("./rhs_header_post.jsx"),p=e("./rhs_root_post.jsx"),f=e("./rhs_comment.jsx"),g=e("../utils/constants.jsx"),b=e("./file_upload_overlay.jsx"),v=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChange=this.onChange.bind(this),this.onChangeAll=this.onChangeAll.bind(this),this.forceUpdateInfo=this.forceUpdateInfo.bind(this),this.handleResize=this.handleResize.bind(this);var a=this.getStateFromStores();a.windowWidth=u.windowWidth(),a.windowHeight=u.windowHeight(),this.state=a}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){var e=l.getSelectedPost();if(!e||e.order.length<1||!e.posts[e.order[0]])return{postList:{}};var t=e.posts[e.order[0]].channel_id,a=l.getPendingPosts(t);if(a)for(var s in a.posts)a.posts.hasOwnProperty(s)&&(e.posts[s]=a.posts[s]);return{postList:e}}},{key:"componentDidMount",value:function(){l.addSelectedPostChangeListener(this.onChange),l.addChangeListener(this.onChangeAll),c.addChangeListener(this.forceUpdateInfo),this.resize(),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(){$(".post-right__scroll")[0]&&$(".post-right__scroll").scrollTop($(".post-right__scroll")[0].scrollHeight),this.resize()}},{key:"componentWillUnmount",value:function(){l.removeSelectedPostChangeListener(this.onChange),l.removeChangeListener(this.onChangeAll),c.removeChangeListener(this.forceUpdateInfo),window.removeEventListener("resize",this.handleResize)}},{key:"forceUpdateInfo",value:function(){if(this.state.postList)for(var e in this.state.postList.posts)this.refs[e]&&this.refs[e].forceUpdate()}},{key:"handleResize",value:function(){this.setState({windowWidth:u.windowWidth(),windowHeight:u.windowHeight()})}},{key:"onChange",value:function(){var e=this.getStateFromStores();u.areStatesEqual(e,this.state)||this.setState(e)}},{key:"onChangeAll",value:function(){var e=l.getSelectedPost();if(e&&0!==e.order.length&&e.posts[e.order[0]]){var t=l.getPosts(e.posts[e.order[0]].channel_id);if(t&&0!==t.order.length){if(t.posts[t.order[0]].channel_id===e.posts[e.order[0]].channel_id){e.posts={};for(var a in t.posts)t.posts.hasOwnProperty(a)&&(e.posts[a]=t.posts[a]);l.storeSelectedPost(e)}var s=this.getStateFromStores();u.areStatesEqual(s,this.state)||this.setState(s)}}}},{key:"resize",value:function(){var e=this.state.windowHeight-$("#error_bar").outerHeight()-100;$(".post-right__scroll").css("height",e+"px"),$(".post-right__scroll").scrollTop(1e5),this.state.windowWidth>768&&($(".post-right__scroll").perfectScrollbar(),$(".post-right__scroll").perfectScrollbar("update"))}},{key:"render",value:function(){var e=this.state.postList;if(null==e||!e.order)return React.createElement("div",null);var t=e.posts[e.order[0]],a=null;a=""===t.root_id?t:e.posts[t.root_id];var s=[];for(var n in e.posts)if(e.posts.hasOwnProperty(n)){var r=e.posts[n];r.root_id===a.id&&s.push(r)}s.sort(function(e,t){return e.state!==g.POST_LOADING&&e.state!==g.POST_FAILED||t.state===g.POST_LOADING||t.state===g.POST_FAILED?e.state===g.POST_LOADING||e.state===g.POST_FAILED||t.state!==g.POST_LOADING&&t.state!==g.POST_FAILED?e.state===g.POST_LOADING&&t.state===g.POST_FAILED?-1:e.state===g.POST_FAILED&&t.state===g.POST_LOADING?1:e.create_at<t.create_at?-1:e.create_at>t.create_at?1:0:-1:1});var i,l=o.getCurrentId();return null!=l&&(i=React.createElement(d,null)),React.createElement("div",{className:"post-right__container"},React.createElement(b,{overlayType:"right"}),React.createElement("div",{className:"search-bar__container sidebar--right__search-header"},i),React.createElement("div",{className:"sidebar-right__body"},React.createElement(m,{fromSearch:this.props.fromSearch,isMentionSearch:this.props.isMentionSearch}),React.createElement("div",{className:"post-right__scroll"},React.createElement(p,{ref:a.id,post:a,commentCount:s.length}),React.createElement("div",{className:"post-right-comments-container"},s.map(function(e){return React.createElement(f,{ref:e.id,key:e.id+"commentKey",post:e,selected:e.id===t.id})})),React.createElement("div",{className:"post-create__container"},React.createElement(h,{channelId:a.channel_id,rootId:a.id})))))}}]),t}(React.Component);a.default=v,v.defaultProps={fromSearch:"",isMentionSearch:!1},v.propTypes={fromSearch:React.PropTypes.string,isMentionSearch:React.PropTypes.bool},t.exports=a.default},{"../stores/post_store.jsx":279,"../stores/preference_store.jsx":280,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./create_comment.jsx":36,"./file_upload_overlay.jsx":49,"./rhs_comment.jsx":87,"./rhs_header_post.jsx":88,"./rhs_root_post.jsx":89,"./search_bar.jsx":92,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],91:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/helpers/sliced-to-array").default,o=e("babel-runtime/core-js/map").default,c=e("babel-runtime/core-js/get-iterator").default;Object.defineProperty(a,"__esModule",{value:!0});var u=e("../stores/channel_store.jsx"),d=e("../utils/constants.jsx").KeyCodes,h=ReactBootstrap.Popover,m=e("../stores/user_store.jsx"),p=e("../utils/utils.jsx"),f=e("../utils/constants.jsx"),g=new o([["channels",/\b(?:in|channel):\s*(\S*)$/i],["users",/\bfrom:\s*(\S*)$/i]]),b=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.completeWord=this.completeWord.bind(this),this.getSelection=this.getSelection.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this.updateSuggestions=this.updateSuggestions.bind(this),this.renderChannelSuggestion=this.renderChannelSuggestion.bind(this),this.renderUserSuggestion=this.renderUserSuggestion.bind(this),this.state={show:!1,mode:"",filter:"",selection:0,suggestions:new o}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){$(document).on("click",this.handleDocumentClick)}},{key:"componentDidUpdate",value:function(e,t){var a=$(ReactDOM.findDOMNode(this.refs.searchPopover)).find(".popover-content");this.state.show&&(t.show||(a.perfectScrollbar(),a.css("max-height",$(window).height()-200)),this.scrollToItem(this.getSelection()))}},{key:"componentWillUnmount",value:function(){$(document).off("click",this.handleDocumentClick)}},{key:"handleClick",value:function(e){this.completeWord(e)}},{key:"handleDocumentClick",value:function(e){var t=$(ReactDOM.findDOMNode(this.refs.searchPopover));t.is(e.target)||t.has(e.target).length>0||this.setState({show:!1})}},{key:"handleInputChange",value:function(e,t){var a=p.getCaretPosition(e),s=t.substring(0,a),n="",r="",i=!0,o=!1,u=void 0;try{for(var d,h=c(g);!(i=(d=h.next()).done);i=!0){var m=l(d.value,2),f=m[0],b=m[1],v=b.exec(s);if(v){n=f,r=v[1];break}}}catch(e){o=!0,u=e}finally{try{!i&&h.return&&h.return()}finally{if(o)throw u}}(n!==this.state.mode||r!==this.state.filter)&&this.updateSuggestions(n,r),this.setState({mode:n,filter:r,show:n||r})}},{key:"handleKeyDown",value:function(e){if(this.state.show&&0!==this.state.suggestions.length)if(e.which===d.UP||e.which===d.DOWN){e.preventDefault();var t=this.state.selection;e.which===d.UP?t-=1:t+=1,t>=0&&t<this.state.suggestions.length&&this.setState({selection:t})}else(e.which===d.ENTER||e.which===d.SPACE)&&(e.preventDefault(),this.completeWord(this.getSelection()))}},{key:"completeWord",value:function(e){this.props.completeWord(this.state.filter,e+" "),this.setState({show:!1,mode:"",filter:"",selection:0})}},{key:"getSelection",value:function(){return"channels"===this.state.mode?this.state.suggestions[this.state.selection].name:"users"===this.state.mode?this.state.suggestions[this.state.selection].username:""}},{key:"scrollToItem",value:function(e){var t=$(ReactDOM.findDOMNode(this.refs.searchPopover)).find(".popover-content"),a=t[0].clientHeight,s=t[0].scrollHeight;if(this.state.suggestions.length>0&&s>a){var n=t.scrollTop(),r=parseInt(t.css("padding-top"),10),i=parseInt(t.css("padding-top"),10),l=$(this.refs[e]),o=l[0].offsetTop-parseInt(l.css("margin-top"),10),c=l[0].offsetTop+l.height()+parseInt(l.css("margin-bottom"),10);n>o-r?t.scrollTop(o-r):c+r+i>n+a&&t.scrollTop(c-a+r+i)}}},{key:"updateSuggestions",value:function(e,t){var a=[];if("channels"===e){var s=u.getAll();s=t?s.filter(function(e){return e.name.startsWith(t)&&"D"!==e.type}):s.filter(function(e){return"D"!==e.type}),s.sort(function(e,t){return e.type===t.type?e.name.localeCompare(t.name):e.type===f.OPEN_CHANNEL?-1:1}),a=s}else if("users"===e){var n=m.getActiveOnlyProfileList();t&&(n=n.filter(function(e){return e.username.startsWith(t)})),n.sort(function(e,t){return e.username.localeCompare(t.username)}),a=n}var r=this.state.selection;if(r>0&&this.state.suggestions.length>0){for(var i=this.state.suggestions[r].id,l=!1,o=0;o<a.length;o++)if(a[o].id===i){r=o,l=!0;break}l||(r=0)}else r=0;this.setState({suggestions:a,selection:r})}},{key:"renderChannelSuggestion",value:function(e){var t="search-autocomplete__item";return e.name===this.getSelection()&&(t+=" selected"),React.createElement("div",{key:e.name,ref:e.name,onClick:this.handleClick.bind(this,e.name),className:t},e.name)}},{key:"renderUserSuggestion",value:function(e){var t="search-autocomplete__item";return e.username===this.getSelection()&&(t+=" selected"),React.createElement("div",{key:e.username,ref:e.username,onClick:this.handleClick.bind(this,e.username),className:t},React.createElement("img",{className:"profile-img rounded",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at}),e.username)}},{key:"render",value:function(){if(!this.state.show||0===this.state.suggestions.length)return null;var e=[];if("channels"===this.state.mode){var t=this.state.suggestions.filter(function(e){return e.type===f.OPEN_CHANNEL});t.length>0&&(e.push(React.createElement("div",{key:"public-channel-divider",className:"search-autocomplete__divider"},React.createElement("span",null,"Public "+p.getChannelTerm(f.OPEN_CHANNEL)+"s"))),e=e.concat(t.map(this.renderChannelSuggestion)));var a=this.state.suggestions.filter(function(e){return e.type===f.PRIVATE_CHANNEL});a.length>0&&(e.push(React.createElement("div",{key:"private-channel-divider",className:"search-autocomplete__divider"
},React.createElement("span",null,"Private "+p.getChannelTerm(f.PRIVATE_CHANNEL)+"s"))),e=e.concat(a.map(this.renderChannelSuggestion)))}else"users"===this.state.mode&&(e=this.state.suggestions.map(this.renderUserSuggestion));return React.createElement(h,{ref:"searchPopover",onShow:this.componentDidMount,id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},e)}}]),t}(React.Component);a.default=b,b.propTypes={completeWord:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/core-js/get-iterator":149,"babel-runtime/core-js/map":151,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,"babel-runtime/helpers/sliced-to-array":164}],92:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../utils/async_client.jsx"),c=e("../stores/search_store.jsx"),u=e("../dispatcher/app_dispatcher.jsx"),d=e("../utils/utils.jsx"),h=e("../utils/constants.jsx"),m=h.ActionTypes,p=ReactBootstrap.Popover,f=e("./search_autocomplete.jsx"),g=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.mounted=!1,this.onListenerChange=this.onListenerChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleUserInput=this.handleUserInput.bind(this),this.handleUserFocus=this.handleUserFocus.bind(this),this.handleUserBlur=this.handleUserBlur.bind(this),this.performSearch=this.performSearch.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.completeWord=this.completeWord.bind(this);var e=this.getSearchTermStateFromStores();e.focused=!1,this.state=e}return n(t,e),r(t,[{key:"getSearchTermStateFromStores",value:function(){var e=c.getSearchTerm()||"";return{searchTerm:e}}},{key:"componentDidMount",value:function(){c.addSearchTermChangeListener(this.onListenerChange),this.mounted=!0}},{key:"componentWillUnmount",value:function(){c.removeSearchTermChangeListener(this.onListenerChange),this.mounted=!1}},{key:"onListenerChange",value:function(e,t){if(this.mounted){var a=this.getSearchTermStateFromStores();d.areStatesEqual(a,this.state)||this.setState(a),e&&this.performSearch(a.searchTerm,t)}}},{key:"clearFocus",value:function(){$(".search-bar__container").removeClass("focused")}},{key:"handleClose",value:function(e){e.preventDefault(),u.handleServerAction({type:m.RECIEVED_SEARCH,results:null}),u.handleServerAction({type:m.RECIEVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),u.handleServerAction({type:m.RECIEVED_POST_SELECTED,results:null})}},{key:"handleKeyDown",value:function(e){this.refs.autocomplete&&this.refs.autocomplete.handleKeyDown(e)}},{key:"handleUserInput",value:function(e){var t=e.target.value;c.storeSearchTerm(t),c.emitSearchTermChange(!1),this.setState({searchTerm:t}),this.refs.autocomplete.handleInputChange(e.target,t)}},{key:"handleUserBlur",value:function(){this.setState({focused:!1})}},{key:"handleUserFocus",value:function(){$(".search-bar__container").addClass("focused"),this.setState({focused:!0})}},{key:"performSearch",value:function(e,t){var a=this;e.length&&(this.setState({isSearching:!0}),l.search(e,function(e){a.setState({isSearching:!1}),d.isMobile()&&(ReactDOM.findDOMNode(a.refs.search).value=""),u.handleServerAction({type:m.RECIEVED_SEARCH,results:e,is_mention_search:t})},function(e){a.setState({isSearching:!1}),o.dispatchError(e,"search")}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.performSearch(this.state.searchTerm.trim())}},{key:"completeWord",value:function(e,t){var a=ReactDOM.findDOMNode(this.refs.search),s=a.value,n=d.getCaretPosition(a),r=s.substring(0,n-e.length),i=s.substring(n);s=r+t+i,a.value=s,d.setCaretPosition(a,r.length+t.length),c.storeSearchTerm(s),c.emitSearchTermChange(!1),this.setState({searchTerm:s})}},{key:"render",value:function(){var e=null;this.state.isSearching&&(e=React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var t="search-help-popover";return!this.state.searchTerm&&this.state.focused&&(t+=" visible"),React.createElement("div",null,React.createElement("div",{className:"sidebar__collapse",onClick:this.handleClose},React.createElement("span",{className:"fa fa-angle-left"})),React.createElement("span",{className:"search__clear",onClick:this.clearFocus},"Cancel"),React.createElement("form",{role:"form",className:"search__form relative-div",onSubmit:this.handleSubmit,style:{overflow:"visible"},autoComplete:"off"},React.createElement("span",{className:"glyphicon glyphicon-search sidebar__search-icon"}),React.createElement("input",{type:"text",ref:"search",className:"form-control search-bar",placeholder:"Search",value:this.state.searchTerm,onFocus:this.handleUserFocus,onBlur:this.handleUserBlur,onChange:this.handleUserInput,onKeyDown:this.handleKeyDown}),e,React.createElement(f,{ref:"autocomplete",completeWord:this.completeWord}),React.createElement(p,{id:"searchbar-help-popup",placement:"bottom",className:t},React.createElement("h4",null,"Search Options"),React.createElement("ul",null,React.createElement("li",null,React.createElement("span",null,"Use "),React.createElement("b",null,'"quotation marks"'),React.createElement("span",null," to search for phrases")),React.createElement("li",null,React.createElement("span",null,"Use "),React.createElement("b",null,"from:"),React.createElement("span",null," to find posts from specific users and "),React.createElement("b",null,"in:"),React.createElement("span",null," to find posts in specific channels"))))))}}]),t}(React.Component);a.default=g,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/search_store.jsx":281,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./search_autocomplete.jsx":91,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],93:[function(e,t,a){"use strict";function s(){return{results:o.getSearchResults()}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../stores/search_store.jsx"),c=e("../stores/user_store.jsx"),u=e("./search_bar.jsx"),d=e("../utils/utils.jsx"),h=e("./search_results_header.jsx"),m=e("./search_results_item.jsx"),p=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.mounted=!1,this.onChange=this.onChange.bind(this),this.resize=this.resize.bind(this),this.handleResize=this.handleResize.bind(this);var a=s();a.windowWidth=d.windowWidth(),a.windowHeight=d.windowHeight(),this.state=a}return r(t,e),i(t,[{key:"componentDidMount",value:function(){this.mounted=!0,o.addSearchChangeListener(this.onChange),this.resize(),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"componentWillUnmount",value:function(){o.removeSearchChangeListener(this.onChange),this.mounted=!1,window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setState({windowWidth:d.windowWidth(),windowHeight:d.windowHeight()})}},{key:"onChange",value:function(){if(this.mounted){var e=s();d.areStatesEqual(e,this.state)||this.setState(e)}}},{key:"resize",value:function(){var e=this.state.windowHeight-$("#error_bar").outerHeight()-100;$("#search-items-container").css("height",e+"px"),$("#search-items-container").scrollTop(0),this.state.windowWidth>768&&$("#search-items-container").perfectScrollbar()}},{key:"render",value:function(){var e=this.state.results,t=c.getCurrentId(),a=null;t&&(a=React.createElement(u,null));var s=!e||!e.order||!e.order.length,n=o.getSearchTerm(),r=null;return r=s?React.createElement("div",{className:"sidebar--right__subheader"},React.createElement("h4",null,"NO RESULTS"),React.createElement("ul",null,React.createElement("li",null,'If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term'),React.createElement("li",null,'Due to the volume of results, two letter searches and common words like "this", "a" and "is" won\'t appear in search results'))):e.order.map(function(t){var a=e.posts[t];return React.createElement(m,{key:a.id,post:a,term:n,isMentionSearch:this.props.isMentionSearch})},this),React.createElement("div",{className:"sidebar--right__content"},React.createElement("div",{className:"search-bar__container sidebar--right__search-header"},a),React.createElement("div",{className:"sidebar-right__body"},React.createElement(h,{isMentionSearch:this.props.isMentionSearch}),React.createElement("div",{id:"search-items-container",className:"search-items-container"},r)))}}]),t}(React.Component);a.default=p,p.propTypes={isMentionSearch:React.PropTypes.bool},t.exports=a.default},{"../stores/search_store.jsx":281,"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"./search_bar.jsx":92,"./search_results_header.jsx":94,"./search_results_item.jsx":95,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],94:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("../utils/constants.jsx"),c=o.ActionTypes,u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClose=this.handleClose.bind(this)}return n(t,e),r(t,[{key:"handleClose",value:function(e){e.preventDefault(),l.handleServerAction({type:c.RECIEVED_SEARCH,results:null}),l.handleServerAction({type:c.RECIEVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),l.handleServerAction({type:c.RECIEVED_POST_SELECTED,results:null})}},{key:"render",value:function(){var e="Search Results";return this.props.isMentionSearch&&(e="Recent Mentions"),React.createElement("div",{className:"sidebar--right__header"},React.createElement("span",{className:"sidebar--right__title"},e),React.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",title:"Close",onClick:this.handleClose},React.createElement("i",{className:"fa fa-sign-out"})))}}]),t}(React.Component);a.default=u,u.propTypes={isMentionSearch:React.PropTypes.bool},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],95:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/search_store.jsx"),o=e("../stores/channel_store.jsx"),c=e("../stores/user_store.jsx"),u=e("./user_profile.jsx"),d=e("../utils/utils.jsx"),h=e("../utils/client.jsx"),m=e("../utils/async_client.jsx"),p=e("../dispatcher/app_dispatcher.jsx"),f=e("../utils/constants.jsx"),g=e("../utils/text_formatting.jsx"),b=f.ActionTypes,v=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this)}return n(t,e),r(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=this;h.getPost(this.props.post.channel_id,this.props.post.id,function(e){p.handleServerAction({type:b.RECIEVED_POST_SELECTED,post_list:e,from_search:l.getSearchTerm()}),p.handleServerAction({type:b.RECIEVED_SEARCH,results:null,is_mention_search:t.props.isMentionSearch})},function(e){m.dispatchError(e,"getPost")});var a=o.get(this.props.post.channel_id);d.switchChannel(a)}},{key:"render",value:function(){var e="",t=o.get(this.props.post.channel_id),a=c.getCurrentUser().update_at;t&&(e=t.display_name,"D"===t.type&&(e="Direct Message"));var s={searchTerm:this.props.term,mentionHighlight:this.props.isMentionSearch};return React.createElement("div",{className:"search-item-container post",onClick:this.handleClick},React.createElement("div",{className:"search-channel__name"},e),React.createElement("div",{className:"post-profile-img__container"},React.createElement("img",{className:"post-profile-img",src:"/api/v1/users/"+this.props.post.user_id+"/image?time="+a+"&"+d.getSessionIndex(),height:"36",width:"36"})),React.createElement("div",{className:"post__content"},React.createElement("ul",{className:"post-header"},React.createElement("li",{className:"post-header-col"},React.createElement("strong",null,React.createElement(u,{userId:this.props.post.user_id}))),React.createElement("li",{className:"post-header-col"},React.createElement("time",{className:"search-item-time"},d.displayDate(this.props.post.create_at)+" "+d.displayTime(this.props.post.create_at)))),React.createElement("div",{className:"search-item-snippet"},React.createElement("span",{onClick:this.handleClick,dangerouslySetInnerHTML:{__html:g.formatText(this.props.post.message,s)}}))))}}]),t}(React.Component);a.default=v,v.propTypes={post:React.PropTypes.object,isMentionSearch:React.PropTypes.bool,term:React.PropTypes.string},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/search_store.jsx":281,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/text_formatting.jsx":292,"../utils/utils.jsx":293,"./user_profile.jsx":129,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],96:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return n(t,e),r(t,[{key:"render",value:function(){var e=null;this.props.client_error&&(e=React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-12 has-error"},this.props.client_error)));var t=null;this.props.server_error&&(t=React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-12 has-error"},this.props.server_error)));var a=null;this.props.extraInfo&&(a=React.createElement("div",{className:"setting-list__hint"},this.props.extraInfo));var s="";this.props.submit&&(s=React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",onClick:this.props.submit},"Save"));var n,r=this.props.inputs;return n="full"===this.props.width?"col-sm-12":"medium"===this.props.width?"col-sm-10 col-sm-offset-2":"col-sm-9 col-sm-offset-3",React.createElement("ul",{className:"section-max form-horizontal"},React.createElement("li",{className:"col-sm-12 section-title"},this.props.title),React.createElement("li",{className:n},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},r,a),React.createElement("li",{className:"setting-list-item"},React.createElement("hr",null),t,e,s,React.createElement("a",{className:"btn btn-sm theme",href:"#",onClick:this.props.updateSection},"Cancel")))))}}]),t}(React.Component);a.default=l,l.propTypes={inputs:React.PropTypes.array,client_error:React.PropTypes.string,server_error:React.PropTypes.string,extraInfo:React.PropTypes.element,updateSection:React.PropTypes.func,submit:React.PropTypes.func,title:React.PropTypes.string,width:React.PropTypes.string},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],97:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return n(t,e),r(t,[{key:"render",value:function(){var e=null;return this.props.disableOpen||(e=React.createElement("li",{className:"col-sm-2 section-edit"},React.createElement("a",{className:"section-edit theme",href:"#",onClick:this.props.updateSection},React.createElement("i",{className:"fa fa-pencil"}),"Edit"))),React.createElement("ul",{className:"section-min",onClick:this.props.updateSection},React.createElement("li",{className:"col-sm-10 section-title"},this.props.title),e,React.createElement("li",{className:"col-sm-7 section-describe"},this.props.describe))}}]),t}(React.Component);a.default=l,l.propTypes={title:React.PropTypes.string,disableOpen:React.PropTypes.bool,updateSection:React.PropTypes.func,describe:React.PropTypes.string},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],98:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.setPicture=this.setPicture.bind(this)}return r(t,e),i(t,[{key:"setPicture",value:function(e){if(e){var t=new FileReader,a=ReactDOM.findDOMNode(this.refs.image);t.onload=function(e){$(a).attr("src",e.target.result)},t.readAsDataURL(e)}}},{key:"componentWillReceiveProps",value:function(e){e.picture&&this.setPicture(e.picture)}},{key:"render",value:function(){var e=null;this.props.client_error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.props.client_error)));var t=null;this.props.server_error&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.props.server_error)));var a=null;a=this.props.picture?React.createElement("img",{ref:"image",className:"profile-img rounded",src:""}):React.createElement("img",{ref:"image",className:"profile-img rounded",src:this.props.src});var n;if(this.props.loadingPicture)n=React.createElement("img",{className:"spinner",src:"/static/images/load.gif"});else{var r="btn btn-sm";r+=this.props.submitActive?" btn-primary":" btn-inactive disabled",n=React.createElement("a",{className:r,onClick:this.props.submit},"Save")}var i="Upload a profile picture in either JPG or PNG format, at least "+s.window.mm_config.ProfileWidth+"px in width and "+s.window.mm_config.ProfileHeight+"px height.",l=this;return React.createElement("ul",{className:"section-max"},React.createElement("li",{className:"col-xs-12 section-title"},this.props.title),React.createElement("li",{className:"col-xs-offset-3 col-xs-8"},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},a),React.createElement("li",{className:"setting-list-item"},i),React.createElement("li",{className:"setting-list-item"},t,e,React.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},"Select",React.createElement("input",{ref:"input",accept:".jpg,.png,.bmp",type:"file",onChange:this.props.pictureChange})),n,React.createElement("a",{className:"btn btn-sm theme",href:"#",onClick:l.props.updateSection},"Cancel")))))}}]),t}(React.Component);a.default=o,o.propTypes={client_error:React.PropTypes.string,server_error:React.PropTypes.string,src:React.PropTypes.string,picture:React.PropTypes.object,loadingPicture:React.PropTypes.bool,submitActive:React.PropTypes.bool,submit:React.PropTypes.func,title:React.PropTypes.string,pictureChange:React.PropTypes.func},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],99:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.doFileSelect=this.doFileSelect.bind(this),this.doSubmit=this.doSubmit.bind(this),this.state={clientError:this.props.clientError,serverError:this.props.serverError,filename:""}}return n(t,e),r(t,[{key:"componentWillReceiveProps",value:function(){this.setState({clientError:this.props.clientError,serverError:this.props.serverError})}},{key:"doFileSelect",value:function(e){e.preventDefault();var t=$(e.target).val();"fakepath"===t.substring(3,11)&&(t=t.substring(12)),this.setState({clientError:"",serverError:"",filename:t})}},{key:"doSubmit",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.uploadinput);t.files&&t.files[0]?this.props.submit(t.files[0]):this.setState({clientError:"No file selected."})}},{key:"render",value:function(){var e=null;this.state.clientError&&(e=React.createElement("div",{className:"file-status"},this.state.clientError));var t=null;this.state.serverError&&(t=React.createElement("div",{className:"file-status"},this.state.serverError));var a=null,s="btn btn-sm btn-primary disabled";return this.state.filename&&(a=React.createElement("div",{className:"file-status file-name"},this.state.filename),s="btn btn-sm btn-primary"),React.createElement("ul",{className:"section-max"},React.createElement("li",{className:"col-sm-12 section-title"},this.props.title),React.createElement("li",{className:"col-sm-offset-3 col-sm-9"},this.props.helpText),React.createElement("li",{className:"col-sm-offset-3 col-sm-9"},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},React.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},"Select file",React.createElement("input",{ref:"uploadinput",accept:this.props.fileTypesAccepted,type:"file",onChange:this.doFileSelect})),React.createElement("a",{className:s,onClick:this.doSubmit},"Import"),a,t,e))))}}]),t}(React.Component);a.default=l,l.propTypes={title:React.PropTypes.string.isRequired,submit:React.PropTypes.func.isRequired,fileTypesAccepted:React.PropTypes.string.isRequired,clientError:React.PropTypes.string,serverError:React.PropTypes.string,helpText:React.PropTypes.object},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],100:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this)}return n(t,e),r(t,[{key:"componentDidUpdate",value:function(){$(".settings-modal").find(".modal-body").scrollTop(0),$(".settings-modal").find(".modal-body").perfectScrollbar("update"),l.isSafari()&&$(".settings-modal .settings-links .nav").addClass("absolute")}}]),r(t,[{key:"handleClick",value:function(e,t){t.preventDefault(),this.props.updateTab(e.name),$(t.target).closest(".settings-modal").addClass("display--content")}},{key:"render",value:function(){var e=this.props.tabs.map(function(e){var t=e.name+"_li",a="";return this.props.activeTab===e.name&&(a="active"),React.createElement("li",{key:t,className:a},React.createElement("a",{href:"#",onClick:this.handleClick.bind(null,e)},React.createElement("i",{className:e.icon}),e.uiName))}.bind(this));return React.createElement("div",null,React.createElement("ul",{className:"nav nav-pills nav-stacked"},e))}}]),t}(React.Component);a.default=o,o.propTypes={tabs:React.PropTypes.arrayOf(React.PropTypes.shape({name:React.PropTypes.string.isRequired,uiName:React.PropTypes.string.isRequired,icon:React.PropTypes.string.isRequired})).isRequired,activeTab:React.PropTypes.string,updateTab:React.PropTypes.func.isRequired},t.exports=a.default},{"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],101:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default,o=e("babel-runtime/core-js/map").default,c=e("babel-runtime/core-js/object/keys").default,u=e("babel-runtime/core-js/object/assign").default;Object.defineProperty(a,"__esModule",{value:!0});var d=e("./new_channel_flow.jsx"),h=e("./more_direct_channels.jsx"),m=e("./search_bar.jsx"),p=e("./sidebar_header.jsx"),f=e("./unread_channel_indicator.jsx"),g=e("./tutorial/tutorial_tip.jsx"),b=e("../stores/channel_store.jsx"),v=e("../stores/user_store.jsx"),E=e("../stores/team_store.jsx"),_=e("../stores/preference_store.jsx"),y=e("../utils/async_client.jsx"),R=e("../utils/client.jsx"),C=e("../utils/utils.jsx"),N=e("../utils/constants.jsx"),k=N.Preferences,S=N.TutorialSteps,w=N.NotificationPrefs,x=ReactBootstrap.Tooltip,T=ReactBootstrap.OverlayTrigger,P=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.badgesActive=!1,this.firstUnreadChannel=null,this.lastUnreadChannel=null,this.getStateFromStores=this.getStateFromStores.bind(this),this.onChange=this.onChange.bind(this),this.onScroll=this.onScroll.bind(this),this.updateUnreadIndicators=this.updateUnreadIndicators.bind(this),this.handleLeaveDirectChannel=this.handleLeaveDirectChannel.bind(this),this.updateScrollbar=this.updateScrollbar.bind(this),this.handleResize=this.handleResize.bind(this),this.showNewChannelModal=this.showNewChannelModal.bind(this),this.hideNewChannelModal=this.hideNewChannelModal.bind(this),this.showMoreDirectChannelsModal=this.showMoreDirectChannelsModal.bind(this),this.hideMoreDirectChannelsModal=this.hideMoreDirectChannelsModal.bind(this),this.createChannelElement=this.createChannelElement.bind(this),this.updateTitle=this.updateTitle.bind(this),this.setUnreadCountPerChannel=this.setUnreadCountPerChannel.bind(this),this.getUnreadCount=this.getUnreadCount.bind(this),this.isLeaving=new o;var a=this.getStateFromStores();a.newChannelModalType="",a.showDirectChannelsModal=!1,a.loadingDMChannel=-1,a.windowWidth=C.windowWidth(),this.state=a,this.unreadCountPerChannel={},this.setUnreadCountPerChannel()}return r(t,e),i(t,[{key:"setUnreadCountPerChannel",value:function(){var e=b.getAll(),t=b.getAllMembers(),a={};e.forEach(function(e){var s=t[e.id],n=s.mention_count,r=e.total_msg_count-s.msg_count-n;"D"===e.type?(n=r,r=0):s.notify_props&&s.notify_props.mark_unread===w.MENTION&&(r=0),a[e.id]={msgs:r,mentions:n}}),this.unreadCountPerChannel=a}},{key:"getUnreadCount",value:function(e){var t=this,a=0,s=0;return e?this.unreadCountPerChannel[e]?this.unreadCountPerChannel[e]:{msgs:s,mentions:a}:(c(this.unreadCountPerChannel).forEach(function(e){s+=t.unreadCountPerChannel[e].msgs,a+=t.unreadCountPerChannel[e].mentions}),{msgs:s,mentions:a})}},{key:"getStateFromStores",value:function(){for(var e=this,t=b.getAllMembers(),a=b.getCurrentId(),s=u([],b.getAll()),n=s.filter(function(e){return e.type===N.OPEN_CHANNEL}),r=s.filter(function(e){return e.type===N.PRIVATE_CHANNEL}),i=s.filter(function(e){return e.type===N.DM_CHANNEL}),l=_.getPreferences(N.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW),o=[],c=function(){var s=i[d],n=C.getDirectTeammate(s.id);if(!n)return"continue";var r=t[s.id],c=s.total_msg_count-r.msg_count,u=(a===s.id||c>0)&&!e.isLeaving.get(s.id),h=l.some(function(e){return e.name===n.id&&"false"!==e.value});if((h||u)&&(s.display_name=C.displayUsername(n.id),s.teammate_id=n.id,s.status=v.getStatus(n.id),o.push(s),u&&!h)){var m=_.setPreference(N.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,n.id,"true");y.savePreferences([m])}},d=0;d<i.length;d++){c()}var h=v.getActiveOnlyProfileList(!0).length-o.length;o.sort(this.sortChannelsByDisplayName);var m=_.getPreference(k.TUTORIAL_STEP,v.getCurrentId(),{value:"999"});return{activeId:a,members:t,publicChannels:n,privateChannels:r,visibleDirectChannels:o,hiddenDirectChannelCount:h,showTutorialTip:parseInt(m.value,10)===S.CHANNEL_POPOVER}}},{key:"componentDidMount",value:function(){b.addChangeListener(this.onChange),v.addChangeListener(this.onChange),v.addStatusesChangeListener(this.onChange),E.addChangeListener(this.onChange),_.addChangeListener(this.onChange),this.updateTitle(),this.updateUnreadIndicators(),this.updateScrollbar(),window.addEventListener("resize",this.handleResize)}},{key:"shouldComponentUpdate",value:function(e,t){return C.areStatesEqual(t,this.state)?!1:!0}},{key:"componentDidUpdate",value:function(){this.updateTitle(),this.updateUnreadIndicators(),this.updateScrollbar()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),b.removeChangeListener(this.onChange),v.removeChangeListener(this.onChange),v.removeStatusesChangeListener(this.onChange),E.removeChangeListener(this.onChange),_.removeChangeListener(this.onChange)}},{key:"handleResize",value:function(){this.setState({windowWidth:C.windowWidth(),windowHeight:C.windowHeight()})}},{key:"updateScrollbar",value:function(){this.state.windowWidth>768&&($(".nav-pills__container").perfectScrollbar(),$(".nav-pills__container").perfectScrollbar("update"))}},{key:"onChange",value:function(){var e=this.getStateFromStores();C.areStatesEqual(e,this.state)||this.setState(e)}},{key:"updateTitle",value:function(){var e=b.getCurrent();if(e){var t="";null!=s.window.mm_config.SiteName&&(t=s.window.mm_config.SiteName);var a=e.display_name;"D"===e.type&&(a=C.getDirectTeammate(e.id).username);var n=this.getUnreadCount(),r=n.mentions>0?"("+n.mentions+") ":"",i=n.msgs>0?"* ":"";document.title=r+i+a+" - "+E.getCurrent().display_name+" "+t}}},{key:"onScroll",value:function(){this.updateUnreadIndicators()}},{key:"updateUnreadIndicators",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.container)),t=!1,a=!1;if(this.firstUnreadChannel){var s=$(ReactDOM.findDOMNode(this.refs[this.firstUnreadChannel]));s.position().top+s.height()<0&&(t=!0)}if(this.lastUnreadChannel){var n=$(ReactDOM.findDOMNode(this.refs[this.lastUnreadChannel]));n.position().top>e.height()&&(a=!0)}this.setState({showTopUnread:t,showBottomUnread:a})}},{key:"handleLeaveDirectChannel",
value:function(e){var t=this;if(!this.isLeaving.get(e.id)){this.isLeaving.set(e.id,!0);var a=_.setPreference(N.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,e.teammate_id,"false");R.savePreferences([a],function(){t.isLeaving.set(e.id,!1)},function(){t.isLeaving.set(e.id,!1)}),this.setState(this.getStateFromStores())}e.id===this.state.activeId&&C.switchChannel(b.getByName(N.DEFAULT_CHANNEL))}},{key:"sortChannelsByDisplayName",value:function(e,t){return e.display_name.localeCompare(t.display_name)}},{key:"showNewChannelModal",value:function(e){this.setState({newChannelModalType:e})}},{key:"hideNewChannelModal",value:function(){this.setState({newChannelModalType:""})}},{key:"showMoreDirectChannelsModal",value:function(){this.setState({showDirectChannelsModal:!0})}},{key:"hideMoreDirectChannelsModal",value:function(){this.setState({showDirectChannelsModal:!1})}},{key:"createTutorialTip",value:function(){var e=[];return e.push(React.createElement("div",null,React.createElement("h4",null,"Channels"),React.createElement("p",null,React.createElement("strong",null,"Channels")," organize conversations across different topics. They’re open to everyone on your team. To send private communications use ",React.createElement("strong",null,"Direct Messages")," for a single person or ",React.createElement("strong",null,"Private Groups")," for multiple people."))),e.push(React.createElement("div",null,React.createElement("h4",null,'"Town Square" and "Off-Topic" channels'),React.createElement("p",null,"Here are two public channels to start:"),React.createElement("p",null,React.createElement("strong",null,"Town Square")," is a place for team-wide communication. Everyone in your team is a member of this channel."),React.createElement("p",null,React.createElement("strong",null,"Off-Topic")," is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create."))),e.push(React.createElement("div",null,React.createElement("h4",null,"Creating and Joining Channels"),React.createElement("p",null,"Click ",React.createElement("strong",null,'"More..."')," to create a new channel or join an existing one."),React.createElement("p",null,"You can also create a new channel or private group by clicking the ",React.createElement("strong",null,'"+" symbol')," next to the channel or private group header."))),React.createElement(g,{placement:"right",screens:e,overlayClass:"tip-overlay--sidebar"})}},{key:"createChannelElement",value:function(e,t,a,s){var n,r=this.state.members,i=this.state.activeId,l=r[e.id],o=this.getUnreadCount(e.id),c="";e.id===i&&(c="active");var u="sidebar-channel",d=!1;l&&(n=o.msgs+o.mentions,d=n>0||l.mention_count>0),d&&(u+=" unread-title",e.id!==i&&(this.firstUnreadChannel||(this.firstUnreadChannel=e.name),this.lastUnreadChannel=e.name));var h=null;l?o.mentions&&(h=React.createElement("span",{className:"badge pull-right small"},o.mentions),this.badgesActive=!0):this.state.loadingDMChannel===t&&"D"===e.type&&(h=React.createElement("img",{className:"channel-loading-gif pull-right",src:"/static/images/load.gif"})),n>0&&(u+=" has-badge");var m=null;if("D"===e.type){var p="";p="online"===e.status?N.ONLINE_ICON_SVG:"away"===e.status?N.ONLINE_ICON_SVG:N.OFFLINE_ICON_SVG,m=React.createElement("span",{className:"status",dangerouslySetInnerHTML:{__html:p}})}var f=null,g="#",b=E.getCurrentTeamUrl();if(e.fake){if(e.fake&&b){var v=C.getUserIdFromChannelName(e);-1===this.state.loadingDMChannel&&(f=function(a){var n=this;a.preventDefault(),a.target.attributes.getNamedItem("data-close")?s(e):(this.setState({loadingDMChannel:t}),R.createDirectChannel(e,v,function(e){n.setState({loadingDMChannel:-1}),y.getChannel(e.id),C.switchChannel(e)},function(){n.setState({loadingDMChannel:-1}),window.location.href=E.getCurrentTeamUrl()+"/channels/"+e.name}))}.bind(this))}}else f=function(t){t.target.attributes.getNamedItem("data-close")?s(e):C.switchChannel(e),t.preventDefault()};var _=null,k=React.createElement(x,{id:"remove-dm-tooltip"},"Remove from list");s&&!h&&(_=React.createElement(T,{delayShow:1e3,placement:"top",overlay:k},React.createElement("span",{className:"btn-close","data-close":"true"},"×")),u+=" has-close");var S=null;return this.state.showTutorialTip&&e.name===N.DEFAULT_CHANNEL&&(S=this.createTutorialTip()),React.createElement("li",{key:e.name,ref:e.name,className:c},React.createElement("a",{className:u,href:g,onClick:f},m,e.display_name,h,_),S)}},{key:"render",value:function(){var e=this;this.badgesActive=!1,this.setUnreadCountPerChannel(),this.firstUnreadChannel=null,this.lastUnreadChannel=null;var t=this.state.publicChannels.map(this.createChannelElement),a=this.state.privateChannels.map(this.createChannelElement),s=this.state.visibleDirectChannels.map(function(t,a,s){return e.createChannelElement(t,a,s,e.handleLeaveDirectChannel)}),n=document.createElement("link");n.type="image/x-icon",n.rel="shortcut icon",n.id="favicon",this.badgesActive?n.href="/static/images/redfavicon.ico":n.href="/static/images/favicon.ico";var r=document.getElementsByTagName("head")[0],i=document.getElementById("favicon");i&&r.removeChild(i),r.appendChild(n);var l=null;this.state.hiddenDirectChannelCount>0&&(l=React.createElement("li",{key:"more"},React.createElement("a",{href:"#",onClick:this.showMoreDirectChannelsModal},"More ("+this.state.hiddenDirectChannelCount+")")));var o=!1;""!==this.state.newChannelModalType&&(o=!0);var c=React.createElement(x,{id:"new-channel-tooltip"},"Create new channel"),u=React.createElement(x,{id:"new-group-tooltip"},"Create new group");return React.createElement("div",null,React.createElement(d,{show:o,channelType:this.state.newChannelModalType,onModalDismissed:this.hideNewChannelModal}),React.createElement(h,{show:this.state.showDirectChannelsModal,onModalDismissed:this.hideMoreDirectChannelsModal}),React.createElement(p,{teamDisplayName:E.getCurrent().display_name,teamName:E.getCurrent().name,teamType:E.getCurrent().type}),React.createElement(m,null),React.createElement(f,{show:this.state.showTopUnread,extraClass:"nav-pills__unread-indicator-top",text:"Unread post(s) above"}),React.createElement(f,{show:this.state.showBottomUnread,extraClass:"nav-pills__unread-indicator-bottom",text:"Unread post(s) below"}),React.createElement("div",{ref:"container",className:"nav-pills__container",onScroll:this.onScroll},React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("h4",null,"Channels",React.createElement(T,{delayShow:500,placement:"top",overlay:c},React.createElement("a",{className:"add-channel-btn",href:"#",onClick:this.showNewChannelModal.bind(this,"O")},"+")))),t,React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal",className:"nav-more","data-target":"#more_channels","data-channeltype":"O"},"More..."))),React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("h4",null,"Private Groups",React.createElement(T,{delayShow:500,placement:"top",overlay:u},React.createElement("a",{className:"add-channel-btn",href:"#",onClick:this.showNewChannelModal.bind(this,"P")},"+")))),a),React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("h4",null,"Direct Messages")),s,l)))}}]),t}(React.Component);a.default=P,P.defaultProps={},P.propTypes={},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/channel_store.jsx":276,"../stores/preference_store.jsx":280,"../stores/team_store.jsx":283,"../stores/user_store.jsx":284,"../utils/async_client.jsx":285,"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./more_direct_channels.jsx":63,"./new_channel_flow.jsx":67,"./search_bar.jsx":92,"./sidebar_header.jsx":102,"./tutorial/tutorial_tip.jsx":127,"./unread_channel_indicator.jsx":128,"babel-runtime/core-js/map":151,"babel-runtime/core-js/object/assign":152,"babel-runtime/core-js/object/keys":156,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],102:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./navbar_dropdown.jsx"),c=e("./tutorial/tutorial_tip.jsx"),u=e("../stores/user_store.jsx"),d=e("../stores/preference_store.jsx"),h=e("../utils/utils.jsx"),m=e("../utils/constants.jsx"),p=m.Preferences,f=m.TutorialSteps,g=ReactBootstrap.Tooltip,b=ReactBootstrap.OverlayTrigger,v=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.toggleDropdown=this.toggleDropdown.bind(this),this.onPreferenceChange=this.onPreferenceChange.bind(this),this.state=this.getStateFromStores()}return r(t,e),i(t,[{key:"componentDidMount",value:function(){d.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){d.removeChangeListener(this.onPreferenceChange)}},{key:"getStateFromStores",value:function(){var e=d.getPreference(p.TUTORIAL_STEP,u.getCurrentId(),{value:"999"});return{showTutorialTip:parseInt(e.value,10)===f.MENU_POPOVER}}},{key:"onPreferenceChange",value:function(){this.setState(this.getStateFromStores())}},{key:"toggleDropdown",value:function(e){return e.preventDefault(),this.refs.dropdown.blockToggle?void(this.refs.dropdown.blockToggle=!1):void $(".team__header").find(".dropdown-toggle").dropdown("toggle")}},{key:"createTutorialTip",value:function(){var e=[];return e.push(React.createElement("div",null,React.createElement("h4",null,"Main Menu"),React.createElement("p",null,"The ",React.createElement("strong",null,"Main Menu")," is where you can ",React.createElement("strong",null,"Invite New Members"),", access your ",React.createElement("strong",null,"Account Settings")," and set your ",React.createElement("strong",null,"Theme Color"),"."),React.createElement("p",null,"Team administrators can also access their ",React.createElement("strong",null,"Team Settings")," from this menu."),React.createElement("p",null,"System administrators will find a ",React.createElement("strong",null,"System Console")," option to administrate the entire system."))),React.createElement("div",{onClick:this.toggleDropdown},React.createElement(c,{ref:"tip",placement:"right",screens:e,overlayClass:"tip-overlay--header"}))}},{key:"render",value:function(){var e=u.getCurrentUser(),t=null;if(!e)return null;e.last_picture_update&&(t=React.createElement("img",{className:"user__picture",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at+"&"+h.getSessionIndex()}));var a=null;return this.state.showTutorialTip&&(a=this.createTutorialTip()),React.createElement("div",{className:"team__header theme"},a,React.createElement("a",{href:"#",onClick:this.toggleDropdown},t,React.createElement("div",{className:"header__info"},React.createElement("div",{className:"user__name"},"@"+e.username),React.createElement(b,{trigger:["hover","focus"],delayShow:1e3,placement:"bottom",overlay:React.createElement(g,{id:"team-name__tooltip"},this.props.teamDisplayName),ref:"descriptionOverlay"},React.createElement("div",{className:"team__name"},this.props.teamDisplayName)))),React.createElement(o,{ref:"dropdown",teamType:this.props.teamType,teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName}))}}]),t}(React.Component);a.default=v,v.defaultProps={teamDisplayName:s.window.mm_config.SiteName,teamType:""},v.propTypes={teamDisplayName:React.PropTypes.string,teamName:React.PropTypes.string,teamType:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/preference_store.jsx":280,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./navbar_dropdown.jsx":66,"./tutorial/tutorial_tip.jsx":127,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],103:[function(e,t,a){"use strict";function s(){return{search_visible:null!=u.getSearchResults(),post_right_visible:null!=d.getSelectedPost(),is_mention_search:u.getIsMentionSearch()}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./search_results.jsx"),c=e("./rhs_thread.jsx"),u=e("../stores/search_store.jsx"),d=e("../stores/post_store.jsx"),h=e("../utils/utils.jsx"),m=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.plScrolledToBottom=!0,this.onSelectedChange=this.onSelectedChange.bind(this),this.onSearchChange=this.onSearchChange.bind(this),this.doStrangeThings=this.doStrangeThings.bind(this),this.state=s()}return r(t,e),i(t,[{key:"componentDidMount",value:function(){u.addSearchChangeListener(this.onSearchChange),d.addSelectedPostChangeListener(this.onSelectedChange),this.doStrangeThings()}},{key:"componentWillUnmount",value:function(){u.removeSearchChangeListener(this.onSearchChange),d.removeSelectedPostChangeListener(this.onSelectedChange)}},{key:"componentWillUpdate",value:function(){d.jumpPostsViewSidebarOpen()}},{key:"doStrangeThings",value:function(){return $(".inner__wrap").removeClass(".move--right"),$(".inner__wrap").addClass("move--left"),$(".sidebar--left").removeClass("move--right"),$(".sidebar--right").addClass("move--left"),this.state.search_visible||this.state.post_right_visible?void 0:($(".inner__wrap").removeClass("move--left").removeClass("move--right"),$(".sidebar--right").removeClass("move--left"),React.createElement("div",null))}},{key:"componentDidUpdate",value:function(){this.doStrangeThings()}},{key:"onSelectedChange",value:function(e){var t=s(e);t.from_search=e,h.areStatesEqual(t,this.state)||this.setState(t)}},{key:"onSearchChange",value:function(){var e=s();h.areStatesEqual(e,this.state)||this.setState(e)}},{key:"render",value:function(){var e="";return this.state.search_visible?e=React.createElement(o,{isMentionSearch:this.state.is_mention_search}):this.state.post_right_visible&&(e=React.createElement(c,{fromSearch:this.state.from_search,isMentionSearch:this.state.is_mention_search})),React.createElement("div",{className:"sidebar-right-container"},e)}}]),t}(React.Component);a.default=m,t.exports=a.default},{"../stores/post_store.jsx":279,"../stores/search_store.jsx":281,"../utils/utils.jsx":293,"./rhs_thread.jsx":90,"./search_results.jsx":93,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],104:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./invite_member_modal.jsx"),c=e("./user_settings/user_settings_modal.jsx"),u=e("../stores/user_store.jsx"),d=e("../stores/team_store.jsx"),h=e("../utils/client.jsx"),m=e("../utils/utils.jsx"),p=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleLogoutClick=this.handleLogoutClick.bind(this),this.state={showUserSettingsModal:!1}}return r(t,e),i(t,[{key:"componentDidMount",value:function(){$(".sidebar--left .dropdown-menu").perfectScrollbar()}}]),i(t,[{key:"handleLogoutClick",value:function(e){e.preventDefault(),h.logout()}},{key:"render",value:function(){var e=this,t="",a="",n="",r="",i="",l=u.getCurrentUser(),h=!1,p=!1;null!=l&&(h=m.isAdmin(l.roles),p=m.isSystemAdmin(l.roles),a=React.createElement("li",null,React.createElement("a",{href:"#",onClick:o.show},React.createElement("i",{className:"glyphicon glyphicon-user"}),"Invite New Member")),"O"===this.props.teamType&&(t=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#get_link","data-title":"Team Invite","data-value":m.getWindowLocationOrigin()+"/signup_user_complete/?id="+d.getCurrent().invite_id},React.createElement("i",{className:"glyphicon glyphicon-link"}),"Get Team Invite Link")))),h&&(n=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_settings"},React.createElement("i",{className:"glyphicon glyphicon-globe"}),"Team Settings")),r=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_members"},React.createElement("i",{className:"glyphicon glyphicon-wrench"}),"Manage Members"))),p&&(i=React.createElement("li",null,React.createElement("a",{href:"/admin_console?"+m.getSessionIndex()},React.createElement("i",{className:"glyphicon glyphicon-wrench"}),"System Console")));var f="";null!=s.window.mm_config.SiteName&&(f=s.window.mm_config.SiteName);var g=f;return this.props.teamDisplayName&&(g=this.props.teamDisplayName),React.createElement("div",null,React.createElement("div",{className:"team__header theme"},React.createElement("a",{className:"team__name",href:"/channels/town-square"},g)),React.createElement("div",{className:"nav-pills__container"},React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:function(){return e.setState({showUserSettingsModal:!0})}},React.createElement("i",{className:"glyphicon glyphicon-cog"}),"Account Settings")),n,a,t,r,i,React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleLogoutClick},React.createElement("i",{className:"glyphicon glyphicon-log-out"}),"Logout")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/configure_links.html"},React.createElement("i",{className:"glyphicon glyphicon-question-sign"}),"Help")),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/configure_links.html"},React.createElement("i",{className:"glyphicon glyphicon-earphone"}),"Report a Problem")))),React.createElement(c,{show:this.state.showUserSettingsModal,onModalDismissed:function(){return e.setState({showUserSettingsModal:!1})}}))}}]),t}(React.Component);a.default=p,p.propTypes={teamType:React.PropTypes.string,teamDisplayName:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/team_store.jsx":283,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./invite_member_modal.jsx":52,"./user_settings/user_settings_modal.jsx":142,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],105:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./team_signup_choose_auth.jsx"),c=e("./team_signup_with_email.jsx"),u=e("./team_signup_with_sso.jsx"),d=e("../utils/constants.jsx"),h=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.updatePage=this.updatePage.bind(this);var a=0;"true"===s.window.mm_config.EnableSignUpWithEmail&&(a+=1),"true"===s.window.mm_config.EnableSignUpWithGitLab&&(a+=1),a>1?this.state={page:"choose"}:"true"===s.window.mm_config.EnableSignUpWithEmail?this.state={page:"email"}:"true"===s.window.mm_config.EnableSignUpWithGitLab&&(this.state={page:"gitlab"})}return r(t,e),i(t,[{key:"updatePage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=null;return"true"===s.window.mm_config.EnableTeamListing&&(0===this.props.teams.length?"true"!==s.window.mm_config.EnableTeamCreation&&(e=React.createElement("div",null,"There are no teams include in the Team Directory and team creation has been disabled.")):e=React.createElement("div",null,React.createElement("h4",null,"Choose a Team"),React.createElement("div",{className:"signup-team-all"},this.props.teams.map(function(e){return React.createElement("div",{key:"team_"+e.name,className:"signup-team-dir"},React.createElement("a",{href:"/"+e.name},React.createElement("span",{className:"signup-team-dir__name"},e.display_name),React.createElement("span",{className:"glyphicon glyphicon-menu-right right signup-team-dir__arrow","aria-hidden":"true"})))})),React.createElement("h4",null,"Or Create a Team"))),"true"!==s.window.mm_config.EnableTeamCreation?null==e?React.createElement("div",null,"Team creation has been disabled.  Please contact an administrator for access."):React.createElement("div",null,e):"choose"===this.state.page?React.createElement("div",null,e,React.createElement(o,{updatePage:this.updatePage})):"email"===this.state.page?React.createElement("div",null,e,React.createElement(c,null)):"gitlab"===this.state.page?React.createElement("div",null,e,React.createElement(u,{service:d.GITLAB_SERVICE})):void 0}}]),t}(React.Component);a.default=h,h.propTypes={teams:React.PropTypes.array},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/constants.jsx":288,"./team_signup_choose_auth.jsx":114,"./team_signup_with_email.jsx":122,"./team_signup_with_sso.jsx":123,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],106:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./team_signup_welcome_page.jsx"),o=e("./team_signup_display_name_page.jsx"),c=e("./team_signup_url_page.jsx"),u=e("./team_signup_send_invites_page.jsx"),d=e("./team_signup_username_page.jsx"),h=e("./team_signup_password_page.jsx"),m=e("../stores/browser_store.jsx"),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.updateParent=this.updateParent.bind(this);var a=m.getGlobalItem(e.hash);a||(a={},a.wizard="welcome",a.team={},a.team.email=this.props.email,a.team.allowed_domains="",a.invites=[],a.invites.push(""),a.invites.push(""),a.invites.push(""),a.user={},a.hash=this.props.hash,a.data=this.props.data),this.state=a}return n(t,e),r(t,[{key:"updateParent",value:function(e,t){m.setGlobalItem(this.props.hash,e),t||this.setState(e)}},{key:"render",value:function(){return"welcome"===this.state.wizard?React.createElement(l,{state:this.state,updateParent:this.updateParent}):"team_display_name"===this.state.wizard?React.createElement(o,{state:this.state,updateParent:this.updateParent}):"team_url"===this.state.wizard?React.createElement(c,{state:this.state,updateParent:this.updateParent}):"send_invites"===this.state.wizard?React.createElement(u,{state:this.state,updateParent:this.updateParent}):"username"===this.state.wizard?React.createElement(d,{state:this.state,updateParent:this.updateParent}):"password"===this.state.wizard?React.createElement(h,{state:this.state,updateParent:this.updateParent}):React.createElement("div",null,"You've already completed the signup process for this invitation or this invitation has expired.")}}]),t}(React.Component);a.default=p,p.defaultProps={hash:"",email:"",data:""},p.propTypes={hash:React.PropTypes.string,email:React.PropTypes.string,data:React.PropTypes.string},t.exports=a.default},{"../stores/browser_store.jsx":275,"./team_signup_display_name_page.jsx":115,"./team_signup_password_page.jsx":117,"./team_signup_send_invites_page.jsx":118,"./team_signup_url_page.jsx":119,"./team_signup_username_page.jsx":120,"./team_signup_welcome_page.jsx":121,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],107:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/client.jsx"),u=e("../stores/user_store.jsx"),d=e("../stores/browser_store.jsx"),h=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this);var a=d.getGlobalItem(this.props.hash);a||(a={},a.wizard="welcome",a.user={},a.user.team_id=this.props.teamId,a.user.email=this.props.email,a.original_email=this.props.email),this.state=a}return r(t,e),i(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.email).value.trim();if(!a)return void this.setState({nameError:"",emailError:"This field is required",passwordError:""});if(!o.isEmail(a))return void this.setState({nameError:"",emailError:"Please enter a valid email address",passwordError:""});var s=ReactDOM.findDOMNode(this.refs.name).value.trim().toLowerCase();if(!s)return void this.setState({nameError:"This field is required",emailError:"",passwordError:"",serverError:""});var n=o.isValidUsername(s);if("Cannot use a reserved word as a username."===n)return void this.setState({nameError:"This username is reserved, please choose a new one.",emailError:"",passwordError:"",serverError:""});if(n)return void this.setState({nameError:"Username must begin with a letter, and contain between 3 to 15 lowercase characters made up of numbers, letters, and the symbols '.', '-' and '_'.",emailError:"",passwordError:"",serverError:""});var r=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!r||r.length<5)return void this.setState({nameError:"",emailError:"",passwordError:"Please enter at least 5 characters",serverError:""});var i={team_id:this.props.teamId,email:a,username:s,password:r,allow_marketing:!0};this.setState({user:i,nameError:"",emailError:"",passwordError:"",serverError:""}),c.createUser(i,this.props.data,this.props.hash,function(){c.track("signup","signup_user_02_complete"),c.loginByEmail(t.props.teamName,i.email,i.password,function(){u.setLastEmail(i.email),t.props.hash>0&&d.setGlobalItem(t.props.hash,JSON.stringify({wizard:"finished"})),window.location.href="/"+t.props.teamName+"/channels/town-square"},function(e){"Login failed because email address has not been verified"===e.message?window.location.href="/verify_email?email="+encodeURIComponent(i.email)+"&teamname="+encodeURIComponent(t.props.teamName):t.setState({serverError:e.message})})},function(e){t.setState({serverError:e.message})})}},{key:"render",value:function(){if(c.track("signup","signup_user_01_welcome"),"finished"===this.state.wizard)return React.createElement("div",null,"You've already completed the signup process for this invitation or this invitation has expired.");var e=null,t="form-group";this.state.emailError&&(e=React.createElement("label",{className:"control-label"},this.state.emailError),t+=" has-error");var a=null,n="form-group";this.state.nameError&&(a=React.createElement("label",{className:"control-label"},this.state.nameError),n+=" has-error");var r=null,i="form-group";this.state.passwordError&&(r=React.createElement("label",{className:"control-label"},this.state.passwordError),i+=" has-error");var l=null;this.state.serverError&&(l=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var o="";this.state.user.email&&(o=React.createElement("span",null,"Your email address is ",React.createElement("strong",null,this.state.user.email),". You'll use this address to sign in to ",s.window.mm_config.SiteName,"."));var u="margin--extra";this.state.original_email&&(u="hidden");var d=React.createElement("div",{className:u},React.createElement("h5",null,React.createElement("strong",null,"What's your email address?")),React.createElement("div",{className:t},React.createElement("input",{type:"email",ref:"email",className:"form-control",defaultValue:this.state.user.email,placeholder:"",maxLength:"128",autoFocus:!0,spellCheck:"false"}),e)),h=[];"true"===s.window.mm_config.EnableSignUpWithGitLab&&h.push(React.createElement("a",{className:"btn btn-custom-login gitlab",href:"/"+this.props.teamName+"/signup/gitlab"+window.location.search},React.createElement("span",{className:"icon"}),React.createElement("span",null,"with GitLab")));var m;return"true"===s.window.mm_config.EnableSignUpWithEmail&&(m=React.createElement("div",null,React.createElement("div",{className:"inner__content"},d,o,React.createElement("div",{className:"margin--extra"},React.createElement("h5",null,React.createElement("strong",null,"Choose your username")),React.createElement("div",{className:n},React.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),a,React.createElement("span",{className:"help-block"},"Username must begin with a letter, and contain between 3 to 15 lowercase characters made up of numbers, letters, and the symbols '.', '-' and '_'"))),React.createElement("div",{className:"margin--extra"},React.createElement("h5",null,React.createElement("strong",null,"Choose your password")),React.createElement("div",{className:i},React.createElement("input",{type:"password",ref:"password",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),r))),React.createElement("p",{className:"margin--extra"},React.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"btn-primary btn"},"Create Account")))),h.length>0&&m&&(h=React.createElement("div",null,h,React.createElement("div",{className:"or__container"},React.createElement("span",null,"or")))),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h5",{className:"margin--less"},"Welcome to:"),React.createElement("h2",{className:"signup-team__name"},this.props.teamDisplayName),React.createElement("h2",{className:"signup-team__subdomain"},"on ",s.window.mm_config.SiteName),React.createElement("h4",{className:"color--light"},"Let's create your account"),h,m,l))}}]),t}(React.Component);a.default=h,h.defaultProps={teamName:"",hash:"",teamId:"",email:"",data:null,teamDisplayName:""},h.propTypes={teamName:React.PropTypes.string,hash:React.PropTypes.string,teamId:React.PropTypes.string,email:React.PropTypes.string,data:React.PropTypes.string,teamDisplayName:React.PropTypes.string},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":275,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],108:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{
value:!0});var l=e("../utils/client.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={status:"request",link:"",err:""},this.onExportSuccess=this.onExportSuccess.bind(this),this.onExportFailure=this.onExportFailure.bind(this),this.doExport=this.doExport.bind(this)}return n(t,e),r(t,[{key:"onExportSuccess",value:function(e){this.setState({status:"ready",link:e.link,err:""})}},{key:"onExportFailure",value:function(e){this.setState({status:"failure",link:"",err:e.message})}},{key:"doExport",value:function(){"in-progress"!==this.state.status&&(this.setState({status:"in-progress"}),l.exportTeam(this.onExportSuccess,this.onExportFailure))}},{key:"render",value:function(){var e="";switch(this.state.status){case"request":e="";break;case"in-progress":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-spinner fa-pulse"})," Exporting...");break;case"ready":e=React.createElement("p",{className:"confirm-import alert alert-success"},React.createElement("i",{className:"fa fa-check"})," Ready for ",React.createElement("a",{href:this.state.link,download:!0},"download"));break;case"failure":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-warning"})," Unable to export: "+this.state.err)}return React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Export"),React.createElement("div",{className:"divider-dark first"}),React.createElement("ul",{className:"section-max"},React.createElement("li",{className:"col-xs-12 section-title"},"Export your team"),React.createElement("li",{className:"col-xs-offset-3 col-xs-8"},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},React.createElement("a",{className:"btn btn-sm btn-primary btn-file sel-btn",href:"#",onClick:this.doExport},"Export"))))),React.createElement("div",{className:"divider-dark"}),e)}}]),t}(React.Component);a.default=o,t.exports=a.default},{"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],109:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./setting_item_min.jsx"),c=e("./setting_item_max.jsx"),u=e("../utils/client.jsx"),d=e("../utils/utils.jsx"),h=e("../stores/team_store.jsx"),m=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleNameSubmit=this.handleNameSubmit.bind(this),this.handleInviteIdSubmit=this.handleInviteIdSubmit.bind(this),this.handleOpenInviteSubmit=this.handleOpenInviteSubmit.bind(this),this.handleTeamListingSubmit=this.handleTeamListingSubmit.bind(this),this.handleClose=this.handleClose.bind(this),this.onUpdateNameSection=this.onUpdateNameSection.bind(this),this.updateName=this.updateName.bind(this),this.onUpdateInviteIdSection=this.onUpdateInviteIdSection.bind(this),this.updateInviteId=this.updateInviteId.bind(this),this.onUpdateOpenInviteSection=this.onUpdateOpenInviteSection.bind(this),this.handleOpenInviteRadio=this.handleOpenInviteRadio.bind(this),this.onUpdateTeamListingSection=this.onUpdateTeamListingSection.bind(this),this.handleTeamListingRadio=this.handleTeamListingRadio.bind(this),this.handleGenerateInviteId=this.handleGenerateInviteId.bind(this),this.state={name:e.team.display_name,invite_id:e.team.invite_id,allow_open_invite:e.team.allow_open_invite,allow_team_listing:e.team.allow_team_listing,serverError:"",clientError:""}}return r(t,e),i(t,[{key:"handleGenerateInviteId",value:function(e){e.preventDefault();for(var t="",a=0;32>a;a++)t+=Math.floor(16*Math.random()).toString(16);this.setState({invite_id:t})}},{key:"handleOpenInviteRadio",value:function(e){this.setState({allow_open_invite:e})}},{key:"handleTeamListingRadio",value:function(e){"true"!==s.window.mm_config.EnableTeamListing&&e?this.setState({clientError:"Team directory has been disabled.  Please ask a system admin to enable it."}):this.setState({allow_team_listing:e})}},{key:"handleOpenInviteSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=this.props.team;s.allow_open_invite=this.state.allow_open_invite,u.updateTeam(s,function(e){h.saveTeam(e),h.emitChange(),t.props.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}},{key:"handleTeamListingSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=this.props.team;s.allow_team_listing=this.state.allow_team_listing,u.updateTeam(s,function(e){h.saveTeam(e),h.emitChange(),t.props.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}},{key:"handleNameSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=!0,n=this.state.name.trim();if(n?n===this.props.team.display_name?(a.clientError="Please choose a new name for your team",s=!1):a.clientError="":(a.clientError="This field is required",s=!1),this.setState(a),s){var r=this.props.team;r.display_name=this.state.name,u.updateTeam(r,function(e){h.saveTeam(e),h.emitChange(),t.props.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}}},{key:"handleInviteIdSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=!0,n=this.state.invite_id.trim();if(n?a.clientError="":(a.clientError="This field is required",s=!1),this.setState(a),s){var r=this.props.team;r.invite_id=this.state.invite_id,u.updateTeam(r,function(e){h.saveTeam(e),h.emitChange(),t.props.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}}},{key:"componentWillReceiveProps",value:function(e){e.team&&e.teamDisplayName&&this.setState({name:e.teamDisplayName})}},{key:"handleClose",value:function(){this.setState({clientError:"",serverError:""}),this.props.updateSection("")}},{key:"componentDidMount",value:function(){$("#team_settings").on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){$("#team_settings").off("hidden.bs.modal",this.handleClose)}},{key:"onUpdateNameSection",value:function(e){e.preventDefault(),"name"===this.props.activeSection?this.props.updateSection(""):this.props.updateSection("name")}},{key:"onUpdateInviteIdSection",value:function(e){e.preventDefault(),"invite_id"===this.props.activeSection?this.props.updateSection(""):this.props.updateSection("invite_id")}},{key:"onUpdateOpenInviteSection",value:function(e){e.preventDefault(),"open_invite"===this.props.activeSection?this.props.updateSection(""):this.props.updateSection("open_invite")}},{key:"onUpdateTeamListingSection",value:function(e){e.preventDefault(),"team_listing"===this.props.activeSection?this.props.updateSection(""):this.props.updateSection("team_listing")}},{key:"updateName",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"updateInviteId",value:function(e){e.preventDefault(),this.setState({invite_id:e.target.value})}},{key:"render",value:function(){var e=null,t=null;this.state.clientError&&(e=this.state.clientError),this.state.serverError&&(t=this.state.serverError);var a=void 0;if("team_listing"===this.props.activeSection){var s=[React.createElement("div",{key:"userTeamListingOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{name:"userTeamListingOptions",type:"radio",defaultChecked:this.state.allow_team_listing,onChange:this.handleTeamListingRadio.bind(this,!0)}),"Yes"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{ref:"teamListingRadioNo",name:"userTeamListingOptions",type:"radio",defaultChecked:!this.state.allow_team_listing,onChange:this.handleTeamListingRadio.bind(this,!1)}),"No"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Including this team will display the team name from the Team Directory section of the Home Page, and provide a link to the sign-in page."))];a=React.createElement(c,{title:"Include this team in the Team Directory",inputs:s,submit:this.handleTeamListingSubmit,server_error:t,client_error:e,updateSection:this.onUpdateTeamListingSection})}else{var n="";n=this.state.allow_team_listing===!0?"Yes":"No",a=React.createElement(o,{title:"Include this team in the Team Directory",describe:n,updateSection:this.onUpdateTeamListingSection})}var r=void 0;if("open_invite"===this.props.activeSection){var s=[React.createElement("div",{key:"userOpenInviteOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{name:"userOpenInviteOptions",type:"radio",defaultChecked:this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!0)}),"Yes"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{name:"userOpenInviteOptions",type:"radio",defaultChecked:!this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!1)}),"No"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"When allowed, a link to account creation will be included on the sign-in page of this team and allow any visitor to sign-up."))];r=React.createElement(c,{title:"Allow anyone to sign-up from login page",inputs:s,submit:this.handleOpenInviteSubmit,server_error:t,updateSection:this.onUpdateOpenInviteSection})}else{var i="";i=this.state.allow_open_invite===!0?"Yes":"No",r=React.createElement(o,{title:"Allow anyone to sign-up from login page",describe:i,updateSection:this.onUpdateOpenInviteSection})}var l=void 0;if("invite_id"===this.props.activeSection){var s=[];s.push(React.createElement("div",{key:"teamInviteSetting"},React.createElement("div",{className:"row"},React.createElement("label",{className:"col-sm-5 control-label"},"Invite Code"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateInviteId,value:this.state.invite_id,maxLength:"32"}),React.createElement("div",{className:"padding-top x2"},React.createElement("a",{href:"#",onClick:this.handleGenerateInviteId},"Re-Generate")))),React.createElement("div",{className:"setting-list__hint"},"When allowing open invites this code is used as part of the signup process.  Changing this code will invalidate the previous open signup link."))),l=React.createElement(c,{title:"Invite Code",inputs:s,submit:this.handleInviteIdSubmit,server_error:t,client_error:e,updateSection:this.onUpdateInviteIdSection})}else l=React.createElement(o,{title:"Invite Code",describe:"Click 'Edit' to regenerate Invite Code.",updateSection:this.onUpdateInviteIdSection});var u=void 0;if("name"===this.props.activeSection){var s=[],h="Team Name";d.isMobile()&&(h=""),s.push(React.createElement("div",{key:"teamNameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},h),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateName,value:this.state.name})))),u=React.createElement(c,{title:"Team Name",inputs:s,submit:this.handleNameSubmit,server_error:t,client_error:e,updateSection:this.onUpdateNameSection})}else{var m=this.state.name;u=React.createElement(o,{title:"Team Name",describe:m,updateSection:this.onUpdateNameSection})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back"}),"General Settings")),React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"General Settings"),React.createElement("div",{className:"divider-dark first"}),u,React.createElement("div",{className:"divider-light"}),r,React.createElement("div",{className:"divider-light"}),a,React.createElement("div",{className:"divider-light"}),l,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=m,m.propTypes={updateSection:React.PropTypes.func.isRequired,team:React.PropTypes.object.isRequired,activeSection:React.PropTypes.string.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/team_store.jsx":283,"../utils/client.jsx":287,"../utils/utils.jsx":293,"./setting_item_max.jsx":96,"./setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],110:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("./setting_upload.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onImportFailure=this.onImportFailure.bind(this),this.onImportSuccess=this.onImportSuccess.bind(this),this.doImportSlack=this.doImportSlack.bind(this),this.state={status:"ready",link:""}}return n(t,e),r(t,[{key:"onImportFailure",value:function(){this.setState({status:"fail",link:""})}},{key:"onImportSuccess",value:function(e){this.setState({status:"done",link:"data:application/octet-stream;charset=utf-8,"+encodeURIComponent(e)})}},{key:"doImportSlack",value:function(e){this.setState({status:"in-progress",link:""}),l.importSlack(e,this.onImportSuccess,this.onImportFailure)}},{key:"render",value:function(){var e,t=React.createElement("div",null,React.createElement("p",null,"To import a team from Slack go to Slack > Team Settings > Import/Export Data > Export > Start Export. Slack does not allow you to export files, images, private groups or direct messages stored in Slack. Therefore, Slack import to Mattermost only supports importing of text messages in your Slack team's public channels."),React.createElement("p",null,'The Slack import to Mattermost is in "Beta". Slack bot posts do not yet import and Slack @mentions are not currently supported.')),a=React.createElement(o,{title:"Import from Slack (Beta)",submit:this.doImportSlack,helpText:t,fileTypesAccepted:".zip"});switch(this.state.status){case"ready":e="";break;case"in-progress":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-spinner fa-pulse"})," Importing...");break;case"done":e=React.createElement("p",{className:"confirm-import alert alert-success"},React.createElement("i",{className:"fa fa-check"})," Import successful: ",React.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},"View Summary"));break;case"fail":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-warning"})," Import failure: ",React.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},"View Summary"))}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back"}),"Import")),React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Import"),React.createElement("div",{className:"divider-dark first"}),a,React.createElement("div",{className:"divider-dark"}),e))}}]),t}(React.Component);a.default=c,t.exports=a.default},{"../utils/utils.jsx":293,"./setting_upload.jsx":99,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],111:[function(e,t,a){"use strict";function s(){var e=o.getProfiles(),t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t.sort(function(e,t){return e.username<t.username?-1:e.username>t.username?1:0}),{member_list:t}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../stores/user_store.jsx"),c=e("./member_list_team.jsx"),u=e("../utils/utils.jsx"),d=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChange=this.onChange.bind(this),this.state=s()}return r(t,e),i(t,[{key:"componentDidMount",value:function(){o.addChangeListener(this.onChange);var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",function(){e.setState({render_members:!1})}),$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",function(){e.setState({render_members:!0})})}},{key:"componentWillUnmount",value:function(){o.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){var e=s();u.areStatesEqual(e,this.state)||this.setState(e)}},{key:"render",value:function(){var e=null;this.state.server_error&&(e=React.createElement("label",{className:"has-error control-label"},this.state.server_error));var t="";return this.state.render_members&&(t=React.createElement(c,{users:this.state.member_list})),React.createElement("div",{className:"modal fade more-modal",ref:"modal",id:"team_members",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",id:"myModalLabel"},this.props.teamDisplayName+" Members")),React.createElement("div",{ref:"modalBody",className:"modal-body"},React.createElement("div",{className:"team-member-list"},t),e),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close")))))}}]),t}(React.Component);a.default=d,d.propTypes={teamDisplayName:React.PropTypes.string},t.exports=a.default},{"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"./member_list_team.jsx":57,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],112:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../stores/team_store.jsx"),o=e("./team_import_tab.jsx"),c=e("./team_export_tab.jsx"),u=e("./team_general_tab.jsx"),d=e("../utils/utils.jsx"),h=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChange=this.onChange.bind(this),this.state={team:l.getCurrent()}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){l.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){l.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){var e=l.getCurrent();d.areStatesEqual(this.state.team,e)||this.setState({team:e})}},{key:"render",value:function(){var e;switch(this.props.activeTab){case"general":e=React.createElement("div",null,React.createElement(u,{team:this.state.team,activeSection:this.props.activeSection,updateSection:this.props.updateSection}));break;case"import":e=React.createElement("div",null,React.createElement(o,{team:this.state.team,activeSection:this.props.activeSection,updateSection:this.props.updateSection}));break;case"export":e=React.createElement("div",null,React.createElement(c,null));break;default:e=React.createElement("div",null)}return e}}]),t}(React.Component);a.default=h,h.defaultProps={activeTab:"",activeSection:""},h.propTypes={activeTab:React.PropTypes.string.isRequired,activeSection:React.PropTypes.string.isRequired,updateSection:React.PropTypes.func.isRequired},t.exports=a.default},{"../stores/team_store.jsx":283,"../utils/utils.jsx":293,"./team_export_tab.jsx":108,"./team_general_tab.jsx":109,"./team_import_tab.jsx":110,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],113:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("./settings_sidebar.jsx"),o=e("./team_settings.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.updateTab=this.updateTab.bind(this),this.updateSection=this.updateSection.bind(this),this.state={activeTab:"general",activeSection:""}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.modal));e.on("click",".modal-back",function(){$(this).closest(".modal-dialog").removeClass("display--content"),$(this).closest(".modal-dialog").find(".settings-table .nav li.active").removeClass("active")}),e.on("click",".modal-header .close",function(){setTimeout(function(){$(".modal-dialog.display--content").removeClass("display--content")},500)})}},{key:"updateTab",value:function(e){this.setState({activeTab:e,activeSection:""})}},{key:"updateSection",value:function(e){this.setState({activeSection:e})}},{key:"render",value:function(){var e=[];return e.push({name:"general",uiName:"General",icon:"glyphicon glyphicon-cog"}),e.push({name:"import",uiName:"Import",icon:"glyphicon glyphicon-upload"}),React.createElement("div",{className:"modal fade",ref:"modal",id:"team_settings",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog settings-modal"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},"Team Settings")),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"settings-table"},React.createElement("div",{className:"settings-links"},React.createElement(l,{tabs:e,activeTab:this.state.activeTab,updateTab:this.updateTab})),React.createElement("div",{className:"settings-content minimize-settings"},React.createElement(o,{activeTab:this.state.activeTab,activeSection:this.state.activeSection,updateSection:this.updateSection})))))))}}]),t}(React.Component);a.default=c,c.propTypes={},t.exports=a.default},{"./settings_sidebar.jsx":100,"./team_settings.jsx":112,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],114:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return r(t,e),i(t,[{key:"render",value:function(){var e=[];return"true"===s.window.mm_config.EnableSignUpWithGitLab&&e.push(React.createElement("a",{className:"btn btn-custom-login gitlab btn-full",href:"#",onClick:function(e){e.preventDefault(),this.props.updatePage("gitlab")}.bind(this)},React.createElement("span",{className:"icon"}),React.createElement("span",null,"Create new team with GitLab Account"))),"true"===s.window.mm_config.EnableSignUpWithEmail&&e.push(React.createElement("a",{className:"btn btn-custom-login email btn-full",href:"#",onClick:function(e){e.preventDefault(),this.props.updatePage("email")}.bind(this)},React.createElement("span",{className:"fa fa-envelope"}),React.createElement("span",null,"Create new team with email address"))),0===e.length&&(e=React.createElement("span",null,"No sign-up methods configured, please contact your system administrator.")),React.createElement("div",null,e,React.createElement("div",{className:"form-group margin--extra-2x"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},"Find my teams"))))}}]),t}(React.Component);a.default=o,o.propTypes={updatePage:React.PropTypes.func},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],115:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitBack=this.submitBack.bind(this),this.submitNext=this.submitNext.bind(this),this.state={}}return n(t,e),r(t,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="welcome",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.name).value.trim();return t?t.length<4||t.length>15?void this.setState({nameError:"Name must be 4 or more characters up to a maximum of 15"}):(this.props.state.wizard="team_url",this.props.state.team.display_name=t,this.props.state.team.name=l.cleanUpUrlable(t),void this.props.updateParent(this.props.state)):void this.setState({nameError:"This field is required"})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){o.track("signup","signup_team_02_name");var e=null,t="form-group";return this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error"),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",null,"Team Name"),React.createElement("div",{className:t},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9"},React.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.display_name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"}))),e),React.createElement("div",null,"Name your team in any language. Your team name shows in menus and headings."),React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},"Next",React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},"Back to previous step"))))}}]),t}(React.Component);a.default=c,c.propTypes={state:React.PropTypes.object,updateParent:React.PropTypes.func},t.exports=a.default},{"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],116:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getValue=this.getValue.bind(this),this.validate=this.validate.bind(this),this.state={}}return n(t,e),r(t,[{key:"getValue",value:function(){return ReactDOM.findDOMNode(this.refs.email).value.trim()}},{key:"validate",value:function(e){var t=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();return t?l.isEmail(t)?t===e?(this.setState({emailError:"Please use a different email than the one used at signup"}),!1):(this.setState({emailError:""}),!0):(this.setState({emailError:"Please enter a valid email address"}),!1):!0}},{key:"render",value:function(){var e=null,t="form-group";return this.state.emailError&&(e=React.createElement("label",{className:"control-label"},this.state.emailError),t+=" has-error"),React.createElement("div",{className:t},React.createElement("input",{autoFocus:this.props.focus,type:"email",ref:"email",className:"form-control",placeholder:"Email Address",defaultValue:this.props.email,maxLength:"128",spellCheck:"false"}),e)}}]),t}(React.Component);a.default=o,o.propTypes={focus:React.PropTypes.bool,email:React.PropTypes.string},t.exports=a.default},{"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],117:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/client.jsx"),c=e("../stores/browser_store.jsx"),u=e("../stores/user_store.jsx"),d=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitBack=this.submitBack.bind(this),this.submitNext=this.submitNext.bind(this),this.state={}}return r(t,e),i(t,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="username",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!a||a.length<5)return void this.setState({passwordError:"Please enter at least 5 characters"});this.setState({passwordError:null,serverError:null}),$("#finish-button").button("loading");var s=JSON.parse(JSON.stringify(this.props.state));s.user.password=a,s.user.allow_marketing=!0,delete s.wizard,o.createTeamFromSignup(s,function(){o.track("signup","signup_team_08_complete");var e=t.props;o.loginByEmail(s.team.name,s.team.email,s.user.password,function(){u.setLastEmail(s.team.email),t.props.hash>0&&c.setGlobalItem(t.props.hash,JSON.stringify({wizard:"finished"})),$("#sign-up-button").button("reset"),e.state.wizard="finished",e.updateParent(e.state,!0),
window.location.href="/"+s.team.name+"/channels/town-square"},function(e){"Login failed because email address has not been verified"===e.message?window.location.href="/verify_email?email="+encodeURIComponent(s.team.email)+"&teamname="+encodeURIComponent(s.team.name):(t.setState({serverError:e.message}),$("#finish-button").button("reset"))})},function(e){t.setState({serverError:e.message}),$("#finish-button").button("reset")})}},{key:"render",value:function(){o.track("signup","signup_team_07_password");var e=null,t="form-group";this.state.passwordError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.passwordError)),t=" has-error");var a=null;return this.state.serverError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",{className:"margin--less"},"Your password"),React.createElement("h5",{className:"color--light"},"Select a password that you'll use to login with your email address:"),React.createElement("div",{className:"inner__content margin--extra"},React.createElement("h5",null,React.createElement("strong",null,"Email")),React.createElement("div",{className:"block--gray form-group"},this.props.state.team.email),React.createElement("div",{className:t},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-11"},React.createElement("h5",null,React.createElement("strong",null,"Choose your password")),React.createElement("input",{autoFocus:!0,type:"password",ref:"password",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),React.createElement("span",{className:"color--light help-block"},"Passwords must contain 5 to 50 characters. Your password will be strongest if it contains a mix of symbols, numbers, and upper and lowercase characters."))),e,a)),React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",id:"finish-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Creating team...",onClick:this.submitNext},"Finish")),React.createElement("p",null,"By proceeding to create your account and use ",s.window.mm_config.SiteName,", you agree to our ",React.createElement("a",{href:"/static/help/terms.html"},"Terms of Service")," and ",React.createElement("a",{href:"/static/help/privacy.html"},"Privacy Policy"),". If you do not agree, you cannot use ",s.window.mm_config.SiteName,"."),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},"Back to previous step"))))}}]),t}(React.Component);a.default=d,d.defaultProps={state:{},hash:""},d.propTypes={state:React.PropTypes.object,hash:React.PropTypes.string,updateParent:React.PropTypes.func},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":275,"../stores/user_store.jsx":284,"../utils/client.jsx":287,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],118:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("./team_signup_email_item.jsx"),c=e("../utils/client.jsx"),u=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitBack=this.submitBack.bind(this),this.submitNext=this.submitNext.bind(this),this.submitAddInvite=this.submitAddInvite.bind(this),this.submitSkip=this.submitSkip.bind(this),this.keySubmit=this.keySubmit.bind(this),this.state={emailEnabled:"true"===s.window.mm_config.SendEmailNotifications}}return r(t,e),i(t,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="team_url",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){e.preventDefault();var t=!0;if(this.state.emailEnabled){for(var a=[],s=0;s<this.props.state.invites.length;s++)this.refs["email_"+s].validate(this.props.state.team.email)?a.push(this.refs["email_"+s].getValue()):t=!1;t&&(this.props.state.invites=a)}t&&(this.props.state.wizard="username",this.props.updateParent(this.props.state))}},{key:"submitAddInvite",value:function(e){e.preventDefault(),this.props.state.wizard="send_invites",this.props.state.invites||(this.props.state.invites=[]),this.props.state.invites.push(""),this.props.updateParent(this.props.state)}},{key:"submitSkip",value:function(e){e.preventDefault(),this.props.state.wizard="username",this.props.updateParent(this.props.state)}},{key:"keySubmit",value:function(e){e&&13===e.keyCode&&this.submitNext(e)}},{key:"componentDidMount",value:function(){this.state.emailEnabled||$("body").keypress(this.keySubmit)}},{key:"componentWillUnmount",value:function(){this.state.emailEnabled||$("body").off("keypress",this.keySubmit)}},{key:"render",value:function(){c.track("signup","signup_team_05_send_invites");var e=null,t=null;if(this.state.emailEnabled){for(var a=[],s=0;s<this.props.state.invites.length;s++)0===s?a.push(React.createElement(o,{focus:!0,key:s,ref:"email_"+s,email:this.props.state.invites[s]})):a.push(React.createElement(o,{focus:!1,key:s,ref:"email_"+s,email:this.props.state.invites[s]}));e=React.createElement("div",null,a,React.createElement("div",{className:"form-group text-right"},React.createElement("a",{href:"#",onClick:this.submitAddInvite},"Add Invitation"))),t=React.createElement("p",{className:"color--light"},"if you prefer, you can invite team members later",React.createElement("br",null)," and ",React.createElement("a",{href:"#",onClick:this.submitSkip},"skip this step "),"for now.")}else e=React.createElement("div",{className:"form-group color--light"},"Email is currently disabled for your team, and emails cannot be sent. Contact your system administrator to enable email and email invitations.");return React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",null,"Invite Team Members"),e,React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn-primary btn",onClick:this.submitNext},"Next",React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})))),t,React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},"Back to previous step")))}}]),t}(React.Component);a.default=u,u.propTypes={state:React.PropTypes.object.isRequired,updateParent:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":287,"./team_signup_email_item.jsx":116,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],119:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/client.jsx"),u=e("../utils/constants.jsx"),d=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitBack=this.submitBack.bind(this),this.submitNext=this.submitNext.bind(this),this.handleFocus=this.handleFocus.bind(this),this.state={nameError:""}}return r(t,e),i(t,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="team_display_name",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.name).value.trim();if(!a)return void this.setState({nameError:"This field is required"});var n=o.cleanUpUrlable(a),r=/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g;if(n!==a||!r.test(a))return void this.setState({nameError:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."});if(n.length<4||n.length>15)return void this.setState({nameError:"Name must be 4 or more characters up to a maximum of 15"});if("true"===s.window.mm_config.RestrictTeamNames)for(var i=0;i<u.RESERVED_TEAM_NAMES.length;i++)if(0===n.indexOf(u.RESERVED_TEAM_NAMES[i]))return void this.setState({nameError:"URL is taken or contains a reserved word"});c.findTeamByName(a,function(e){e?t.setState({nameError:"This URL is unavailable. Please try another."}):("true"===s.window.mm_config.SendEmailNotifications?t.props.state.wizard="send_invites":t.props.state.wizard="username",t.props.state.team.type="O",t.props.state.team.name=a,t.props.updateParent(t.props.state))},function(e){t.setState({nameError:e.message})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover click"}),c.track("signup","signup_team_03_url");var e=null,t="form-group";this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=o.getWindowLocationOrigin()+"/";return React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",null,"Team URL"),React.createElement("div",{className:t},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-11"},React.createElement("div",{className:"input-group input-group--limit"},React.createElement("span",{"data-toggle":"tooltip",title:a,className:"input-group-addon"},a),React.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"})))),e),React.createElement("p",null,"Choose the web address of your new team:"),React.createElement("ul",{className:"color--light"},React.createElement("li",null,"Short and memorable is best"),React.createElement("li",null,"Use lowercase letters, numbers and dashes"),React.createElement("li",null,"Must start with a letter and can't end in a dash")),React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},"Next",React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},"Back to previous step"))))}}]),t}(React.Component);a.default=d,d.propTypes={state:React.PropTypes.object,updateParent:React.PropTypes.func},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],120:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/client.jsx"),u=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitBack=this.submitBack.bind(this),this.submitNext=this.submitNext.bind(this),this.state={}}return r(t,e),i(t,[{key:"submitBack",value:function(e){e.preventDefault(),"true"===s.window.mm_config.SendEmailNotifications?this.props.state.wizard="send_invites":this.props.state.wizard="team_url",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.name).value.trim().toLowerCase(),a=o.isValidUsername(t);return"Cannot use a reserved word as a username."===a?void this.setState({nameError:"This username is reserved, please choose a new one."}):a?void this.setState({nameError:"Username must begin with a letter, and contain 3 to 15 characters in total, which may be numbers, lowercase letters, or any of the symbols '.', '-', or '_'"}):(this.props.state.wizard="password",this.props.state.user.username=t,void this.props.updateParent(this.props.state))}},{key:"render",value:function(){c.track("signup","signup_team_06_username");var e=null,t="form-group";return this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error"),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",{className:"margin--less"},"Your username"),React.createElement("h5",{className:"color--light"},"Select a memorable username that makes it easy for teammates to identify you:"),React.createElement("div",{className:"inner__content margin--extra"},React.createElement("div",{className:t},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-11"},React.createElement("h5",null,React.createElement("strong",null,"Choose your username")),React.createElement("input",{autoFocus:!0,type:"text",ref:"name",className:"form-control",placeholder:"",defaultValue:this.props.state.user.username,maxLength:"128",spellCheck:"false"}),React.createElement("span",{className:"color--light help-block"},"Usernames must begin with a letter and contain 3 to 15 characters made up of lowercase letters, numbers, and the symbols '.', '-' and '_'"))),e)),React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},"Next",React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},"Back to previous step"))))}}]),t}(React.Component);a.default=u,u.defaultProps={state:null},u.propTypes={state:React.PropTypes.object,updateParent:React.PropTypes.func},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],121:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../utils/utils.jsx"),c=e("../utils/client.jsx"),u=e("../stores/browser_store.jsx"),d=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitNext=this.submitNext.bind(this),this.handleDiffEmail=this.handleDiffEmail.bind(this),this.handleDiffSubmit=this.handleDiffSubmit.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.state={useDiff:!1},document.addEventListener("keyup",this.handleKeyPress,!1)}return r(t,e),i(t,[{key:"submitNext",value:function(e){return u.isLocalStorageSupported()?(e.preventDefault(),this.props.state.wizard="team_display_name",void this.props.updateParent(this.props.state)):void this.setState({storageError:"This service requires local storage to be enabled. Please enable it or exit private browsing."})}},{key:"handleDiffEmail",value:function(e){e.preventDefault(),this.setState({useDiff:!0})}},{key:"handleDiffSubmit",value:function(e){e.preventDefault();var t={useDiff:!0,serverError:""},a=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();return a&&o.isEmail(a)?u.isLocalStorageSupported()?(t.emailError="",void c.signupTeam(a,function(e){e.follow_link?window.location.href=e.follow_link:(this.props.state.wizard="finished",this.props.updateParent(this.props.state),window.location.href="/signup_team_confirm/?email="+encodeURIComponent(a))}.bind(this),function(e){this.setState({serverError:e.message})}.bind(this))):(t.emailError="This service requires local storage to be enabled. Please enable it or exit private browsing.",void this.setState(t)):(t.emailError="Please enter a valid email address",void this.setState(t))}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&this.submitNext(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"render",value:function(){c.track("signup","signup_team_01_welcome");var e=null;this.state.storageError&&(e=React.createElement("label",{className:"control-label"},this.state.storageError));var t=null,a="form-group";this.state.emailError&&(t=React.createElement("label",{className:"control-label"},this.state.emailError),a+=" has-error");var n=null;this.state.serverError&&(n=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var r="",i="hidden";return this.state.useDiff&&(r="hidden",i=""),React.createElement("div",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h3",{className:"sub-heading"},"Welcome to:"),React.createElement("h1",{className:"margin--top-none"},s.window.mm_config.SiteName),React.createElement("p",{className:"margin--less"},"Let's set up your new team"),React.createElement("div",null,"Please confirm your email address:",React.createElement("br",null),React.createElement("div",{className:"inner__content"},React.createElement("div",{className:"block--gray"},this.props.state.team.email))),React.createElement("p",{className:"margin--extra color--light"},"Your account will administer the new team site. ",React.createElement("br",null),"You can add other administrators later."),React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn-primary btn form-group",type:"submit",onClick:this.submitNext},React.createElement("i",{className:"glyphicon glyphicon-ok"}),"Yes, this address is correct"),e),React.createElement("hr",null),React.createElement("div",{className:i},React.createElement("div",{className:a},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9"},React.createElement("input",{type:"email",ref:"email",className:"form-control",placeholder:"Email Address",maxLength:"128",spellCheck:"false"}))),t),n,React.createElement("button",{className:"btn btn-md btn-primary",type:"button",onClick:this.handleDiffSubmit},"Use this instead")),React.createElement("a",{href:"#",onClick:this.handleDiffEmail,className:r},"Use a different email"))}}]),t}(React.Component);a.default=d,d.defaultProps={state:{}},d.propTypes={updateParent:React.PropTypes.func.isRequired,state:React.PropTypes.object},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":275,"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],122:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.handleSubmit=this.handleSubmit.bind(this),this.state={}}return n(t,e),r(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={},s={serverError:""};return a.email=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase(),a.email&&l.isEmail(a.email)?s.emailError="":(s.emailError="Please enter a valid email address",s.inValid=!0),s.inValid?void this.setState(s):void o.signupTeam(a.email,function(e){e.follow_link?window.location.href=e.follow_link:window.location.href="/signup_team_confirm/?email="+encodeURIComponent(a.email)},function(e){s.serverError=e.message,t.setState(s)})}},{key:"render",value:function(){var e=null;return this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement("form",{role:"form",onSubmit:this.handleSubmit},React.createElement("div",{className:"form-group"},React.createElement("input",{autoFocus:!0,type:"email",ref:"email",className:"form-control",placeholder:"Email Address",maxLength:"128",spellCheck:"false"})),React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn btn-md btn-primary",type:"submit"},"Create Team"),e),React.createElement("div",{className:"form-group margin--extra-2x"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},"Find my teams"))))}}]),t}(React.Component);a.default=c,c.defaultProps={},c.propTypes={},t.exports=a.default},{"../utils/client.jsx":287,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],123:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=e("../utils/client.jsx"),c=e("../utils/constants.jsx"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this),this.nameChange=this.nameChange.bind(this),this.state={name:""}}return n(t,e),r(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={},s=this.state;return s.nameError=null,s.serverError=null,a.display_name=this.state.name,a.display_name?a.display_name.length<=2?(s.nameError="Name must be 3 or more characters up to a maximum of 15",void this.setState(s)):(a.name=l.cleanUpUrlable(a.display_name),a.type="O",void o.createTeamWithSSO(a,this.props.service,function(e){e.follow_link?window.location.href=e.follow_link:window.location.href="/"+a.name+"/channels/town-square"},function(e){s.serverError=e.message,t.setState(s)})):(s.nameError="Please enter a team name",void this.setState(s))}},{key:"nameChange",value:function(){this.setState({name:ReactDOM.findDOMNode(this.refs.teamname).value.trim()})}},{key:"render",value:function(){var e=null,t="form-group";this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=null;this.state.serverError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var s=!1;this.state.name.length<=2&&(s=!0);var n=null;return this.props.service===c.GITLAB_SERVICE&&(n=React.createElement("a",{className:"btn btn-custom-login gitlab btn-full",href:"#",onClick:this.handleSubmit,disabled:s},React.createElement("span",{className:"icon"}),React.createElement("span",null,"Create team with GitLab Account"))),React.createElement("form",{role:"form",onSubmit:this.handleSubmit},React.createElement("div",{className:t},React.createElement("input",{autoFocus:!0,type:"text",ref:"teamname",className:"form-control",placeholder:"Enter name of new team",maxLength:"128",onChange:this.nameChange,spellCheck:"false"}),e),React.createElement("div",{className:"form-group"},n,a),React.createElement("div",{className:"form-group margin--extra-2x"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},"Find my teams"))))}}]),t}(React.Component);a.default=u,u.defaultProps={service:""},u.propTypes={service:React.PropTypes.string},t.exports=a.default},{"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],124:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("../stores/search_store.jsx"),c=e("./command_list.jsx"),u=e("../stores/error_store.jsx"),d=e("../utils/utils.jsx"),h=e("../utils/constants.jsx"),m=h.ActionTypes,p=h.KeyCodes,f=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getStateFromStores=this.getStateFromStores.bind(this),this.onListenerChange=this.onListenerChange.bind(this),this.onRecievedError=this.onRecievedError.bind(this),this.updateMentionTab=this.updateMentionTab.bind(this),this.handleChange=this.handleChange.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleBackspace=this.handleBackspace.bind(this),this.checkForNewMention=this.checkForNewMention.bind(this),this.addMention=this.addMention.bind(this),this.addCommand=this.addCommand.bind(this),this.resize=this.resize.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handlePaste=this.handlePaste.bind(this),this.state={mentionText:"-1",mentions:[],connection:""},this.caret=-1,this.addedMention=!1,this.doProcessMentions=!1,this.mentions=[]}return n(t,e),r(t,[{key:"getStateFromStores",value:function(){var e=u.getLastError();return e?{message:e.message}:{message:null}}},{key:"componentDidMount",value:function(){o.addAddMentionListener(this.onListenerChange),u.addChangeListener(this.onRecievedError),this.resize(),this.updateMentionTab(null)}},{key:"componentWillUnmount",value:function(){o.removeAddMentionListener(this.onListenerChange),u.removeChangeListener(this.onRecievedError)}},{key:"onListenerChange",value:function(e,t){e===this.props.id&&this.addMention(t)}},{key:"onRecievedError",value:function(){var e=u.getLastError();e&&e.connErrorCount>0?this.setState({connection:"bad-connection"}):this.setState({connection:""})}},{key:"componentDidUpdate",value:function(){this.caret>=0&&(d.setCaretPosition(ReactDOM.findDOMNode(this.refs.message),this.caret),this.caret=-1),this.doProcessMentions&&(this.updateMentionTab(null),this.doProcessMentions=!1),this.resize()}},{key:"componentWillReceiveProps",value:function(e){this.addedMention||this.checkForNewMention(e.messageText);var t=ReactDOM.findDOMNode(this.refs.message).value;(e.channelId!==this.props.channelId||e.messageText!==t)&&(this.doProcessMentions=!0),this.addedMention=!1,this.refs.commands.getSuggestedCommands(e.messageText)}},{key:"updateMentionTab",value:function(e){var t=this;setTimeout(function(){l.handleViewAction({type:m.RECIEVED_MENTION_DATA,id:t.props.id,mention_text:e})},1)}},{key:"handleChange",value:function(){this.props.onUserInput(ReactDOM.findDOMNode(this.refs.message).value)}},{key:"handleKeyPress",value:function(e){var t=ReactDOM.findDOMNode(this.refs.message).value;if(!this.refs.commands.isEmpty()&&0===t.indexOf("/")&&13===e.which)return this.refs.commands.addFirstCommand(),void e.preventDefault();if(!this.doProcessMentions){var a=d.getCaretPosition(ReactDOM.findDOMNode(this.refs.message)),s=t.substring(0,a),n=s.lastIndexOf(" "),r=s.lastIndexOf("@");a>r&&r>n&&(this.doProcessMentions=!0)}this.props.onKeyPress(e)}},{key:"handleKeyDown",value:function(e){""!==d.getSelectedText(ReactDOM.findDOMNode(this.refs.message))&&(this.doProcessMentions=!0),e.keyCode===p.BACKSPACE?this.handleBackspace(e):this.props.onKeyDown&&this.props.onKeyDown(e)}},{key:"handleBackspace",value:function(){var e=ReactDOM.findDOMNode(this.refs.message).value;if(0===e.indexOf("/")&&this.refs.commands.getSuggestedCommands(e.substring(0,e.length-1)),!this.doProcessMentions){var t=d.getCaretPosition(ReactDOM.findDOMNode(this.refs.message)),a=e.substring(0,t),s=a.lastIndexOf(" "),n=a.lastIndexOf("@");t>n&&(s>n||-1===s)&&(this.doProcessMentions=!0)}}},{key:"checkForNewMention",value:function(e){var t=d.getCaretPosition(ReactDOM.findDOMNode(this.refs.message)),a=e.substring(0,t),s=a.lastIndexOf("@");if(-1===s)return void this.updateMentionTab("-1");var n=a.lastIndexOf(String.fromCharCode(160)),r=a.lastIndexOf(" ");if(r>s||n>s)return void this.updateMentionTab("-1");var i=a.substring(s+1,a.length).toLowerCase();this.updateMentionTab(i)}},{key:"addMention",value:function(e){var t=d.getCaretPosition(ReactDOM.findDOMNode(this.refs.message)),a=this.props.messageText,s=a.substring(0,t),n=s.lastIndexOf("@");if(-1!==n){var r=a.substring(0,n),i=a.substring(t,a.length);this.caret=r.length+e.length+2,this.addedMention=!0,this.doProcessMentions=!0,this.props.onUserInput(r+"@"+e+" "+i)}}},{key:"addCommand",value:function(e){var t=ReactDOM.findDOMNode(this.refs.message);t.value=e,this.handleChange()}},{key:"resize",value:function(){var e=ReactDOM.findDOMNode(this.refs.message),t=ReactDOM.findDOMNode(this.refs.wrapper),a=$(e).height(),s=parseInt($(e).css("lineHeight"),10),n=e.scrollHeight/s,r=15;(2.5>n||""===this.props.messageText)&&(r=30),e.scrollHeight-r<167?($(e).css({height:"auto","overflow-y":"hidden"}).height(e.scrollHeight-r),$(t).css({height:"auto"}).height(e.scrollHeight+2),$(t).closest(".post-body__cell").removeClass("scroll")):($(e).css({height:"auto","overflow-y":"scroll"}).height(167),$(t).css({height:"auto"}).height(167),$(t).closest(".post-body__cell").addClass("scroll")),a!==$(e).height()&&this.props.onHeightChange&&this.props.onHeightChange()}},{key:"handleFocus",value:function(){var e=ReactDOM.findDOMNode(this.refs.message);e.title===e.value&&(e.value="")}},{key:"handleBlur",value:function(){var e=ReactDOM.findDOMNode(this.refs.message);""===e.value&&(e.value=e.title)}},{key:"handlePaste",value:function(){this.doProcessMentions=!0}},{key:"render",value:function(){return React.createElement("div",{ref:"wrapper",className:"textarea-wrapper"},React.createElement(c,{ref:"commands",addCommand:this.addCommand,channelId:this.props.channelId}),React.createElement("textarea",{id:this.props.id,ref:"message",className:"form-control custom-textarea "+this.state.connection,spellCheck:"true",autoComplete:"off",autoCorrect:"off",rows:"1",maxLength:h.MAX_POST_LEN,placeholder:this.props.createMessage,value:this.props.messageText,onInput:this.handleChange,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onPaste:this.handlePaste}))}}]),t}(React.Component);a.default=f,f.propTypes={id:React.PropTypes.string.isRequired,channelId:React.PropTypes.string,messageText:React.PropTypes.string.isRequired,onUserInput:React.PropTypes.func.isRequired,onKeyPress:React.PropTypes.func.isRequired,onHeightChange:React.PropTypes.func,
createMessage:React.PropTypes.string.isRequired,onKeyDown:React.PropTypes.func},t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/error_store.jsx":277,"../stores/search_store.jsx":281,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./command_list.jsx":34,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],125:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/utils.jsx"),o=ReactBootstrap.Tooltip,c=ReactBootstrap.OverlayTrigger,u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return n(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.forceUpdate()},3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=l.displayDate(this.props.eventTime),t=l.displayTime(this.props.eventTime),a=React.createElement(o,{id:"time-since-tooltip-"+this.props.eventTime},e+" at "+t);return React.createElement(c,{delayShow:400,placement:"top",overlay:a},React.createElement("time",{className:"post-profile-time"},l.displayDateTime(this.props.eventTime)))}}]),t}(React.Component);a.default=u,u.defaultProps={eventTime:0},u.propTypes={eventTime:React.PropTypes.number.isRequired},t.exports=a.default},{"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],126:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../stores/user_store.jsx"),o=e("../../stores/channel_store.jsx"),c=e("../../stores/team_store.jsx"),u=e("../../stores/preference_store.jsx"),d=e("../../utils/utils.jsx"),h=e("../../utils/async_client.jsx"),m=e("../../utils/constants.jsx"),p=m.Preferences,f=3,g=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleNext=this.handleNext.bind(this),this.createScreen=this.createScreen.bind(this),this.createCircles=this.createCircles.bind(this),this.state={currentScreen:0}}return n(t,e),r(t,[{key:"handleNext",value:function(){if(this.state.currentScreen<2)return void this.setState({currentScreen:this.state.currentScreen+1});d.switchChannel(o.getByName(m.DEFAULT_CHANNEL));var e=u.getPreference(p.TUTORIAL_STEP,l.getCurrentId(),{value:"0"}),t=(parseInt(e.value,10)+1).toString();e=u.setPreference(p.TUTORIAL_STEP,l.getCurrentId(),t),h.savePreferences([e])}},{key:"componentDidMount",value:function(){$(".tutorials__scroll").perfectScrollbar()}},{key:"createScreen",value:function(){switch(this.state.currentScreen){case 0:return this.createScreenOne();case 1:return this.createScreenTwo();case 2:return this.createScreenThree()}}},{key:"createScreenOne",value:function(){var e=this.createCircles();return React.createElement("div",null,React.createElement("h3",null,"Welcome to:"),React.createElement("h1",null,"Mattermost"),React.createElement("p",null,"Your team communication all in one place, instantly searchable and available anywhere."),React.createElement("p",null,"Keep your team connected to help them achieve what matters most."),e)}},{key:"createScreenTwo",value:function(){var e=this.createCircles();return React.createElement("div",null,React.createElement("h3",null,"How Mattermost works:"),React.createElement("p",null,"Communication happens in public discussion channels, private groups and direct messages."),React.createElement("p",null,"Everything is archived and searchable from any web-enabled desktop, laptop or phone."),e)}},{key:"createScreenThree",value:function(){var e=c.getCurrent(),t=void 0;t=e.type===m.INVITE_TEAM?React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#invite_member"},"Invite teammates"):React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#get_link","data-title":"Team Invite","data-value":d.getWindowLocationOrigin()+"/signup_user_complete/?id="+e.id},"Invite teammates");var a=this.createCircles();return React.createElement("div",null,React.createElement("h3",null,"You’re all set"),React.createElement("p",null,t," when you’re ready."),React.createElement("p",null,"Need anything, just email us at ",React.createElement("a",{href:"mailto:feedback@mattermost.com",target:"_blank"},"feedback@mattermost.com"),"."),"Click “Next” to enter Town Square. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.",a)}},{key:"createCircles",value:function(){for(var e=this,t=[],a=function(a){var s="circle";a===e.state.currentScreen&&(s+=" active"),t.push(React.createElement("a",{href:"#",key:"circle"+a,className:s,onClick:function(t){t.preventDefault(),e.setState({currentScreen:a})}}))},s=0;f>s;s++)a(s);return React.createElement("div",{className:"tutorial__circles"},t)}},{key:"render",value:function(){var e=d.windowHeight()-100,t=this.createScreen();return React.createElement("div",{className:"tutorials__scroll",style:{height:e}},React.createElement("div",{className:"tutorial-steps__container"},React.createElement("div",{className:"tutorial__content"},React.createElement("div",{className:"tutorial__steps"},t,React.createElement("button",{className:"btn btn-primary",tabIndex:"1",onClick:this.handleNext},"Next")))))}}]),t}(React.Component);a.default=g,t.exports=a.default},{"../../stores/channel_store.jsx":276,"../../stores/preference_store.jsx":280,"../../stores/team_store.jsx":283,"../../stores/user_store.jsx":284,"../../utils/async_client.jsx":285,"../../utils/constants.jsx":288,"../../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],127:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../stores/user_store.jsx"),o=e("../../stores/preference_store.jsx"),c=e("../../utils/async_client.jsx"),u=e("../../utils/constants.jsx"),d=u.Preferences,h=ReactBootstrap.Overlay,m=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleNext=this.handleNext.bind(this),this.toggle=this.toggle.bind(this),this.state={currentScreen:0,show:!1}}return n(t,e),r(t,[{key:"toggle",value:function(){var e=!this.state.show;if(this.setState({show:e}),!e&&this.state.currentScreen>=this.props.screens.length-1){var t=o.getPreference(d.TUTORIAL_STEP,l.getCurrentId(),{value:"0"}),a=(parseInt(t.value,10)+1).toString();t=o.setPreference(d.TUTORIAL_STEP,l.getCurrentId(),a),c.savePreferences([t])}}},{key:"handleNext",value:function(){return this.state.currentScreen<this.props.screens.length-1?void this.setState({currentScreen:this.state.currentScreen+1}):void this.toggle()}},{key:"skipTutorial",value:function(e){e.preventDefault();var t=o.setPreference(d.TUTORIAL_STEP,l.getCurrentId(),"999");c.savePreferences([t])}},{key:"render",value:function(){var e=this,t=this.state.currentScreen===this.props.screens.length-1?"Okay":"Next",a=[];if(this.props.screens.length>1)for(var s=0;s<this.props.screens.length;s++)s===this.state.currentScreen?a.push(React.createElement("div",{className:"circle active",key:"dotactive"+s})):a.push(React.createElement("div",{className:"circle",key:"dotinactive"+s}));var n="";return"tip-overlay--header"===this.props.overlayClass&&(n="White"),React.createElement("div",{className:"tip-div "+this.props.overlayClass},React.createElement("img",{className:"tip-button",src:"/static/images/tutorialTip"+n+".gif",width:"35",onClick:this.toggle,ref:"target"}),React.createElement(h,{show:this.state.show},React.createElement("div",{className:"tip-backdrop"})),React.createElement(h,{placement:this.props.placement,show:this.state.show,rootClose:!0,onHide:this.toggle,target:function(){return e.refs.target}},React.createElement("div",{className:"tip-overlay "+this.props.overlayClass},React.createElement("div",{className:"arrow"}),this.props.screens[this.state.currentScreen],React.createElement("div",{className:"tutorial__circles"},a),React.createElement("div",{className:"text-right"},React.createElement("button",{className:"btn btn-primary",onClick:this.handleNext},t),React.createElement("div",{className:"tip-opt"},"Seen this before? ",React.createElement("a",{href:"#",onClick:this.skipTutorial},"Opt out of these tips."))))))}}]),t}(React.Component);a.default=m,m.defaultProps={overlayClass:""},m.propTypes={screens:React.PropTypes.array.isRequired,placement:React.PropTypes.string.isRequired,overlayClass:React.PropTypes.string},t.exports=a.default},{"../../stores/preference_store.jsx":280,"../../stores/user_store.jsx":284,"../../utils/async_client.jsx":285,"../../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],128:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return n(t,e),r(t,[{key:"render",value:function(){var e="none";return this.props.show&&(e="initial"),React.createElement("div",{className:"nav-pills__unread-indicator "+this.props.extraClass,style:{display:e}},this.props.text)}}]),t}(React.Component);a.default=l,l.defaultProps={show:!1,extraClass:"",text:""},l.propTypes={show:React.PropTypes.bool,extraClass:React.PropTypes.string,text:React.PropTypes.string},t.exports=a.default},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],129:[function(e,t,a){(function(s){"use strict";function n(){return m+=1}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/create-class").default,o=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("../utils/utils.jsx"),u=e("../stores/user_store.jsx"),d=ReactBootstrap.Popover,h=ReactBootstrap.OverlayTrigger,m=0,p=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.uniqueId=n(),this.onChange=this.onChange.bind(this),this.state=this.getStateFromStores(this.props.userId)}return i(t,e),l(t,[{key:"getStateFromStores",value:function(e){var t=u.getProfile(e);return null==t?{profile:{id:"0",username:"..."}}:{profile:t}}},{key:"componentDidMount",value:function(){u.addChangeListener(this.onChange),this.props.disablePopover||$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover click"})}},{key:"componentWillUnmount",value:function(){u.removeChangeListener(this.onChange)}},{key:"onChange",value:function(e){if(!e||e===this.props.userId){var t=this.getStateFromStores(this.props.userId);c.areStatesEqual(t,this.state)||this.setState(t)}}},{key:"componentWillReceiveProps",value:function(e){this.props.userId!==e.userId&&this.setState(this.getStateFromStores(e.userId))}},{key:"render",value:function(){var e=this.state.profile.username;if(this.props.overwriteName&&(e=this.props.overwriteName),this.props.disablePopover)return React.createElement("div",null,e);var t=[];return t.push(React.createElement("img",{className:"user-popover__image",src:"/api/v1/users/"+this.state.profile.id+"/image?time="+this.state.profile.update_at+"&"+c.getSessionIndex(),height:"128",width:"128",key:"user-popover-image"})),"true"===!s.window.mm_config.ShowEmailAddress?t.push(React.createElement("div",{className:"text-nowrap",key:"user-popover-no-email"},"Email not shared")):t.push(React.createElement("div",{"data-toggle":"tooltip",title:this.state.profile.email,key:"user-popover-email"},React.createElement("a",{href:"mailto:"+this.state.profile.email,className:"text-nowrap text-lowercase user-popover__email"},this.state.profile.email))),React.createElement(h,{trigger:"click",placement:"right",rootClose:!0,overlay:React.createElement(d,{title:this.state.profile.username,id:"user-profile-popover"},t)},React.createElement("div",{className:"user-popover",id:"profile_"+this.uniqueId},e))}}]),t}(React.Component);a.default=p,p.defaultProps={userId:"",overwriteName:"",disablePopover:!1},p.propTypes={userId:React.PropTypes.string,overwriteName:React.PropTypes.string,disablePopover:React.PropTypes.bool},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/user_store.jsx":284,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],130:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/constants.jsx"),o=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onPickerChange=this.onPickerChange.bind(this),this.onInputChange=this.onInputChange.bind(this),this.pasteBoxChange=this.pasteBoxChange.bind(this),this.state={}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){$(".color-picker").colorpicker().on("changeColor",this.onPickerChange)}},{key:"onPickerChange",value:function(e){var t=this.props.theme;t[e.target.id]=e.color.toHex(),t.type="custom",this.props.updateTheme(t)}},{key:"onInputChange",value:function(e){var t=this.props.theme;t[e.target.parentNode.id]=e.target.value,t.type="custom",this.props.updateTheme(t)}},{key:"pasteBoxChange",value:function(e){var t=e.target.value;if(0!==t.length){var a=t.split(","),s={type:"custom"},n=0;l.THEME_ELEMENTS.forEach(function(e){n<a.length-1&&(s[e.id]=a[n]),n++}),s.codeTheme=a[a.length-1],this.props.updateTheme(s)}}},{key:"render",value:function(){var e=this,t=this.props.theme,a=[],s="";l.THEME_ELEMENTS.forEach(function(n,r){"codeTheme"===n.id?!function(){var s=[];n.themes.forEach(function(e,t){s.push(React.createElement("option",{key:"code-theme-key"+t,value:e.id},e.uiName))}),a.push(React.createElement("div",{className:"col-sm-4 form-group",key:"custom-theme-key"+r},React.createElement("label",{className:"custom-label"},n.uiName),React.createElement("div",{className:"input-group theme-group dropdown",id:n.id},React.createElement("select",{className:"form-control",type:"text",defaultValue:t[n.id],onChange:e.onInputChange},s),React.createElement("span",{className:"input-group-addon"},React.createElement("img",{src:"/static/images/themes/code_themes/"+t[n.id]+".png"})))))}():(a.push(React.createElement("div",{className:"col-sm-4 form-group",key:"custom-theme-key"+r},React.createElement("label",{className:"custom-label"},n.uiName),React.createElement("div",{className:"input-group color-picker",id:n.id},React.createElement("input",{className:"form-control",type:"text",defaultValue:t[n.id],onChange:e.onInputChange}),React.createElement("span",{className:"input-group-addon"},React.createElement("i",null))))),s+=t[n.id]+",")}),s+=t.codeTheme;var n=React.createElement("div",{className:"col-sm-12"},React.createElement("label",{className:"custom-label"},"Copy and paste to share theme colors:"),React.createElement("input",{type:"text",className:"form-control",value:s,onChange:this.pasteBoxChange}));return React.createElement("div",null,React.createElement("div",{className:"row form-group"},a),React.createElement("div",{className:"row"},n))}}]),t}(React.Component);a.default=o,o.propTypes={theme:React.PropTypes.object.isRequired,updateTheme:React.PropTypes.func.isRequired},t.exports=a.default},{"../../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],131:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../stores/modal_store.jsx"),o=e("../../stores/user_store.jsx"),c=e("../../utils/utils.jsx"),u=e("../../utils/client.jsx"),d=ReactBootstrap.Modal,h=e("../../dispatcher/app_dispatcher.jsx"),m=e("../../utils/constants.jsx"),p=m.ActionTypes,f=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.updateShow=this.updateShow.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this),this.state={inputError:"",show:!1}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){l.addModalListener(p.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"componentWillUnmount",value:function(){l.removeModalListener(p.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"updateShow",value:function(e){this.setState({show:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.input).value;if(!this.isInputValid(a))return void this.setState({inputError:"Invalid format, please try copying and pasting in again."});var s=a.split(","),n={type:"custom"};n.sidebarBg=s[0],n.sidebarText=s[5],n.sidebarUnreadText=s[5],n.sidebarTextHoverBg=s[4],n.sidebarTextActiveBorder=s[2],n.sidebarTextActiveColor=s[3],n.sidebarHeaderBg=s[1],n.sidebarHeaderTextColor=s[5],n.onlineIndicator=s[6],n.mentionBj=s[7],n.mentionColor="#ffffff",n.centerChannelBg="#ffffff",n.centerChannelColor="#333333",n.newMessageSeparator="#F80",n.linkColor="#2389d7",n.buttonBg="#26a970",n.buttonColor="#ffffff",n.mentionHighlightBg="#fff2bb",n.mentionHighlightLink="#2f81b7",n.codeTheme="github";var r=o.getCurrentUser();r.theme_props=n,u.updateUser(r,function(e){h.handleServerAction({type:p.RECIEVED_ME,me:e}),t.setState({show:!1}),c.applyTheme(n)},function(e){var a=t.getStateFromStores();a.serverError=e,t.setState(a)})}},{key:"isInputValid",value:function(e){if(0===e.length)return!1;if(-1!==e.indexOf(" "))return!1;if(e.length>0&&-1===e.indexOf(","))return!1;if(e.length>0){var t=e.split(",");if(8!==t.length)return!1;for(var a=0;a<t.length;a++){if(7!==t[a].length&&4!==t[a].length)return!1;if("#"!==t[a].charAt(0))return!1}}return!0}},{key:"handleChange",value:function(e){this.isInputValid(e.target.value)?this.setState({inputError:null}):this.setState({inputError:"Invalid format, please try copying and pasting in again."})}},{key:"render",value:function(){var e=this;return React.createElement("span",null,React.createElement(d,{show:this.state.show,onHide:function(){return e.setState({show:!1})}},React.createElement(d.Header,{closeButton:!0},React.createElement(d.Title,null,"Import Slack Theme")),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(d.Body,null,React.createElement("p",null,"To import a theme, go to a Slack team and look for “Preferences -> Sidebar Theme”. Open the custom theme option, copy the theme color values and paste them here:"),React.createElement("div",{className:"form-group less"},React.createElement("div",{className:"col-sm-9"},React.createElement("input",{ref:"input",type:"text",className:"form-control",onChange:this.handleChange}),React.createElement("div",{className:"input__help"},this.state.inputError)))),React.createElement(d.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return e.setState({show:!1})}},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},"Submit")))))}}]),t}(React.Component);a.default=f,t.exports=a.default},{"../../dispatcher/app_dispatcher.jsx":147,"../../stores/modal_store.jsx":278,"../../stores/user_store.jsx":284,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],132:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../../utils/utils.jsx"),c=e("../../utils/constants.jsx"),u=e("../../stores/channel_store.jsx"),d=e("../loading_screen.jsx"),h=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.getHooks=this.getHooks.bind(this),this.addNewHook=this.addNewHook.bind(this),this.updateChannelId=this.updateChannelId.bind(this),this.state={hooks:[],channelId:u.getByName(c.DEFAULT_CHANNEL).id,getHooksComplete:!1}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){this.getHooks()}},{key:"addNewHook",value:function(){var e=this,t={};t.channel_id=this.state.channelId,l.addIncomingHook(t,function(t){var a=e.state.hooks;a||(a=[]),a.push(t),e.setState({hooks:a})},function(t){e.setState({serverError:t})})}},{key:"removeHook",value:function(e){var t=this,a={};a.id=e,l.deleteIncomingHook(a,function(){for(var a=t.state.hooks,s=-1,n=0;n<a.length;n++)if(a[n].id===e){s=n;break}-1!==s&&a.splice(s,1),t.setState({hooks:a})},function(e){t.setState({serverError:e})})}},{key:"getHooks",value:function(){var e=this;l.listIncomingHooks(function(t){var a=e.state;t&&(a.hooks=t),a.getHooksComplete=!0,e.setState(a)},function(t){e.setState({serverError:t})})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"render",value:function(){var e=this,t=void 0;this.state.serverError&&(t=React.createElement("label",{className:"has-error"},this.state.serverError));var a=u.getAll(),s=[];a.forEach(function(e){e.type!==c.DM_CHANNEL&&s.push(React.createElement("option",{key:"incoming-hook"+e.id,value:e.id},e.display_name))});var n="";""===this.state.channelId&&(n=" disable");var r=[];this.state.hooks.forEach(function(t){var a=u.get(t.channel_id);a&&r.push(React.createElement("div",{key:t.id,className:"webhook__item"},React.createElement("div",{className:"padding-top x2 webhook__url"},React.createElement("strong",null,"URL: "),React.createElement("span",{className:"word-break--all"},o.getWindowLocationOrigin()+"/hooks/"+t.id)),React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Channel: "),a.display_name),React.createElement("a",{className:"webhook__remove",href:"#",onClick:e.removeHook.bind(e,t.id)},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("div",{className:"padding-top x2 divider-light"})))});var i=void 0;i=this.state.getHooksComplete?r.length>0?r:React.createElement("div",{className:"padding-top x2"},"None"):React.createElement(d,null);var l=React.createElement("div",{className:"webhooks__container"},React.createElement("label",{className:"control-label padding-top x2"},"Existing incoming webhooks"),React.createElement("div",{className:"padding-top divider-light"}),React.createElement("div",{className:"webhooks__list"},i));return React.createElement("div",{key:"addIncomingHook"},"Create webhook URLs for use in external integrations. Please see ",React.createElement("a",{href:"http://mattermost.org/webhooks"},"http://mattermost.org/webhooks")," "," to learn more.",React.createElement("div",null,React.createElement("label",{className:"control-label padding-top x2"},"Add a new incoming webhook")),React.createElement("div",{className:"row padding-top"},React.createElement("div",{className:"col-sm-10 padding-bottom"},React.createElement("select",{ref:"channelName",className:"form-control",value:this.state.channelId,onChange:this.updateChannelId},s),t),React.createElement("div",{className:"col-sm-2 col-xs-4 no-padding--left padding-bottom"},React.createElement("a",{className:"btn form-control no-padding btn-sm btn-primary"+n,href:"#",onClick:this.addNewHook},"Add"))),l)}}]),t}(React.Component);a.default=h,t.exports=a.default},{"../../stores/channel_store.jsx":276,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../../utils/utils.jsx":293,"../loading_screen.jsx":53,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],133:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/object/assign").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../loading_screen.jsx"),c=e("../../stores/channel_store.jsx"),u=e("../../utils/client.jsx"),d=e("../../utils/constants.jsx"),h=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.getHooks=this.getHooks.bind(this),this.addNewHook=this.addNewHook.bind(this),this.updateChannelId=this.updateChannelId.bind(this),this.updateTriggerWords=this.updateTriggerWords.bind(this),this.updateCallbackURLs=this.updateCallbackURLs.bind(this),this.state={hooks:[],channelId:"",triggerWords:"",callbackURLs:"",getHooksComplete:!1}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){this.getHooks()}},{key:"addNewHook",value:function(e){var t=this;if(e.preventDefault(),(""!==this.state.channelId||""!==this.state.triggerWords)&&""!==this.state.callbackURLs){var a={};a.channel_id=this.state.channelId,0!==this.state.triggerWords.length&&(a.trigger_words=this.state.triggerWords.trim().split(",")),a.callback_urls=this.state.callbackURLs.split("\n"),u.addOutgoingHook(a,function(e){var a=l([],t.state.hooks);a||(a=[]),a.push(e),t.setState({hooks:a,addError:null,channelId:"",triggerWords:"",callbackURLs:""})},function(e){t.setState({addError:e.message})})}}},{key:"removeHook",value:function(e){var t=this,a={};a.id=e,u.deleteOutgoingHook(a,function(){for(var a=t.state.hooks,s=-1,n=0;n<a.length;n++)if(a[n].id===e){s=n;break}-1!==s&&a.splice(s,1),t.setState({hooks:a})},function(e){t.setState({editError:e.message})})}},{key:"regenToken",value:function(e){var t=this,a={};a.id=e,u.regenOutgoingHookToken(a,function(a){for(var s=l([],t.state.hooks),n=0;n<s.length;n++)if(s[n].id===e){s[n]=a;break}t.setState({hooks:s,editError:null})},function(e){t.setState({editError:e.message})})}},{key:"getHooks",value:function(){var e=this;u.listOutgoingHooks(function(t){t&&e.setState({hooks:t,getHooksComplete:!0,editError:null})},function(t){e.setState({editError:t.message})})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"updateTriggerWords",value:function(e){this.setState({triggerWords:e.target.value})}},{key:"updateCallbackURLs",value:function(e){this.setState({callbackURLs:e.target.value})}},{key:"render",value:function(){var e=this,t=void 0;this.state.addError&&(t=React.createElement("label",{className:"has-error"},this.state.addError));var a=void 0;this.state.editError&&(t=React.createElement("label",{className:"has-error"},this.state.editError));var s=c.getAll(),n=[];n.push(React.createElement("option",{key:"select-channel",value:""},"--- Select a channel ---")),s.forEach(function(e){e.type===d.OPEN_CHANNEL&&n.push(React.createElement("option",{key:"outgoing-hook"+e.id,value:e.id},e.display_name))});var r=[];this.state.hooks.forEach(function(t){var a=c.get(t.channel_id);if(a||!t.channel_id||0===t.channel_id.length){var s=void 0;a&&(s=React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Channel: "),a.display_name));var n=void 0;t.trigger_words&&0!==t.trigger_words.length&&(n=React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Trigger Words: "),t.trigger_words.join(", "))),r.push(React.createElement("div",{key:t.id,className:"webhook__item"},React.createElement("div",{className:"padding-top x2"},React.createElement("strong",null,"URLs: "),React.createElement("span",{className:"word-break--all"},t.callback_urls.join(", "))),s,n,React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Token: "),t.token),React.createElement("div",{className:"padding-top"},React.createElement("a",{className:"text-danger",href:"#",onClick:e.regenToken.bind(e,t.id)},"Regen Token"),React.createElement("a",{className:"webhook__remove",href:"#",onClick:e.removeHook.bind(e,t.id)},React.createElement("span",{"aria-hidden":"true"},"×"))),React.createElement("div",{className:"padding-top x2 divider-light"})))}});var i=void 0;i=this.state.getHooksComplete?r.length>0?r:React.createElement("div",{className:"padding-top x2"},"None"):React.createElement(o,null);var l=React.createElement("div",{className:"webhooks__container"},React.createElement("label",{className:"control-label padding-top x2"},"Existing outgoing webhooks"),React.createElement("div",{className:"padding-top divider-light"}),React.createElement("div",{className:"webhooks__list"},i)),u=""===this.state.channelId&&""===this.state.triggerWords||""===this.state.callbackURLs;return React.createElement("div",{key:"addOutgoingHook"},"Create webhooks to send new message events to an external integration. Please see ",React.createElement("a",{href:"http://mattermost.org/webhooks"},"http://mattermost.org/webhooks")," "," to learn more.",React.createElement("div",null,React.createElement("label",{className:"control-label padding-top x2"},"Add a new outgoing webhook")),React.createElement("div",{className:"padding-top divider-light"}),React.createElement("div",{className:"padding-top"},React.createElement("div",null,React.createElement("label",{className:"control-label"},"Channel"),React.createElement("div",{className:"padding-top"},React.createElement("select",{ref:"channelName",className:"form-control",value:this.state.channelId,onChange:this.updateChannelId},n)),React.createElement("div",{className:"padding-top"},"Only public channels can be used")),React.createElement("div",{className:"padding-top x2"},React.createElement("label",{className:"control-label"},"Trigger Words:"),React.createElement("div",{className:"padding-top"},React.createElement("input",{ref:"triggerWords",className:"form-control",value:this.state.triggerWords,onChange:this.updateTriggerWords,placeholder:"Optional if channel selected"})),React.createElement("div",{className:"padding-top"},"Comma separated words to trigger on")),React.createElement("div",{className:"padding-top x2"},React.createElement("label",{className:"control-label"},"Callback URLs:"),React.createElement("div",{className:"padding-top"},React.createElement("textarea",{ref:"callbackURLs",className:"form-control no-resize",value:this.state.callbackURLs,resize:!1,rows:3,onChange:this.updateCallbackURLs,placeholder:"Each URL must start with http:// or https://"})),React.createElement("div",{
className:"padding-top"},"New line separated URLs that will receive the HTTP POST event"),t),React.createElement("div",{className:"padding-top padding-bottom"},React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",disabled:u,onClick:this.addNewHook},"Add"))),l,a)}}]),t}(React.Component);a.default=h,t.exports=a.default},{"../../stores/channel_store.jsx":276,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../loading_screen.jsx":53,"babel-runtime/core-js/object/assign":152,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],134:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/utils.jsx"),o=e("../../utils/constants.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return n(t,e),r(t,[{key:"render",value:function(){var e=this,t=this.props.theme,a=[];for(var s in o.THEMES)o.THEMES.hasOwnProperty(s)&&!function(){var n=$.extend(!0,{},o.THEMES[s]),r="";n.type===t.type&&(r="active"),a.push(React.createElement("div",{className:"col-xs-6 col-sm-3 premade-themes",key:"premade-theme-key"+s},React.createElement("div",{className:r,onClick:function(){return e.props.updateTheme(n)}},React.createElement("label",null,React.createElement("img",{className:"img-responsive",src:"/static/images/themes/"+n.type.toLowerCase()+".png"}),React.createElement("div",{className:"theme-label"},l.toTitleCase(n.type))))))}();return React.createElement("div",{className:"row"},a)}}]),t}(React.Component);a.default=c,c.propTypes={theme:React.PropTypes.object.isRequired,updateTheme:React.PropTypes.func.isRequired},t.exports=a.default},{"../../utils/constants.jsx":288,"../../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],135:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../stores/user_store.jsx"),o=e("../../utils/utils.jsx"),c=e("./user_settings_notifications.jsx"),u=e("./user_settings_security.jsx"),d=e("./user_settings_general.jsx"),h=e("./user_settings_appearance.jsx"),m=e("./user_settings_developer.jsx"),p=e("./user_settings_integrations.jsx"),f=e("./user_settings_display.jsx"),g=e("./user_settings_advanced.jsx"),b=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getActiveTab=this.getActiveTab.bind(this),this.onListenerChange=this.onListenerChange.bind(this),this.state={user:l.getCurrentUser()}}return n(t,e),r(t,[{key:"componentDidMount",value:function(){l.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){l.removeChangeListener(this.onListenerChange)}},{key:"getActiveTab",value:function(){return this.refs.activeTab}},{key:"onListenerChange",value:function(){var e=l.getCurrentUser();o.areStatesEqual(this.state.user,e)||this.setState({user:e})}},{key:"render",value:function(){return"general"===this.props.activeTab?React.createElement("div",null,React.createElement(d,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"security"===this.props.activeTab?React.createElement("div",null,React.createElement(u,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setEnforceFocus:this.props.setEnforceFocus})):"notifications"===this.props.activeTab?React.createElement("div",null,React.createElement(c,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"appearance"===this.props.activeTab?React.createElement("div",null,React.createElement(h,{ref:"activeTab",activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setEnforceFocus:this.props.setEnforceFocus,setRequireConfirm:this.props.setRequireConfirm})):"developer"===this.props.activeTab?React.createElement("div",null,React.createElement(m,{ref:"activeTab",activeSection:this.props.activeSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"integrations"===this.props.activeTab?React.createElement("div",null,React.createElement(p,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"display"===this.props.activeTab?React.createElement("div",null,React.createElement(f,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"advanced"===this.props.activeTab?React.createElement("div",null,React.createElement(g,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):React.createElement("div",null)}}]),t}(React.Component);a.default=b,b.propTypes={activeTab:React.PropTypes.string,activeSection:React.PropTypes.string,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired,setEnforceFocus:React.PropTypes.func.isRequired,setRequireConfirm:React.PropTypes.func.isRequired},t.exports=a.default},{"../../stores/user_store.jsx":284,"../../utils/utils.jsx":293,"./user_settings_advanced.jsx":136,"./user_settings_appearance.jsx":137,"./user_settings_developer.jsx":138,"./user_settings_display.jsx":139,"./user_settings_general.jsx":140,"./user_settings_integrations.jsx":141,"./user_settings_notifications.jsx":143,"./user_settings_security.jsx":144,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],136:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../../utils/client.jsx"),o=e("../setting_item_min.jsx"),c=e("../setting_item_max.jsx"),u=e("../../utils/constants.jsx"),d=e("../../stores/preference_store.jsx"),h=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.updateSection=this.updateSection.bind(this),this.updateSetting=this.updateSetting.bind(this),this.setupInitialState=this.setupInitialState.bind(this),this.state=this.setupInitialState()}return n(t,e),r(t,[{key:"setupInitialState",value:function(){var e=d.getPreference(u.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value;return{settings:{send_on_ctrl_enter:e}}}},{key:"updateSetting",value:function(e,t){var a=this.state.settings;a[e]=t,this.setState(a)}},{key:"handleSubmit",value:function(e){var t=this,a=d.setPreference(u.Preferences.CATEGORY_ADVANCED_SETTINGS,e,this.state.settings[e]);l.savePreferences([a],function(){d.emitChange(),t.updateSection("")},function(e){t.setState({serverError:e.message})})}},{key:"updateSection",value:function(e){this.props.updateSection(e)}},{key:"render",value:function(){var e=this,t=this.state.serverError||null,a=void 0;if("advancedCtrlSend"===this.props.activeSection){var s=["true"===this.state.settings.send_on_ctrl_enter,"false"===this.state.settings.send_on_ctrl_enter],n=[React.createElement("div",{key:"ctrlSendSetting"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:s[0],onChange:this.updateSetting.bind(this,"send_on_ctrl_enter","true")}),"On"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:s[1],onChange:this.updateSetting.bind(this,"send_on_ctrl_enter","false")}),"Off"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"If enabled 'Enter' inserts a new line and 'Ctrl + Enter' submits the message."))];a=React.createElement(c,{title:"Send messages on Ctrl + Enter",inputs:n,submit:function(){return e.handleSubmit("send_on_ctrl_enter")},server_error:t,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}else a=React.createElement(o,{title:"Send messages on Ctrl + Enter",describe:"true"===this.state.settings.send_on_ctrl_enter?"On":"Off",updateSection:function(){return e.props.updateSection("advancedCtrlSend")}});return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Advanced Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Advanced Settings"),React.createElement("div",{className:"divider-dark first"}),a,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=h,h.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired},t.exports=a.default},{"../../stores/preference_store.jsx":280,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],137:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default,l=e("babel-runtime/core-js/object/assign").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../stores/user_store.jsx"),c=e("../../utils/client.jsx"),u=e("../../utils/utils.jsx"),d=e("./custom_theme_chooser.jsx"),h=e("./premade_theme_chooser.jsx"),m=e("../../dispatcher/app_dispatcher.jsx"),p=e("../../utils/constants.jsx"),f=p.ActionTypes,g=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChange=this.onChange.bind(this),this.submitTheme=this.submitTheme.bind(this),this.updateTheme=this.updateTheme.bind(this),this.deactivate=this.deactivate.bind(this),this.resetFields=this.resetFields.bind(this),this.handleImportModal=this.handleImportModal.bind(this),this.state=this.getStateFromStores(),this.originalTheme=l({},this.state.theme)}return n(t,e),r(t,[{key:"componentDidMount",value:function(){o.addChangeListener(this.onChange),"theme"===this.props.activeSection&&$(ReactDOM.findDOMNode(this.refs[this.state.theme])).addClass("active-border")}},{key:"componentDidUpdate",value:function(){"theme"===this.props.activeSection&&($(".color-btn").removeClass("active-border"),$(ReactDOM.findDOMNode(this.refs[this.state.theme])).addClass("active-border"))}},{key:"componentWillUnmount",value:function(){o.removeChangeListener(this.onChange)}},{key:"getStateFromStores",value:function(){var e=o.getCurrentUser(),t=null;t=$.isPlainObject(e.theme_props)&&!$.isEmptyObject(e.theme_props)?l({},e.theme_props):$.extend(!0,{},p.THEMES.default);var a="premade";return"custom"===t.type&&(a="custom"),t.codeTheme||(t.codeTheme=p.DEFAULT_CODE_THEME),{theme:t,type:a}}},{key:"onChange",value:function(){var e=this.getStateFromStores();u.areStatesEqual(this.state,e)||this.setState(e),this.props.setEnforceFocus(!0)}},{key:"submitTheme",value:function(e){var t=this;e.preventDefault();var a=o.getCurrentUser();a.theme_props=this.state.theme,c.updateUser(a,function(e){m.handleServerAction({type:f.RECIEVED_ME,me:e}),t.props.setRequireConfirm(!1),t.originalTheme=l({},t.state.theme),$(".ps-container.modal-body").scrollTop(0),$(".ps-container.modal-body").perfectScrollbar("update")},function(e){var a=t.getStateFromStores();a.serverError=e,t.setState(a)})}},{key:"updateTheme",value:function(e){var t=this.state.theme.length===e.length;if(!t)for(var a in e)if(e.hasOwnProperty(a)&&this.state.theme[a]!==e[a]){t=!0;break}this.props.setRequireConfirm(t),this.setState({theme:e}),u.applyTheme(e)}},{key:"updateType",value:function(e){this.setState({type:e})}},{key:"deactivate",value:function(){var e=this.getStateFromStores();u.applyTheme(e.theme)}},{key:"resetFields",value:function(){var e=this.getStateFromStores();e.serverError=null,this.setState(e),u.applyTheme(e.theme),this.props.setRequireConfirm(!1)}},{key:"handleImportModal",value:function(){m.handleViewAction({type:f.TOGGLE_IMPORT_THEME_MODAL,value:!0}),this.props.setEnforceFocus(!1)}},{key:"render",value:function(){var e;this.state.serverError&&(e=this.state.serverError);var t="custom"===this.state.type,a=void 0,s=void 0;t?a=React.createElement(d,{theme:this.state.theme,updateTheme:this.updateTheme}):s=React.createElement(h,{theme:this.state.theme,updateTheme:this.updateTheme});var n=React.createElement("div",{className:"section-max appearance-section"},React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:!t,onChange:this.updateType.bind(this,"premade")}),"Theme Colors"),React.createElement("br",null)),s,React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:t,onChange:this.updateType.bind(this,"custom")}),"Custom Theme"),React.createElement("br",null)),a,React.createElement("hr",null),e,React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",onClick:this.submitTheme},"Save"),React.createElement("a",{className:"btn btn-sm theme",href:"#",onClick:this.resetFields},"Cancel")));return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Appearance Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Appearance Settings"),React.createElement("div",{className:"divider-dark first"}),n,React.createElement("div",{className:"divider-dark"}),React.createElement("br",null),React.createElement("a",{className:"theme",onClick:this.handleImportModal},"Import theme colors from Slack")))}}]),t}(React.Component);a.default=g,g.defaultProps={activeSection:""},g.propTypes={activeSection:React.PropTypes.string,updateTab:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired,setRequireConfirm:React.PropTypes.func.isRequired,setEnforceFocus:React.PropTypes.func.isRequired},t.exports=a.default},{"../../dispatcher/app_dispatcher.jsx":147,"../../stores/user_store.jsx":284,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../../utils/utils.jsx":293,"./custom_theme_chooser.jsx":130,"./premade_theme_chooser.jsx":134,"babel-runtime/core-js/object/assign":152,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],138:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../setting_item_min.jsx"),o=e("../setting_item_max.jsx"),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return n(t,e),r(t,[{key:"register",value:function(){$("#user_settings1").modal("hide"),$("#register_app").modal("show")}},{key:"render",value:function(){var e,t=this;if("app"===this.props.activeSection){var a=[];a.push(React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-7"},React.createElement("a",{className:"btn btn-sm btn-primary",onClick:this.register},"Register New Application")))),e=React.createElement(o,{title:"Applications (Preview)",inputs:a,updateSection:function(e){t.props.updateSection(""),e.preventDefault()}})}else e=React.createElement(l,{title:"Applications (Preview)",describe:"Open to register a new third-party application",updateSection:function(){t.props.updateSection("app")}});return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Developer Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Developer Settings"),React.createElement("div",{className:"divider-dark first"}),e,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=c,c.defaultProps={activeSection:""},c.propTypes={activeSection:React.PropTypes.string,updateSection:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired},t.exports=a.default},{"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],139:[function(e,t,a){"use strict";function s(){var e=b.default.getPreference(f.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"use_military_time",{value:"false"}),t=b.default.getPreference(f.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"name_format",{value:"username"});return{militaryTime:e.value,nameFormat:t.value}}var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default,o=e("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("../../utils/client.jsx"),u=e("../setting_item_min.jsx"),d=o(u),h=e("../setting_item_max.jsx"),m=o(h),p=e("../../utils/constants.jsx"),f=o(p),g=e("../../stores/preference_store.jsx"),b=o(g),v=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this),this.handleClockRadio=this.handleClockRadio.bind(this),this.handleNameRadio=this.handleNameRadio.bind(this),this.updateSection=this.updateSection.bind(this),this.state=s()}return r(t,e),i(t,[{key:"handleSubmit",value:function(){var e=this,t=b.default.setPreference(f.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"use_military_time",this.state.militaryTime),a=b.default.setPreference(f.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"name_format",this.state.nameFormat);c.savePreferences([t,a],function(){b.default.emitChange(),e.updateSection("")},function(t){e.setState({serverError:t.message})})}},{key:"handleClockRadio",value:function(e){this.setState({militaryTime:e})}},{key:"handleNameRadio",value:function(e){this.setState({nameFormat:e})}},{key:"updateSection",value:function(e){this.setState(s()),this.props.updateSection(e)}},{key:"render",value:function(){var e=this,t=this.state.serverError||null,a=void 0,s=void 0;if("clock"===this.props.activeSection){var n=[!1,!1];"true"===this.state.militaryTime?n[1]=!0:n[0]=!0;var r=function(t){e.updateSection(""),t.preventDefault()},i=[React.createElement("div",{key:"userDisplayClockOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:n[0],onChange:this.handleClockRadio.bind(this,"false")}),"12-hour clock (example: 4:00 PM)"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:n[1],onChange:this.handleClockRadio.bind(this,"true")}),"24-hour clock (example: 16:00)"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Select how you prefer time displayed."))];a=React.createElement(m.default,{title:"Clock Display",inputs:i,submit:this.handleSubmit,server_error:t,updateSection:r})}else{var l="";l="true"===this.state.militaryTime?"24-hour clock (example: 16:00)":"12-hour clock (example: 4:00 PM)";var r=function(){e.props.updateSection("clock")};a=React.createElement(d.default,{title:"Clock Display",describe:l,updateSection:r})}if("name_format"===this.props.activeSection){var o=[!1,!1,!1];"nickname_full_name"===this.state.nameFormat?o[0]=!0:"full_name"===this.state.nameFormat?o[2]=!0:o[1]=!0;var i=[React.createElement("div",{key:"userDisplayNameOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:o[0],onChange:this.handleNameRadio.bind(this,"nickname_full_name")}),"Show nickname if one exists, otherwise show first and last name (team default)"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:o[1],onChange:this.handleNameRadio.bind(this,"username")}),"Show username"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:o[2],onChange:this.handleNameRadio.bind(this,"full_name")}),"Show first and last name"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Set what name to display in the Direct Messages list."))];s=React.createElement(m.default,{title:"Teammate Name Display",inputs:i,submit:this.handleSubmit,server_error:t,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}else{var l="";l="username"===this.state.nameFormat?"Show username":"full_name"===this.state.nameFormat?"Show first and last name":"Show nickname if one exists, otherwise show first and last name (team default)",s=React.createElement(d.default,{title:"Teammate Name Display",describe:l,updateSection:function(){e.props.updateSection("name_format")}})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Display Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Display Settings"),React.createElement("div",{className:"divider-dark first"}),a,React.createElement("div",{className:"divider-dark"}),s,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=v,v.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired},t.exports=a.default},{"../../stores/preference_store.jsx":280,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,"babel-runtime/helpers/interop-require-default":163}],140:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../stores/user_store.jsx"),c=e("../../stores/error_store.jsx"),u=e("../setting_item_min.jsx"),d=e("../setting_item_max.jsx"),h=e("../setting_picture.jsx"),m=e("../../utils/client.jsx"),p=e("../../utils/async_client.jsx"),f=e("../../utils/utils.jsx"),g=e("object-assign"),b=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submitActive=!1,this.submitUsername=this.submitUsername.bind(this),this.submitNickname=this.submitNickname.bind(this),this.submitName=this.submitName.bind(this),this.submitEmail=this.submitEmail.bind(this),this.submitUser=this.submitUser.bind(this),this.submitPicture=this.submitPicture.bind(this),this.updateUsername=this.updateUsername.bind(this),this.updateFirstName=this.updateFirstName.bind(this),this.updateLastName=this.updateLastName.bind(this),this.updateNickname=this.updateNickname.bind(this),this.updateEmail=this.updateEmail.bind(this),this.updateConfirmEmail=this.updateConfirmEmail.bind(this),this.updatePicture=this.updatePicture.bind(this),this.updateSection=this.updateSection.bind(this),this.setupInitialState=this.setupInitialState.bind(this),this.state=this.setupInitialState(e)}return r(t,e),i(t,[{key:"submitUsername",value:function(e){e.preventDefault();var t=this.props.user,a=this.state.username.trim().toLowerCase(),s=f.isValidUsername(a);return"Cannot use a reserved word as a username."===s?void this.setState({clientError:"This username is reserved, please choose a new one."}):s?void this.setState({clientError:"Username must begin with a letter, and contain between 3 to 15 lowercase characters made up of numbers, letters, and the symbols '.', '-' and '_'."}):t.username===a?void this.setState({clientError:"You must submit a new username"}):(t.username=a,void this.submitUser(t,!1))}},{key:"submitNickname",value:function(e){e.preventDefault();var t=o.getCurrentUser(),a=this.state.nickname.trim();return t.nickname===a?void this.setState({clientError:"You must submit a new nickname"}):(t.nickname=a,void this.submitUser(t,!1))}},{key:"submitName",value:function(e){e.preventDefault();var t=o.getCurrentUser(),a=this.state.firstName.trim(),s=this.state.lastName.trim();return t.first_name===a&&t.last_name===s?void this.setState({clientError:"You must submit a new first or last name"}):(t.first_name=a,t.last_name=s,void this.submitUser(t,!1))}},{key:"submitEmail",value:function(e){e.preventDefault();var t=o.getCurrentUser(),a=this.state.email.trim().toLowerCase(),s=this.state.confirmEmail.trim().toLowerCase();if(t.email!==a){if(""===a||!f.isEmail(a))return void this.setState({emailError:"Please enter a valid email address"});if(a!==s)return void this.setState({emailError:"The new emails you entered do not match"});t.email=a,this.submitUser(t,!0)}}},{key:"submitUser",value:function(e,t){var a=this;m.updateUser(e,function(){a.updateSection(""),p.getMe();var n="true"===s.window.mm_config.SendEmailNotifications&&"true"===s.window.mm_config.RequireEmailVerification&&t;n&&(c.storeLastError({message:"Check your email at "+e.email+" to verify the address."}),c.emitChange(),a.setState({emailChangeInProgress:!0}))},function(e){var t=a.setupInitialState(a.props);e.message?t.serverError=e.message:t.serverError=e,a.setState(t)})}},{key:"submitPicture",value:function(e){if(e.preventDefault(),this.state.picture&&this.submitActive){var t=this.state.picture;if("image/jpeg"!==t.type&&"image/png"!==t.type)return void this.setState({clientError:"Only JPG or PNG images may be used for profile pictures"});var a=new FormData;a.append("image",t,t.name),this.setState({loadingPicture:!0}),m.uploadProfileImage(a,function(){this.submitActive=!1,p.getMe(),window.location.reload()}.bind(this),function(e){var t=this.setupInitialState(this.props);t.serverError=e.message,this.setState(t)}.bind(this))}}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"updateFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"updateLastName",value:function(e){this.setState({lastName:e.target.value})}},{key:"updateNickname",value:function(e){this.setState({nickname:e.target.value})}},{key:"updateEmail",value:function(e){this.setState({email:e.target.value})}},{key:"updateConfirmEmail",value:function(e){this.setState({confirmEmail:e.target.value})}},{key:"updatePicture",value:function(e){e.target.files&&e.target.files[0]?(this.setState({picture:e.target.files[0]}),this.submitActive=!0,this.setState({clientError:null})):this.setState({picture:null})}},{key:"updateSection",value:function(e){var t=this.state.emailChangeInProgress;this.setState(g({},this.setupInitialState(this.props),{emailChangeInProgress:t,clientError:"",serverError:"",emailError:""})),this.submitActive=!1,this.props.updateSection(e)}},{key:"setupInitialState",value:function(e){var t=e.user;return{username:t.username,firstName:t.first_name,lastName:t.last_name,nickname:t.nickname,email:t.email,confirmEmail:"",picture:null,loadingPicture:!1,emailChangeInProgress:!1}}},{key:"render",value:function(){var e=this.props.user,t=null;this.state.clientError&&(t=this.state.clientError);var a=null;this.state.serverError&&(a=this.state.serverError);var n=null;this.state.emailError&&(n=this.state.emailError);var r,i=[];if("name"===this.props.activeSection){var l=function(e){e.preventDefault(),this.updateSection(""),this.props.updateTab("notifications")};i.push(React.createElement("div",{key:"firstNameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"First Name"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateFirstName,value:this.state.firstName})))),i.push(React.createElement("div",{key:"lastNameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Last Name"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateLastName,value:this.state.lastName}))));var c=React.createElement("a",{href:"#",onClick:l.bind(this)},"Notifications"),m=React.createElement("span",null,"By default, you will receive mention notifications when someone types your first name. ","Go to "," ",c," ","settings to change this default.");
r=React.createElement(d,{title:"Full Name",inputs:i,submit:this.submitName,server_error:a,client_error:t,updateSection:function(e){this.updateSection(""),e.preventDefault()}.bind(this),extraInfo:m})}else{var p="";e.first_name&&e.last_name?p=e.first_name+" "+e.last_name:e.first_name?p=e.first_name:e.last_name&&(p=e.last_name),r=React.createElement(u,{title:"Full Name",describe:p,updateSection:function(){this.updateSection("name")}.bind(this)})}var g;if("nickname"===this.props.activeSection){var b="Nickname";f.isMobile()&&(b=""),i.push(React.createElement("div",{key:"nicknameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},b),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateNickname,value:this.state.nickname}))));var m=React.createElement("span",null,"Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.");g=React.createElement(d,{title:"Nickname",inputs:i,submit:this.submitNickname,server_error:a,client_error:t,updateSection:function(e){this.updateSection(""),e.preventDefault()}.bind(this),extraInfo:m})}else g=React.createElement(u,{title:"Nickname",describe:o.getCurrentUser().nickname,updateSection:function(){this.updateSection("nickname")}.bind(this)});var v;if("username"===this.props.activeSection){var E="Username";f.isMobile()&&(E=""),i.push(React.createElement("div",{key:"usernameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},E),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateUsername,value:this.state.username}))));var m=React.createElement("span",null,"Pick something easy for teammates to recognize and recall.");v=React.createElement(d,{title:"Username",inputs:i,submit:this.submitUsername,server_error:a,client_error:t,updateSection:function(e){this.updateSection(""),e.preventDefault()}.bind(this),extraInfo:m})}else v=React.createElement(u,{title:"Username",describe:o.getCurrentUser().username,updateSection:function(){this.updateSection("username")}.bind(this)});var _;if("email"===this.props.activeSection){var y="true"===s.window.mm_config.SendEmailNotifications,R="true"===s.window.mm_config.RequireEmailVerification,C="Email is used for notifications, and requires verification if changed.";if(y)if(R){if(this.state.emailChangeInProgress){var N=o.getCurrentUser().email;N&&(C="A verification email was sent to "+N+".")}}else C="Email is used for notifications.";else C=React.createElement("div",{className:"setting-list__hint text-danger"},"Email has been disabled by your system administrator. No notification emails will be sent until it is enabled.");var k=null;""===this.props.user.auth_service?(i.push(React.createElement("div",{key:"emailSetting"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Primary Email"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateEmail,value:this.state.email}))))),i.push(React.createElement("div",{key:"confirmEmailSetting"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Confirm Email"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateConfirmEmail,value:this.state.confirmEmail}))),C)),k=this.submitEmail):i.push(React.createElement("div",{key:"oauthEmailInfo",className:"form-group"},React.createElement("div",{className:"setting-list__hint"},"Log in occurs through GitLab. Email cannot be updated."),C)),_=React.createElement(d,{title:"Email",inputs:i,submit:k,server_error:a,client_error:n,updateSection:function(e){this.updateSection(""),e.preventDefault()}.bind(this)})}else{var S="";if(""===this.props.user.auth_service)if(this.state.emailChangeInProgress){var N=o.getCurrentUser().email;S=N?"New Address: "+N+"\nCheck your email to verify the above address.":"Check your email to verify your new address"}else S=o.getCurrentUser().email;else S="Log in done through GitLab";_=React.createElement(u,{title:"Email",describe:S,updateSection:function(){this.updateSection("email")}.bind(this)})}var w;if("picture"===this.props.activeSection)w=React.createElement(h,{title:"Profile Picture",submit:this.submitPicture,src:"/api/v1/users/"+e.id+"/image?time="+e.last_picture_update+"&"+f.getSessionIndex(),server_error:a,client_error:t,updateSection:function(e){this.updateSection(""),e.preventDefault()}.bind(this),picture:this.state.picture,pictureChange:this.updatePicture,submitActive:this.submitActive,loadingPicture:this.state.loadingPicture});else{var x="Click 'Edit' to upload an image.";e.last_picture_update&&(x="Image last updated "+f.displayDate(e.last_picture_update)),w=React.createElement(u,{title:"Profile Picture",describe:x,updateSection:function(){this.updateSection("picture")}.bind(this)})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"General Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"General Settings"),React.createElement("div",{className:"divider-dark first"}),r,React.createElement("div",{className:"divider-light"}),v,React.createElement("div",{className:"divider-light"}),g,React.createElement("div",{className:"divider-light"}),_,React.createElement("div",{className:"divider-light"}),w,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=b,b.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../stores/error_store.jsx":277,"../../stores/user_store.jsx":284,"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"../../utils/utils.jsx":293,"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"../setting_picture.jsx":98,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,"object-assign":"object-assign"}],141:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../setting_item_min.jsx"),c=e("../setting_item_max.jsx"),u=e("./manage_incoming_hooks.jsx"),d=e("./manage_outgoing_hooks.jsx"),h=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.updateSection=this.updateSection.bind(this),this.state={}}return r(t,e),i(t,[{key:"updateSection",value:function(e){this.props.updateSection(e)}},{key:"render",value:function(){var e=this,t=void 0,a=void 0,n=[];return"true"===s.window.mm_config.EnableIncomingWebhooks&&("incoming-hooks"===this.props.activeSection?(n.push(React.createElement(u,{key:"incoming-hook-ui"})),t=React.createElement(c,{title:"Incoming Webhooks",width:"medium",inputs:n,updateSection:function(t){e.updateSection(""),t.preventDefault()}})):t=React.createElement(o,{title:"Incoming Webhooks",width:"medium",describe:"Manage your incoming webhooks",updateSection:function(){e.updateSection("incoming-hooks")}})),"true"===s.window.mm_config.EnableOutgoingWebhooks&&("outgoing-hooks"===this.props.activeSection?(n.push(React.createElement(d,{key:"outgoing-hook-ui"})),a=React.createElement(c,{title:"Outgoing Webhooks",width:"medium",inputs:n,updateSection:function(t){e.updateSection(""),t.preventDefault()}})):a=React.createElement(o,{title:"Outgoing Webhooks",width:"medium",describe:"Manage your outgoing webhooks",updateSection:function(){e.updateSection("outgoing-hooks")}})),React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Integration Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Integration Settings"),React.createElement("div",{className:"divider-dark first"}),t,React.createElement("div",{className:"divider-light"}),a,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=h,h.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"./manage_incoming_hooks.jsx":132,"./manage_outgoing_hooks.jsx":133,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],142:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../confirm_modal.jsx"),c=ReactBootstrap.Modal,u=e("../settings_sidebar.jsx"),d=e("./user_settings.jsx"),h=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleHide=this.handleHide.bind(this),this.handleHidden=this.handleHidden.bind(this),this.handleCollapse=this.handleCollapse.bind(this),this.handleConfirm=this.handleConfirm.bind(this),this.handleCancelConfirmation=this.handleCancelConfirmation.bind(this),this.deactivateTab=this.deactivateTab.bind(this),this.closeModal=this.closeModal.bind(this),this.collapseModal=this.collapseModal.bind(this),this.updateTab=this.updateTab.bind(this),this.updateSection=this.updateSection.bind(this),this.state={active_tab:"general",active_section:"",showConfirmModal:!1,enforceFocus:!0},this.requireConfirm=!1}return r(t,e),i(t,[{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&($(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-300),$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar())}},{key:"handleHide",value:function(){var e=this;return this.requireConfirm?(this.afterConfirm=function(){return e.handleHide()},this.showConfirmModal(),!1):(this.deactivateTab(),void this.props.onModalDismissed())}},{key:"handleHidden",value:function(){this.setState({active_tab:"general",active_section:""})}},{key:"handleCollapse",value:function(){$(ReactDOM.findDOMNode(this.refs.modalBody)).closest(".modal-dialog").removeClass("display--content"),this.deactivateTab(),this.setState({active_tab:"",active_section:""})}},{key:"handleConfirm",value:function(){this.setState({showConfirmModal:!1,enforceFocus:!0}),this.requireConfirm=!1,this.afterConfirm&&(this.afterConfirm(),this.afterConfirm=null)}},{key:"handleCancelConfirmation",value:function(){this.setState({showConfirmModal:!1,enforceFocus:!0}),this.afterConfirm=null}},{key:"showConfirmModal",value:function(e){this.setState({showConfirmModal:!0,enforceFocus:!1}),e&&(this.afterConfirm=e)}},{key:"deactivateTab",value:function(){var e=this.refs.userSettings.getActiveTab();e&&e.deactivate&&e.deactivate()}},{key:"closeModal",value:function(){this.requireConfirm?this.showConfirmModal(this.closeModal):this.handleHide()}},{key:"collapseModal",value:function(){this.requireConfirm?this.showConfirmModal(this.collapseModal):this.handleCollapse()}},{key:"updateTab",value:function(e,t){var a=this;!t&&this.requireConfirm?this.showConfirmModal(function(){return a.updateTab(e,!0)}):(this.deactivateTab(),this.setState({active_tab:e,active_section:""}))}},{key:"updateSection",value:function(e,t){var a=this;!t&&this.requireConfirm?this.showConfirmModal(function(){return a.updateSection(e,!0)}):this.setState({active_section:e})}},{key:"render",value:function(){var e=this,t=[];return t.push({name:"general",uiName:"General",icon:"glyphicon glyphicon-cog"}),t.push({name:"security",uiName:"Security",icon:"glyphicon glyphicon-lock"}),t.push({name:"notifications",uiName:"Notifications",icon:"glyphicon glyphicon-exclamation-sign"}),t.push({name:"appearance",uiName:"Appearance",icon:"glyphicon glyphicon-wrench"}),"true"===s.window.mm_config.EnableOAuthServiceProvider&&t.push({name:"developer",uiName:"Developer",icon:"glyphicon glyphicon-th"}),("true"===s.window.mm_config.EnableIncomingWebhooks||"true"===s.window.mm_config.EnableOutgoingWebhooks)&&t.push({name:"integrations",uiName:"Integrations",icon:"glyphicon glyphicon-transfer"}),t.push({name:"display",uiName:"Display",icon:"glyphicon glyphicon-eye-open"}),t.push({name:"advanced",uiName:"Advanced",icon:"glyphicon glyphicon-list-alt"}),React.createElement(c,{dialogClassName:"settings-modal",show:this.props.show,onHide:this.handleHide,onExited:this.handleHidden,enforceFocus:this.state.enforceFocus},React.createElement(c.Header,{closeButton:!0},React.createElement(c.Title,null,"Account Settings")),React.createElement(c.Body,{ref:"modalBody"},React.createElement("div",{className:"settings-table"},React.createElement("div",{className:"settings-links"},React.createElement(u,{tabs:t,activeTab:this.state.active_tab,updateTab:this.updateTab})),React.createElement("div",{className:"settings-content minimize-settings"},React.createElement(d,{ref:"userSettings",activeTab:this.state.active_tab,activeSection:this.state.active_section,updateSection:this.updateSection,updateTab:this.updateTab,closeModal:this.closeModal,collapseModal:this.collapseModal,setEnforceFocus:function(t){return e.setState({enforceFocus:t})},setRequireConfirm:function(t){return e.requireConfirm=t}})))),React.createElement(o,{title:"Discard Changes?",message:"You have unsaved changes, are you sure you want to discard them?",confirm_button:"Yes, Discard",show:this.state.showConfirmModal,onConfirm:this.handleConfirm,onCancel:this.handleCancelConfirmation}))}}]),t}(React.Component);a.default=h,h.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../confirm_modal.jsx":35,"../settings_sidebar.jsx":100,"./user_settings.jsx":135,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],143:[function(e,t,a){(function(s){"use strict";function n(){var e=c.getCurrentUser(),t=!p.isBrowserFirefox(),a="true";e.notify_props&&e.notify_props.desktop_sound&&(a=e.notify_props.desktop_sound);var s="default";e.notify_props&&e.notify_props.desktop&&(s=e.notify_props.desktop);var n="true";e.notify_props&&e.notify_props.email&&(n=e.notify_props.email);var r=!1,i=!1,l="",o=!1,u=!1,d=!1;if(e.notify_props){if(e.notify_props.mention_keys){var h=e.notify_props.mention_keys.split(",");-1===h.indexOf(e.username)?r=!1:(r=!0,h.splice(h.indexOf(e.username),1)),-1===h.indexOf("@"+e.username)?i=!1:(i=!0,h.splice(h.indexOf("@"+e.username),1)),l=h.join(",")}e.notify_props.first_name&&(o="true"===e.notify_props.first_name),e.notify_props.all&&(u="true"===e.notify_props.all),e.notify_props.channel&&(d="true"===e.notify_props.channel)}return{notifyLevel:s,enableEmail:n,soundNeeded:t,enableSound:a,usernameKey:r,mentionKey:i,customKeys:l,customKeysChecked:l.length>0,firstNameKey:o,allKey:u,channelKey:d}}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/create-class").default,o=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("../../stores/user_store.jsx"),u=e("../setting_item_min.jsx"),d=e("../setting_item_max.jsx"),h=e("../../utils/client.jsx"),m=e("../../utils/async_client.jsx"),p=e("../../utils/utils.jsx"),f=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleSubmit=this.handleSubmit.bind(this),this.updateSection=this.updateSection.bind(this),this.onListenerChange=this.onListenerChange.bind(this),this.handleNotifyRadio=this.handleNotifyRadio.bind(this),this.handleEmailRadio=this.handleEmailRadio.bind(this),this.handleSoundRadio=this.handleSoundRadio.bind(this),this.updateUsernameKey=this.updateUsernameKey.bind(this),this.updateMentionKey=this.updateMentionKey.bind(this),this.updateFirstNameKey=this.updateFirstNameKey.bind(this),this.updateAllKey=this.updateAllKey.bind(this),this.updateChannelKey=this.updateChannelKey.bind(this),this.updateCustomMentionKeys=this.updateCustomMentionKeys.bind(this),this.onCustomChange=this.onCustomChange.bind(this),this.state=n()}return i(t,e),l(t,[{key:"handleSubmit",value:function(){var e={};e.user_id=this.props.user.id,e.email=this.state.enableEmail,e.desktop_sound=this.state.enableSound,e.desktop=this.state.notifyLevel;var t=[];this.state.usernameKey&&t.push(this.props.user.username),this.state.mentionKey&&t.push("@"+this.props.user.username);var a=t.join(",");this.state.customKeys.length>0&&this.state.customKeysChecked&&(a+=","+this.state.customKeys),e.mention_keys=a,e.first_name=this.state.firstNameKey.toString(),e.all=this.state.allKey.toString(),e.channel=this.state.channelKey.toString(),h.updateUserNotifyProps(e,function(){this.props.updateSection(""),m.getMe()}.bind(this),function(e){this.setState({serverError:e.message})}.bind(this))}},{key:"updateSection",value:function(e){this.setState(n()),this.props.updateSection(e)}},{key:"componentDidMount",value:function(){c.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){c.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=n();p.areStatesEqual(e,this.state)||this.setState(e)}},{key:"handleNotifyRadio",value:function(e){this.setState({notifyLevel:e}),ReactDOM.findDOMNode(this.refs.wrapper).focus()}},{key:"handleEmailRadio",value:function(e){this.setState({enableEmail:e}),ReactDOM.findDOMNode(this.refs.wrapper).focus()}},{key:"handleSoundRadio",value:function(e){this.setState({enableSound:e}),ReactDOM.findDOMNode(this.refs.wrapper).focus()}},{key:"updateUsernameKey",value:function(e){this.setState({usernameKey:e})}},{key:"updateMentionKey",value:function(e){this.setState({mentionKey:e})}},{key:"updateFirstNameKey",value:function(e){this.setState({firstNameKey:e})}},{key:"updateAllKey",value:function(e){this.setState({allKey:e})}},{key:"updateChannelKey",value:function(e){this.setState({channelKey:e})}},{key:"updateCustomMentionKeys",value:function(){var e=ReactDOM.findDOMNode(this.refs.customcheck).checked;if(e){var t=ReactDOM.findDOMNode(this.refs.custommentions).value;this.setState({customKeys:t.replace(/ /g,""),customKeysChecked:!0})}else this.setState({customKeys:"",customKeysChecked:!1})}},{key:"onCustomChange",value:function(){ReactDOM.findDOMNode(this.refs.customcheck).checked=!0,this.updateCustomMentionKeys()}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=this.state.serverError);var t,a,n=this.props.user;if("desktop"===this.props.activeSection){var r=[!1,!1,!1];"mention"===this.state.notifyLevel?r[1]=!0:"none"===this.state.notifyLevel?r[2]=!0:r[0]=!0;var i=[];i.push(React.createElement("div",{key:"userNotificationLevelOption"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[0],onChange:this.handleNotifyRadio.bind(this,"all")}),"For all activity"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[1],onChange:this.handleNotifyRadio.bind(this,"mention")}),"Only for mentions and direct messages"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[2],onChange:this.handleNotifyRadio.bind(this,"none")}),"Never")))),a=function(e){this.props.updateSection(""),e.preventDefault()}.bind(this);var l=React.createElement("span",null,"Desktop notifications are available on Firefox, Safari, and Chrome.");t=React.createElement(d,{title:"Send desktop notifications",extraInfo:l,inputs:i,submit:this.handleSubmit,server_error:e,updateSection:a})}else{var o="";o="mention"===this.state.notifyLevel?"Only for mentions and direct messages":"none"===this.state.notifyLevel?"Never":"For all activity",a=function(){this.props.updateSection("desktop")}.bind(this),t=React.createElement(u,{title:"Send desktop notifications",describe:o,updateSection:a})}var c,h;if("sound"===this.props.activeSection&&this.state.soundNeeded){var m=[!1,!1];"false"===this.state.enableSound?m[1]=!0:m[0]=!0;var i=[];i.push(React.createElement("div",{key:"userNotificationSoundOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:m[0],onChange:this.handleSoundRadio.bind(this,"true")}),"On"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:m[1],onChange:this.handleSoundRadio.bind(this,"false")}),"Off"),React.createElement("br",null)))),h=function(e){this.props.updateSection(""),e.preventDefault()}.bind(this);var l=React.createElement("span",null,"Desktop notification sounds are available on Firefox, Safari, Chrome, Internet Explorer, and Edge.");c=React.createElement(d,{title:"Desktop notification sounds",extraInfo:l,inputs:i,submit:this.handleSubmit,server_error:e,updateSection:h})}else{var o="";o=this.state.soundNeeded?"false"===this.state.enableSound?"Off":"On":"Please configure notification sounds in your browser settings",h=function(){this.props.updateSection("sound")}.bind(this),c=React.createElement(u,{title:"Desktop notification sounds",describe:o,updateSection:h,disableOpen:!this.state.soundNeeded})}var p,f;if("email"===this.props.activeSection){var g=[!1,!1];"false"===this.state.enableEmail?g[1]=!0:g[0]=!0;var i=[];i.push(React.createElement("div",{key:"userNotificationEmailOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:g[0],onChange:this.handleEmailRadio.bind(this,"true")}),"On"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:g[1],onChange:this.handleEmailRadio.bind(this,"false")}),"Off"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Email notifications are sent for mentions and direct messages after you’ve been offline for more than 60 seconds or away from "+s.window.mm_config.SiteName+" for more than 5 minutes."))),f=function(e){this.props.updateSection(""),e.preventDefault()}.bind(this),p=React.createElement(d,{title:"Email notifications",inputs:i,submit:this.handleSubmit,server_error:e,updateSection:f})}else{var o="";o="false"===this.state.enableEmail?"Off":"On",f=function(){this.props.updateSection("email")}.bind(this),p=React.createElement(u,{title:"Email notifications",describe:o,updateSection:f})}var b,v;if("keys"===this.props.activeSection){var i=[],E=void 0,_=void 0,y=void 0,R=void 0,C=void 0;n.first_name&&(E=function(e){this.updateFirstNameKey(e.target.checked)}.bind(this),i.push(React.createElement("div",{key:"userNotificationFirstNameOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.firstNameKey,onChange:E}),'Your case sensitive first name "'+n.first_name+'"'))))),_=function(e){this.updateUsernameKey(e.target.checked)}.bind(this),i.push(React.createElement("div",{key:"userNotificationUsernameOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.usernameKey,onChange:_}),'Your non-case sensitive username "'+n.username+'"')))),y=function(e){this.updateMentionKey(e.target.checked)}.bind(this),i.push(React.createElement("div",{key:"userNotificationMentionOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.mentionKey,onChange:y}),'Your username mentioned "@'+n.username+'"')))),R=function(e){this.updateAllKey(e.target.checked)}.bind(this),i.push(React.createElement("div",{key:"userNotificationAllOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.allKey,onChange:R}),'Team-wide mentions "@all"')))),C=function(e){this.updateChannelKey(e.target.checked)}.bind(this),i.push(React.createElement("div",{key:"userNotificationChannelOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.channelKey,onChange:C}),'Channel-wide mentions "@channel"')))),i.push(React.createElement("div",{key:"userNotificationCustomOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{ref:"customcheck",type:"checkbox",checked:this.state.customKeysChecked,onChange:this.updateCustomMentionKeys}),"Other non-case sensitive words, separated by commas:")),React.createElement("input",{ref:"custommentions",className:"form-control mentions-input",type:"text",defaultValue:this.state.customKeys,onChange:this.onCustomChange}))),v=function(e){this.props.updateSection(""),e.preventDefault()}.bind(this),b=React.createElement(d,{title:"Words that trigger mentions",inputs:i,submit:this.handleSubmit,server_error:e,updateSection:v})}else{var N=[];this.state.firstNameKey&&N.push(n.first_name),this.state.usernameKey&&N.push(n.username),this.state.mentionKey&&N.push("@"+n.username),this.state.allKey&&N.push("@all"),this.state.channelKey&&N.push("@channel"),this.state.customKeys.length>0&&(N=N.concat(this.state.customKeys.split(",")));for(var o="",k=0;k<N.length;k++)o+='"'+N[k]+'", ';o=o.length>0?o.substring(0,o.length-2):"No words configured",v=function(){this.props.updateSection("keys")}.bind(this),b=React.createElement(u,{title:"Words that trigger mentions",describe:o,updateSection:v})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Notification Settings")),React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Notifications"),React.createElement("div",{className:"divider-dark first"}),t,React.createElement("div",{className:"divider-light"}),c,React.createElement("div",{className:"divider-light"}),p,React.createElement("div",{className:"divider-light"}),b,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=f,f.defaultProps={user:null,activeSection:"",activeTab:""},f.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,activeTab:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../stores/user_store.jsx":284,"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"../../utils/utils.jsx":293,"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],144:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../setting_item_min.jsx"),o=e("../setting_item_max.jsx"),c=e("../access_history_modal.jsx"),u=e("../activity_log_modal.jsx"),d=e("../../utils/client.jsx"),h=e("../../utils/async_client.jsx"),m=e("../../utils/constants.jsx"),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.showAccessHistoryModal=this.showAccessHistoryModal.bind(this),this.showActivityLogModal=this.showActivityLogModal.bind(this),this.hideModals=this.hideModals.bind(this),this.submitPassword=this.submitPassword.bind(this),this.updateCurrentPassword=this.updateCurrentPassword.bind(this),this.updateNewPassword=this.updateNewPassword.bind(this),this.updateConfirmPassword=this.updateConfirmPassword.bind(this),this.setupInitialState=this.setupInitialState.bind(this);var a=this.setupInitialState();a.showAccessHistoryModal=!1,a.showActivityLogModal=!1,this.state=a}return n(t,e),r(t,[{key:"showAccessHistoryModal",value:function(){this.props.setEnforceFocus(!1),this.setState({showAccessHistoryModal:!0})}},{key:"showActivityLogModal",value:function(){this.props.setEnforceFocus(!1),this.setState({showActivityLogModal:!0})}},{key:"hideModals",value:function(){this.props.setEnforceFocus(!0),this.setState({showAccessHistoryModal:!1,showActivityLogModal:!1})}},{key:"submitPassword",value:function(e){e.preventDefault();var t=this.props.user,a=this.state.currentPassword,s=this.state.newPassword,n=this.state.confirmPassword;if(""===a)return void this.setState({passwordError:"Please enter your current password",serverError:""});if(s.length<5)return void this.setState({passwordError:"New passwords must be at least 5 characters",serverError:""});if(s!==n)return void this.setState({passwordError:"The new passwords you entered do not match",serverError:""});var r={};r.user_id=t.id,r.current_password=a,r.new_password=s,d.updatePassword(r,function(){this.props.updateSection(""),h.getMe(),this.setState(this.setupInitialState())}.bind(this),function(e){var t=this.setupInitialState();e.message?t.serverError=e.message:t.serverError=e,t.passwordError="",this.setState(t)}.bind(this))}},{key:"updateCurrentPassword",value:function(e){this.setState({currentPassword:e.target.value})}},{key:"updateNewPassword",value:function(e){
this.setState({newPassword:e.target.value})}},{key:"updateConfirmPassword",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"setupInitialState",value:function(){return{currentPassword:"",newPassword:"",confirmPassword:""}}},{key:"render",value:function(){var e;this.state.serverError&&(e=this.state.serverError);var t;this.state.passwordError&&(t=this.state.passwordError);var a,s;if("password"===this.props.activeSection){var n=[],r=null;""===this.props.user.auth_service?(n.push(React.createElement("div",{key:"currentPasswordUpdateForm",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Current Password"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"password",onChange:this.updateCurrentPassword,value:this.state.currentPassword})))),n.push(React.createElement("div",{key:"newPasswordUpdateForm",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"New Password"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"password",onChange:this.updateNewPassword,value:this.state.newPassword})))),n.push(React.createElement("div",{key:"retypeNewPasswordUpdateForm",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Retype New Password"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"password",onChange:this.updateConfirmPassword,value:this.state.confirmPassword})))),r=this.submitPassword):n.push(React.createElement("div",{key:"oauthPasswordInfo",className:"form-group"},React.createElement("label",{className:"col-sm-12"},"Log in occurs through GitLab. Please see your GitLab account settings page to update your password."))),a=function(e){this.props.updateSection(""),this.setState({currentPassword:"",newPassword:"",confirmPassword:"",serverError:null,passwordError:null}),e.preventDefault()}.bind(this),s=React.createElement(o,{title:"Password",inputs:n,submit:r,server_error:e,client_error:t,updateSection:a})}else{var i;if(""===this.props.user.auth_service){var d=new Date(this.props.user.last_password_update),h="12";d.getHours()%12&&(h=String(d.getHours()%12));var p=String(d.getMinutes());d.getMinutes()<10&&(p="0"+d.getMinutes());var f=" am";d.getHours()>=12&&(f=" pm"),i="Last updated "+m.MONTHS[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+" at "+h+":"+p+f}else i="Log in done through GitLab";a=function(){this.props.updateSection("password")}.bind(this),s=React.createElement(l,{title:"Password",describe:i,updateSection:a})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Security Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Security Settings"),React.createElement("div",{className:"divider-dark first"}),s,React.createElement("div",{className:"divider-dark"}),React.createElement("br",null),React.createElement("a",{className:"security-links theme",href:"#",onClick:this.showAccessHistoryModal},React.createElement("i",{className:"fa fa-clock-o"}),"View Access History"),React.createElement("b",null," "),React.createElement("a",{className:"security-links theme",href:"#",onClick:this.showActivityLogModal},React.createElement("i",{className:"fa fa-globe"}),"View and Logout of Active Sessions")),React.createElement(c,{show:this.state.showAccessHistoryModal,onModalDismissed:this.hideModals}),React.createElement(u,{show:this.state.showActivityLogModal,onModalDismissed:this.hideModals}))}}]),t}(React.Component);a.default=p,p.defaultProps={user:{},activeSection:""},p.propTypes={user:React.PropTypes.object,activeSection:React.PropTypes.string,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired,setEnforceFocus:React.PropTypes.func.isRequired},t.exports=a.default},{"../../utils/async_client.jsx":285,"../../utils/client.jsx":287,"../../utils/constants.jsx":288,"../access_history_modal.jsx":2,"../activity_log_modal.jsx":3,"../setting_item_max.jsx":96,"../setting_item_min.jsx":97,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],145:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../utils/client.jsx"),o=e("../utils/utils.jsx"),c=e("../utils/constants.jsx"),u=e("./view_image_popover_bar.jsx"),d=ReactBootstrap.Modal,h=c.KeyCodes,m=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.canSetState=!1,this.loadImage=this.loadImage.bind(this),this.handleNext=this.handleNext.bind(this),this.handlePrev=this.handlePrev.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.getPublicLink=this.getPublicLink.bind(this),this.getPreviewImagePath=this.getPreviewImagePath.bind(this),this.onModalShown=this.onModalShown.bind(this),this.onModalHidden=this.onModalHidden.bind(this),this.onMouseEnterImage=this.onMouseEnterImage.bind(this),this.onMouseLeaveImage=this.onMouseLeaveImage.bind(this);for(var a=[],n=[],r=0;r<this.props.filenames.length;r++)a.push(!1),n.push(0);this.state={imgId:this.props.startId,imgHeight:"100%",loaded:a,progress:n,images:{},fileSizes:{},fileMimes:{},showFooter:!1,isPlaying:{},isLoading:{}}}return n(t,e),r(t,[{key:"handleNext",value:function(e){e&&e.stopPropagation();var t=this.state.imgId+1;t>this.props.filenames.length-1&&(t=0),this.setState({imgId:t}),this.loadImage(t)}},{key:"handlePrev",value:function(e){e&&e.stopPropagation();var t=this.state.imgId-1;0>t&&(t=this.props.filenames.length-1),this.setState({imgId:t}),this.loadImage(t)}},{key:"handleKeyPress",value:function(e){e&&this.props.show&&(e.keyCode===h.RIGHT?this.handleNext():e.keyCode===h.LEFT&&this.handlePrev())}},{key:"onModalShown",value:function(e){this.setState({imgId:e.startId}),this.loadImage(e.startId)}},{key:"onModalHidden",value:function(){if(this.refs.video){var e=ReactDOM.findDOMNode(this.refs.video);e.pause(),e.currentTime=0}}},{key:"componentWillReceiveProps",value:function(e){e.show===!0&&this.props.show===!1?this.onModalShown(e):e.show===!1&&this.props.show===!0&&this.onModalHidden()}},{key:"loadImage",value:function(e){var t=this,a=$(window).height()-100;this.setState({imgHeight:a});var s=this.props.filenames[e],n=o.splitFileLocation(s),r=o.getFileType(n.ext);if("image"===r){var i=new Image;i.load(this.getPreviewImagePath(s),function(){var a=t.state.progress;a[e]=i.completedPercentage,t.setState({progress:a})}),i.onload=function(){var a=t.state.loaded;a[e]=!0,t.setState({loaded:a})};var l=this.state.images;l[e]=i,this.setState({images:l})}else{var c=this.state.loaded;c[e]=!0,this.setState({loaded:c})}}},{key:"playGif",value:function(e,t,a){var s=this,n=this.state.isLoading,r=this.state.isPlaying;n[t]=a,this.setState({isLoading:n});var i=new Image;i.load(a),i.onload=function(){delete n[t],r[t]=a,s.setState({isPlaying:r,isLoading:n})},i.onError=function(){delete n[t],s.setState({isLoading:n})},e.stopPropagation(),e.preventDefault()}},{key:"stopGif",value:function(e,t){var a=this.state.isPlaying;delete a[t],this.setState({isPlaying:a}),e.stopPropagation(),e.preventDefault()}},{key:"componentDidMount",value:function(){$(window).on("keyup",this.handleKeyPress),this.canSetState=!0}},{key:"componentWillUnmount",value:function(){this.canSetState=!1,$(window).off("keyup",this.handleKeyPress)}},{key:"getPublicLink",value:function(){var e={};e.channel_id=this.props.channelId,e.user_id=this.props.userId,e.filename=this.props.filenames[this.state.imgId],l.getPublicLink(e,function(e){o.isMobile()?window.location.href=e.public_link:window.open(e.public_link)},function(){})}},{key:"getPreviewImagePath",value:function(e){var t=o.splitFileLocation(e),a=o.getFileType(t.ext);return"image"===a?e in this.state.isPlaying?this.state.isPlaying[e]:(-1!==t.path.indexOf("/api/v1/files/get")&&(t.path=t.path.split("/api/v1/files/get")[1]),t.path=o.getWindowLocationOrigin()+"/api/v1/files/get"+t.path,t.path+"_preview.jpg?"+o.getSessionIndex()):o.getPreviewImagePathForFileType(a)}},{key:"onMouseEnterImage",value:function(){this.setState({showFooter:!0})}},{key:"onMouseLeaveImage",value:function(){this.setState({showFooter:!1})}},{key:"render",value:function(){var e=this;if(this.props.filenames.length<1||this.props.filenames.length-1<this.state.imgId)return React.createElement("div",null);var t,a=this.props.filenames[this.state.imgId],s=o.getFileUrl(a),n=decodeURIComponent(o.getFileName(a)),r="";if(this.state.loaded[this.state.imgId]){var i=o.splitFileLocation(a),h=o.getFileType(i.ext);if("image"===h){a in this.state.fileMimes||l.getFileInfo(a,function(t){if(e.canSetState){var s=e.state.fileMimes;s[a]=t.mime,e.setState(s)}},function(){});var m="";"image/gif"!==this.state.fileMimes[a]||a in this.state.isLoading||(m=a in this.state.isPlaying?React.createElement("div",{className:"file-playback-controls stop",onClick:function(t){return e.stopGif(t,a)}},"■"):React.createElement("div",{className:"file-playback-controls play",onClick:function(t){return e.playGif(t,a,s)}},"►"));var p="";this.state.isLoading[a]===s&&(p=React.createElement("img",{className:"spinner file__loading",src:"/static/images/load.gif"}),m=""),t=React.createElement("a",{href:s,target:"_blank"},p,m,React.createElement("img",{style:{maxHeight:this.state.imgHeight},ref:"image",src:this.getPreviewImagePath(a)}))}else if("video"===h||"audio"===h){var f=c.WEB_VIDEO_WIDTH,g=c.WEB_VIDEO_HEIGHT;o.isMobile()&&(f=c.MOBILE_VIDEO_WIDTH,g=c.MOBILE_VIDEO_HEIGHT),t=React.createElement("video",{style:{maxHeight:this.state.imgHeight},ref:"video","data-setup":"{}",controls:"controls",width:f,height:g},React.createElement("source",{src:o.getWindowLocationOrigin()+"/api/v1/files/get"+a+"?"+o.getSessionIndex()}))}else{var b="File type "+i.ext.toUpperCase();this.state.fileSizes[a]&&this.state.fileSizes[a]>=0&&(b+=", Size "+o.fileSizeToString(this.state.fileSizes[a])),t=React.createElement("div",{className:"file-details__container"},React.createElement("a",{className:"file-details__preview",href:s,target:"_blank"},React.createElement("span",{className:"file-details__preview-helper"}),React.createElement("img",{ref:"image",src:this.getPreviewImagePath(a)})),React.createElement("div",{className:"file-details"},React.createElement("div",{className:"file-details__name"},n),React.createElement("div",{className:"file-details__info"},b))),r="white-bg",a in this.state.fileSizes||l.getFileInfo(a,function(e){if(this.canSetState){var t=this.state.fileSizes;t[a]=parseInt(e.size,10),this.setState(t)}}.bind(this),function(){})}}else{var v=Math.floor(this.state.progress[this.state.imgId]);t=v?React.createElement("div",null,React.createElement("img",{className:"loader-image",src:"/static/images/load.gif"}),React.createElement("span",{className:"loader-percent"},"Previewing "+v+"%")):React.createElement("div",null,React.createElement("img",{className:"loader-image",src:"/static/images/load.gif"})),r="black-bg"}var E="",_="";this.props.filenames.length>1&&(E=React.createElement("a",{ref:"previewArrowLeft",className:"modal-prev-bar",href:"#",onClick:this.handlePrev},React.createElement("i",{className:"image-control image-prev"})),_=React.createElement("a",{ref:"previewArrowRight",className:"modal-next-bar",href:"#",onClick:this.handleNext},React.createElement("i",{className:"image-control image-next"})));var y="modal-close";return this.state.showFooter&&(y+=" modal-close--show"),React.createElement(d,{show:this.props.show,onHide:this.props.onModalDismissed,className:"image_modal",dialogClassName:"modal-image"},React.createElement(d.Body,{modalClassName:"image-body",onClick:this.props.onModalDismissed},React.createElement("div",{className:"image-wrapper "+r,onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:function(e){return e.stopPropagation()}},React.createElement("div",{className:y,onClick:this.props.onModalDismissed}),t,React.createElement(u,{show:this.state.showFooter,fileId:this.state.imgId,totalFiles:this.props.filenames.length,filename:n,fileURL:s,getPublicLink:this.getPublicLink})),E,_))}}]),t}(React.Component);a.default=m,m.defaultProps={show:!1,filenames:[],channelId:"",userId:"",startId:0},m.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired,filenames:React.PropTypes.array,modalId:React.PropTypes.string,channelId:React.PropTypes.string,userId:React.PropTypes.string,startId:React.PropTypes.number},t.exports=a.default},{"../utils/client.jsx":287,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./view_image_popover_bar.jsx":146,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],146:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=function(e){function t(e){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),i(t,[{key:"render",value:function(){var e="";"true"===s.window.mm_config.EnablePublicLink&&(e=React.createElement("div",null,React.createElement("a",{href:"#",className:"public-link text","data-title":"Public Image",onClick:this.props.getPublicLink},"Get Public Link"),React.createElement("span",{className:"text"}," | ")));var t="modal-button-bar";return this.props.show&&(t+=" footer--show"),React.createElement("div",{ref:"imageFooter",className:t},React.createElement("span",{className:"pull-left text"},"File "+(this.props.fileId+1)+" of "+this.props.totalFiles),React.createElement("div",{className:"image-links"},e,React.createElement("a",{href:this.props.fileURL,download:this.props.filename,className:"text"},"Download")))}}]),t}(React.Component);a.default=o,o.defaultProps={show:!1,imgId:0,totalFiles:0,filename:"",fileURL:""},o.propTypes={show:React.PropTypes.bool.isRequired,fileId:React.PropTypes.number.isRequired,totalFiles:React.PropTypes.number.isRequired,filename:React.PropTypes.string.isRequired,fileURL:React.PropTypes.string.isRequired,getPublicLink:React.PropTypes.func.isRequired},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162}],147:[function(e,t,a){"use strict";var s=e("flux").Dispatcher,n=e("object-assign"),r=e("../utils/constants.jsx"),i=r.PayloadSources,l=n(new s,{handleServerAction:function(e){var t={source:i.SERVER_ACTION,action:e};this.dispatch(t)},handleViewAction:function(e){var t={source:i.VIEW_ACTION,action:e};this.dispatch(t)}});t.exports=l},{"../utils/constants.jsx":288,flux:"flux","object-assign":"object-assign"}],148:[function(e,t,a){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":166}],149:[function(e,t,a){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":167}],150:[function(e,t,a){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":168}],151:[function(e,t,a){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":169}],152:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":170}],153:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":171}],154:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":172}],155:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":173}],156:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":174}],157:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":175}],158:[function(e,t,a){t.exports={default:e("core-js/library/fn/reflect/delete-property"),__esModule:!0}},{"core-js/library/fn/reflect/delete-property":176}],159:[function(e,t,a){"use strict";a.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a.__esModule=!0},{}],160:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/define-property").default;a.default=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),s(e,n.key,n)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),a.__esModule=!0},{"babel-runtime/core-js/object/define-property":154}],161:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/get-own-property-descriptor").default;a.default=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;o=u=c=void 0,n=!1,null===r&&(r=Function.prototype);var o=s(r,i);if(void 0!==o){if("value"in o)return o.value;var c=o.get;return void 0===c?void 0:c.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;e=u,t=i,a=l,n=!0}},a.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":155}],162:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/create").default,n=e("babel-runtime/core-js/object/set-prototype-of").default;a.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=s(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n?n(e,t):e.__proto__=t)},a.__esModule=!0},{"babel-runtime/core-js/object/create":153,"babel-runtime/core-js/object/set-prototype-of":157}],163:[function(e,t,a){"use strict";a.default=function(e){return e&&e.__esModule?e:{default:e}},a.__esModule=!0},{}],164:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/get-iterator").default,n=e("babel-runtime/core-js/is-iterable").default;a.default=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=s(e);!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(n(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a.__esModule=!0},{"babel-runtime/core-js/get-iterator":149,"babel-runtime/core-js/is-iterable":150}],165:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/array/from").default;a.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return s(e)},a.__esModule=!0},{"babel-runtime/core-js/array/from":148}],166:[function(e,t,a){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/$.core").Array.from},{"../../modules/$.core":185,"../../modules/es6.array.from":226,"../../modules/es6.string.iterator":235}],167:[function(e,t,a){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":224,"../modules/es6.string.iterator":235,"../modules/web.dom.iterable":237}],168:[function(e,t,a){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":225,"../modules/es6.string.iterator":235,"../modules/web.dom.iterable":237}],169:[function(e,t,a){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/$.core").Map},{"../modules/$.core":185,"../modules/es6.map":228,"../modules/es6.object.to-string":233,"../modules/es6.string.iterator":235,"../modules/es7.map.to-json":236,"../modules/web.dom.iterable":237}],170:[function(e,t,a){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":185,"../../modules/es6.object.assign":229}],171:[function(e,t,a){var s=e("../../modules/$");t.exports=function(e,t){return s.create(e,t)}},{"../../modules/$":204}],172:[function(e,t,a){var s=e("../../modules/$");t.exports=function(e,t,a){return s.setDesc(e,t,a)}},{"../../modules/$":204}],173:[function(e,t,a){var s=e("../../modules/$");e("../../modules/es6.object.get-own-property-descriptor"),t.exports=function(e,t){return s.getDesc(e,t)}},{"../../modules/$":204,"../../modules/es6.object.get-own-property-descriptor":230}],174:[function(e,t,a){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":185,"../../modules/es6.object.keys":231}],175:[function(e,t,a){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":185,"../../modules/es6.object.set-prototype-of":232}],176:[function(e,t,a){e("../../modules/es6.reflect.delete-property"),t.exports=e("../../modules/$.core").Reflect.deleteProperty},{"../../modules/$.core":185,"../../modules/es6.reflect.delete-property":234}],177:[function(e,t,a){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],178:[function(e,t,a){t.exports=function(){}},{}],179:[function(e,t,a){var s=e("./$.is-object");t.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":197}],180:[function(e,t,a){var s=e("./$.cof"),n=e("./$.wks")("toStringTag"),r="Arguments"==s(function(){return arguments}());t.exports=function(e){var t,a,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=(t=Object(e))[n])?a:r?s(t):"Object"==(i=s(t))&&"function"==typeof t.callee?"Arguments":i}},{"./$.cof":181,"./$.wks":222}],181:[function(e,t,a){var s={}.toString;t.exports=function(e){return s.call(e).slice(8,-1)}},{}],182:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.hide"),r=e("./$.redefine-all"),i=e("./$.ctx"),l=e("./$.strict-new"),o=e("./$.defined"),c=e("./$.for-of"),u=e("./$.iter-define"),d=e("./$.iter-step"),h=e("./$.uid")("id"),m=e("./$.has"),p=e("./$.is-object"),f=e("./$.set-species"),g=e("./$.descriptors"),b=Object.isExtensible||p,v=g?"_s":"size",E=0,_=function(e,t){if(!p(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!m(e,h)){if(!b(e))return"F";if(!t)return"E";n(e,h,++E)}return"O"+e[h]},y=function(e,t){var a,s=_(t);if("F"!==s)return e._i[s];for(a=e._f;a;a=a.n)if(a.k==t)return a};t.exports={getConstructor:function(e,t,a,n){var u=e(function(e,r){l(e,u,t),e._i=s.create(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&c(r,a,e[n],e)});return r(u.prototype,{clear:function(){for(var e=this,t=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete t[a.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,a=y(t,e);if(a){var s=a.n,n=a.p;delete t._i[a.i],a.r=!0,n&&(n.n=s),s&&(s.p=n),t._f==a&&(t._f=s),t._l==a&&(t._l=n),t[v]--}return!!a},forEach:function(e){for(var t,a=i(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(a(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),g&&s.setDesc(u.prototype,"size",{get:function(){return o(this[v])}}),u},def:function(e,t,a){var s,n,r=y(e,t);return r?r.v=a:(e._l=r={i:n=_(t,!0),k:t,v:a,p:s=e._l,n:void 0,r:!1},e._f||(e._f=r),s&&(s.n=r),e[v]++,"F"!==n&&(e._i[n]=r)),e},getEntry:y,setStrong:function(e,t,a){u(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?"keys"==t?d(0,a.k):"values"==t?d(0,a.v):d(0,[a.k,a.v]):(e._t=void 0,d(1))},a?"entries":"values",!a,!0),f(t)}}},{"./$":204,"./$.ctx":186,"./$.defined":187,"./$.descriptors":188,"./$.for-of":191,"./$.has":193,"./$.hide":194,"./$.is-object":197,"./$.iter-define":200,"./$.iter-step":202,"./$.redefine-all":209,"./$.set-species":212,"./$.strict-new":215,"./$.uid":221}],183:[function(e,t,a){var s=e("./$.for-of"),n=e("./$.classof");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");var t=[];return s(this,!1,t.push,t),t}}},{"./$.classof":180,"./$.for-of":191}],184:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.global"),r=e("./$.export"),i=e("./$.fails"),l=e("./$.hide"),o=e("./$.redefine-all"),c=e("./$.for-of"),u=e("./$.strict-new"),d=e("./$.is-object"),h=e("./$.set-to-string-tag"),m=e("./$.descriptors");t.exports=function(e,t,a,p,f,g){var b=n[e],v=b,E=f?"set":"add",_=v&&v.prototype,y={};return m&&"function"==typeof v&&(g||_.forEach&&!i(function(){(new v).entries().next()}))?(v=t(function(t,a){u(t,v,e),t._c=new b,void 0!=a&&c(a,f,t[E],t)}),s.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(e){var t="add"==e||"set"==e;e in _&&(!g||"clear"!=e)&&l(v.prototype,e,function(a,s){if(!t&&g&&!d(a))return"get"==e?void 0:!1;var n=this._c[e](0===a?0:a,s);return t?this:n})}),"size"in _&&s.setDesc(v.prototype,"size",{get:function(){return this._c.size}})):(v=p.getConstructor(t,e,f,E),o(v.prototype,a)),h(v,e),y[e]=v,r(r.G+r.W+r.F,y),g||p.setStrong(v,e,f),v}},{"./$":204,"./$.descriptors":188,"./$.export":189,"./$.fails":190,"./$.for-of":191,"./$.global":192,"./$.hide":194,"./$.is-object":197,"./$.redefine-all":209,"./$.set-to-string-tag":213,"./$.strict-new":215}],185:[function(e,t,a){var s=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=s)},{}],186:[function(e,t,a){var s=e("./$.a-function");t.exports=function(e,t,a){if(s(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,s){return e.call(t,a,s)};case 3:return function(a,s,n){return e.call(t,a,s,n)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":177}],187:[function(e,t,a){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],188:[function(e,t,a){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":190}],189:[function(e,t,a){var s=e("./$.global"),n=e("./$.core"),r=e("./$.ctx"),i="prototype",l=function(e,t,a){var o,c,u,d=e&l.F,h=e&l.G,m=e&l.S,p=e&l.P,f=e&l.B,g=e&l.W,b=h?n:n[t]||(n[t]={}),v=h?s:m?s[t]:(s[t]||{})[i];h&&(a=t);for(o in a)c=!d&&v&&o in v,c&&o in b||(u=c?v[o]:a[o],b[o]=h&&"function"!=typeof v[o]?a[o]:f&&c?r(u,s):g&&v[o]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[i]=e[i],t}(u):p&&"function"==typeof u?r(Function.call,u):u,p&&((b[i]||(b[i]={}))[o]=u))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,t.exports=l},{"./$.core":185,"./$.ctx":186,"./$.global":192}],190:[function(e,t,a){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],191:[function(e,t,a){var s=e("./$.ctx"),n=e("./$.iter-call"),r=e("./$.is-array-iter"),i=e("./$.an-object"),l=e("./$.to-length"),o=e("./core.get-iterator-method");t.exports=function(e,t,a,c){var u,d,h,m=o(e),p=s(a,c,t?2:1),f=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(r(m))for(u=l(e.length);u>f;f++)t?p(i(d=e[f])[0],d[1]):p(e[f]);else for(h=m.call(e);!(d=h.next()).done;)n(h,p,d.value,t)}},{"./$.an-object":179,"./$.ctx":186,"./$.is-array-iter":196,"./$.iter-call":198,"./$.to-length":219,"./core.get-iterator-method":223}],192:[function(e,t,a){var s=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},{}],193:[function(e,t,a){var s={}.hasOwnProperty;t.exports=function(e,t){return s.call(e,t)}},{}],194:[function(e,t,a){var s=e("./$"),n=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,a){return s.setDesc(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},{"./$":204,"./$.descriptors":188,"./$.property-desc":208}],195:[function(e,t,a){var s=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)}},{"./$.cof":181}],196:[function(e,t,a){var s=e("./$.iterators"),n=e("./$.wks")("iterator"),r=Array.prototype;t.exports=function(e){return void 0!==e&&(s.Array===e||r[n]===e)}},{"./$.iterators":203,"./$.wks":222}],197:[function(e,t,a){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],198:[function(e,t,a){var s=e("./$.an-object");t.exports=function(e,t,a,n){try{return n?t(s(a)[0],a[1]):t(a)}catch(t){var r=e.return;throw void 0!==r&&s(r.call(e)),t}}},{"./$.an-object":179}],199:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.property-desc"),r=e("./$.set-to-string-tag"),i={};e("./$.hide")(i,e("./$.wks")("iterator"),function(){return this}),t.exports=function(e,t,a){e.prototype=s.create(i,{next:n(1,a)}),r(e,t+" Iterator")}},{"./$":204,"./$.hide":194,"./$.property-desc":208,"./$.set-to-string-tag":213,"./$.wks":222}],200:[function(e,t,a){"use strict";var s=e("./$.library"),n=e("./$.export"),r=e("./$.redefine"),i=e("./$.hide"),l=e("./$.has"),o=e("./$.iterators"),c=e("./$.iter-create"),u=e("./$.set-to-string-tag"),d=e("./$").getProto,h=e("./$.wks")("iterator"),m=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",g="values",b=function(){return this};t.exports=function(e,t,a,v,E,_,y){c(a,t,v);var R,C,N=function(e){if(!m&&e in x)return x[e];switch(e){case f:return function(){return new a(this,e)};case g:return function(){return new a(this,e)}}return function(){return new a(this,e)}},k=t+" Iterator",S=E==g,w=!1,x=e.prototype,T=x[h]||x[p]||E&&x[E],P=T||N(E);if(T){var j=d(P.call(new e));u(j,k,!0),!s&&l(x,p)&&i(j,h,b),S&&T.name!==g&&(w=!0,P=function(){return T.call(this)})}if(s&&!y||!m&&!w&&x[h]||i(x,h,P),o[t]=P,o[k]=b,E)if(R={values:S?P:N(g),keys:_?P:N(f),entries:S?N("entries"):P},y)for(C in R)C in x||r(x,C,R[C]);else n(n.P+n.F*(m||w),t,R);return R}},{"./$":204,"./$.export":189,"./$.has":193,"./$.hide":194,"./$.iter-create":199,"./$.iterators":203,"./$.library":205,"./$.redefine":210,"./$.set-to-string-tag":213,"./$.wks":222}],201:[function(e,t,a){var s=e("./$.wks")("iterator"),n=!1;try{var r=[7][s]();r.return=function(){n=!0},Array.from(r,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!n)return!1;var a=!1;try{var r=[7],i=r[s]();i.next=function(){a=!0},r[s]=function(){return i},e(r)}catch(e){}return a}},{"./$.wks":222}],202:[function(e,t,a){t.exports=function(e,t){return{value:t,done:!!e}}},{}],203:[function(e,t,a){t.exports={}},{}],204:[function(e,t,a){var s=Object;t.exports={create:s.create,getProto:s.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:s.getOwnPropertyDescriptor,setDesc:s.defineProperty,setDescs:s.defineProperties,getKeys:s.keys,getNames:s.getOwnPropertyNames,getSymbols:s.getOwnPropertySymbols,each:[].forEach}},{}],205:[function(e,t,a){t.exports=!0},{}],206:[function(e,t,a){var s=e("./$"),n=e("./$.to-object"),r=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},a={},s=Symbol(),n="abcdefghijklmnopqrst";
return t[s]=7,n.split("").forEach(function(e){a[e]=e}),7!=e({},t)[s]||Object.keys(e({},a)).join("")!=n})?function(e,t){for(var a=n(e),i=arguments,l=i.length,o=1,c=s.getKeys,u=s.getSymbols,d=s.isEnum;l>o;)for(var h,m=r(i[o++]),p=u?c(m).concat(u(m)):c(m),f=p.length,g=0;f>g;)d.call(m,h=p[g++])&&(a[h]=m[h]);return a}:Object.assign},{"./$":204,"./$.fails":190,"./$.iobject":195,"./$.to-object":220}],207:[function(e,t,a){var s=e("./$.export"),n=e("./$.core"),r=e("./$.fails");t.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],i={};i[e]=t(a),s(s.S+s.F*r(function(){a(1)}),"Object",i)}},{"./$.core":185,"./$.export":189,"./$.fails":190}],208:[function(e,t,a){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],209:[function(e,t,a){var s=e("./$.redefine");t.exports=function(e,t){for(var a in t)s(e,a,t[a]);return e}},{"./$.redefine":210}],210:[function(e,t,a){t.exports=e("./$.hide")},{"./$.hide":194}],211:[function(e,t,a){var s=e("./$").getDesc,n=e("./$.is-object"),r=e("./$.an-object"),i=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,a,n){try{n=e("./$.ctx")(Function.call,s(Object.prototype,"__proto__").set,2),n(t,[]),a=!(t instanceof Array)}catch(e){a=!0}return function(e,t){return i(e,t),a?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./$":204,"./$.an-object":179,"./$.ctx":186,"./$.is-object":197}],212:[function(e,t,a){"use strict";var s=e("./$.core"),n=e("./$"),r=e("./$.descriptors"),i=e("./$.wks")("species");t.exports=function(e){var t=s[e];r&&t&&!t[i]&&n.setDesc(t,i,{configurable:!0,get:function(){return this}})}},{"./$":204,"./$.core":185,"./$.descriptors":188,"./$.wks":222}],213:[function(e,t,a){var s=e("./$").setDesc,n=e("./$.has"),r=e("./$.wks")("toStringTag");t.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,r)&&s(e,r,{configurable:!0,value:t})}},{"./$":204,"./$.has":193,"./$.wks":222}],214:[function(e,t,a){var s=e("./$.global"),n="__core-js_shared__",r=s[n]||(s[n]={});t.exports=function(e){return r[e]||(r[e]={})}},{"./$.global":192}],215:[function(e,t,a){t.exports=function(e,t,a){if(!(e instanceof t))throw TypeError(a+": use the 'new' operator!");return e}},{}],216:[function(e,t,a){var s=e("./$.to-integer"),n=e("./$.defined");t.exports=function(e){return function(t,a){var r,i,l=String(n(t)),o=s(a),c=l.length;return 0>o||o>=c?e?"":void 0:(r=l.charCodeAt(o),55296>r||r>56319||o+1===c||(i=l.charCodeAt(o+1))<56320||i>57343?e?l.charAt(o):r:e?l.slice(o,o+2):(r-55296<<10)+(i-56320)+65536)}}},{"./$.defined":187,"./$.to-integer":217}],217:[function(e,t,a){var s=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?n:s)(e)}},{}],218:[function(e,t,a){var s=e("./$.iobject"),n=e("./$.defined");t.exports=function(e){return s(n(e))}},{"./$.defined":187,"./$.iobject":195}],219:[function(e,t,a){var s=e("./$.to-integer"),n=Math.min;t.exports=function(e){return e>0?n(s(e),9007199254740991):0}},{"./$.to-integer":217}],220:[function(e,t,a){var s=e("./$.defined");t.exports=function(e){return Object(s(e))}},{"./$.defined":187}],221:[function(e,t,a){var s=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+n).toString(36))}},{}],222:[function(e,t,a){var s=e("./$.shared")("wks"),n=e("./$.uid"),r=e("./$.global").Symbol;t.exports=function(e){return s[e]||(s[e]=r&&r[e]||(r||n)("Symbol."+e))}},{"./$.global":192,"./$.shared":214,"./$.uid":221}],223:[function(e,t,a){var s=e("./$.classof"),n=e("./$.wks")("iterator"),r=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[n]||e["@@iterator"]||r[s(e)]:void 0}},{"./$.classof":180,"./$.core":185,"./$.iterators":203,"./$.wks":222}],224:[function(e,t,a){var s=e("./$.an-object"),n=e("./core.get-iterator-method");t.exports=e("./$.core").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))}},{"./$.an-object":179,"./$.core":185,"./core.get-iterator-method":223}],225:[function(e,t,a){var s=e("./$.classof"),n=e("./$.wks")("iterator"),r=e("./$.iterators");t.exports=e("./$.core").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(s(t))}},{"./$.classof":180,"./$.core":185,"./$.iterators":203,"./$.wks":222}],226:[function(e,t,a){"use strict";var s=e("./$.ctx"),n=e("./$.export"),r=e("./$.to-object"),i=e("./$.iter-call"),l=e("./$.is-array-iter"),o=e("./$.to-length"),c=e("./core.get-iterator-method");n(n.S+n.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,n,u,d=r(e),h="function"==typeof this?this:Array,m=arguments,p=m.length,f=p>1?m[1]:void 0,g=void 0!==f,b=0,v=c(d);if(g&&(f=s(f,p>2?m[2]:void 0,2)),void 0==v||h==Array&&l(v))for(t=o(d.length),a=new h(t);t>b;b++)a[b]=g?f(d[b],b):d[b];else for(u=v.call(d),a=new h;!(n=u.next()).done;b++)a[b]=g?i(u,f,[n.value,b],!0):n.value;return a.length=b,a}})},{"./$.ctx":186,"./$.export":189,"./$.is-array-iter":196,"./$.iter-call":198,"./$.iter-detect":201,"./$.to-length":219,"./$.to-object":220,"./core.get-iterator-method":223}],227:[function(e,t,a){"use strict";var s=e("./$.add-to-unscopables"),n=e("./$.iter-step"),r=e("./$.iterators"),i=e("./$.to-iobject");t.exports=e("./$.iter-define")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,a):"values"==t?n(0,e[a]):n(0,[a,e[a]])},"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},{"./$.add-to-unscopables":178,"./$.iter-define":200,"./$.iter-step":202,"./$.iterators":203,"./$.to-iobject":218}],228:[function(e,t,a){"use strict";var s=e("./$.collection-strong");e("./$.collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=s.getEntry(this,e);return t&&t.v},set:function(e,t){return s.def(this,0===e?0:e,t)}},s,!0)},{"./$.collection":184,"./$.collection-strong":182}],229:[function(e,t,a){var s=e("./$.export");s(s.S+s.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":189,"./$.object-assign":206}],230:[function(e,t,a){var s=e("./$.to-iobject");e("./$.object-sap")("getOwnPropertyDescriptor",function(e){return function(t,a){return e(s(t),a)}})},{"./$.object-sap":207,"./$.to-iobject":218}],231:[function(e,t,a){var s=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(s(t))}})},{"./$.object-sap":207,"./$.to-object":220}],232:[function(e,t,a){var s=e("./$.export");s(s.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.export":189,"./$.set-proto":211}],233:[function(e,t,a){},{}],234:[function(e,t,a){var s=e("./$.export"),n=e("./$").getDesc,r=e("./$.an-object");s(s.S,"Reflect",{deleteProperty:function(e,t){var a=n(r(e),t);return a&&!a.configurable?!1:delete e[t]}})},{"./$":204,"./$.an-object":179,"./$.export":189}],235:[function(e,t,a){"use strict";var s=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=s(t,a),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":200,"./$.string-at":216}],236:[function(e,t,a){var s=e("./$.export");s(s.P,"Map",{toJSON:e("./$.collection-to-json")("Map")})},{"./$.collection-to-json":183,"./$.export":189}],237:[function(e,t,a){e("./es6.array.iterator");var s=e("./$.iterators");s.NodeList=s.HTMLCollection=s.Array},{"./$.iterators":203,"./es6.array.iterator":227}],238:[function(e,t,a){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,a,s,r,o,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a=this._events[e],l(a))return!1;if(n(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,r=new Array(s-1),o=1;s>o;o++)r[o-1]=arguments[o];a.apply(this,r)}else if(i(a)){for(s=arguments.length,r=new Array(s-1),o=1;s>o;o++)r[o-1]=arguments[o];for(c=a.slice(),s=c.length,o=0;s>o;o++)c[o].apply(this,r)}return!0},s.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var a;a=l(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){function a(){this.removeListener(e,a),s||(s=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var s=!1;return a.listener=t,this.on(e,a),this},s.prototype.removeListener=function(e,t){var a,s,r,l;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=this._events[e],r=a.length,s=-1,a===t||n(a.listener)&&a.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(a)){for(l=r;l-->0;)if(a[l]===t||a[l].listener&&a[l].listener===t){s=l;break}if(0>s)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[e],n(a))this.removeListener(e,a);else for(;a.length;)this.removeListener(e,a[a.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.listenerCount=function(e,t){var a;return a=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],239:[function(e,t,a){!function(e){"undefined"!=typeof a?e(a):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("hljs",[],function(){return window.hljs}))}(function(e){function t(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function a(e){return e.nodeName.toLowerCase()}function s(e,t){var a=e&&e.exec(t);return a&&0==a.index}function n(e){return/^(no-?highlight|plain|text)$/i.test(e)}function r(e){var t,a,s,r=e.className+" ";if(r+=e.parentNode?e.parentNode.className:"",a=/\blang(?:uage)?-([\w-]+)\b/i.exec(r))return _(a[1])?a[1]:"no-highlight";for(r=r.split(/\s+/),t=0,s=r.length;s>t;t++)if(_(r[t])||n(r[t]))return r[t]}function i(e,t){var a,s={};for(a in e)s[a]=e[a];if(t)for(a in t)s[a]=t[a];return s}function l(e){var t=[];return function e(s,n){for(var r=s.firstChild;r;r=r.nextSibling)3==r.nodeType?n+=r.nodeValue.length:1==r.nodeType&&(t.push({event:"start",offset:n,node:r}),n=e(r,n),a(r).match(/br|hr|img|input/)||t.push({event:"stop",offset:n,node:r}));return n}(e,0),t}function o(e,s,n){function r(){return e.length&&s.length?e[0].offset!=s[0].offset?e[0].offset<s[0].offset?e:s:"start"==s[0].event?e:s:e.length?e:s}function i(e){function s(e){return" "+e.nodeName+'="'+t(e.value)+'"'}u+="<"+a(e)+Array.prototype.map.call(e.attributes,s).join("")+">"}function l(e){u+="</"+a(e)+">"}function o(e){("start"==e.event?i:l)(e.node)}for(var c=0,u="",d=[];e.length||s.length;){var h=r();if(u+=t(n.substr(c,h[0].offset-c)),c=h[0].offset,h==e){d.reverse().forEach(l);do o(h.splice(0,1)[0]),h=r();while(h==e&&h.length&&h[0].offset==c);d.reverse().forEach(i)}else"start"==h[0].event?d.push(h[0].node):d.pop(),o(h.splice(0,1)[0])}return u+t(n.substr(c))}function c(e){function t(e){return e&&e.source||e}function a(a,s){return new RegExp(t(a),"m"+(e.case_insensitive?"i":"")+(s?"g":""))}function s(n,r){if(!n.compiled){if(n.compiled=!0,n.keywords=n.keywords||n.beginKeywords,n.keywords){var l={},o=function(t,a){e.case_insensitive&&(a=a.toLowerCase()),a.split(" ").forEach(function(e){var a=e.split("|");l[a[0]]=[t,a[1]?Number(a[1]):1]})};"string"==typeof n.keywords?o("keyword",n.keywords):Object.keys(n.keywords).forEach(function(e){o(e,n.keywords[e])}),n.keywords=l}n.lexemesRe=a(n.lexemes||/\b\w+\b/,!0),r&&(n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")\\b"),n.begin||(n.begin=/\B|\b/),n.beginRe=a(n.begin),n.end||n.endsWithParent||(n.end=/\B|\b/),n.end&&(n.endRe=a(n.end)),n.terminator_end=t(n.end)||"",n.endsWithParent&&r.terminator_end&&(n.terminator_end+=(n.end?"|":"")+r.terminator_end)),n.illegal&&(n.illegalRe=a(n.illegal)),void 0===n.relevance&&(n.relevance=1),n.contains||(n.contains=[]);var c=[];n.contains.forEach(function(e){e.variants?e.variants.forEach(function(t){c.push(i(e,t))}):c.push("self"==e?n:e)}),n.contains=c,n.contains.forEach(function(e){s(e,n)}),n.starts&&s(n.starts,r);var u=n.contains.map(function(e){return e.beginKeywords?"\\.?("+e.begin+")\\.?":e.begin}).concat([n.terminator_end,n.illegal]).map(t).filter(Boolean);n.terminators=u.length?a(u.join("|"),!0):{exec:function(){return null}}}}s(e)}function u(e,a,n,r){function i(e,t){for(var a=0;a<t.contains.length;a++)if(s(t.contains[a].beginRe,e))return t.contains[a]}function l(e,t){if(s(e.endRe,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.endsWithParent?l(e.parent,t):void 0}function o(e,t){return!n&&s(t.illegalRe,e)}function h(e,t){var a=E.case_insensitive?t[0].toLowerCase():t[0];return e.keywords.hasOwnProperty(a)&&e.keywords[a]}function m(e,t,a,s){var n=s?"":y.classPrefix,r='<span class="'+n,i=a?"":"</span>";return r+=e+'">',r+t+i}function p(){if(!N.keywords)return t(w);var e="",a=0;N.lexemesRe.lastIndex=0;for(var s=N.lexemesRe.exec(w);s;){e+=t(w.substr(a,s.index-a));var n=h(N,s);n?(x+=n[1],e+=m(n[0],t(s[0]))):e+=t(s[0]),a=N.lexemesRe.lastIndex,s=N.lexemesRe.exec(w)}return e+t(w.substr(a))}function f(){var e="string"==typeof N.subLanguage;if(e&&!R[N.subLanguage])return t(w);var a=e?u(N.subLanguage,w,!0,k[N.subLanguage]):d(w,N.subLanguage.length?N.subLanguage:void 0);return N.relevance>0&&(x+=a.relevance),e&&(k[N.subLanguage]=a.top),m(a.language,a.value,!1,!0)}function g(){return void 0!==N.subLanguage?f():p()}function b(e,a){var s=e.className?m(e.className,"",!0):"";e.returnBegin?(S+=s,w=""):e.excludeBegin?(S+=t(a)+s,w=""):(S+=s,w=a),N=Object.create(e,{parent:{value:N}})}function v(e,a){if(w+=e,void 0===a)return S+=g(),0;var s=i(a,N);if(s)return S+=g(),b(s,a),s.returnBegin?0:a.length;var n=l(N,a);if(n){var r=N;r.returnEnd||r.excludeEnd||(w+=a),S+=g();do N.className&&(S+="</span>"),x+=N.relevance,N=N.parent;while(N!=n.parent);return r.excludeEnd&&(S+=t(a)),w="",n.starts&&b(n.starts,""),r.returnEnd?0:a.length}if(o(a,N))throw new Error('Illegal lexeme "'+a+'" for mode "'+(N.className||"<unnamed>")+'"');return w+=a,a.length||1}var E=_(e);if(!E)throw new Error('Unknown language: "'+e+'"');c(E);var C,N=r||E,k={},S="";for(C=N;C!=E;C=C.parent)C.className&&(S=m(C.className,"",!0)+S);var w="",x=0;try{for(var T,P,j=0;;){if(N.terminators.lastIndex=j,T=N.terminators.exec(a),!T)break;P=v(a.substr(j,T.index-j),T[0]),j=T.index+P}for(v(a.substr(j)),C=N;C.parent;C=C.parent)C.className&&(S+="</span>");return{relevance:x,value:S,language:e,top:N}}catch(e){if(-1!=e.message.indexOf("Illegal"))return{relevance:0,value:t(a)};throw e}}function d(e,a){a=a||y.languages||Object.keys(R);var s={relevance:0,value:t(e)},n=s;return a.forEach(function(t){if(_(t)){var a=u(t,e,!1);a.language=t,a.relevance>n.relevance&&(n=a),a.relevance>s.relevance&&(n=s,s=a)}}),n.language&&(s.second_best=n),s}function h(e){return y.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,y.tabReplace)})),y.useBR&&(e=e.replace(/\n/g,"<br>")),e}function m(e,t,a){var s=t?C[t]:a,n=[e.trim()];return e.match(/\bhljs\b/)||n.push("hljs"),-1===e.indexOf(s)&&n.push(s),n.join(" ").trim()}function p(e){var t=r(e);if(!n(t)){var a;y.useBR?(a=document.createElementNS("http://www.w3.org/1999/xhtml","div"),a.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):a=e;var s=a.textContent,i=t?u(t,s,!0):d(s),c=l(a);if(c.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=i.value,i.value=o(c,l(p),s)}i.value=h(i.value),e.innerHTML=i.value,e.className=m(e.className,t,i.language),e.result={language:i.language,re:i.relevance},i.second_best&&(e.second_best={language:i.second_best.language,re:i.second_best.relevance})}}function f(e){y=i(y,e)}function g(){if(!g.called){g.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function b(){addEventListener("DOMContentLoaded",g,!1),addEventListener("load",g,!1)}function v(t,a){var s=R[t]=a(e);s.aliases&&s.aliases.forEach(function(e){C[e]=t})}function E(){return Object.keys(R)}function _(e){return e=(e||"").toLowerCase(),R[e]||R[C[e]]}var y={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},R={},C={};return e.highlight=u,e.highlightAuto=d,e.fixMarkup=h,e.highlightBlock=p,e.configure=f,e.initHighlighting=g,e.initHighlightingOnLoad=b,e.registerLanguage=v,e.listLanguages=E,e.getLanguage=_,e.inherit=i,e.IDENT_RE="[a-zA-Z]\\w*",e.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",e.NUMBER_RE="\\b\\d+(\\.\\d+)?",e.C_NUMBER_RE="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BINARY_NUMBER_RE="\\b(0b[01]+)",e.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},e.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},e.COMMENT=function(t,a,s){var n=e.inherit({className:"comment",begin:t,end:a,contains:[]},s||{});return n.contains.push(e.PHRASAL_WORDS_MODE),n.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),n},e.C_LINE_COMMENT_MODE=e.COMMENT("//","$"),e.C_BLOCK_COMMENT_MODE=e.COMMENT("/\\*","\\*/"),e.HASH_COMMENT_MODE=e.COMMENT("#","$"),e.NUMBER_MODE={className:"number",begin:e.NUMBER_RE,relevance:0},e.C_NUMBER_MODE={className:"number",begin:e.C_NUMBER_RE,relevance:0},e.BINARY_NUMBER_MODE={className:"number",begin:e.BINARY_NUMBER_RE,relevance:0},e.CSS_NUMBER_MODE={className:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},e.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}]},e.TITLE_MODE={className:"title",begin:e.IDENT_RE,relevance:0},e.UNDERSCORE_TITLE_MODE={className:"title",begin:e.UNDERSCORE_IDENT_RE,relevance:0},e})},{}],240:[function(e,t,a){t.exports=function(e){var t={className:"number",begin:"[\\$%]\\d+"};return{aliases:["apacheconf"],case_insensitive:!0,contains:[e.HASH_COMMENT_MODE,{className:"tag",begin:"</?",end:">"},{className:"keyword",begin:/\w+/,relevance:0,keywords:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{end:/$/,relevance:0,keywords:{literal:"on off all"},contains:[{className:"sqbracket",begin:"\\s\\[",end:"\\]$"},{className:"cbracket",begin:"[\\$%]\\{",end:"\\}",contains:["self",t]},t,e.QUOTE_STRING_MODE]}}],illegal:/\S/}}},{}],241:[function(e,t,a){t.exports=function(e){var t={className:"variable",variants:[{begin:/\$[\w\d#@][\w\d_]*/},{begin:/\$\{(.*?)}/}]},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t,{className:"variable",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]}]},s={className:"string",begin:/'/,end:/'/};return{aliases:["sh","zsh"],lexemes:/-?[a-z\.]+/,keywords:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},contains:[{className:"shebang",begin:/^#![^\n]+sh\s*$/,relevance:10},{className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},e.HASH_COMMENT_MODE,e.NUMBER_MODE,a,s,t]}}},{}],242:[function(e,t,a){t.exports=function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},a="[A-Za-z$_][0-9A-Za-z$_]*",s={className:"subst",begin:/#\{/,end:/}/,keywords:t},n=[e.BINARY_NUMBER_MODE,e.inherit(e.C_NUMBER_MODE,{starts:{end:"(\\s*/)?",relevance:0}}),{className:"string",variants:[{begin:/'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE]},{begin:/'/,end:/'/,contains:[e.BACKSLASH_ESCAPE]},{begin:/"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,s]},{begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,s]}]},{className:"regexp",variants:[{begin:"///",end:"///",contains:[s,e.HASH_COMMENT_MODE]},{begin:"//[gim]*",relevance:0},{begin:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{className:"property",begin:"@"+a},{begin:"`",end:"`",excludeBegin:!0,excludeEnd:!0,subLanguage:"javascript"}];s.contains=n;var r=e.inherit(e.TITLE_MODE,{begin:a}),i="(\\(.*\\))?\\s*\\B[-=]>",l={className:"params",begin:"\\([^\\(]",returnBegin:!0,contains:[{begin:/\(/,end:/\)/,keywords:t,contains:["self"].concat(n)}]};return{aliases:["coffee","cson","iced"],keywords:t,illegal:/\/\*/,contains:n.concat([e.COMMENT("###","###"),e.HASH_COMMENT_MODE,{className:"function",begin:"^\\s*"+a+"\\s*=\\s*"+i,end:"[-=]>",returnBegin:!0,contains:[r,l]},{begin:/[:\(,=]\s*/,relevance:0,contains:[{className:"function",begin:i,end:"[-=]>",returnBegin:!0,contains:[l]}]},{className:"class",beginKeywords:"class",end:"$",illegal:/[:="\[\]]/,contains:[{beginKeywords:"extends",endsWithParent:!0,illegal:/[:="\[\]]/,contains:[r]},r]},{className:"attribute",begin:a+":",end:":",returnBegin:!0,returnEnd:!0,relevance:0}])}}},{}],243:[function(e,t,a){t.exports=function(e){var t={className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},a={className:"string",variants:[e.inherit(e.QUOTE_STRING_MODE,{begin:'((u8?|U)|L)?"'}),{begin:'(u8?|U)?R"',end:'"',contains:[e.BACKSLASH_ESCAPE]},{begin:"'\\\\?.",end:"'",illegal:"."}]},s={className:"number",variants:[{begin:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},{begin:e.C_NUMBER_RE}]},n={className:"preprocessor",begin:"#",end:"$",keywords:"if else elif endif define undef warning error line pragma ifdef ifndef",contains:[{begin:/\\\n/,relevance:0},{beginKeywords:"include",end:"$",contains:[a,{className:"string",begin:"<",end:">",illegal:"\\n"}]},a,s,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},r=e.IDENT_RE+"\\s*\\(",i={keyword:"int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf",literal:"true false nullptr NULL"};return{aliases:["c","cc","h","c++","h++","hpp"],keywords:i,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,s,a,n,{begin:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",end:">",keywords:i,contains:["self",t]},{begin:e.IDENT_RE+"::",keywords:i},{beginKeywords:"new throw return else",relevance:0},{className:"function",begin:"("+e.IDENT_RE+"[\\*&\\s]+)+"+r,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:i,illegal:/[^\w\s\*&]/,contains:[{begin:r,returnBegin:!0,contains:[e.TITLE_MODE],relevance:0},{className:"params",begin:/\(/,end:/\)/,keywords:i,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,a,s]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,n]}]}}},{}],244:[function(e,t,a){t.exports=function(e){var t="abstract as base bool break byte case catch char checked const continue decimal dynamic default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null when object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",a=e.IDENT_RE+"(<"+e.IDENT_RE+">)?";return{aliases:["csharp"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"xmlDocTag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"preprocessor",begin:"#",end:"$",keywords:"if else elif endif define undef warning error line region endregion pragma checksum"},{className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,{beginKeywords:"class interface",end:/[{;=]/,illegal:/[^\s:]/,contains:[e.TITLE_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",end:/[{;=]/,illegal:/[^\s:]/,contains:[{className:"title",begin:"[a-zA-Z](\\.?\\w)*",relevance:0},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new return throw await",relevance:0},{className:"function",begin:"("+a+"\\s+)+"+e.IDENT_RE+"\\s*\\(",returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:t,contains:[{begin:e.IDENT_RE+"\\s*\\(",returnBegin:!0,contains:[e.TITLE_MODE],relevance:0},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]}]}}},{}],245:[function(e,t,a){t.exports=function(e){var t="[a-zA-Z-][a-zA-Z0-9_-]*",a={className:"function",begin:t+"\\(",returnBegin:!0,excludeEnd:!0,end:"\\("},s={className:"rule",begin:/[A-Z\_\.\-]+\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{className:"value",endsWithParent:!0,excludeEnd:!0,contains:[a,e.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_BLOCK_COMMENT_MODE,{className:"hexcolor",begin:"#[0-9A-Fa-f]+"},{className:"important",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[e.C_BLOCK_COMMENT_MODE,{className:"id",begin:/\#[A-Za-z0-9_-]+/},{className:"class",begin:/\.[A-Za-z0-9_-]+/},{className:"attr_selector",begin:/\[/,end:/\]/,illegal:"$"},{className:"pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"']+/},{className:"at_rule",begin:"@(font-face|page)",lexemes:"[a-z-]+",keywords:"font-face page"},{className:"at_rule",begin:"@",end:"[{;]",contains:[{className:"keyword",begin:/\S+/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,contains:[a,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.CSS_NUMBER_MODE]}]},{className:"tag",begin:t,relevance:0},{className:"rules",begin:"{",end:"}",illegal:/\S/,contains:[e.C_BLOCK_COMMENT_MODE,s]}]}}},{}],246:[function(e,t,a){t.exports=function(e){return{aliases:["patch"],contains:[{className:"chunk",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"header",variants:[{begin:/Index: /,end:/$/},{begin:/=====/,end:/=====$/},{begin:/^\-\-\-/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+\+\+/,end:/$/},{begin:/\*{5}/,end:/\*{5}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"change",begin:"^\\!",end:"$"}]}}},{}],247:[function(e,t,a){t.exports=function(e){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer",constant:"true false iota nil",typename:"bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:"'",end:"[^\\\\]'"},{className:"string",begin:"`",end:"`"},{className:"number",begin:e.C_NUMBER_RE+"[dflsi]?",relevance:0},e.C_NUMBER_MODE]}}},{}],248:[function(e,t,a){t.exports=function(e){return{aliases:["https"],illegal:"\\S",contains:[{className:"status",begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"
}]},{className:"request",begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{className:"string",end:"$"}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}}},{}],249:[function(e,t,a){t.exports=function(e){var t={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]};return{aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[e.COMMENT(";","$"),e.HASH_COMMENT_MODE,{className:"title",begin:/^\s*\[+/,end:/\]+/},{className:"setting",begin:/^[a-z0-9\[\]_-]+\s*=\s*/,end:"$",contains:[{className:"value",endsWithParent:!0,keywords:"on off true false yes no",contains:[{className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)}/}]},t,{className:"number",begin:/([\+\-]+)?[\d]+_[\d_]+/},e.NUMBER_MODE],relevance:0}]}]}}},{}],250:[function(e,t,a){t.exports=function(e){var t=e.UNDERSCORE_IDENT_RE+"(<"+e.UNDERSCORE_IDENT_RE+">)?",a="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",s="\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",n={className:"number",begin:s,relevance:0};return{aliases:["jsp"],keywords:a,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"class",beginKeywords:"class interface",end:/[{;=]/,excludeEnd:!0,keywords:"class interface",illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"new throw return else",relevance:0},{className:"function",begin:"("+t+"\\s+)+"+e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:a,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,keywords:a,relevance:0,contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},n,{className:"annotation",begin:"@[A-Za-z]+"}]}}},{}],251:[function(e,t,a){t.exports=function(e){return{aliases:["js"],keywords:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},contains:[{className:"pi",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,{className:"subst",begin:"\\$\\{",end:"\\}"}]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"number",variants:[{begin:"\\b(0[bB][01]+)"},{begin:"\\b(0[oO][0-7]+)"},{begin:e.C_NUMBER_RE}],relevance:0},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.REGEXP_MODE,{begin:/</,end:/>\s*[);\]]/,relevance:0,subLanguage:"xml"}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/[A-Za-z$_][0-9A-Za-z$_]*/}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]}],illegal:/\[|%/},{begin:/\$[(.]/},{begin:"\\."+e.IDENT_RE,relevance:0},{beginKeywords:"import",end:"[;$]",keywords:"import from as",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},e.UNDERSCORE_TITLE_MODE]}],illegal:/#/}}},{}],252:[function(e,t,a){t.exports=function(e){var t={literal:"true false null"},a=[e.QUOTE_STRING_MODE,e.C_NUMBER_MODE],s={className:"value",end:",",endsWithParent:!0,excludeEnd:!0,contains:a,keywords:t},n={begin:"{",end:"}",contains:[{className:"attribute",begin:'\\s*"',end:'"\\s*:\\s*',excludeBegin:!0,excludeEnd:!0,contains:[e.BACKSLASH_ESCAPE],illegal:"\\n",starts:s}],illegal:"\\S"},r={begin:"\\[",end:"\\]",contains:[e.inherit(s,{className:null})],illegal:"\\S"};return a.splice(a.length,0,n,r),{contains:a,keywords:t,illegal:"\\S"}}},{}],253:[function(e,t,a){t.exports=function(e){var t={className:"variable",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]};return{aliases:["mk","mak"],contains:[e.HASH_COMMENT_MODE,{begin:/^\w+\s*\W*=/,returnBegin:!0,relevance:0,starts:{className:"constant",end:/\s*\W*=/,excludeEnd:!0,starts:{end:/$/,relevance:0,contains:[t]}}},{className:"title",begin:/^[\w]+:\s*$/},{className:"phony",begin:/^\.PHONY:/,end:/$/,keywords:".PHONY",lexemes:/[\.\w]+/},{begin:/^\t+/,end:/$/,relevance:0,contains:[e.QUOTE_STRING_MODE,t]}]}}},{}],254:[function(e,t,a){t.exports=function(e){return{aliases:["md","mkdown","mkd"],contains:[{className:"header",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"blockquote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"`.+?`"},{begin:"^( {4}|	)",end:"$",relevance:0}]},{className:"horizontal_rule",begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"link_label",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link_url",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"link_reference",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:"^\\[.+\\]:",returnBegin:!0,contains:[{className:"link_reference",begin:"\\[",end:"\\]:",excludeBegin:!0,excludeEnd:!0,starts:{className:"link_url",end:"$"}}]}]}}},{}],255:[function(e,t,a){t.exports=function(e){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+e.UNDERSCORE_IDENT_RE}]},a={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{className:"url",begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{begin:e.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"title",begin:e.UNDERSCORE_IDENT_RE,starts:a}],relevance:0}],illegal:"[^\\s\\}]"}}},{}],256:[function(e,t,a){t.exports=function(e){var t={className:"built_in",begin:"(AV|CA|CF|CG|CI|MK|MP|NS|UI)\\w+"},a={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},s=/[a-zA-Z@][a-zA-Z0-9_]*/,n="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],keywords:a,lexemes:s,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"'",end:"[^\\\\]'",illegal:"[^\\\\][^']"}]},{className:"preprocessor",begin:"#",end:"$",contains:[{className:"title",variants:[{begin:'"',end:'"'},{begin:"<",end:">"}]}]},{className:"class",begin:"("+n.split(" ").join("|")+")\\b",end:"({|$)",excludeEnd:!0,keywords:n,lexemes:s,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"variable",begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}},{}],257:[function(e,t,a){t.exports=function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",a={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},s={begin:"->{",end:"}"},n={className:"variable",variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},r=[e.BACKSLASH_ESCAPE,a,n],i=[n,e.HASH_COMMENT_MODE,e.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),s,{className:"string",contains:r,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[e.BACKSLASH_ESCAPE],relevance:0}]},{className:"sub",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",relevance:5},{className:"operator",begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return a.contains=i,s.contains=i,{aliases:["pl"],keywords:t,contains:i}}},{}],258:[function(e,t,a){t.exports=function(e){var t={className:"variable",begin:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},a={className:"preprocessor",begin:/<\?(php)?|\?>/},s={className:"string",contains:[e.BACKSLASH_ESCAPE,a],variants:[{begin:'b"',end:'"'},{begin:"b'",end:"'"},e.inherit(e.APOS_STRING_MODE,{illegal:null}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null})]},n={variants:[e.BINARY_NUMBER_MODE,e.C_NUMBER_MODE]};return{aliases:["php3","php4","php5","php6"],case_insensitive:!0,keywords:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",contains:[e.C_LINE_COMMENT_MODE,e.HASH_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"},a]}),e.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,keywords:"__halt_compiler",lexemes:e.UNDERSCORE_IDENT_RE}),{className:"string",begin:/<<<['"]?\w+['"]?$/,end:/^\w+;?$/,contains:[e.BACKSLASH_ESCAPE,{className:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]}]},a,t,{begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{className:"function",beginKeywords:"function",end:/[;{]/,excludeEnd:!0,illegal:"\\$|\\[|%",contains:[e.UNDERSCORE_TITLE_MODE,{className:"params",begin:"\\(",end:"\\)",contains:["self",t,e.C_BLOCK_COMMENT_MODE,s,n]}]},{className:"class",beginKeywords:"class interface",end:"{",excludeEnd:!0,illegal:/[:\(\$"]/,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",end:";",illegal:/[\.']/,contains:[e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",end:";",contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"=>"},s,n]}}},{}],259:[function(e,t,a){t.exports=function(e){var t={className:"prompt",begin:/^(>>>|\.\.\.) /},a={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[t],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[t],relevance:10},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},s={className:"number",relevance:0,variants:[{begin:e.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:e.C_NUMBER_RE+"[lLjJ]?"}]},n={className:"params",begin:/\(/,end:/\)/,contains:["self",t,s,a]};return{aliases:["py","gyp"],keywords:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},illegal:/(<\/|->|\?)/,contains:[t,s,a,e.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def",relevance:10},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[e.UNDERSCORE_TITLE_MODE,n]},{className:"decorator",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}}},{}],260:[function(e,t,a){t.exports=function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",a="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",s={className:"doctag",begin:"@[A-Za-z]+"},n={className:"value",begin:"#<",end:">"},r=[e.COMMENT("#","$",{contains:[s]}),e.COMMENT("^\\=begin","^\\=end",{contains:[s],relevance:10}),e.COMMENT("^__END__","\\n$")],i={className:"subst",begin:"#\\{",end:"}",keywords:a},l={className:"string",contains:[e.BACKSLASH_ESCAPE,i],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:"%[qQwWx]?\\(",end:"\\)"},{begin:"%[qQwWx]?\\[",end:"\\]"},{begin:"%[qQwWx]?{",end:"}"},{begin:"%[qQwWx]?<",end:">"},{begin:"%[qQwWx]?/",end:"/"},{begin:"%[qQwWx]?%",end:"%"},{begin:"%[qQwWx]?-",end:"-"},{begin:"%[qQwWx]?\\|",end:"\\|"},{begin:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},o={className:"params",begin:"\\(",end:"\\)",keywords:a},c=[l,n,{className:"class",beginKeywords:"class module",end:"$|;",illegal:/=/,contains:[e.inherit(e.TITLE_MODE,{begin:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{className:"inheritance",begin:"<\\s*",contains:[{className:"parent",begin:"("+e.IDENT_RE+"::)?"+e.IDENT_RE}]}].concat(r)},{className:"function",beginKeywords:"def",end:"$|;",contains:[e.inherit(e.TITLE_MODE,{begin:t}),o].concat(r)},{className:"constant",begin:"(::)?(\\b[A-Z]\\w*(::)?)+",relevance:0},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(\\!|\\?)?:",relevance:0},{className:"symbol",begin:":",contains:[l,{begin:t}],relevance:0},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{className:"variable",begin:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{begin:"("+e.RE_STARTERS_RE+")\\s*",contains:[n,{className:"regexp",contains:[e.BACKSLASH_ESCAPE,i],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:"%r{",end:"}[a-z]*"},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(r),relevance:0}].concat(r);i.contains=c,o.contains=c;var u="[>?]>",d="[\\w#]+\\(\\w+\\):\\d+:\\d+>",h="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",m=[{begin:/^\s*=>/,className:"status",starts:{end:"$",contains:c}},{className:"prompt",begin:"^("+u+"|"+d+"|"+h+")",starts:{end:"$",contains:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:r.concat(m).concat(c)}}},{}],261:[function(e,t,a){t.exports=function(e){var t=e.COMMENT("--","$");return{case_insensitive:!0,illegal:/[<>{}*]/,contains:[{className:"operator",beginKeywords:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke",end:/;/,endsWithParent:!0,keywords:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes c cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle d data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration e each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract f failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function g general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http i id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists k keep keep_duplicates key keys kill l language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim m main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex n name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding p package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime t table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},contains:[{className:"string",begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE,{begin:"''"}]},{className:"string",begin:'"',end:'"',contains:[e.BACKSLASH_ESCAPE,{begin:'""'}]},{className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t]},e.C_BLOCK_COMMENT_MODE,t]}}},{}],262:[function(e,t,a){t.exports=function(e){var t="[A-Za-z0-9\\._:-]+",a={begin:/<\?(php)?(?!\w)/,end:/\?>/,subLanguage:"php"},s={endsWithParent:!0,illegal:/</,relevance:0,contains:[a,{className:"attribute",begin:t,relevance:0},{begin:"=",relevance:0,contains:[{className:"value",contains:[a],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/},{begin:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],case_insensitive:!0,contains:[{className:"doctype",begin:"<!DOCTYPE",end:">",relevance:10,contains:[{begin:"\\[",end:"\\]"}]},e.COMMENT("<!--","-->",{relevance:10}),{className:"cdata",begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},{className:"tag",begin:"<style(?=\\s|>|$)",end:">",keywords:{title:"style"},contains:[s],starts:{end:"</style>",returnEnd:!0,subLanguage:"css"}},{className:"tag",begin:"<script(?=\\s|>|$)",end:">",keywords:{title:"script"},contains:[s],starts:{end:"</script>",returnEnd:!0,
subLanguage:["actionscript","javascript","handlebars"]}},a,{className:"pi",begin:/<\?\w+/,end:/\?>/,relevance:10},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"title",begin:/[^ \/><\n\t]+/,relevance:0},s]}]}}},{}],263:[function(e,t,a){(function(t){"use strict";function s(e){ReactDOM.render(React.createElement(i,{tab:e.ActiveTab,teamId:e.TeamId}),document.getElementById("admin_controller")),ReactDOM.render(React.createElement(r,null),document.getElementById("select_team_modal")),ReactDOM.render(React.createElement(n,null),document.getElementById("error_bar"))}Object.defineProperty(a,"__esModule",{value:!0}),a.setupAdminConsolePage=s;var n=e("../components/error_bar.jsx"),r=e("../components/admin_console/select_team_modal.jsx"),i=e("../components/admin_console/admin_controller.jsx");t.window.setup_admin_console_page=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/admin_console/admin_controller.jsx":4,"../components/admin_console/select_team_modal.jsx":17,"../components/error_bar.jsx":44}],264:[function(e,t,a){(function(t){"use strict";function a(e){ReactDOM.render(React.createElement(s,{teamName:e.TeamName,appName:e.AppName,responseType:e.ResponseType,clientId:e.ClientId,redirectUri:e.RedirectUri,scope:e.Scope,state:e.State}),document.getElementById("authorize"))}var s=e("../components/authorize.jsx");t.window.setup_authorize_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/authorize.jsx":24}],265:[function(e,t,a){(function(t){"use strict";function a(e){s.handleViewAction({type:w.CLICK_CHANNEL,name:e.ChannelName,id:e.ChannelId}),k.getAllPreferences(),ReactDOM.render(React.createElement(r,null),document.getElementById("channel_loader")),ReactDOM.render(React.createElement(i,null),document.getElementById("error_bar")),ReactDOM.render(React.createElement(n,null),document.getElementById("channel_view")),ReactDOM.render(React.createElement(o,{id:"post_textbox"}),document.getElementById("post_mention_tab")),ReactDOM.render(React.createElement(o,{id:"reply_textbox"}),document.getElementById("reply_mention_tab")),ReactDOM.render(React.createElement(o,{id:"edit_textbox"}),document.getElementById("edit_mention_tab")),ReactDOM.render(React.createElement(c,null),document.getElementById("get_link_modal")),ReactDOM.render(React.createElement(N,null),document.getElementById("invite_member_modal")),ReactDOM.render(React.createElement(C,null),document.getElementById("import_theme_modal")),ReactDOM.render(React.createElement(v,null),document.getElementById("team_settings_modal")),ReactDOM.render(React.createElement(E,{teamDisplayName:e.TeamDisplayName}),document.getElementById("team_members_modal")),ReactDOM.render(React.createElement(u,null),document.getElementById("edit_channel_modal")),ReactDOM.render(React.createElement(d,null),document.getElementById("delete_channel_modal")),ReactDOM.render(React.createElement(h,null),document.getElementById("rename_channel_modal")),ReactDOM.render(React.createElement(b,null),document.getElementById("channel_notifications_modal")),ReactDOM.render(React.createElement(_,null),document.getElementById("channel_info_modal")),ReactDOM.render(React.createElement(f,null),document.getElementById("more_channels_modal")),ReactDOM.render(React.createElement(m,null),document.getElementById("edit_post_modal")),ReactDOM.render(React.createElement(p,null),document.getElementById("delete_post_modal")),ReactDOM.render(React.createElement(g,null),document.getElementById("post_deleted_modal")),ReactDOM.render(React.createElement(y,null),document.getElementById("removed_from_channel_modal")),ReactDOM.render(React.createElement(R,null),document.getElementById("register_app_modal")),"false"===t.window.mm_config.SendEmailNotifications&&(l.storeLastError({message:"Preview Mode: Email notifications have not been configured"}),l.emitChange())}var s=e("../dispatcher/app_dispatcher.jsx"),n=e("../components/channel_view.jsx"),r=e("../components/channel_loader.jsx"),i=e("../components/error_bar.jsx"),l=e("../stores/error_store.jsx"),o=e("../components/mention_list.jsx"),c=e("../components/get_link_modal.jsx"),u=e("../components/edit_channel_modal.jsx"),d=e("../components/delete_channel_modal.jsx"),h=e("../components/rename_channel_modal.jsx"),m=e("../components/edit_post_modal.jsx"),p=e("../components/delete_post_modal.jsx"),f=e("../components/more_channels.jsx"),g=e("../components/post_deleted_modal.jsx"),b=e("../components/channel_notifications.jsx"),v=e("../components/team_settings_modal.jsx"),E=e("../components/team_members.jsx"),_=e("../components/channel_info_modal.jsx"),y=e("../components/removed_from_channel_modal.jsx"),R=e("../components/register_app_modal.jsx"),C=e("../components/user_settings/import_theme_modal.jsx"),N=e("../components/invite_member_modal.jsx"),k=e("../utils/async_client.jsx"),S=e("../utils/constants.jsx"),w=S.ActionTypes;t.window.setup_channel_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/channel_info_modal.jsx":28,"../components/channel_loader.jsx":30,"../components/channel_notifications.jsx":32,"../components/channel_view.jsx":33,"../components/delete_channel_modal.jsx":38,"../components/delete_post_modal.jsx":39,"../components/edit_channel_modal.jsx":40,"../components/edit_post_modal.jsx":42,"../components/error_bar.jsx":44,"../components/get_link_modal.jsx":51,"../components/invite_member_modal.jsx":52,"../components/mention_list.jsx":60,"../components/more_channels.jsx":62,"../components/post_deleted_modal.jsx":79,"../components/register_app_modal.jsx":84,"../components/removed_from_channel_modal.jsx":85,"../components/rename_channel_modal.jsx":86,"../components/team_members.jsx":111,"../components/team_settings_modal.jsx":113,"../components/user_settings/import_theme_modal.jsx":131,"../dispatcher/app_dispatcher.jsx":147,"../stores/error_store.jsx":277,"../utils/async_client.jsx":285,"../utils/constants.jsx":288}],266:[function(e,t,a){(function(t){"use strict";function a(){ReactDOM.render(React.createElement(s,null),document.getElementById("find-team"))}var s=e("../components/find_team.jsx");t.window.setup_find_team_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/find_team.jsx":50}],267:[function(e,t,a){(function(t){"use strict";function a(){var e=s.getLastVisitedName();null==e||0===e.length?window.location=n.getCurrentTeamUrl()+"/channels/"+r.DEFAULT_CHANNEL:window.location=n.getCurrentTeamUrl()+"/channels/"+e}var s=e("../stores/channel_store.jsx"),n=e("../stores/team_store.jsx"),r=e("../utils/constants.jsx");t.window.setup_home_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/channel_store.jsx":276,"../stores/team_store.jsx":283,"../utils/constants.jsx":288}],268:[function(e,t,a){(function(t){"use strict";function a(e){ReactDOM.render(React.createElement(s,{teamDisplayName:e.TeamDisplayName,teamName:e.TeamName,inviteId:e.InviteId}),document.getElementById("login"))}var s=e("../components/login.jsx");t.window.setup_login_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/login.jsx":54}],269:[function(e,t,a){(function(t){"use strict";function a(e){ReactDOM.render(React.createElement(s,{isReset:e.IsReset,teamDisplayName:e.TeamDisplayName,teamName:e.TeamName,hash:e.Hash,data:e.Data}),document.getElementById("reset"))}var s=e("../components/password_reset.jsx");t.window.setup_password_reset_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/password_reset.jsx":70}],270:[function(e,t,a){(function(t){"use strict";function a(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&"Title"!==a&&t.push({name:a,display_name:e[a]});ReactDOM.render(React.createElement(s,{teams:t}),document.getElementById("signup-team"))}var s=e("../components/signup_team.jsx");t.window.setup_signup_team_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_team.jsx":105}],271:[function(e,t,a){(function(t){"use strict";function a(e){ReactDOM.render(React.createElement(s,{email:e.Email,hash:e.Hash,data:e.Data}),document.getElementById("signup-team-complete"))}var s=e("../components/signup_team_complete.jsx");t.window.setup_signup_team_complete_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_team_complete.jsx":106}],272:[function(e,t,a){(function(t){"use strict";function a(e){ReactDOM.render(React.createElement(s,{teamId:e.TeamId,teamName:e.TeamName,teamDisplayName:e.TeamDisplayName,email:e.Email,hash:e.Hash,data:e.Data}),document.getElementById("signup-user-complete"))}var s=e("../components/signup_user_complete.jsx");t.window.setup_signup_user_complete_page=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_user_complete.jsx":107}],273:[function(e,t,a){(function(t){"use strict";var a=e("../components/email_verify.jsx");t.window.setupVerifyPage=function(e){ReactDOM.render(React.createElement(a,{isVerified:e.IsVerified,teamURL:e.TeamURL,userEmail:e.UserEmail,resendSuccess:e.ResendSuccess}),document.getElementById("verify"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/email_verify.jsx":43}],274:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("events").EventEmitter,c=e("../stores/browser_store.jsx"),u=e("../utils/constants.jsx"),d=u.ActionTypes,h="log_change",m="config_change",p="all_team_change",f=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.logs=null,this.config=null,this.teams=null,this.emitLogChange=this.emitLogChange.bind(this),this.addLogChangeListener=this.addLogChangeListener.bind(this),this.removeLogChangeListener=this.removeLogChangeListener.bind(this),this.emitConfigChange=this.emitConfigChange.bind(this),this.addConfigChangeListener=this.addConfigChangeListener.bind(this),this.removeConfigChangeListener=this.removeConfigChangeListener.bind(this),this.emitAllTeamsChange=this.emitAllTeamsChange.bind(this),this.addAllTeamsChangeListener=this.addAllTeamsChangeListener.bind(this),this.removeAllTeamsChangeListener=this.removeAllTeamsChangeListener.bind(this)}return n(t,e),r(t,[{key:"emitLogChange",value:function(){this.emit(h)}},{key:"addLogChangeListener",value:function(e){this.on(h,e)}},{key:"removeLogChangeListener",value:function(e){this.removeListener(h,e)}},{key:"emitConfigChange",value:function(){this.emit(m)}},{key:"addConfigChangeListener",value:function(e){this.on(m,e)}},{key:"removeConfigChangeListener",value:function(e){this.removeListener(m,e)}},{key:"emitAllTeamsChange",value:function(){this.emit(p)}},{key:"addAllTeamsChangeListener",value:function(e){this.on(p,e)}},{key:"removeAllTeamsChangeListener",value:function(e){this.removeListener(p,e)}},{key:"getLogs",value:function(){return this.logs}},{key:"saveLogs",value:function(e){this.logs=e}},{key:"getConfig",value:function(){return this.config}},{key:"saveConfig",value:function(e){this.config=e}},{key:"getAllTeams",value:function(){return this.teams}},{key:"saveAllTeams",value:function(e){this.teams=e}},{key:"getSelectedTeams",value:function(){return c.getItem("seleted_teams")}},{key:"saveSelectedTeams",value:function(e){c.setItem("seleted_teams",e)}}]),t}(o),g=new f;f.dispatchToken=l.register(function(e){var t=e.action;switch(t.type){case d.RECIEVED_LOGS:g.saveLogs(t.logs),g.emitLogChange();break;case d.RECIEVED_CONFIG:g.saveConfig(t.config),g.emitConfigChange();break;case d.RECIEVED_ALL_TEAMS:g.saveAllTeams(t.teams),g.emitAllTeamsChange()}}),a.default=g,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],275:[function(e,t,a){(function(s){"use strict";function n(){return s.window.mm_user?s.window.mm_user.id+"_":"unknown_"}var r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(){i(this,e),this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this),this.setGlobalItem=this.setGlobalItem.bind(this),this.getGlobalItem=this.getGlobalItem.bind(this),this.removeGlobalItem=this.removeGlobalItem.bind(this),this.actionOnItemsWithPrefix=this.actionOnItemsWithPrefix.bind(this),this.actionOnGlobalItemsWithPrefix=this.actionOnGlobalItemsWithPrefix.bind(this),this.isLocalStorageSupported=this.isLocalStorageSupported.bind(this),this.getLastServerVersion=this.getLastServerVersion.bind(this),this.setLastServerVersion=this.setLastServerVersion.bind(this),this.clear=this.clear.bind(this),this.clearAll=this.clearAll.bind(this),this.checkedLocalStorageSupported="",this.signalLogout=this.signalLogout.bind(this);var t=sessionStorage.getItem("storage_version");if(t!==s.window.mm_config.Version){sessionStorage.clear();try{sessionStorage.setItem("storage_version",s.window.mm_config.Version)}catch(e){}}}return r(e,[{key:"getItem",value:function(e,t){var a=null;try{a=JSON.parse(sessionStorage.getItem(n()+e))}catch(e){a=null}return null===a&&"undefined"!=typeof t&&(a=t),a}},{key:"setItem",value:function(e,t){sessionStorage.setItem(n()+e,JSON.stringify(t))}},{key:"removeItem",value:function(e){sessionStorage.removeItem(n()+e)}},{key:"setGlobalItem",value:function(e,t){try{this.isLocalStorageSupported()?localStorage.setItem(n()+e,JSON.stringify(t)):sessionStorage.setItem(n()+e,JSON.stringify(t))}catch(e){console.log("An error occurred while setting local storage, clearing all props"),localStorage.clear(),sessionStorage.clear(),window.location.href=window.location.href}}},{key:"getGlobalItem",value:function(e,t){var a=null;try{a=this.isLocalStorageSupported()?JSON.parse(localStorage.getItem(n()+e)):JSON.parse(sessionStorage.getItem(n()+e))}catch(e){a=null}return null===a&&"undefined"!=typeof t&&(a=t),a}},{key:"removeGlobalItem",value:function(e){this.isLocalStorageSupported()?localStorage.removeItem(n()+e):sessionStorage.removeItem(n()+e)}},{key:"getLastServerVersion",value:function(){return sessionStorage.getItem("last_server_version")}},{key:"setLastServerVersion",value:function(e){sessionStorage.setItem("last_server_version",e)}},{key:"signalLogout",value:function(){this.isLocalStorageSupported()&&(localStorage.setItem("__logout__","yes"),localStorage.removeItem("__logout__"))}},{key:"actionOnGlobalItemsWithPrefix",value:function(e,t){var a=n(),s=a.length,r=sessionStorage;this.isLocalStorageSupported()&&(r=localStorage);for(var i in r)if(0===i.lastIndexOf(a+e,0)){var l=i.substring(s);t(l,this.getGlobalItem(i))}}},{key:"actionOnItemsWithPrefix",value:function(e,t){var a=n(),s=a.length;for(var r in sessionStorage)if(0===r.lastIndexOf(a+e,0)){var i=r.substring(s);t(i,this.getGlobalItem(r))}}},{key:"clear",value:function(){sessionStorage.clear()}},{key:"clearAll",value:function(){sessionStorage.clear(),localStorage.clear()}},{key:"isLocalStorageSupported",value:function(){if(""!==this.checkedLocalStorageSupported)return this.checkedLocalStorageSupported;try{sessionStorage.setItem("__testSession__","1"),sessionStorage.removeItem("__testSession__"),localStorage.setItem("__testLocal__","1"),"1"!==localStorage.getItem("__testLocal__")&&(this.checkedLocalStorageSupported=!1),localStorage.removeItem("__testLocal__","1"),this.checkedLocalStorageSupported=!0}catch(e){this.checkedLocalStorageSupported=!1}return this.checkedLocalStorageSupported}}]),e}(),o=new l;a.default=o,t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160}],276:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l,o=e("../dispatcher/app_dispatcher.jsx"),c=e("events").EventEmitter,u=e("../utils/constants.jsx"),d=u.ActionTypes,h=e("../stores/browser_store.jsx"),m="change",p="leave",f="change",g="extra_info",b=function(t){function a(e){i(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.setMaxListeners(11),this.currentId=null}return n(a,t),r(a,[{key:"emitChange",value:function(){this.emit(m)}},{key:"addChangeListener",value:function(e){this.on(m,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(m,e)}},{key:"emitMoreChange",value:function(){this.emit(f)}},{key:"addMoreChangeListener",value:function(e){this.on(f,e)}},{key:"removeMoreChangeListener",value:function(e){this.removeListener(f,e)}},{key:"emitExtraInfoChange",value:function(){this.emit(g)}},{key:"addExtraInfoChangeListener",value:function(e){this.on(g,e)}},{key:"removeExtraInfoChangeListener",value:function(e){this.removeListener(g,e)}},{key:"emitLeave",value:function(e){this.emit(p,e)}},{key:"addLeaveListener",value:function(e){this.on(p,e)}},{key:"removeLeaveListener",value:function(e){this.removeListener(p,e)}},{key:"findFirstBy",value:function(e,t){for(var a=this.pGetChannels(),s=0;s<a.length;s++)if(a[s][e]===t)return a[s];return null}},{key:"get",value:function(e){return this.findFirstBy("id",e)}},{key:"getMember",value:function(e){return this.getAllMembers()[e]}},{key:"getByName",value:function(e){return this.findFirstBy("name",e)}},{key:"getAll",value:function(){return this.pGetChannels()}},{key:"getAllMembers",value:function(){return this.pGetChannelMembers()}},{key:"getMoreAll",value:function(){return this.pGetMoreChannels()}},{key:"setCurrentId",value:function(e){this.currentId=e}},{key:"setLastVisitedName",value:function(e){null==e?h.removeItem("last_visited_name"):h.setItem("last_visited_name",e)}},{key:"getLastVisitedName",value:function(){return h.getItem("last_visited_name")}},{key:"resetCounts",value:function(e){var t=this.pGetChannelMembers();for(var a in t)if(t[a].channel_id===e){var s=this.get(e);s&&(t[a].msg_count=this.get(e).total_msg_count,t[a].mention_count=0);break}this.pStoreChannelMembers(t)}},{key:"getCurrentId",value:function(){return this.currentId}},{key:"getCurrent",value:function(){var e=this.getCurrentId();return e?this.get(e):null}},{key:"getCurrentMember",value:function(){var e=this.getCurrentId();return e?this.getAllMembers()[e]:null}},{key:"setChannelMember",value:function(e){var t=this.pGetChannelMembers();t[e.channel_id]=e,this.pStoreChannelMembers(t),this.emitChange()}},{key:"getCurrentExtraInfo",value:function(){var e=this.getCurrentId(),t=null;return e&&(t=this.pGetExtraInfos()[e]),null==t&&(t={members:[]}),t}},{key:"getExtraInfo",value:function(e){var t=null;return e&&(t=this.pGetExtraInfos()[e]),null==t&&(t={members:[]}),t}},{key:"pStoreChannel",value:function(t){for(var a,s=this.pGetChannels(),n=0;n<s.length;n++)if(s[n].id===t.id){s[n]=t,a=!0;break}a||s.push(t),l||(l=e("../utils/utils.jsx")),s.sort(l.sortByDisplayName),this.pStoreChannels(s)}},{key:"pStoreChannels",value:function(e){h.setItem("channels",e)}},{key:"pGetChannels",value:function(){return h.getItem("channels",[])}},{key:"pStoreChannelMember",value:function(e){var t=this.pGetChannelMembers();t[e.channel_id]=e,this.pStoreChannelMembers(t)}},{key:"pStoreChannelMembers",value:function(e){h.setItem("channel_members",e)}},{key:"pGetChannelMembers",value:function(){return h.getItem("channel_members",{})}},{key:"pStoreMoreChannels",value:function(e){h.setItem("more_channels",e)}},{key:"pGetMoreChannels",value:function(){var e=h.getItem("more_channels");return null==e&&(e={},e.loading=!0),e}},{key:"pStoreExtraInfos",value:function(e){h.setItem("extra_infos",e)}},{key:"pGetExtraInfos",value:function(){return h.getItem("extra_infos",{})}},{key:"isDefault",value:function(e){return e.name===u.DEFAULT_CHANNEL}}]),a}(c),v=new b;v.dispatchToken=o.register(function(e){var t,a=e.action;switch(a.type){case d.CLICK_CHANNEL:v.setCurrentId(a.id),v.setLastVisitedName(a.name),v.resetCounts(a.id),v.emitChange();break;case d.RECIEVED_CHANNELS:v.pStoreChannels(a.channels),v.pStoreChannelMembers(a.members),t=v.getCurrentId(),t&&v.resetCounts(t),v.emitChange();break;case d.RECIEVED_CHANNEL:v.pStoreChannel(a.channel),v.pStoreChannelMember(a.member),t=v.getCurrentId(),t&&v.resetCounts(t),v.emitChange();break;case d.RECIEVED_MORE_CHANNELS:v.pStoreMoreChannels(a.channels),v.emitMoreChange();break;case d.RECIEVED_CHANNEL_EXTRA_INFO:var s=v.pGetExtraInfos();s[a.extra_info.id]=a.extra_info,v.pStoreExtraInfos(s),v.emitExtraInfoChange();break;case d.LEAVE_CHANNEL:v.emitLeave(a.id)}}),a.default=v,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],277:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("events").EventEmitter,c=e("../utils/constants.jsx"),u=c.ActionTypes,d=e("../stores/browser_store.jsx"),h="change",m=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.handledError=this.handledError.bind(this),this.getLastError=this.getLastError.bind(this),this.storeLastError=this.storeLastError.bind(this)}return n(t,e),r(t,[{key:"emitChange",value:function(){this.emit(h)}},{key:"addChangeListener",value:function(e){this.on(h,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(h,e)}},{key:"handledError",value:function(){d.removeItem("last_error")}},{key:"getLastError",value:function(){return d.getItem("last_error")}},{key:"storeLastError",value:function(e){d.setItem("last_error",e)}}]),t}(o),p=new m;p.dispatchToken=l.register(function(e){var t=e.action;switch(t.type){case u.RECIEVED_ERROR:p.storeLastError(t.err),p.emitChange()}}),a.default=p,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],278:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("events").EventEmitter,c=e("../utils/constants.jsx"),u=c.ActionTypes,d=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.addModalListener=this.addModalListener.bind(this),this.removeModalListener=this.removeModalListener.bind(this),this.handleEventPayload=this.handleEventPayload.bind(this),this.dispatchToken=l.register(this.handleEventPayload)}return n(t,e),r(t,[{key:"addModalListener",value:function(e,t){this.on(e,t)}},{key:"removeModalListener",value:function(e,t){this.removeListener(e,t)}},{key:"handleEventPayload",value:function(e){var t=e.action;switch(t.type){case u.TOGGLE_IMPORT_THEME_MODAL:case u.TOGGLE_INVITE_MEMBER_MODAL:this.emit(t.type,t.value)}}}]),t}(o),h=new d;a.default=h,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],279:[function(e,t,a){"use strict";function s(e){var t=e;return null==t&&(t={order:[],posts:{}}),null==t.order&&(t.order=[]),null==t.posts&&(t.posts={}),t}function n(e){return null==e?!0:null==e.posts?!0:null==e.order?!0:!1}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/create-class").default,o=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var c=e("../dispatcher/app_dispatcher.jsx"),u=e("events").EventEmitter,d=e("../stores/channel_store.jsx"),h=e("../stores/browser_store.jsx"),m=e("../stores/user_store.jsx"),p=e("../utils/constants.jsx"),f=p.ActionTypes,g="change",b="selected_post_change",v="edit_post",E="post_list_jump",_=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.emitSelectedPostChange=this.emitSelectedPostChange.bind(this),this.addSelectedPostChangeListener=this.addSelectedPostChangeListener.bind(this),this.removeSelectedPostChangeListener=this.removeSelectedPostChangeListener.bind(this),this.emitEditPost=this.emitEditPost.bind(this),this.addEditPostListener=this.addEditPostListener.bind(this),this.removeEditPostListener=this.removeEditPostListner.bind(this),this.emitPostsViewJump=this.emitPostsViewJump.bind(this),this.addPostsViewJumpListener=this.addPostsViewJumpListener.bind(this),this.removePostsViewJumpListener=this.removePostsViewJumpListener.bind(this),this.getCurrentPosts=this.getCurrentPosts.bind(this),this.storePosts=this.storePosts.bind(this),this.pStorePosts=this.pStorePosts.bind(this),this.getPosts=this.getPosts.bind(this),this.storePost=this.storePost.bind(this),this.pStorePost=this.pStorePost.bind(this),this.removePost=this.removePost.bind(this),this.storePendingPost=this.storePendingPost.bind(this),this.pStorePendingPosts=this.pStorePendingPosts.bind(this),this.getPendingPosts=this.getPendingPosts.bind(this),this.storeUnseenDeletedPost=this.storeUnseenDeletedPost.bind(this),this.storeUnseenDeletedPosts=this.storeUnseenDeletedPosts.bind(this),this.getUnseenDeletedPosts=this.getUnseenDeletedPosts.bind(this),this.clearUnseenDeletedPosts=this.clearUnseenDeletedPosts.bind(this),this.removePendingPost=this.removePendingPost.bind(this),this.pRemovePendingPost=this.pRemovePendingPost.bind(this),this.clearPendingPosts=this.clearPendingPosts.bind(this),this.updatePendingPost=this.updatePendingPost.bind(this),this.storeSelectedPost=this.storeSelectedPost.bind(this),this.getSelectedPost=this.getSelectedPost.bind(this),this.getEmptyDraft=this.getEmptyDraft.bind(this),this.storeCurrentDraft=this.storeCurrentDraft.bind(this),this.getCurrentDraft=this.getCurrentDraft.bind(this),this.storeDraft=this.storeDraft.bind(this),this.getDraft=this.getDraft.bind(this),this.storeCommentDraft=this.storeCommentDraft.bind(this),this.getCommentDraft=this.getCommentDraft.bind(this),this.clearDraftUploads=this.clearDraftUploads.bind(this),this.clearCommentDraftUploads=this.clearCommentDraftUploads.bind(this),this.storeLatestUpdate=this.storeLatestUpdate.bind(this),this.getLatestUpdate=this.getLatestUpdate.bind(this),this.getCurrentUsersLatestPost=this.getCurrentUsersLatestPost.bind(this)}return i(t,e),l(t,[{key:"emitChange",value:function(){this.emit(g)}},{key:"addChangeListener",value:function(e){this.on(g,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(g,e)}},{key:"emitSelectedPostChange",value:function(e){this.emit(b,e)}},{key:"addSelectedPostChangeListener",value:function(e){this.on(b,e)}},{key:"removeSelectedPostChangeListener",value:function(e){this.removeListener(b,e)}},{key:"emitEditPost",value:function(e){this.emit(v,e)}},{key:"addEditPostListener",value:function(e){this.on(v,e)}},{key:"removeEditPostListner",value:function(e){this.removeListener(v,e)}},{key:"emitPostsViewJump",value:function(e,t){this.emit(E,e,t)}},{key:"addPostsViewJumpListener",value:function(e){this.on(E,e)}},{key:"removePostsViewJumpListener",value:function(e){this.removeListener(E,e)}},{key:"jumpPostsViewToBottom",value:function(){this.emitPostsViewJump(p.PostsViewJumpTypes.BOTTOM,null)}},{key:"jumpPostsViewToPost",value:function(e){this.emitPostsViewJump(p.PostsViewJumpTypes.POST,e)}},{key:"jumpPostsViewSidebarOpen",value:function(){this.emitPostsViewJump(p.PostsViewJumpTypes.SIDEBAR_OPEN,null)}},{key:"getCurrentPosts",value:function(){var e=d.getCurrentId();return null!=e?this.getPosts(e):null}},{key:"storePosts",value:function(e,t){if(!n(t)){var a=s(this.getPosts(e));for(var r in t.posts)if(t.posts.hasOwnProperty(r)){var i=t.posts[r];if(0===i.delete_at)a.posts[r]=i,-1===a.order.indexOf(r)&&a.order.push(r);else{r in a.posts&&delete a.posts[r];var l=a.order.indexOf(r);-1!==l&&a.order.splice(l,1)}}a.order.sort(function(e,t){return a.posts[e].create_at>a.posts[t].create_at?-1:a.posts[e].create_at<a.posts[t].create_at?1:0});var o=0;for(var c in a.posts)a.posts[c].update_at>o&&(o=a.posts[c].update_at);this.storeLatestUpdate(e,o),this.pStorePosts(e,a),this.emitChange()}}},{key:"pStorePosts",value:function(e,t){h.setItem("posts_"+e,t)}},{key:"getPosts",value:function(e){return h.getItem("posts_"+e)}},{key:"getCurrentUsersLatestPost",value:function(e,t){var a=m.getCurrentId(),n=s(this.getPosts(e)),r=0,i=n.order.length,l=null;for(r;i>r;r++){var o=n.posts[n.order[r]];if(o.user_id===a&&(o.props&&!o.props.from_webhook||!o.props)){if(!t){l=o;break}if(o.root_id===t||o.id===t){l=o;break}}}return l}},{key:"storePost",value:function(e){this.pStorePost(e),this.emitChange()}},{key:"pStorePost",value:function(e){var t=this.getPosts(e.channel_id);t=s(t),""!==e.pending_post_id&&this.removePendingPost(e.channel_id,e.pending_post_id),e.pending_post_id="",t.posts[e.id]=e,-1===t.order.indexOf(e.id)&&t.order.unshift(e.id),this.pStorePosts(e.channel_id,t)}},{key:"removePost",value:function(e,t){var a=this.getPosts(t);if(!n(a)){e in a.posts&&delete a.posts[e];var s=a.order.indexOf(e);-1!==s&&a.order.splice(s,1),this.pStorePosts(t,a)}}},{key:"storePendingPost",value:function(e){e.state=p.POST_LOADING;var t=this.getPendingPosts(e.channel_id);t=s(t),t.posts[e.pending_post_id]=e,t.order.unshift(e.pending_post_id),this.pStorePendingPosts(e.channel_id,t),this.emitChange()}},{key:"pStorePendingPosts",value:function(e,t){var a=t.posts;t.order.sort(function(e,t){return a[e].state===p.POST_LOADING&&a[t].state===p.POST_FAILED?1:a[e].state===p.POST_FAILED&&a[t].state===p.POST_LOADING?-1:a[e].create_at>a[t].create_at?-1:a[e].create_at<a[t].create_at?1:0}),h.setGlobalItem("pending_posts_"+e,t)}},{key:"getPendingPosts",value:function(e){return h.getGlobalItem("pending_posts_"+e)}},{key:"storeUnseenDeletedPost",value:function(e){var t=this.getUnseenDeletedPosts(e.channel_id);t||(t={}),e.message="(message deleted)",e.state=p.POST_DELETED,
e.filenames=[],t[e.id]=e,this.storeUnseenDeletedPosts(e.channel_id,t)}},{key:"storeUnseenDeletedPosts",value:function(e,t){h.setItem("deleted_posts_"+e,t)}},{key:"getUnseenDeletedPosts",value:function(e){return h.getItem("deleted_posts_"+e)}},{key:"clearUnseenDeletedPosts",value:function(e){h.setItem("deleted_posts_"+e,{})}},{key:"removePendingPost",value:function(e,t){this.pRemovePendingPost(e,t),this.emitChange()}},{key:"pRemovePendingPost",value:function(e,t){var a=this.getPendingPosts(e);a=s(a),t in a.posts&&delete a.posts[t];var n=a.order.indexOf(t);-1!==n&&a.order.splice(n,1),this.pStorePendingPosts(e,a)}},{key:"clearPendingPosts",value:function(){h.actionOnGlobalItemsWithPrefix("pending_posts_",function(e){h.removeItem(e)})}},{key:"updatePendingPost",value:function(e){var t=this.getPendingPosts(e.channel_id);t=s(t),-1!==t.order.indexOf(e.pending_post_id)&&(t.posts[e.pending_post_id]=e,this.pStorePendingPosts(e.channel_id,t),this.emitChange())}},{key:"storeSelectedPost",value:function(e){h.setItem("select_post",e)}},{key:"getSelectedPost",value:function(){return h.getItem("select_post")}},{key:"getEmptyDraft",value:function(){return{message:"",uploadsInProgress:[],previews:[]}}},{key:"storeCurrentDraft",value:function(e){var t=d.getCurrentId();h.setGlobalItem("draft_"+t,e)}},{key:"getCurrentDraft",value:function(){var e=d.getCurrentId();return this.getDraft(e)}},{key:"storeDraft",value:function(e,t){h.setGlobalItem("draft_"+e,t)}},{key:"getDraft",value:function(e){return h.getGlobalItem("draft_"+e,this.getEmptyDraft())}},{key:"storeCommentDraft",value:function(e,t){h.setGlobalItem("comment_draft_"+e,t)}},{key:"getCommentDraft",value:function(e){return h.getGlobalItem("comment_draft_"+e,this.getEmptyDraft())}},{key:"clearDraftUploads",value:function(){h.actionOnGlobalItemsWithPrefix("draft_",function(e,t){t&&(t.uploadsInProgress=[],h.setItem(e,t))})}},{key:"clearCommentDraftUploads",value:function(){h.actionOnGlobalItemsWithPrefix("comment_draft_",function(e,t){t&&(t.uploadsInProgress=[],h.setItem(e,t))})}},{key:"storeLatestUpdate",value:function(e,t){h.setItem("latest_post_"+e,t)}},{key:"getLatestUpdate",value:function(e){return h.getItem("latest_post_"+e,0)}}]),t}(u),y=new _;y.dispatchToken=c.register(function(e){var t=e.action;switch(t.type){case f.RECIEVED_POSTS:y.storePosts(t.id,s(t.post_list));break;case f.RECIEVED_POST:y.pStorePost(t.post),y.emitChange();break;case f.RECIEVED_POST_SELECTED:y.storeSelectedPost(t.post_list),y.emitSelectedPostChange(t.from_search);break;case f.RECIEVED_EDIT_POST:y.emitEditPost(t)}}),a.default=y,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../stores/channel_store.jsx":276,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],280:[function(e,t,a){"use strict";function s(e,t){return e+"-"+t}function n(e){return e.category+"-"+e.name}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/create-class").default,o=e("babel-runtime/helpers/class-call-check").default,c=e("babel-runtime/helpers/sliced-to-array").default,u=e("babel-runtime/helpers/to-consumable-array").default,d=e("babel-runtime/core-js/map").default,h=e("babel-runtime/core-js/get-iterator").default;Object.defineProperty(a,"__esModule",{value:!0});var m=e("../utils/constants.jsx").ActionTypes,p=e("../dispatcher/app_dispatcher.jsx"),f=e("./browser_store.jsx"),g=e("events").EventEmitter,b=e("../stores/user_store.jsx"),v="change",E=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.getAllPreferences=this.getAllPreferences.bind(this),this.getPreference=this.getPreference.bind(this),this.getPreferences=this.getPreferences.bind(this),this.getPreferencesWhere=this.getPreferencesWhere.bind(this),this.setAllPreferences=this.setAllPreferences.bind(this),this.setPreference=this.setPreference.bind(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.handleEventPayload=this.handleEventPayload.bind(this),this.dispatchToken=p.register(this.handleEventPayload)}return i(t,e),l(t,[{key:"getAllPreferences",value:function(){return new d(f.getItem("preferences",[]))}},{key:"getPreference",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?"":arguments[2];return this.getAllPreferences().get(s(e,t))||a}},{key:"getPreferences",value:function(e){return this.getPreferencesWhere(function(t){return t.category===e})}},{key:"getPreferencesWhere",value:function(e){var t=this.getAllPreferences(),a=[],s=!0,n=!1,r=void 0;try{for(var i,l=h(t);!(s=(i=l.next()).done);s=!0){var o=c(i.value,2),u=o[1];e(u)&&a.push(u)}}catch(e){n=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(n)throw r}}return a}},{key:"setAllPreferences",value:function(e){f.setItem("preferences",[].concat(u(e)))}},{key:"setPreference",value:function(e,t,a){var n=this.getAllPreferences(),r=s(e,t),i=n.get(r);return i||(i={user_id:b.getCurrentId(),category:e,name:t}),i.value=a,n.set(r,i),this.setAllPreferences(n),i}},{key:"emitChange",value:function(e){this.emit(v,e)}},{key:"addChangeListener",value:function(e){this.on(v,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(v,e)}},{key:"handleEventPayload",value:function(e){var t=e.action;switch(t.type){case m.RECIEVED_PREFERENCES:var a=this.getAllPreferences(),s=!0,r=!1,i=void 0;try{for(var l,o=h(t.preferences);!(s=(l=o.next()).done);s=!0){var c=l.value;a.set(n(c),c)}}catch(e){r=!0,i=e}finally{try{!s&&o.return&&o.return()}finally{if(r)throw i}}this.setAllPreferences(a),this.emitChange(a)}}}]),t}(g),_=new E;a.default=_,window.PreferenceStore=_,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"./browser_store.jsx":275,"babel-runtime/core-js/get-iterator":149,"babel-runtime/core-js/map":151,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,"babel-runtime/helpers/sliced-to-array":164,"babel-runtime/helpers/to-consumable-array":165,events:238}],281:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/get").default,n=e("babel-runtime/helpers/inherits").default,r=e("babel-runtime/helpers/create-class").default,i=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var l=e("../dispatcher/app_dispatcher.jsx"),o=e("events").EventEmitter,c=e("../stores/browser_store.jsx"),u=e("../utils/constants.jsx"),d=u.ActionTypes,h="change",m="search_change",p="search_term_change",f="mention_data_change",g="add_mention",b=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.emitSearchChange=this.emitSearchChange.bind(this),this.addSearchChangeListener=this.addSearchChangeListener.bind(this),this.removeSearchChangeListener=this.removeSearchChangeListener.bind(this),this.emitSearchTermChange=this.emitSearchTermChange.bind(this),this.addSearchTermChangeListener=this.addSearchTermChangeListener.bind(this),this.removeSearchTermChangeListener=this.removeSearchTermChangeListener.bind(this),this.emitMentionDataChange=this.emitMentionDataChange.bind(this),this.addMentionDataChangeListener=this.addMentionDataChangeListener.bind(this),this.removeMentionDataChangeListener=this.removeMentionDataChangeListener.bind(this),this.getSearchResults=this.getSearchResults.bind(this),this.getIsMentionSearch=this.getIsMentionSearch.bind(this),this.storeSearchTerm=this.storeSearchTerm.bind(this),this.getSearchTerm=this.getSearchTerm.bind(this),this.storeSearchResults=this.storeSearchResults.bind(this)}return n(t,e),r(t,[{key:"emitChange",value:function(){this.emit(h)}},{key:"addChangeListener",value:function(e){this.on(h,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(h,e)}},{key:"emitSearchChange",value:function(){this.emit(m)}},{key:"addSearchChangeListener",value:function(e){this.on(m,e)}},{key:"removeSearchChangeListener",value:function(e){this.removeListener(m,e)}},{key:"emitSearchTermChange",value:function(e,t){this.emit(p,e,t)}},{key:"addSearchTermChangeListener",value:function(e){this.on(p,e)}},{key:"removeSearchTermChangeListener",value:function(e){this.removeListener(p,e)}},{key:"getSearchResults",value:function(){return c.getItem("search_results")}},{key:"getIsMentionSearch",value:function(){return c.getItem("is_mention_search")}},{key:"storeSearchTerm",value:function(e){c.setItem("search_term",e)}},{key:"getSearchTerm",value:function(){return c.getItem("search_term")}},{key:"emitMentionDataChange",value:function(e,t){this.emit(f,e,t)}},{key:"addMentionDataChangeListener",value:function(e){this.on(f,e)}},{key:"removeMentionDataChangeListener",value:function(e){this.removeListener(f,e)}},{key:"emitAddMention",value:function(e,t){this.emit(g,e,t)}},{key:"addAddMentionListener",value:function(e){this.on(g,e)}},{key:"removeAddMentionListener",value:function(e){this.removeListener(g,e)}},{key:"storeSearchResults",value:function(e,t){c.setItem("search_results",e),c.setItem("is_mention_search",Boolean(t))}}]),t}(o),v=new b;v.dispatchToken=l.register(function(e){var t=e.action;switch(t.type){case d.RECIEVED_SEARCH:v.storeSearchResults(t.results,t.is_mention_search),v.emitSearchChange();break;case d.RECIEVED_SEARCH_TERM:v.storeSearchTerm(t.term),v.emitSearchTermChange(t.do_search,t.is_mention_search);break;case d.RECIEVED_MENTION_DATA:v.emitMentionDataChange(t.id,t.mention_text);break;case d.RECIEVED_ADD_MENTION:v.emitAddMention(t.id,t.username)}}),a.default=v,t.exports=a.default},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../utils/constants.jsx":288,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],282:[function(e,t,a){(function(s){"use strict";function n(e){var t=JSON.parse(e.props.post);if(v.storePost(t),E.getCurrentId()===e.channel_id?window.isActive&&N.updateLastViewedAt(!0):(b.getCurrentId()!==e.user_id||t.type!==k.POST_TYPE_JOIN_LEAVE)&&N.getChannel(e.channel_id),b.getCurrentId()!==e.user_id||"true"===t.props.from_webhook){var a=e.props,n=[];a.mentions&&(n=JSON.parse(e.props.mentions));var r=E.get(e.channel_id),i=b.getCurrentUser(),l=E.getMember(e.channel_id),o=l&&l.notify_props?l.notify_props.desktop:"default";if("default"===o&&(o=i.notify_props.desktop),"none"===o)return;if("mention"===o&&-1===n.indexOf(i.id)&&"D"!==r.type)return;var c="Someone";t.props.override_username&&"true"===s.window.mm_config.EnablePostUsernameOverride?c=t.props.override_username:b.hasProfile(e.user_id)&&(c=b.getProfile(e.user_id).username);var u="Posted";r&&(u=r.display_name);var d=t.message.replace(/\n+/g," ");d.length>50&&(d=d.substring(0,49)+"..."),0===d.length?a.image?C.notifyMe(u,c+" uploaded an image",r):a.otherFile?C.notifyMe(u,c+" uploaded a file",r):C.notifyMe(u,c+" did something new",r):C.notifyMe(u,c+" wrote: "+d,r),i.notify_props&&"true"!==i.notify_props.desktop_sound||C.ding()}}function r(e){var t=JSON.parse(e.props.post);v.storePost(t),E.getCurrentId()===e.channel_id&&window.isActive&&N.updateLastViewedAt()}function i(e){var t=JSON.parse(e.props.post);v.storeUnseenDeletedPost(t),v.removePost(t,!0),v.emitChange()}function l(){N.getProfiles(),N.getChannelExtraInfo(!0)}function o(e){E.getCurrentId()===e.channel_id&&N.getChannelExtraInfo(!0),b.getCurrentId()===e.user_id&&N.getChannel(e.channel_id)}function c(e){if(b.getCurrentId()===e.user_id){if(N.getChannels(),e.props.remover_id!==e.user_id&&e.channel_id===E.getCurrentId()&&$("#removed_from_channel").length>0){var t={};t.channelName=E.getCurrent().display_name,t.remover=b.getProfile(e.props.remover_id).username,_.setItem("channel-removed-state",t),$("#removed_from_channel").modal("show")}}else E.getCurrentId()===e.channel_id&&N.getChannelExtraInfo(!0)}function u(e){E.getCurrentId()!==e.channel_id&&b.getCurrentId()===e.user_id&&N.getChannel(e.channel_id)}var d=e("babel-runtime/helpers/get").default,h=e("babel-runtime/helpers/inherits").default,m=e("babel-runtime/helpers/create-class").default,p=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var f,g=e("../dispatcher/app_dispatcher.jsx"),b=e("./user_store.jsx"),v=e("./post_store.jsx"),E=e("./channel_store.jsx"),_=e("./browser_store.jsx"),y=e("./error_store.jsx"),R=e("events").EventEmitter,C=e("../utils/utils.jsx"),N=e("../utils/async_client.jsx"),k=e("../utils/constants.jsx"),S=k.ActionTypes,w=k.SocketEvents,x="change",T=function(e){function t(){p(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.initialize=this.initialize.bind(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.sendMessage=this.sendMessage.bind(this),this.failCount=0,this.initialize()}return h(t,e),m(t,[{key:"initialize",value:function(){var e=this;if(b.getCurrentId()&&s.window.hasOwnProperty("mm_session_token_index")&&(this.setMaxListeners(0),window.WebSocket&&!f)){var t="ws://";"https:"===window.location.protocol&&(t="wss://");var a=t+location.host+"/api/v1/websocket?"+C.getSessionIndex();0===this.failCount&&console.log("websocket connecting to "+a),f=new WebSocket(a),f.onopen=function(){e.failCount>0&&console.log("websocket re-established connection"),e.failCount=0,y.getLastError()&&(y.storeLastError(null),y.emitChange())},f.onclose=function(){f=null,setTimeout(function(){e.initialize()},3e3)},f.onerror=function(t){0===e.failCount&&console.log("websocket error "+t),e.failCount=e.failCount+1,y.storeLastError({connErrorCount:e.failCount,message:"Please check connection, Mattermost unreachable. If issue persists, ask administrator to check WebSocket port."}),y.emitChange()},f.onmessage=function(e){g.handleServerAction({type:S.RECIEVED_MSG,msg:JSON.parse(e.data)})}}}},{key:"emitChange",value:function(e){this.emit(x,e)}},{key:"addChangeListener",value:function(e){this.on(x,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(x,e)}},{key:"handleMessage",value:function(e){switch(e.action){case w.POSTED:n(e);break;case w.POST_EDITED:r(e);break;case w.POST_DELETED:i(e);break;case w.NEW_USER:l();break;case w.USER_ADDED:o(e);break;case w.USER_REMOVED:c(e);break;case w.CHANNEL_VIEWED:u(e)}}},{key:"sendMessage",value:function(e){f&&f.readyState===WebSocket.OPEN?f.send(JSON.stringify(e)):f&&f.readyState!==WebSocket.Closed||(f=null,this.initialize())}}]),t}(R),P=new T;P.dispatchToken=g.register(function(e){var t=e.action;switch(t.type){case S.RECIEVED_MSG:P.handleMessage(t.msg),P.emitChange(t.msg)}}),a.default=P,t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":147,"../utils/async_client.jsx":285,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"./browser_store.jsx":275,"./channel_store.jsx":276,"./error_store.jsx":277,"./post_store.jsx":279,"./user_store.jsx":284,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],283:[function(e,t,a){(function(s){"use strict";function n(){return c||(c=e("../utils/utils.jsx")),c.getWindowLocationOrigin()}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/create-class").default,o=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var c,u=e("../dispatcher/app_dispatcher.jsx"),d=e("events").EventEmitter,h=e("../utils/constants.jsx"),m=h.ActionTypes,p=e("../stores/browser_store.jsx"),f="change",g=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.get=this.get.bind(this),this.getByName=this.getByName.bind(this),this.getAll=this.getAll.bind(this),this.getCurrentId=this.getCurrentId.bind(this),this.getCurrent=this.getCurrent.bind(this),this.getCurrentTeamUrl=this.getCurrentTeamUrl.bind(this),this.saveTeam=this.saveTeam.bind(this)}return i(t,e),l(t,[{key:"emitChange",value:function(){this.emit(f)}},{key:"addChangeListener",value:function(e){this.on(f,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(f,e)}},{key:"get",value:function(e){var t=this.getAll();return t[e]}},{key:"getByName",value:function(e){var t=this.getAll();for(var a in t)if(t[a].name===e)return t[a];return null}},{key:"getAll",value:function(){return p.getItem("user_teams",{})}},{key:"getCurrentId",value:function(){var e=s.window.mm_team;return e?e.id:null}},{key:"getCurrent",value:function(){return null!=s.window.mm_team&&null==this.get(s.window.mm_team.id)&&this.saveTeam(s.window.mm_team),s.window.mm_team}},{key:"getCurrentTeamUrl",value:function(){return this.getCurrent()?n()+"/"+this.getCurrent().name:null}},{key:"saveTeam",value:function(e){var t=this.getAll();t[e.id]=e,p.setItem("user_teams",t)}}]),t}(d),b=new g;b.dispatchToken=u.register(function(e){var t=e.action;switch(t.type){case m.RECIEVED_TEAM:b.saveTeam(t.team),b.emitChange()}}),a.default=b,t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../utils/constants.jsx":288,"../utils/utils.jsx":293,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],284:[function(e,t,a){(function(s){"use strict";var n=e("babel-runtime/helpers/get").default,r=e("babel-runtime/helpers/inherits").default,i=e("babel-runtime/helpers/create-class").default,l=e("babel-runtime/helpers/class-call-check").default;Object.defineProperty(a,"__esModule",{value:!0});var o=e("../dispatcher/app_dispatcher.jsx"),c=e("events").EventEmitter,u=e("../utils/constants.jsx"),d=u.ActionTypes,h=e("./browser_store.jsx"),m="change",p="change_sessions",f="change_audits",g="change_teams",b="change_statuses",v=function(e){function t(){l(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.emitChange=this.emitChange.bind(this),this.addChangeListener=this.addChangeListener.bind(this),this.removeChangeListener=this.removeChangeListener.bind(this),this.emitSessionsChange=this.emitSessionsChange.bind(this),this.addSessionsChangeListener=this.addSessionsChangeListener.bind(this),this.removeSessionsChangeListener=this.removeSessionsChangeListener.bind(this),this.emitAuditsChange=this.emitAuditsChange.bind(this),this.addAuditsChangeListener=this.addAuditsChangeListener.bind(this),this.removeAuditsChangeListener=this.removeAuditsChangeListener.bind(this),this.emitTeamsChange=this.emitTeamsChange.bind(this),this.addTeamsChangeListener=this.addTeamsChangeListener.bind(this),this.removeTeamsChangeListener=this.removeTeamsChangeListener.bind(this),this.emitStatusesChange=this.emitStatusesChange.bind(this),this.addStatusesChangeListener=this.addStatusesChangeListener.bind(this),this.removeStatusesChangeListener=this.removeStatusesChangeListener.bind(this),this.getCurrentId=this.getCurrentId.bind(this),this.getCurrentUser=this.getCurrentUser.bind(this),this.setCurrentUser=this.setCurrentUser.bind(this),this.getLastEmail=this.getLastEmail.bind(this),this.setLastEmail=this.setLastEmail.bind(this),this.hasProfile=this.hasProfile.bind(this),this.getProfile=this.getProfile.bind(this),this.getProfileByUsername=this.getProfileByUsername.bind(this),this.getProfilesUsernameMap=this.getProfilesUsernameMap.bind(this),this.getProfiles=this.getProfiles.bind(this),this.getActiveOnlyProfiles=this.getActiveOnlyProfiles.bind(this),this.getActiveOnlyProfileList=this.getActiveOnlyProfileList.bind(this),this.saveProfile=this.saveProfile.bind(this),this.setSessions=this.setSessions.bind(this),this.getSessions=this.getSessions.bind(this),this.setAudits=this.setAudits.bind(this),this.getAudits=this.getAudits.bind(this),this.setTeams=this.setTeams.bind(this),this.getTeams=this.getTeams.bind(this),this.getCurrentMentionKeys=this.getCurrentMentionKeys.bind(this),this.setStatuses=this.setStatuses.bind(this),this.pSetStatuses=this.pSetStatuses.bind(this),this.setStatus=this.setStatus.bind(this),this.getStatuses=this.getStatuses.bind(this),this.getStatus=this.getStatus.bind(this),this.profileCache=null}return r(t,e),i(t,[{key:"emitChange",value:function(e){this.emit(m,e)}},{key:"addChangeListener",value:function(e){this.on(m,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(m,e)}},{key:"emitSessionsChange",value:function(){this.emit(p)}},{key:"addSessionsChangeListener",value:function(e){this.on(p,e)}},{key:"removeSessionsChangeListener",value:function(e){this.removeListener(p,e)}},{key:"emitAuditsChange",value:function(){this.emit(f)}},{key:"addAuditsChangeListener",value:function(e){this.on(f,e)}},{key:"removeAuditsChangeListener",value:function(e){this.removeListener(f,e)}},{key:"emitTeamsChange",value:function(){this.emit(g)}},{key:"addTeamsChangeListener",value:function(e){this.on(g,e)}},{key:"removeTeamsChangeListener",value:function(e){this.removeListener(g,e)}},{key:"emitStatusesChange",value:function(){this.emit(b)}},{key:"addStatusesChangeListener",value:function(e){this.on(b,e)}},{key:"removeStatusesChangeListener",value:function(e){this.removeListener(b,e)}},{key:"getCurrentUser",value:function(){return null==this.getProfiles()[s.window.mm_user.id]&&this.saveProfile(s.window.mm_user),s.window.mm_user}},{key:"setCurrentUser",value:function(e){var t=s.window.mm_user;if(t.id!==e.id)throw new Error("Problem with setCurrentUser old_user_id="+t.id+" new_user_id="+e.id);s.window.mm_user=e,this.saveProfile(e)}},{key:"getCurrentId",value:function(){var e=s.window.mm_user;return e?e.id:null}},{key:"getLastEmail",value:function(){return h.getGlobalItem("last_email","")}},{key:"setLastEmail",value:function(e){h.setGlobalItem("last_email",e)}},{key:"hasProfile",value:function(e){return null!=this.getProfiles()[e]}},{key:"getProfile",value:function(e){return this.getProfiles()[e]}},{key:"getProfileByUsername",value:function(e){return this.getProfilesUsernameMap()[e]}},{key:"getProfilesUsernameMap",value:function(){var e={},t=this.getProfiles();for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];e[s.username]=s}return e}},{key:"getProfiles",value:function(){return null!==this.profileCache?this.profileCache:h.getItem("profiles",{})}},{key:"getActiveOnlyProfiles",value:function(e){var t={},a=this.getProfiles(),s=this.getCurrentId();for(var n in a)a[n].id===s&&e||0!==a[n].delete_at||(t[n]=a[n]);return t}},{key:"getActiveOnlyProfileList",value:function(){var e=this.getActiveOnlyProfiles(),t=[],a=this.getCurrentId();for(var s in e)e.hasOwnProperty(s)&&s!==a&&t.push(e[s]);return t}},{key:"saveProfile",value:function(e){var t=this.getProfiles();t[e.id]=e,this.profileCache=t,h.setItem("profiles",t)}},{key:"saveProfiles",value:function(e){var t=this.getCurrentId();t in e&&delete e[t],this.profileCache=e,h.setItem("profiles",e)}},{key:"setSessions",value:function(e){h.setItem("sessions",e)}},{key:"getSessions",value:function(){return h.getItem("sessions",{loading:!0})}},{key:"setAudits",value:function(e){h.setItem("audits",e)}},{key:"getAudits",value:function(){return h.getItem("audits",{loading:!0})}},{key:"setTeams",value:function(e){h.setItem("teams",e)}},{key:"getTeams",value:function(){return h.getItem("teams",[])}},{key:"getCurrentMentionKeys",value:function(){var e=this.getCurrentUser(),t=[];return e&&e.notify_props?(e.notify_props.mention_keys&&(t=t.concat(e.notify_props.mention_keys.split(","))),"true"===e.notify_props.first_name&&e.first_name&&t.push(e.first_name),"true"===e.notify_props.all&&t.push("@all"),"true"===e.notify_props.channel&&t.push("@channel"),t):t}},{key:"setStatuses",value:function(e){this.pSetStatuses(e),this.emitStatusesChange()}},{key:"pSetStatuses",value:function(e){h.setItem("statuses",e)}},{key:"setStatus",value:function(e,t){var a=this.getStatuses();a[e]=t,this.pSetStatuses(a),this.emitStatusesChange()}},{key:"getStatuses",value:function(){return h.getItem("statuses",{})}},{key:"getStatus",value:function(e){return this.getStatuses()[e]}}]),t}(c),E=new v;E.setMaxListeners(0),E.dispatchToken=o.register(function(e){var t=e.action;switch(t.type){case d.RECIEVED_PROFILES:E.saveProfiles(t.profiles),E.emitChange();break;case d.RECIEVED_ME:E.setCurrentUser(t.me),E.emitChange(t.me.id);break;case d.RECIEVED_SESSIONS:E.setSessions(t.sessions),E.emitSessionsChange();break;case d.RECIEVED_AUDITS:E.setAudits(t.audits),E.emitAuditsChange();break;case d.RECIEVED_TEAMS:E.setTeams(t.teams),E.emitTeamsChange();break;case d.RECIEVED_STATUSES:E.pSetStatuses(t.statuses),E.emitStatusesChange()}}),s.window.UserStore=E,a.default=E,t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":147,"../utils/constants.jsx":288,"./browser_store.jsx":275,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,events:238}],285:[function(e,t,a){"use strict";function s(e,t){S.handleServerAction({type:O.RECIEVED_ERROR,err:e,method:t})}function n(e){return e in D?0===D[e]?!1:j.getTimestamp()-D[e]>5e3?!1:!0:!1}function r(e,t,a){var r=x.getAll();if(0===r.length||e){if(n("getChannels"))return;D.getChannels=j.getTimestamp(),k.getChannels(function(e,t,s){if(D.getChannels=0,a){var n=s.getResponseHeader("X-Version-ID");w.getLastServerVersion()||w.setLastServerVersion(n),n!==w.getLastServerVersion()&&(w.setLastServerVersion(n),window.location.href=window.location.href,console.log("Detected version update refreshing the page"))}304!==s.status&&e&&S.handleServerAction({type:O.RECIEVED_CHANNELS,channels:e.channels,members:e.members})},function(e){D.getChannels=0,s(e,"getChannels")})}else{if(n("getChannelCounts"))return;D.getChannelCounts=j.getTimestamp(),k.getChannelCounts(function(e,t,a){if(D.getChannelCounts=0,304!==a.status&&e){var s=e.counts,n=e.update_times;for(var r in s)if({}.hasOwnProperty.call(s,r)){var l=x.get(r),o=s[r],c=n[r];(!l||l.total_msg_count!==o||c>l.update_at)&&i(r)}}},function(e){D.getChannelCounts=0,s(e,"getChannelCounts")})}t&&null!=x.getCurrentId()&&l()}function i(e){n("getChannel"+e)||(D["getChannel"+e]=j.getTimestamp(),k.getChannel(e,function(t,a,s){D["getChannel"+e]=0,304!==s.status&&t&&S.handleServerAction({type:O.RECIEVED_CHANNEL,channel:t.channel,member:t.member})},function(t){D["getChannel"+e]=0,s(t,"getChannel")}))}function l(e){var t=x.getCurrentId();null!==t&&(!n("updateLastViewed"+t)||e)&&(D["updateLastViewed"+t]=j.getTimestamp(),k.updateLastViewedAt(t,function(){D.updateLastViewed=0},function(e){D.updateLastViewed=0,s(e,"updateLastViewedAt")}))}function o(e){n("getMoreChannels")||(x.getMoreAll().loading||e)&&(D.getMoreChannels=j.getTimestamp(),k.getMoreChannels(function(e,t,a){D.getMoreChannels=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_MORE_CHANNELS,channels:e.channels,members:e.members})},function(e){D.getMoreChannels=0,s(e,"getMoreChannels")}))}function c(e){var t=x.getCurrentId();if(null!=t){if(n("getChannelExtraInfo_"+t))return;var a=0;x.getCurrent()&&"D"===x.getCurrent().type&&(a=1),(x.getCurrentExtraInfo().members.length<=a||e)&&(D["getChannelExtraInfo_"+t]=j.getTimestamp(),k.getChannelExtraInfo(t,function(e,a,s){D["getChannelExtraInfo_"+t]=0,304!==s.status&&e&&S.handleServerAction({type:O.RECIEVED_CHANNEL_EXTRA_INFO,extra_info:e})},function(e){D["getChannelExtraInfo_"+t]=0,s(e,"getChannelExtraInfo")}))}}function u(){n("getProfiles")||(D.getProfiles=j.getTimestamp(),k.getProfiles(function(e,t,a){D.getProfiles=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_PROFILES,profiles:e})},function(e){D.getProfiles=0,s(e,"getProfiles")}))}function d(){n("getSessions")||(D.getSessions=j.getTimestamp(),k.getSessions(P.getCurrentId(),function(e,t,a){D.getSessions=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_SESSIONS,sessions:e})},function(e){D.getSessions=0,s(e,"getSessions")}))}function h(){n("getAudits")||(D.getAudits=j.getTimestamp(),k.getAudits(P.getCurrentId(),function(e,t,a){D.getAudits=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_AUDITS,audits:e})},function(e){D.getAudits=0,s(e,"getAudits")}))}function m(){n("getLogs")||(D.getLogs=j.getTimestamp(),k.getLogs(function(e,t,a){D.getLogs=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_LOGS,logs:e})},function(e){D.getLogs=0,s(e,"getLogs")}))}function p(){n("getConfig")||(D.getConfig=j.getTimestamp(),k.getConfig(function(e,t,a){D.getConfig=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_CONFIG,config:e})},function(e){D.getConfig=0,s(e,"getConfig")}))}function f(){n("getAllTeams")||(D.getAllTeams=j.getTimestamp(),k.getAllTeams(function(e,t,a){D.getAllTeams=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_ALL_TEAMS,teams:e})},function(e){D.getAllTeams=0,s(e,"getAllTeams")}))}function g(e){if(!n("findTeams_"+e)){var t=P.getCurrentUser();t&&(D["findTeams_"+e]=j.getTimestamp(),k.findTeams(t.email,function(t,a,s){D["findTeams_"+e]=0,304!==s.status&&t&&S.handleServerAction({type:O.RECIEVED_TEAMS,teams:t})},function(t){D["findTeams_"+e]=0,s(t,"findTeams")}))}}function b(e){n("search_"+String(e))||(D["search_"+String(e)]=j.getTimestamp(),k.search(e,function(t,a,s){D["search_"+String(e)]=0,304!==s.status&&t&&S.handleServerAction({type:O.RECIEVED_SEARCH,results:t})},function(t){D["search_"+String(e)]=0,s(t,"search")}))}function v(e,t,a){if(null==T.getCurrentPosts()||e){var r=t;if(null==r&&(r=x.getCurrentId()),n("getPostsPage_"+r))return;var i=T.getCurrentPosts(),l=a;null==l&&(l=M.POST_CHUNK_SIZE*M.MAX_POST_CHUNKS);var o=Math.min(l,M.POST_CHUNK_SIZE);i&&i.order.length>0&&(o=Math.min(l,M.POST_CHUNK_SIZE*Math.ceil(i.order.length/M.POST_CHUNK_SIZE))),null!=r&&(D["getPostsPage_"+r]=j.getTimestamp(),k.getPostsPage(r,0,o,function(e,t,a){304!==a.status&&e&&(S.handleServerAction({type:O.RECIEVED_POSTS,id:r,post_list:e}),u())},function(e){s(e,"getPostsPage")},function(){D["getPostsPage_"+r]=0}))}}function E(e){var t=e;if(null==t){if(null==x.getCurrentId())return;t=x.getCurrentId()}if(!n("getPosts_"+t)){if(null==T.getCurrentPosts())return void v(!0,e,M.POST_CHUNK_SIZE);var a=T.getLatestUpdate(t);D["getPosts_"+t]=j.getTimestamp(),k.getPosts(t,a,function(e,a,s){304!==s.status&&e&&(S.handleServerAction({type:O.RECIEVED_POSTS,id:t,post_list:e}),u())},function(e){s(e,"getPosts")},function(){D["getPosts_"+t]=0})}}function _(){n("getMe")||(D.getMe=j.getTimestamp(),k.getMe(function(e,t,a){D.getMe=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_ME,me:e})},function(e){D.getMe=0,s(e,"getMe")}))}function y(){for(var e=x.getAll().filter(function(e){return e.type===M.DM_CHANNEL}),t=[],a=0;a<e.length;a++){var r=j.getDirectTeammate(e[a].id);r&&t.push(r.id)}n("getStatuses")||0===t.length||(D.getStatuses=j.getTimestamp(),k.getStatuses(t,function(e,t,a){D.getStatuses=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_STATUSES,statuses:e})},function(e){D.getStatuses=0,s(e,"getStatuses")}));
}function R(){n("getMyTeam")||(D.getMyTeam=j.getTimestamp(),k.getMyTeam(function(e,t,a){D.getMyTeam=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_TEAM,team:e})},function(e){D.getMyTeam=0,s(e,"getMyTeam")}))}function C(){n("getAllPreferences")||(D.getAllPreferences=j.getTimestamp(),k.getAllPreferences(function(e,t,a){D.getAllPreferences=0,304!==a.status&&e&&S.handleServerAction({type:O.RECIEVED_PREFERENCES,preferences:e})},function(e){D.getAllPreferences=0,s(e,"getAllPreferences")}))}function N(e,t,a){k.savePreferences(e,function(a,s,n){304!==n.status&&S.handleServerAction({type:O.RECIEVED_PREFERENCES,preferences:e}),t&&t(a)},function(e){s(e,"savePreferences"),a&&a()})}Object.defineProperty(a,"__esModule",{value:!0}),a.dispatchError=s,a.getChannels=r,a.getChannel=i,a.updateLastViewedAt=l,a.getMoreChannels=o,a.getChannelExtraInfo=c,a.getProfiles=u,a.getSessions=d,a.getAudits=h,a.getLogs=m,a.getConfig=p,a.getAllTeams=f,a.findTeams=g,a.search=b,a.getPostsPage=v,a.getPosts=E,a.getMe=_,a.getStatuses=y,a.getMyTeam=R,a.getAllPreferences=C,a.savePreferences=N;var k=e("./client.jsx"),S=e("../dispatcher/app_dispatcher.jsx"),w=e("../stores/browser_store.jsx"),x=e("../stores/channel_store.jsx"),T=e("../stores/post_store.jsx"),P=e("../stores/user_store.jsx"),j=e("./utils.jsx"),M=e("./constants.jsx"),O=M.ActionTypes,D={}},{"../dispatcher/app_dispatcher.jsx":147,"../stores/browser_store.jsx":275,"../stores/channel_store.jsx":276,"../stores/post_store.jsx":279,"../stores/user_store.jsx":284,"./client.jsx":287,"./constants.jsx":288,"./utils.jsx":293}],286:[function(e,t,a){"use strict";function s(e,t){return"D"===e.type?n(e):d.isDefault(e)?i(e):e.name===h.OFFTOPIC_CHANNEL?r(e,t):"O"===e.type||"P"===e.type?l(e,t):void 0}function n(e){var t=o.getDirectTeammate(e.id);if(t){var a=t.username;return t.nickname.length>0&&(a=t.nickname),React.createElement("div",{className:"channel-intro"},React.createElement("div",{className:"post-profile-img__container channel-intro-img"},React.createElement("img",{className:"post-profile-img",src:"/api/v1/users/"+t.id+"/image?time="+t.update_at+"&"+o.getSessionIndex(),height:"50",width:"50"})),React.createElement("div",{className:"channel-intro-profile"},React.createElement("strong",null,React.createElement(u,{userId:t.id}))),React.createElement("p",{className:"channel-intro-text"},"This is the start of your direct message history with "+a+".",React.createElement("br",null),"Direct messages and files shared here are not shown to people outside this area."),React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":e.header,"data-title":e.display_name,"data-channelid":e.id},React.createElement("i",{className:"fa fa-pencil"}),"Set a header"))}return React.createElement("div",{className:"channel-intro"},React.createElement("p",{className:"channel-intro-text"},"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area."))}function r(e,t){return React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of "+e.display_name),React.createElement("p",{className:"channel-intro__content"},"This is the start of "+e.display_name+", a channel for non-work-related conversations.",React.createElement("br",null)),React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":e.header,"data-title":e.display_name,"data-channelid":e.id},React.createElement("i",{className:"fa fa-pencil"}),"Set a header"),React.createElement("a",{href:"#",onClick:t},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this channel"))}function i(e){var t=m.getCurrent(),a=void 0;return a=t.type===h.INVITE_TEAM?React.createElement("a",{className:"intro-links",href:"#",onClick:c.show},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this team"):React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#get_link","data-title":"Team Invite","data-value":o.getWindowLocationOrigin()+"/signup_user_complete/?id="+t.id},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this team"),React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of "+e.display_name),React.createElement("p",{className:"channel-intro__content"},React.createElement("strong",null,"Welcome to "+e.display_name+"!"),React.createElement("br",null),React.createElement("br",null),"This is the first channel teammates see when they sign up - use it for posting updates everyone needs to know."),a,React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":e.header,"data-title":e.display_name,"data-channelid":e.id},React.createElement("i",{className:"fa fa-pencil"}),"Set a header"),React.createElement("br",null))}function l(e,t){var a,s,n=e.display_name,r="";"P"===e.type?(a="private group",s=" Only invited members can see this private group."):(a="channel",s=" Any member can join and read this channel.");var i;return i=""===r?"This is the start of the "+n+" "+a+", created on "+o.displayDate(e.create_at)+".":React.createElement("span",null,"This is the start of the ",React.createElement("strong",null,n)," ",a,", created by ",React.createElement("strong",null,r)," on ",React.createElement("strong",null,o.displayDate(e.create_at))),React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of "+n),React.createElement("p",{className:"channel-intro__content"},i,s,React.createElement("br",null)),React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#edit_channel","data-header":e.header,"data-title":e.display_name,"data-channelid":e.id},React.createElement("i",{className:"fa fa-pencil"}),"Set a header"),React.createElement("a",{href:"#",onClick:t},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this "+a))}Object.defineProperty(a,"__esModule",{value:!0}),a.createChannelIntroMessage=s,a.createDMIntroMessage=n,a.createOffTopicIntroMessage=r,a.createDefaultIntroMessage=i,a.createStandardIntroMessage=l;var o=e("./utils.jsx"),c=e("../components/invite_member_modal.jsx"),u=e("../components/user_profile.jsx"),d=e("../stores/channel_store.jsx"),h=e("../utils/constants.jsx"),m=e("../stores/team_store.jsx")},{"../components/invite_member_modal.jsx":52,"../components/user_profile.jsx":129,"../stores/channel_store.jsx":276,"../stores/team_store.jsx":283,"../utils/constants.jsx":288,"./utils.jsx":293}],287:[function(e,t,a){(function(s){"use strict";function n(e,t,a,n,r){s.window.analytics.track(t,{category:e,label:a,property:n,value:r})}function r(){s.window.analytics.page()}function i(e,t,a,s){var r=null;try{r=JSON.parse(t.responseText)}catch(e){r=null}var i="";if(r)i="error in "+e+" msg="+r.message+" detail="+r.detailed_error+" rid="+r.request_id;else if(i="error in "+e+" status="+a+" statusCode="+t.status+" err="+s,0===t.status){var l=1,o=Oe.getLastError(),c="There appears to be a problem with your internet connection";o&&o.connErrorCount&&(l+=o.connErrorCount,c="Please check connection, Mattermost unreachable. If issue persists, ask administrator to check WebSocket port."),r={message:c,connErrorCount:l}}else r={message:"We received an unexpected status code from the server ("+t.status+")"};if(console.error(i),console.error(r),n("api","api_weberror",e,"message",i),401===t.status)if(0===window.location.href.indexOf("/channels"))window.location.pathname="/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search);else{var u=window.location.href.split("/channels")[0];window.location.href=u+"/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search)}return r}function l(e,t,a){$.ajax({url:"/api/v1/teams/create_from_signup",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("createTeamFromSignup",e,t,s);a(n)}})}function o(e,t,a,s){$.ajax({url:"/api/v1/teams/create_with_sso/"+t,dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:a,error:function(e,t,a){var n=i("createTeamWithSSO",e,t,a);s(n)}})}function c(e,t,a,s,r){$.ajax({url:"/api/v1/users/create?d="+encodeURIComponent(t)+"&h="+encodeURIComponent(a),dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:s,error:function(e,t,a){var s=i("createUser",e,t,a);r(s)}}),n("api","api_users_create",e.team_id,"email",e.email)}function u(e,t,a){$.ajax({url:"/api/v1/users/update",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateUser",e,t,s);a(n)}}),n("api","api_users_update")}function d(e,t,a){$.ajax({url:"/api/v1/users/newpassword",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("newPassword",e,t,s);a(n)}}),n("api","api_users_newpassword")}function h(e,t,a){$.ajax({url:"/api/v1/users/update_notify",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateUserNotifyProps",e,t,s);a(n)}})}function m(e,t,a){$.ajax({url:"/api/v1/users/update_roles",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateRoles",e,t,s);a(n)}}),n("api","api_users_update_roles")}function p(e,t,a,s){var r={};r.user_id=e,r.active=""+t,$.ajax({url:"/api/v1/users/update_active",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(r),success:a,error:function(e,t,a){var n=i("updateActive",e,t,a);s(n)}}),n("api","api_users_update_roles")}function f(e,t,a){$.ajax({url:"/api/v1/users/send_password_reset",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("sendPasswordReset",e,t,s);a(n)}}),n("api","api_users_send_password_reset")}function g(e,t,a){$.ajax({url:"/api/v1/users/reset_password",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("resetPassword",e,t,s);a(n)}}),n("api","api_users_reset_password")}function b(){n("api","api_users_logout");var e=Me.getCurrentTeamUrl();je.signalLogout(),je.clear(),Oe.storeLastError(null),window.location.href=e+"/logout"}function v(e,t,a,s,r){$.ajax({url:"/api/v1/users/login",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({name:e,email:t,password:a}),success:function(e,t,a){n("api","api_users_login_success",e.team_id,"email",e.email),s(e,t,a)},error:function(a,s,l){n("api","api_users_login_fail",e,"email",t);var o=i("loginByEmail",a,s,l);r(o)}})}function E(e,t,a){$.ajax({url:"/api/v1/users/revoke_session",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({id:e}),success:t,error:function(e,t,s){var n=i("revokeSession",e,t,s);a(n)}})}function _(e,t,a){$.ajax({cache:!1,url:"/api/v1/users/"+e+"/sessions",dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getSessions",e,t,s);a(n)}})}function y(e,t,a){$.ajax({url:"/api/v1/users/"+e+"/audits",dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getAudits",e,t,s);a(n)}})}function R(e,t){$.ajax({url:"/api/v1/admin/logs",dataType:"json",contentType:"application/json",type:"GET",success:e,error:function(e,a,s){var n=i("getLogs",e,a,s);t(n)}})}function C(e,t){$.ajax({url:"/api/v1/admin/config",dataType:"json",contentType:"application/json",type:"GET",success:e,error:function(e,a,s){var n=i("getConfig",e,a,s);t(n)}})}function N(e,t,a,s){$.ajax({url:"/api/v1/admin/analytics/"+e+"/"+t,dataType:"json",contentType:"application/json",type:"GET",success:a,error:function(e,t,a){var n=i("getAnalytics",e,t,a);s(n)}})}function k(e,t,a){$.ajax({url:"/api/v1/admin/save_config",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("saveConfig",e,t,s);a(n)}})}function S(e){var t={};t.level="ERROR",t.message=e,$.ajax({url:"/api/v1/admin/log_client",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(t)})}function w(e,t,a){$.ajax({url:"/api/v1/admin/test_email",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("testEmail",e,t,s);a(n)}})}function x(e,t){$.ajax({url:"/api/v1/teams/all",dataType:"json",contentType:"application/json",type:"GET",success:e,error:function(e,a,s){var n=i("getAllTeams",e,a,s);t(n)}})}function T(e,t){var a=null;return $.ajax({cache:!1,url:"/api/v1/users/me",dataType:"json",contentType:"application/json",type:"GET",success:function(t,s,n){a=t,e&&e(t,s,n)},error:function(e,a,s){if(t){var n=i("getMe",e,a,s);t(n)}}}),a}function P(e,t,a){$.ajax({url:"/api/v1/teams/invite_members",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("inviteMembers",e,t,s);a(n)}}),n("api","api_teams_invite_members")}function j(e,t,a){$.ajax({url:"/api/v1/teams/update",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateTeam",e,t,s);a(n)}}),n("api","api_teams_update_name")}function M(e,t,a){$.ajax({url:"/api/v1/teams/signup",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({email:e}),success:t,error:function(e,t,s){var n=i("singupTeam",e,t,s);a(n)}}),n("api","api_teams_signup")}function O(e,t,a){$.ajax({url:"/api/v1/teams/create",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("createTeam",e,t,s);a(n)}})}function D(e,t,a){$.ajax({url:"/api/v1/teams/find_team_by_name",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({name:e}),success:t,error:function(e,t,s){var n=i("findTeamByName",e,t,s);a(n)}})}function I(e,t,a){$.ajax({url:"/api/v1/teams/email_teams",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({email:e}),success:t,error:function(e,t,s){var n=i("findTeamsSendEmail",e,t,s);a(n)}}),n("api","api_teams_email_teams")}function L(e,t,a){$.ajax({url:"/api/v1/teams/find_teams",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({email:e}),success:t,error:function(e,t,s){var n=i("findTeams",e,t,s);a(n)}})}function A(e,t,a){$.ajax({url:"/api/v1/channels/create",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("createChannel",e,t,s);a(n)}}),n("api","api_channels_create",e.type,"name",e.name)}function U(e,t,a,s){$.ajax({url:"/api/v1/channels/create_direct",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({user_id:t}),success:a,error:function(e,t,a){var n=i("createDirectChannel",e,t,a);s(n)}}),n("api","api_channels_create_direct",e.type,"name",e.name)}function F(e,t,a){$.ajax({url:"/api/v1/channels/update",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateChannel",e,t,s);a(n)}}),n("api","api_channels_update")}function H(e,t,a){$.ajax({url:"/api/v1/channels/update_header",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateChannelHeader",e,t,s);a(n)}}),n("api","api_channels_header")}function B(e,t,a){$.ajax({url:"/api/v1/channels/update_purpose",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateChannelPurpose",e,t,s);a(n)}}),n("api","api_channels_purpose")}function q(e,t,a){$.ajax({url:"/api/v1/channels/update_notify_props",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updateNotifyProps",e,t,s);a(n)}})}function V(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/join",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("joinChannel",e,t,s);a(n)}}),n("api","api_channels_join")}function z(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/leave",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("leaveChannel",e,t,s);a(n)}}),n("api","api_channels_leave")}function G(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/delete",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("deleteChannel",e,t,s);a(n)}}),n("api","api_channels_delete")}function W(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/update_last_viewed_at",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("updateLastViewedAt",e,t,s);a(n)}})}function K(e,t){$.ajax({cache:!1,url:"/api/v1/channels/",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getChannels",e,a,s);t(n)}})}function Y(e,t,a){$.ajax({cache:!1,url:"/api/v1/channels/"+e+"/",dataType:"json",type:"GET",success:t,error:function(e,t,s){var n=i("getChannel",e,t,s);a(n)}}),n("api","api_channel_get")}function J(e,t){$.ajax({url:"/api/v1/channels/more",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getMoreChannels",e,a,s);t(n)}})}function Z(e,t){$.ajax({cache:!1,url:"/api/v1/channels/counts",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getChannelCounts",e,a,s);t(n)}})}function Q(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/extra_info",dataType:"json",type:"GET",success:t,error:function(e,t,s){var n=i("getChannelExtraInfo",e,t,s);a(n)}})}function X(e,t,a,s,n){$.ajax({url:"/api/v1/command",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({channelId:e,command:t,suggest:""+a}),success:s,error:function(e,t,a){var s=i("executeCommand",e,t,a);n(s)}})}function ee(e,t,a,s,n,r){$.ajax({cache:!1,url:"/api/v1/channels/"+e+"/posts/"+t+"/"+a,dataType:"json",type:"GET",ifModified:!0,success:s,error:function(e,t,a){var s=i("getPosts",e,t,a);n(s)},complete:r})}function te(e,t,a,s,n){$.ajax({url:"/api/v1/channels/"+e+"/posts/"+t,dataType:"json",type:"GET",ifModified:!0,success:a,error:function(e,t,a){var n=i("getPosts",e,t,a);s(n)},complete:n})}function ae(e,t,a,s){$.ajax({cache:!1,url:"/api/v1/channels/"+e+"/post/"+t,dataType:"json",type:"GET",ifModified:!1,success:a,error:function(e,t,a){var n=i("getPost",e,t,a);s(n)}})}function se(e,t,a){$.ajax({url:"/api/v1/posts/search",dataType:"json",type:"GET",data:{terms:e},success:t,error:function(e,t,s){var n=i("search",e,t,s);a(n)}}),n("api","api_posts_search")}function ne(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e+"/post/"+t+"/delete",dataType:"json",contentType:"application/json",type:"POST",success:a,error:function(e,t,a){var n=i("deletePost",e,t,a);s(n)}}),n("api","api_posts_delete")}function re(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e.channel_id+"/create",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:a,error:function(e,t,a){var n=i("createPost",e,t,a);s(n)}}),n("api","api_posts_create",t.name,"length",e.message.length)}function ie(e,t,a){$.ajax({url:"/api/v1/channels/"+e.channel_id+"/update",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("updatePost",e,t,s);a(n)}}),n("api","api_posts_update")}function le(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e+"/add",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(t),success:a,error:function(e,t,a){var n=i("addChannelMember",e,t,a);s(n)}}),n("api","api_channels_add_member")}function oe(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e+"/remove",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(t),success:a,error:function(e,t,a){var n=i("removeChannelMember",e,t,a);s(n)}}),n("api","api_channels_remove_member")}function ce(e,t){$.ajax({cache:!1,url:"/api/v1/users/profiles",dataType:"json",contentType:"application/json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getProfiles",e,a,s);t(n)}})}function ue(e,t,a){$.ajax({cache:!1,url:"/api/v1/users/profiles/"+e,dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getProfilesForTeam",e,t,s);a(n)}})}function de(e,t,a){var s=$.ajax({url:"/api/v1/files/upload",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){if("abort"!==s){var n=i("uploadFile",e,t,s);a(n)}}});return n("api","api_files_upload"),s}function he(e,t,a){$.ajax({url:"/api/v1/files/get_info"+e,dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getFileInfo",e,t,s);a(n)}})}function me(e,t,a){$.ajax({url:"/api/v1/files/get_public_link",dataType:"json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("getPublicLink",e,t,s);a(n)}})}function pe(e,t,a){$.ajax({url:"/api/v1/users/newimage",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){var n=i("uploadProfileImage",e,t,s);a(n)}})}function fe(e,t,a){$.ajax({url:"/api/v1/teams/import_team",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){var n=i("importTeam",e,t,s);a(n)}})}function ge(e,t){$.ajax({url:"/api/v1/teams/export_team",type:"GET",dataType:"json",success:e,error:function(e,a,s){var n=i("exportTeam",e,a,s);t(n)}})}function be(e,t,a){$.ajax({url:"/api/v1/users/status",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("getStatuses",e,t,s);a(n)}})}function ve(e,t){$.ajax({url:"/api/v1/teams/me",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getMyTeam",e,a,s);t(n)}})}function Ee(e,a,s){$.ajax({url:"/api/v1/oauth/register",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:a,error:function(e,t,a){var n=i("registerApp",e,t,a);s(n)}}),t.exports.track("api","api_apps_register")}function _e(e,a,s,n,r,l,o){$.ajax({url:"/api/v1/oauth/allow?response_type="+e+"&client_id="+a+"&redirect_uri="+s+"&scope="+r+"&state="+n,dataType:"json",contentType:"application/json",type:"GET",success:l,error:function(e,t,a){var s=i("allowOAuth2",e,t,a);o(s)}}),t.exports.track("api","api_users_allow_oauth2")}function ye(e,t,a){$.ajax({url:"/api/v1/hooks/incoming/create",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("addIncomingHook",e,t,s);a(n)}})}function Re(e,t,a){$.ajax({url:"/api/v1/hooks/incoming/delete",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("deleteIncomingHook",e,t,s);a(n)}})}function Ce(e,t){$.ajax({url:"/api/v1/hooks/incoming/list",dataType:"json",type:"GET",success:e,error:function(e,a,s){var n=i("listIncomingHooks",e,a,s);t(n)}})}function Ne(e,t){$.ajax({url:"/api/v1/preferences/",dataType:"json",type:"GET",success:e,error:function(e,a,s){var n=i("getAllPreferences",e,a,s);t(n)}})}function ke(e,t,a){$.ajax({url:"/api/v1/preferences/"+e,dataType:"json",type:"GET",success:t,error:function(e,t,s){var n=i("getPreferenceCategory",e,t,s);a(n)}})}function Se(e,t,a){$.ajax({url:"/api/v1/preferences/save",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("savePreferences",e,t,s);a(n)}})}function we(e,t,a){$.ajax({url:"/api/v1/hooks/outgoing/create",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("addOutgoingHook",e,t,s);a(n)}})}function xe(e,t,a){$.ajax({url:"/api/v1/hooks/outgoing/delete",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("deleteOutgoingHook",e,t,s);a(n)}})}function Te(e,t){$.ajax({url:"/api/v1/hooks/outgoing/list",dataType:"json",type:"GET",success:e,error:function(e,a,s){var n=i("listOutgoingHooks",e,a,s);t(n)}})}function Pe(e,t,a){$.ajax({url:"/api/v1/hooks/outgoing/regen_token",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:t,error:function(e,t,s){var n=i("regenOutgoingHookToken",e,t,s);a(n)}})}Object.defineProperty(a,"__esModule",{value:!0}),a.track=n,a.trackPage=r,a.createTeamFromSignup=l,a.createTeamWithSSO=o,a.createUser=c,a.updateUser=u,a.updatePassword=d,a.updateUserNotifyProps=h,a.updateRoles=m,a.updateActive=p,a.sendPasswordReset=f,a.resetPassword=g,a.logout=b,a.loginByEmail=v,a.revokeSession=E,a.getSessions=_,a.getAudits=y,a.getLogs=R,a.getConfig=C,a.getAnalytics=N,a.saveConfig=k,a.logClientError=S,a.testEmail=w,a.getAllTeams=x,a.getMe=T,a.inviteMembers=P,a.updateTeam=j,a.signupTeam=M,a.createTeam=O,a.findTeamByName=D,a.findTeamsSendEmail=I,a.findTeams=L,a.createChannel=A,a.createDirectChannel=U,a.updateChannel=F,a.updateChannelHeader=H,a.updateChannelPurpose=B,a.updateNotifyProps=q,a.joinChannel=V,a.leaveChannel=z,a.deleteChannel=G,a.updateLastViewedAt=W,a.getChannels=K,a.getChannel=Y,a.getMoreChannels=J,a.getChannelCounts=Z,a.getChannelExtraInfo=Q,a.executeCommand=X,a.getPostsPage=ee,a.getPosts=te,a.getPost=ae,a.search=se,a.deletePost=ne,a.createPost=re,a.updatePost=ie,a.addChannelMember=le,a.removeChannelMember=oe,a.getProfiles=ce,a.getProfilesForTeam=ue,a.uploadFile=de,a.getFileInfo=he,a.getPublicLink=me,a.uploadProfileImage=pe,a.importSlack=fe,a.exportTeam=ge,a.getStatuses=be,a.getMyTeam=ve,a.registerOAuthApp=Ee,a.allowOAuth2=_e,a.addIncomingHook=ye,a.deleteIncomingHook=Re,a.listIncomingHooks=Ce,a.getAllPreferences=Ne,a.getPreferenceCategory=ke,a.savePreferences=Se,a.addOutgoingHook=we,a.deleteOutgoingHook=xe,a.listOutgoingHooks=Te,a.regenOutgoingHookToken=Pe;var je=e("../stores/browser_store.jsx"),Me=e("../stores/team_store.jsx"),Oe=e("../stores/error_store.jsx")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":275,"../stores/error_store.jsx":277,"../stores/team_store.jsx":283}],288:[function(e,t,a){"use strict";var s=e("keymirror");t.exports={ActionTypes:s({RECIEVED_ERROR:null,CLICK_CHANNEL:null,CREATE_CHANNEL:null,LEAVE_CHANNEL:null,RECIEVED_CHANNELS:null,RECIEVED_CHANNEL:null,RECIEVED_MORE_CHANNELS:null,RECIEVED_CHANNEL_EXTRA_INFO:null,RECIEVED_POSTS:null,RECIEVED_POST:null,RECIEVED_EDIT_POST:null,RECIEVED_SEARCH:null,RECIEVED_POST_SELECTED:null,RECIEVED_MENTION_DATA:null,RECIEVED_ADD_MENTION:null,RECIEVED_PROFILES:null,RECIEVED_ME:null,RECIEVED_SESSIONS:null,RECIEVED_AUDITS:null,RECIEVED_TEAMS:null,RECIEVED_STATUSES:null,RECIEVED_PREFERENCES:null,RECIEVED_MSG:null,RECIEVED_TEAM:null,RECIEVED_CONFIG:null,RECIEVED_LOGS:null,RECIEVED_ALL_TEAMS:null,TOGGLE_IMPORT_THEME_MODAL:null,TOGGLE_INVITE_MEMBER_MODAL:null}),PayloadSources:s({SERVER_ACTION:null,VIEW_ACTION:null}),SocketEvents:{POSTED:"posted",POST_EDITED:"post_edited",POST_DELETED:"post_deleted",CHANNEL_VIEWED:"channel_viewed",NEW_USER:"new_user",USER_ADDED:"user_added",USER_REMOVED:"user_removed",TYPING:"typing"},SPECIAL_MENTIONS:["all","channel"],CHARACTER_LIMIT:4e3,IMAGE_TYPES:["jpg","gif","bmp","png","jpeg"],AUDIO_TYPES:["mp3","wav","wma","m4a","flac","aac"],VIDEO_TYPES:["mp4","avi","webm","mkv","wmv","mpg","mov","flv"],PRESENTATION_TYPES:["ppt","pptx"],SPREADSHEET_TYPES:["xlsx","csv"],WORD_TYPES:["doc","docx"],CODE_TYPES:["css","html","js","php","rb"],PDF_TYPES:["pdf"],PATCH_TYPES:["patch"],ICON_FROM_TYPE:{audio:"audio",video:"video",spreadsheet:"excel",presentation:"ppt",pdf:"pdf",code:"code",word:"word",patch:"patch",other:"generic"},MAX_DISPLAY_FILES:5,MAX_UPLOAD_FILES:5,MAX_FILE_SIZE:5e7,THUMBNAIL_WIDTH:128,THUMBNAIL_HEIGHT:100,WEB_VIDEO_WIDTH:640,WEB_VIDEO_HEIGHT:480,MOBILE_VIDEO_WIDTH:480,MOBILE_VIDEO_HEIGHT:360,DEFAULT_CHANNEL:"town-square",OFFTOPIC_CHANNEL:"off-topic",GITLAB_SERVICE:"gitlab",EMAIL_SERVICE:"email",POST_CHUNK_SIZE:60,MAX_POST_CHUNKS:3,POST_LOADING:"loading",POST_FAILED:"failed",POST_DELETED:"deleted",POST_TYPE_JOIN_LEAVE:"join_leave",RESERVED_TEAM_NAMES:["www","web","admin","support","notify","test","demo","mail","team","channel","internal","localhost","dockerhost","stag","post","cluster","api"],RESERVED_USERNAMES:["valet","all","channel"],MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MAX_DMS:20,DM_CHANNEL:"D",OPEN_CHANNEL:"O",PRIVATE_CHANNEL:"P",INVITE_TEAM:"I",OPEN_TEAM:"O",MAX_POST_LEN:4e3,EMOJI_SIZE:16,ONLINE_ICON_SVG:"<svg version='1.1' id='Layer_1' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' sodipodi:docname='TRASH_1_4.svg' inkscape:version='0.48.4 r9939' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='12px' height='12px' viewBox='0 0 12 12' enable-background='new 0 0 12 12' xml:space='preserve'><sodipodi:namedview  inkscape:cy='139.7898' inkscape:cx='26.358185' inkscape:zoom='1.18' showguides='true' showgrid='false' id='namedview6' guidetolerance='10' gridtolerance='10' objecttolerance='10' borderopacity='1' bordercolor='#666666' pagecolor='#ffffff' inkscape:current-layer='Layer_1' inkscape:window-maximized='1' inkscape:window-y='-8' inkscape:window-x='-8' inkscape:window-height='705' inkscape:window-width='1366' inkscape:guide-bbox='true' inkscape:pageshadow='2' inkscape:pageopacity='0'><sodipodi:guide  position='50.036793,85.991376' orientation='1,0' id='guide2986'></sodipodi:guide><sodipodi:guide  position='58.426196,66.216355' orientation='0,1' id='guide3047'></sodipodi:guide></sodipodi:namedview><g><g><path class='online--icon' d='M6,5.487c1.371,0,2.482-1.116,2.482-2.493c0-1.378-1.111-2.495-2.482-2.495S3.518,1.616,3.518,2.994C3.518,4.371,4.629,5.487,6,5.487z M10.452,8.545c-0.101-0.829-0.36-1.968-0.726-2.541C9.475,5.606,8.5,5.5,8.5,5.5S8.43,7.521,6,7.521C3.507,7.521,3.5,5.5,3.5,5.5S2.527,5.606,2.273,6.004C1.908,6.577,1.648,7.716,1.547,8.545C1.521,8.688,1.49,9.082,1.498,9.142c0.161,1.295,2.238,2.322,4.375,2.358C5.916,11.501,5.958,11.501,6,11.501c0.043,0,0.084,0,0.127-0.001c2.076-0.026,4.214-1.063,4.375-2.358C10.509,9.082,10.471,8.696,10.452,8.545z'/></g></g></svg>",OFFLINE_ICON_SVG:"<svg version='1.1' id='Layer_1' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' sodipodi:docname='TRASH_1_4.svg' inkscape:version='0.48.4 r9939' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='12px' height='12px' viewBox='0 0 12 12' enable-background='new 0 0 12 12' xml:space='preserve'><sodipodi:namedview  inkscape:cy='139.7898' inkscape:cx='26.358185' inkscape:zoom='1.18' showguides='true' showgrid='false' id='namedview6' guidetolerance='10' gridtolerance='10' objecttolerance='10' borderopacity='1' bordercolor='#666666' pagecolor='#ffffff' inkscape:current-layer='Layer_1' inkscape:window-maximized='1' inkscape:window-y='-8' inkscape:window-x='-8' inkscape:window-height='705' inkscape:window-width='1366' inkscape:guide-bbox='true' inkscape:pageshadow='2' inkscape:pageopacity='0'><sodipodi:guide  position='50.036793,85.991376' orientation='1,0' id='guide2986'></sodipodi:guide><sodipodi:guide  position='58.426196,66.216355' orientation='0,1' id='guide3047'></sodipodi:guide></sodipodi:namedview><g><g><path fill='#cccccc' d='M6.002,7.143C5.645,7.363,5.167,7.52,4.502,7.52c-2.493,0-2.5-2.02-2.5-2.02S1.029,5.607,0.775,6.004C0.41,6.577,0.15,7.716,0.049,8.545c-0.025,0.145-0.057,0.537-0.05,0.598c0.162,1.295,2.237,2.321,4.375,2.357c0.043,0.001,0.085,0.001,0.127,0.001c0.043,0,0.084,0,0.127-0.001c1.879-0.023,3.793-0.879,4.263-2h-2.89L6.002,7.143L6.002,7.143z M4.501,5.488c1.372,0,2.483-1.117,2.483-2.494c0-1.378-1.111-2.495-2.483-2.495c-1.371,0-2.481,1.117-2.481,2.495C2.02,4.371,3.13,5.488,4.501,5.488z M7.002,6.5v2h5v-2H7.002z'/></g></g></svg>",
MENU_ICON:"<svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px'width='4px' height='16px' viewBox='0 0 8 32' enable-background='new 0 0 8 32' xml:space='preserve'> <g> <circle cx='4' cy='4.062' r='4'/> <circle cx='4' cy='16' r='4'/> <circle cx='4' cy='28' r='4'/> </g> </svg>",COMMENT_ICON:"<svg version='1.1' id='Layer_2' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px'width='15px' height='15px' viewBox='1 1.5 15 15' enable-background='new 1 1.5 15 15' xml:space='preserve'> <g> <g> <path fill='#211B1B' d='M14,1.5H3c-1.104,0-2,0.896-2,2v8c0,1.104,0.896,2,2,2h1.628l1.884,3l1.866-3H14c1.104,0,2-0.896,2-2v-8 C16,2.396,15.104,1.5,14,1.5z M15,11.5c0,0.553-0.447,1-1,1H8l-1.493,2l-1.504-1.991L5,12.5H3c-0.552,0-1-0.447-1-1v-8 c0-0.552,0.448-1,1-1h11c0.553,0,1,0.448,1,1V11.5z'/> </g> </g> </svg>",UPDATE_TYPING_MS:5e3,THEMES:{default:{type:"Mattermost",sidebarBg:"#fafafa",sidebarText:"#333333",sidebarUnreadText:"#333333",sidebarTextHoverBg:"#e6f2fa",sidebarTextActiveBorder:"#378FD2",sidebarTextActiveColor:"#111111",sidebarHeaderBg:"#2389d7",sidebarHeaderTextColor:"#ffffff",onlineIndicator:"#7DBE00",mentionBj:"#2389d7",mentionColor:"#ffffff",centerChannelBg:"#ffffff",centerChannelColor:"#333333",newMessageSeparator:"#FF8800",linkColor:"#2389d7",buttonBg:"#2389d7",buttonColor:"#FFFFFF",mentionHighlightBg:"#fff2bb",mentionHighlightLink:"#2f81b7",codeTheme:"github"},organization:{type:"Organization",sidebarBg:"#2071a7",sidebarText:"#fff",sidebarUnreadText:"#fff",sidebarTextHoverBg:"#136197",sidebarTextActiveBorder:"#7AB0D6",sidebarTextActiveColor:"#FFFFFF",sidebarHeaderBg:"#2f81b7",sidebarHeaderTextColor:"#FFFFFF",onlineIndicator:"#7DBE00",mentionBj:"#136197",mentionColor:"#bfcde8",centerChannelBg:"#f2f4f8",centerChannelColor:"#333333",newMessageSeparator:"#FF8800",linkColor:"#2f81b7",buttonBg:"#1dacfc",buttonColor:"#FFFFFF",mentionHighlightBg:"#fff2bb",mentionHighlightLink:"#2f81b7",codeTheme:"github"},mattermostDark:{type:"Mattermost Dark",sidebarBg:"#1B2C3E",sidebarText:"#fff",sidebarUnreadText:"#fff",sidebarTextHoverBg:"#4A5664",sidebarTextActiveBorder:"#39769C",sidebarTextActiveColor:"#FFFFFF",sidebarHeaderBg:"#1B2C3E",sidebarHeaderTextColor:"#FFFFFF",onlineIndicator:"#55C5B2",mentionBj:"#B74A4A",mentionColor:"#FFFFFF",centerChannelBg:"#2F3E4E",centerChannelColor:"#DDDDDD",newMessageSeparator:"#5de5da",linkColor:"#A4FFEB",buttonBg:"#4CBBA4",buttonColor:"#FFFFFF",mentionHighlightBg:"#984063",mentionHighlightLink:"#A4FFEB",codeTheme:"solarized_dark"},windows10:{type:"Windows Dark",sidebarBg:"#171717",sidebarText:"#fff",sidebarUnreadText:"#fff",sidebarTextHoverBg:"#302e30",sidebarTextActiveBorder:"#196CAF",sidebarTextActiveColor:"#FFFFFF",sidebarHeaderBg:"#1f1f1f",sidebarHeaderTextColor:"#FFFFFF",onlineIndicator:"#0177e7",mentionBj:"#0177e7",mentionColor:"#FFFFFF",centerChannelBg:"#1F1F1F",centerChannelColor:"#DDDDDD",newMessageSeparator:"#CC992D",linkColor:"#0D93FF",buttonBg:"#0177e7",buttonColor:"#FFFFFF",mentionHighlightBg:"#784098",mentionHighlightLink:"#A4FFEB",codeTheme:"monokai"}},THEME_ELEMENTS:[{id:"sidebarBg",uiName:"Sidebar BG"},{id:"sidebarText",uiName:"Sidebar Text"},{id:"sidebarHeaderBg",uiName:"Sidebar Header BG"},{id:"sidebarHeaderTextColor",uiName:"Sidebar Header Text"},{id:"sidebarUnreadText",uiName:"Sidebar Unread Text"},{id:"sidebarTextHoverBg",uiName:"Sidebar Text Hover BG"},{id:"sidebarTextActiveBorder",uiName:"Sidebar Text Active Border"},{id:"sidebarTextActiveColor",uiName:"Sidebar Text Active Color"},{id:"onlineIndicator",uiName:"Online Indicator"},{id:"mentionBj",uiName:"Mention Jewel BG"},{id:"mentionColor",uiName:"Mention Jewel Text"},{id:"centerChannelBg",uiName:"Center Channel BG"},{id:"centerChannelColor",uiName:"Center Channel Text"},{id:"newMessageSeparator",uiName:"New Message Separator"},{id:"linkColor",uiName:"Link Color"},{id:"buttonBg",uiName:"Button BG"},{id:"buttonColor",uiName:"Button Text"},{id:"mentionHighlightBg",uiName:"Mention Highlight BG"},{id:"mentionHighlightLink",uiName:"Mention Highlight Link"},{id:"codeTheme",uiName:"Code Theme",themes:[{id:"solarized_dark",uiName:"Solarized Dark"},{id:"solarized_light",uiName:"Solarized Light"},{id:"github",uiName:"GitHub"},{id:"monokai",uiName:"Monokai"}]}],DEFAULT_CODE_THEME:"github",Preferences:{CATEGORY_DIRECT_CHANNEL_SHOW:"direct_channel_show",CATEGORY_DISPLAY_SETTINGS:"display_settings",CATEGORY_ADVANCED_SETTINGS:"advanced_settings",TUTORIAL_STEP:"tutorial_step"},TutorialSteps:{INTRO_SCREENS:0,POST_POPOVER:1,CHANNEL_POPOVER:2,MENU_POPOVER:3},KeyCodes:{UP:38,DOWN:40,LEFT:37,RIGHT:39,BACKSPACE:8,ENTER:13,ESCAPE:27,SPACE:32},HighlightedLanguages:{diff:"Diff",apache:"Apache",makefile:"Makefile",http:"HTTP",json:"JSON",markdown:"Markdown",javascript:"JavaScript",css:"CSS",nginx:"nginx",objectivec:"Objective-C",python:"Python",xml:"XML",perl:"Perl",bash:"Bash",php:"PHP",coffeescript:"CoffeeScript",cs:"C#",cpp:"C++",sql:"SQL",go:"Go",ruby:"Ruby",java:"Java",ini:"ini"},PostsViewJumpTypes:{BOTTOM:1,POST:2,SIDEBAR_OPEN:3},NotificationPrefs:{MENTION:"mention"}}},{keymirror:"keymirror"}],289:[function(e,t,a){"use strict";function s(){for(var e="+1,-1,100,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crescent_moon,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square_button,wind_chime,wine_glass,wink,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz".split(","),t=new i,a=0;a<e.length;a++)t[e[a]]=!0;return t}function n(e,t){function a(e,a,s,n){if(o[n]){var i=t.size,l="MM_EMOTICON"+i;return t.set(l,{value:'<img align="absmiddle" alt="'+s+'" class="emoji" src="'+r(n)+'" title="'+s+'" />',originalText:e}),a+l}return e}var s=e;return s=s.replace(/(^|\s)(:([a-zA-Z0-9_-]+):)(?=$|\s)/g,function(e,t,s,n){return a(e,t,s,n)}),$.each(l,function(e,t){s=s.replace(t,function(t,s,n){return a(t,s,n,e)})}),s}function r(e){return"/static/images/emoji/"+e+".png"}var i=e("babel-runtime/core-js/map").default;Object.defineProperty(a,"__esModule",{value:!0}),a.handleEmoticons=n;var l={smile:/(^|\s)(:-?\))(?=$|\s)/g,wink:/(^|\s)(;-?\))(?=$|\s)/g,open_mouth:/(^|\s)(:o)(?=$|\s)/gi,scream:/(^|\s)(:-o)(?=$|\s)/gi,smirk:/(^|\s)(:-?])(?=$|\s)/g,grinning:/(^|\s)(:-?d)(?=$|\s)/gi,stuck_out_tongue_closed_eyes:/(^|\s)(x-d)(?=$|\s)/gi,stuck_out_tongue:/(^|\s)(:-?p)(?=$|\s)/gi,rage:/(^|\s)(:-?[\[@])(?=$|\s)/g,frowning:/(^|\s)(:-?\()(?=$|\s)/g,sob:/(^|\s)(:['’]-?\(|:&#x27;\(|:&#39;\()(?=$|\s)/g,kissing_heart:/(^|\s)(:-?\*)(?=$|\s)/g,pensive:/(^|\s)(:-?\/)(?=$|\s)/g,confounded:/(^|\s)(:-?s)(?=$|\s)/gi,flushed:/(^|\s)(:-?\|)(?=$|\s)/g,relaxed:/(^|\s)(:-?\$)(?=$|\s)/g,mask:/(^|\s)(:-x)(?=$|\s)/gi,heart:/(^|\s)(<3|&lt;3)(?=$|\s)/g,broken_heart:/(^|\s)(<\/3|&lt;&#x2F;3)(?=$|\s)/g,thumbsup:/(^|\s)(:\+1:)(?=$|\s)/g,thumbsdown:/(^|\s)(:\-1:)(?=$|\s)/g},o=s()},{"babel-runtime/core-js/map":151}],290:[function(e,t,a){"use strict";var s=e("highlight.js/lib/highlight.js"),n=e("highlight.js/lib/languages/diff.js"),r=e("highlight.js/lib/languages/apache.js"),i=e("highlight.js/lib/languages/makefile.js"),l=e("highlight.js/lib/languages/http.js"),o=e("highlight.js/lib/languages/json.js"),c=e("highlight.js/lib/languages/markdown.js"),u=e("highlight.js/lib/languages/javascript.js"),d=e("highlight.js/lib/languages/css.js"),h=e("highlight.js/lib/languages/nginx.js"),m=e("highlight.js/lib/languages/objectivec.js"),p=e("highlight.js/lib/languages/python.js"),f=e("highlight.js/lib/languages/xml.js"),g=e("highlight.js/lib/languages/perl.js"),b=e("highlight.js/lib/languages/bash.js"),v=e("highlight.js/lib/languages/php.js"),E=e("highlight.js/lib/languages/coffeescript.js"),_=e("highlight.js/lib/languages/cs.js"),y=e("highlight.js/lib/languages/cpp.js"),R=e("highlight.js/lib/languages/sql.js"),C=e("highlight.js/lib/languages/go.js"),N=e("highlight.js/lib/languages/ruby.js"),k=e("highlight.js/lib/languages/java.js"),S=e("highlight.js/lib/languages/ini.js");s.registerLanguage("diff",n),s.registerLanguage("apache",r),s.registerLanguage("makefile",i),s.registerLanguage("http",l),s.registerLanguage("json",o),s.registerLanguage("markdown",c),s.registerLanguage("javascript",u),s.registerLanguage("css",d),s.registerLanguage("nginx",h),s.registerLanguage("objectivec",m),s.registerLanguage("python",p),s.registerLanguage("xml",f),s.registerLanguage("perl",g),s.registerLanguage("bash",b),s.registerLanguage("php",v),s.registerLanguage("coffeescript",E),s.registerLanguage("cs",_),s.registerLanguage("cpp",y),s.registerLanguage("sql",R),s.registerLanguage("go",C),s.registerLanguage("ruby",N),s.registerLanguage("java",k),s.registerLanguage("ini",S)},{"highlight.js/lib/highlight.js":239,"highlight.js/lib/languages/apache.js":240,"highlight.js/lib/languages/bash.js":241,"highlight.js/lib/languages/coffeescript.js":242,"highlight.js/lib/languages/cpp.js":243,"highlight.js/lib/languages/cs.js":244,"highlight.js/lib/languages/css.js":245,"highlight.js/lib/languages/diff.js":246,"highlight.js/lib/languages/go.js":247,"highlight.js/lib/languages/http.js":248,"highlight.js/lib/languages/ini.js":249,"highlight.js/lib/languages/java.js":250,"highlight.js/lib/languages/javascript.js":251,"highlight.js/lib/languages/json.js":252,"highlight.js/lib/languages/makefile.js":253,"highlight.js/lib/languages/markdown.js":254,"highlight.js/lib/languages/nginx.js":255,"highlight.js/lib/languages/objectivec.js":256,"highlight.js/lib/languages/perl.js":257,"highlight.js/lib/languages/php.js":258,"highlight.js/lib/languages/python.js":259,"highlight.js/lib/languages/ruby.js":260,"highlight.js/lib/languages/sql.js":261,"highlight.js/lib/languages/xml.js":262}],291:[function(e,t,a){"use strict";function s(e){e.style.height="auto"}function n(e,t){var a={renderer:new b(null,t),sanitize:!0,gfm:!0,tables:!0},s=new v(a).lex(e);return new g(a).parse(s)}var r=e("babel-runtime/helpers/get").default,i=e("babel-runtime/helpers/inherits").default,l=e("babel-runtime/helpers/class-call-check").default,o=e("babel-runtime/helpers/create-class").default,c=e("babel-runtime/core-js/object/assign").default;Object.defineProperty(a,"__esModule",{value:!0}),a.format=n,e("./highlight.jsx");var u=e("./text_formatting.jsx"),d=e("./utils.jsx"),h=e("highlight.js/lib/highlight.js"),m=e("marked"),p=e("../utils/constants.jsx").HighlightedLanguages;window.markdownImageLoaded=s;var f=function(e){function t(e,a){l(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,a),this.rules=c({},this.rules),this.rules.text=/^[\s\S]+?(?:[^\w\/](?=_)|(?=_\W|[\\<!\[*`~]|https?:\/\/|www\.|\(| {2,}\n|$))/,this.rules.url=/^(\(?(?:https?:\/\/|www\.)[^\s<.][^\s<]*[^<.,:;"'\]\s])/,this.rules.autolink=/^<((?:[^ >]+(@|:\/)|www\.)[^ >]+)>/}return i(t,e),t}(m.InlineLexer),g=function(e){function t(){l(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"parse",value:function(e){this.inline=new f(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t}}]),t}(m.Parser),b=function(e){function t(e){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];l(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.heading=this.heading.bind(this),this.paragraph=this.paragraph.bind(this),this.text=this.text.bind(this),this.formattingOptions=a}return i(t,e),o(t,[{key:"code",value:function(e,a){var s=a;if("html"===String(s).toLocaleLowerCase()&&(s="xml"),!s||h.listLanguages().indexOf(s)<0){var n=r(Object.getPrototypeOf(t.prototype),"code",this).call(this,e,s);return'<div class="post-body--code"><code class="hljs">'+u.sanitizeHtml($(n).text())+"</code></div>"}var i=h.highlight(s,e);return'<div class="post-body--code"><span class="post-body--code__language">'+p[s]+'</span><code class="hljs">'+i.value+"</code></div>"}},{key:"br",value:function(){return this.formattingOptions.singleline?" ":r(Object.getPrototypeOf(t.prototype),"br",this).call(this)}},{key:"image",value:function(e,t,a){var s='<img src="'+e+'" alt="'+a+'"';return t&&(s+=' title="'+t+'"'),s+=' onload="window.markdownImageLoaded(this)" onerror="window.markdownImageLoaded(this)" class="markdown-inline-img"',s+=this.options.xhtml?"/>":">"}},{key:"heading",value:function(e,t,a){var s=""+this.options.headerPrefix+a.toLowerCase().replace(/[^\w]+/g,"-");return"<h"+t+' id="'+s+'" class="markdown__heading">'+e+"</h"+t+">"}},{key:"link",value:function(e,t,a){var s=e,n=a,r="",i="";s.startsWith("(")&&s.endsWith(")")&&a===s&&(r="(",i=")",n=a.substring(1,a.length-1),s=s.substring(1,s.length-1)),/[a-z+.-]+:/i.test(s)||(s="http://"+s);var l='<a class="theme markdown__link" href="'+s+'"';return t&&(l+=' title="'+t+'"'),l+=0===s.lastIndexOf(d.getTeamURLFromAddressBar(),0)?">":' target="_blank">',l+=n+"</a>",r+l+i}},{key:"paragraph",value:function(e){return this.formattingOptions.singleline?'<p class="markdown__paragraph-inline">'+e+"</p>":r(Object.getPrototypeOf(t.prototype),"paragraph",this).call(this,e)}},{key:"table",value:function(e,t){return'<table class="markdown__table"><thead>'+e+"</thead><tbody>"+t+"</tbody></table>"}},{key:"text",value:function(e){return u.doFormatText(e,this.formattingOptions)}}]),t}(m.Renderer),v=function(e){function t(){l(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"token",value:function(e,t,a){for(var s=e.replace(/^ +$/gm,"");s;){var n=this.rules.newline.exec(s);if(n&&(s=s.substring(n[0].length),n[0].length>1&&this.tokens.push({type:"space"})),n=this.rules.code.exec(s))s=s.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:n.replace(/\n+$/,"")});else if(n=this.rules.fences.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]||""});else if(n=this.rules.heading.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(n=this.rules.nptable.exec(s),t&&n){s=s.substring(n[0].length);for(var r={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/\n$/,"").split("\n")},i=0;i<r.align.length;i++)/^ *-+: *$/.test(r.align[i])?r.align[i]="right":/^ *:-+: *$/.test(r.align[i])?r.align[i]="center":/^ *:-+ *$/.test(r.align[i])?r.align[i]="left":r.align[i]=null;for(var i=0;i<r.cells.length;i++)r.cells[i]=r.cells[i].split(/ *\| */);this.tokens.push(r)}else if(n=this.rules.lheading.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(n=this.rules.hr.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,t,!0),this.tokens.push({type:"blockquote_end"});else{if(n=this.rules.list.exec(s)){var l=n[2],o=n[0].length;if(n=n[0].match(this.rules.item),n.length>1){s=s.substring(o),this.tokens.push({type:"list_start",ordered:l.length>1});var c=!1;o=n.length;for(var i=0;o>i;i++){var r=n[i],u=r.length;if(r=r.replace(/^ *([*+-]|\d+\.) +/,""),~r.indexOf("\n ")&&(u-=r.length,r=this.options.pedantic?r.replace(/^ {1,4}/gm,""):r.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&i!==o-1){var d=/(?:[*+-]|\d+\.)/,h=d.exec(n[i+1])[0];l===h||l.length>1&&h.length>1||(s=n.slice(i+1).join("\n")+s,i=o-1)}var m=c||/\n\n(?!\s*$)/.test(r);i!==o-1&&(c="\n"===r.charAt(r.length-1),m||(m=c)),this.tokens.push({type:m?"loose_item_start":"list_item_start"}),this.token(r,!1,a),this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}}if(n=this.rules.html.exec(s))s=s.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]});else if(n=this.rules.def.exec(s),!a&&t&&n)s=s.substring(n[0].length),this.tokens.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(n=this.rules.table.exec(s),t&&n){s=s.substring(n[0].length);for(var r={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/(?: *\| *)?\n$/,"").split("\n")},i=0;i<r.align.length;i++)/^ *-+: *$/.test(r.align[i])?r.align[i]="right":/^ *:-+: *$/.test(r.align[i])?r.align[i]="center":/^ *:-+ *$/.test(r.align[i])?r.align[i]="left":r.align[i]=null;for(var i=0;i<r.cells.length;i++)r.cells[i]=r.cells[i].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(r)}else if(n=this.rules.paragraph.exec(s),t&&n)s=s.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(s)throw new Error("Infinite loop on byte: "+s.charCodeAt(0))}}return this.tokens}}]),t}(m.Lexer)},{"../utils/constants.jsx":288,"./highlight.jsx":290,"./text_formatting.jsx":292,"./utils.jsx":293,"babel-runtime/core-js/object/assign":152,"babel-runtime/helpers/class-call-check":159,"babel-runtime/helpers/create-class":160,"babel-runtime/helpers/get":161,"babel-runtime/helpers/inherits":162,"highlight.js/lib/highlight.js":239,marked:"marked"}],292:[function(e,t,a){"use strict";function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=void 0;return"markdown"in t&&!t.markdown?(a=r(e),a=n(a,t)):a=R.format(e,t),t.singleline&&(a=m(a)),a}function n(e,t){var a=e,s=new b;return a=l(a,s),a=i(a,s),a=u(a,s),"emoticons"in t&&!t.emoticon||(a=y.handleEmoticons(a,s)),t.searchTerm&&(a=d(a,s,t.searchTerm)),"mentionHighlight"in t&&!t.mentionHighlight||(a=c(a,s)),a=h(a,s)}function r(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;")}function i(e,t){function a(e,a){var s=a.getMatchedText(),n=s;"email"===a.getType()&&(n="mailto:"+n);var r=t.size,i="MM_EMAIL"+r;return t.set(i,{value:'<a class="theme" href="'+n+'">'+s+"</a>",originalText:s}),i}var s=new E({urls:!1,email:!0,phone:!1,twitter:!1,hashtag:!1,replaceFn:a});return s.link(e)}function l(e,t){function a(e){var t=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g;return t.test(e)}function s(e){return-1!==_.SPECIAL_MENTIONS.indexOf(e)||C.getProfileByUsername(e)}function n(e,a,s){var n=t.size,r="MM_ATMENTION"+n;return t.set(r,{value:"<a class='mention-link' href='#' data-mention='"+e+"'>"+a+"</a>",originalText:a,extraText:s}),r}function r(e,t,r){var i=r.toLowerCase();if(s(i)){var l=n(i,t,"");return l}for(var o=i,c=i.length;c>0&&a(i[c-1]);c--)if(i=i.substring(0,c-1),s(i)){var u=o.substr(c-1),l=n(i,"@"+i,u);return l}return e}var i=e;return i=i.replace(/(@([a-z0-9.\-_]*))/gi,r)}function o(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(e,t){function a(e,a,s){var n=t.size,r="MM_SELFMENTION"+n;return t.set(r,{value:"<span class='mention-highlight'>"+s+"</span>",originalText:s}),a+r}var s=e,n=C.getCurrentMentionKeys(),r=new b,i=!0,l=!1,c=void 0;try{for(var u,d=v(t);!(i=(u=d.next()).done);i=!0){var h=f(u.value,2),m=h[0],p=h[1];if(-1!==n.indexOf(p.originalText)){var g=t.size+r.size,E="MM_SELFMENTION"+g;r.set(E,{value:"<span class='mention-highlight'>"+m+"</span>"+p.extraText,originalText:p.originalText}),s=s.replace(m,E)}}}catch(e){l=!0,c=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw c}}var _=!0,y=!1,R=void 0;try{for(var N,k=v(r);!(_=(N=k.next()).done);_=!0){var S=N.value;t.set(S[0],S[1])}}catch(e){y=!0,R=e}finally{try{!_&&k.return&&k.return()}finally{if(y)throw R}}var w=!0,x=!1,T=void 0;try{for(var P,j=v(C.getCurrentMentionKeys());!(w=(P=j.next()).done);w=!0){var M=P.value;s=s.replace(new RegExp("(^|\\W)("+o(M)+")\\b","gi"),a)}}catch(e){x=!0,T=e}finally{try{!w&&j.return&&j.return()}finally{if(x)throw T}}return s}function u(e,t){function a(e,a,s){var n=t.size,r="MM_HASHTAG"+n;return t.set(r,{value:"<a class='mention-link' href='#' data-hashtag='"+s+"'>"+s+"</a>",originalText:s}),a+r}var s=e,n=new b,r=!0,i=!1,l=void 0;try{for(var o,c=v(t);!(r=(o=c.next()).done);r=!0){var u=f(o.value,2),d=u[0],h=u[1];if(0===h.originalText.lastIndexOf("#",0)){var m=t.size+n.size,p="MM_HASHTAG"+m;n.set(p,{value:"<a class='mention-link' href='#' data-hashtag='"+h.originalText+"'>"+h.originalText+"</a>",originalText:h.originalText}),s=s.replace(d,p)}}}catch(e){i=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw l}}var g=!0,E=!1,_=void 0;try{for(var y,R=v(n);!(g=(y=R.next()).done);g=!0){var C=y.value;t.set(C[0],C[1])}}catch(e){E=!0,_=e}finally{try{!g&&R.return&&R.return()}finally{if(E)throw _}}return s.replace(/(^|\W)(#[a-zA-Z][a-zA-Z0-9.\-_]*)\b/g,a)}function d(e,t,a){function s(e,a,s){var n=t.size,r="MM_SEARCHTERM"+n;return t.set(r,{value:"<span class='search-highlight'>"+s+"</span>",originalText:s}),a+r}var n=e,r=new b,i=!0,l=!1,c=void 0;try{for(var u,d=v(t);!(i=(u=d.next()).done);i=!0){var h=f(u.value,2),m=h[0],p=h[1];if(p.originalText.indexOf(a.replace(/\*$/,""))>-1){var g=t.size+r.size,E="MM_SEARCHTERM"+g;r.set(E,{value:"<span class='search-highlight'>"+m+"</span>",originalText:p.originalText}),n=n.replace(m,E)}}}catch(e){l=!0,c=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw c}}var _=!0,y=!1,R=void 0;try{for(var C,N=v(r);!(_=(C=N.next()).done);_=!0){var k=C.value;t.set(k[0],k[1])}}catch(e){y=!0,R=e}finally{try{!_&&N.return&&N.return()}finally{if(y)throw R}}return n.replace(new RegExp("()("+o(a)+")","gi"),s)}function h(e,t){for(var a=e,s=[].concat(g(t.keys())),n=s.length-1;n>=0;n--){var r=s[n],i=t.get(r);a=a.replace(r,i.value)}return a}function m(e){return e.replace(/\n/g," ")}function p(e){var t=e.target.getAttributeNode("data-mention"),a=e.target.getAttributeNode("data-hashtag");t?N.searchForTerm(t.value):a&&N.searchForTerm(a.value)}var f=e("babel-runtime/helpers/sliced-to-array").default,g=e("babel-runtime/helpers/to-consumable-array").default,b=e("babel-runtime/core-js/map").default,v=e("babel-runtime/core-js/get-iterator").default;Object.defineProperty(a,"__esModule",{value:!0}),a.formatText=s,a.doFormatText=n,a.sanitizeHtml=r,a.handleClick=p;var E=e("autolinker"),_=e("./constants.jsx"),y=e("./emoticons.jsx"),R=e("./markdown.jsx"),C=e("../stores/user_store.jsx"),N=e("./utils.jsx")},{"../stores/user_store.jsx":284,"./constants.jsx":288,"./emoticons.jsx":289,"./markdown.jsx":291,"./utils.jsx":293,autolinker:"autolinker","babel-runtime/core-js/get-iterator":149,"babel-runtime/core-js/map":151,"babel-runtime/helpers/sliced-to-array":164,"babel-runtime/helpers/to-consumable-array":165}],293:[function(e,t,a){(function(t){"use strict";function s(e){var t=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;return t.test(e)}function n(e){var t=e.trim().replace(/-/g," ").replace(/[^\w\s]/gi,"").toLowerCase().replace(/\s/g,"-");return t=t.replace(/-{2,}/,"-"),t=t.replace(/^\-+/,""),t=t.replace(/\-+$/,"")}function r(){return/^localhost/.test(window.location.hostname)?!0:/^dockerhost/.test(window.location.hostname)?!0:/^test/.test(window.location.hostname)?!0:/^127.0./.test(window.location.hostname)?!0:/^192.168./.test(window.location.hostname)?!0:/^10./.test(window.location.hostname)?!0:/^176./.test(window.location.hostname)?!0:!1;
}function i(){return navigator.userAgent.indexOf("Chrome")>-1?!0:!1}function l(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")?!0:!1}function o(e,t){for(var a=e.split(" "),s=0;s<a.length;s++)if(a[s]===t)return!0;return!1}function c(e){return o(e,"admin")?!0:o(e,"system_admin")?!0:!1}function u(e){return o(e,"system_admin")?!0:!1}function d(){var e=window.location.host.split(".");return 1===e.length?e[0].indexOf("dockerhost")>-1?"dockerhost:8065":"localhost:8065":e[1]+"."+e[2]}function h(e){var t="; "+document.cookie,a=t.split("; "+e+"=");return 2===a.length?a.pop().split(";").shift():void 0}function m(e,t,a){"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission(function(s){if(Notification.permission!==s&&(Notification.permission=s),"granted"===s){var n=new Notification(e,{body:t,tag:t,icon:"/static/images/icon50x50.png"});n.onclick=function(){window.focus(),a?z(a):window.location.href=Ce.getCurrentTeamUrl()+"/channels/town-square"},setTimeout(function(){n.close()},5e3)}})}function p(){if(!ie()&&Pe){var e=new Audio("/static/images/bing.mp3");e.play(),Pe=!1,setTimeout(function(){return Pe=!0},3e3)}}function f(e){for(var t=window.location.search.substring(1),a=t.split("&"),s=0;s<a.length;s++){var n=a[s].split("=");if(n[0]===e)return n[1]}return null}function g(e){return new Date(e)}function b(e){var t=new Date(e),a=["January","February","March","April","May","June","July","August","September","October","November","December"];return a[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()}function v(e){var t=new Date(e),a=t.getHours(),s=t.getMinutes(),n="";9>=s&&(s="0"+s);var r=Re.getPreference(Ne.Preferences.CATEGORY_DISPLAY_SETTINGS,"use_military_time",{value:"false"}).value;return"false"===r&&(n=" AM",a>=12&&(n=" PM"),a%=12,a||(a="12")),a+":"+s+n}function E(e){var t=Math.floor((Date.now()-e)/1e3),a=Math.floor(t/3600);return a>24?this.displayTime(e):a>1?a+" hours ago":1===a?a+" hour ago":(a=Math.floor(t/60),a>=2?a+" minutes ago":a>=1?"1 minute ago":"just now")}function _(e){return b(e)+" "+v(e)}function y(){return Date.now()}function R(e){function t(e){var t="",a=e.getMatchedText(),i=n,l=n.indexOf(a),o=l+a.length;if(n=n.substring(0,l)+n.substring(o),!(l>1&&"]"===i.charAt(l-2)&&"("===i.charAt(l-1)&&")"===i.charAt(o))){for(var c in r)if(0===r[c].indexOf(a))return void(r[c]=r[c].replace(a,""));t=0===a.trim().indexOf("http")?a:"http://"+a,s.push(t)}}for(var a=new Te.matchParser.MatchParser({urls:!0,emails:!1,twitter:!1,phone:!1,hashtag:!1}),s=[],n=e,r=[],i=n.split("`"),l=1;l<i.length;l+=2)""!==i[l].trim()&&r.push(i[l]);return a.replace(e,t,this),{links:s,text:e}}function C(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function N(e,t){return JSON.stringify(e)===JSON.stringify(t)}function k(e){var t={"&amp;":"&","&lt;":"<","&gt;":">"},a=e;for(var s in t)if({}.hasOwnProperty.call(t,s)){var n=new RegExp(s,"g");a=a.replace(n,t[s])}return a}function S(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;"},a=e;for(var s in t)if({}.hasOwnProperty.call(t,s)){var n=new RegExp(s,"g");a=a.replace(n,t[s])}return a}function w(e){Ee.handleServerAction({type:ke.RECIEVED_SEARCH_TERM,term:e,do_search:!0})}function x(e){var t=e.toLowerCase();return Ne.IMAGE_TYPES.indexOf(t)>-1?"image":Ne.AUDIO_TYPES.indexOf(t)>-1?"audio":Ne.VIDEO_TYPES.indexOf(t)>-1?"video":Ne.SPREADSHEET_TYPES.indexOf(t)>-1?"spreadsheet":Ne.CODE_TYPES.indexOf(t)>-1?"code":Ne.WORD_TYPES.indexOf(t)>-1?"word":Ne.PRESENTATION_TYPES.indexOf(t)>-1?"presentation":Ne.PDF_TYPES.indexOf(t)>-1?"pdf":Ne.PATCH_TYPES.indexOf(t)>-1?"patch":"other"}function T(e){var t,a=e.toLowerCase();return t=a in Ne.ICON_FROM_TYPE?Ne.ICON_FROM_TYPE[a]:Ne.ICON_FROM_TYPE.other,"/static/images/icons/"+t+".png"}function P(e){var t=e.toLowerCase();return t in Ne.ICON_FROM_TYPE?Ne.ICON_FROM_TYPE[t]:"glyphicon-file"}function j(e){var t=e.split("."),a="";t.length>1&&(a=t[t.length-1],t.splice(t.length-1,1));var s=t.join("."),n=s.split("/")[s.split("/").length-1];return{ext:a,name:n,path:s}}function M(e){function t(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}return e.replace(/\w\S*/g,t)}function O(e){e.sidebarBg&&D(".sidebar--left, .settings-modal .settings-table .settings-links, .sidebar--menu","background:"+e.sidebarBg,1),e.sidebarText&&(D(".sidebar--left .nav-pills__container li>a, .sidebar--right, .settings-modal .nav-pills>li a, .sidebar--menu","color:"+J(e.sidebarText,.6),1),D("@media(max-width: 768px){.settings-modal .settings-table .nav>li>a","color:"+e.sidebarText,1),D(".sidebar--left .nav-pills__container li>h4, .sidebar--left .add-channel-btn","color:"+J(e.sidebarText,.6),1),D(".sidebar--left .add-channel-btn:hover, .sidebar--left .add-channel-btn:focus","color:"+e.sidebarText,1),D(".sidebar--left, .sidebar--right .sidebar--right__header","border-color:"+J(e.sidebarText,.2),1),D(".sidebar--left .status path","fill:"+J(e.sidebarText,.5),1),D("@media(max-width: 768px){.settings-modal .settings-table .nav>li>a","border-color:"+J(e.sidebarText,.2),2)),e.sidebarUnreadText&&D(".sidebar--left .nav-pills__container li>a.unread-title","color:"+e.sidebarUnreadText+"!important;",2),e.sidebarTextHoverBg&&(D(".sidebar--left .nav-pills__container li>a:hover, .sidebar--left .nav-pills__container li>a:focus, .settings-modal .nav-pills>li:hover a, .settings-modal .nav-pills>li:focus a","background:"+e.sidebarTextHoverBg,1),D("@media(max-width: 768px){.settings-modal .settings-table .nav>li:hover a","background:"+e.sidebarTextHoverBg,1)),e.sidebarTextActiveBorder&&D(".sidebar--left .nav li.active a:before, .settings-modal .nav-pills>li.active a:before","background:"+e.sidebarTextActiveBorder,1),e.sidebarTextActiveColor&&(D(".sidebar--left .nav-pills__container li.active a, .sidebar--left .nav-pills__container li.active a:hover, .sidebar--left .nav-pills__container li.active a:focus, .settings-modal .nav-pills>li.active a, .settings-modal .nav-pills>li.active a:hover, .settings-modal .nav-pills>li.active a:active","color:"+e.sidebarTextActiveColor,2),D(".sidebar--left .nav li.active a, .sidebar--left .nav li.active a:hover, .sidebar--left .nav li.active a:focus","background:"+J(e.sidebarTextActiveColor,.1),1),D(".search-help-popover .search-autocomplete__item:hover","background:"+J(e.sidebarTextActiveColor,.05),1),D(".search-help-popover .search-autocomplete__item.selected","background:"+J(e.sidebarTextActiveColor,.15),1)),e.sidebarHeaderBg&&(D(".sidebar--left .team__header, .sidebar--menu .team__header","background:"+e.sidebarHeaderBg,1),D(".modal .modal-header","background:"+e.sidebarHeaderBg,1),D("#navbar .navbar-default","background:"+e.sidebarHeaderBg,1),D("@media(max-width: 768px){.search-bar__container","background:"+e.sidebarHeaderBg,1),D(".attachment .attachment__container","border-left-color:"+e.sidebarHeaderBg,1)),e.sidebarHeaderTextColor&&(D(".sidebar--left .team__header .header__info, .sidebar--menu .team__header .header__info","color:"+e.sidebarHeaderTextColor,1),D(".sidebar--left .team__header .user__name, .sidebar--menu .team__header .user__name","color:"+J(e.sidebarHeaderTextColor,.8),1),D(".sidebar--left .team__header:hover .user__name, .sidebar--menu .team__header:hover .user__name","color:"+e.sidebarHeaderTextColor,1),D(".modal .modal-header .modal-title, .modal .modal-header .modal-title .name, .modal .modal-header button.close","color:"+e.sidebarHeaderTextColor,1),D("#navbar .navbar-default .navbar-brand .heading","color:"+e.sidebarHeaderTextColor,1),D("#navbar .navbar-default .navbar-toggle .icon-bar, ","background:"+e.sidebarHeaderTextColor,1),D("@media(max-width: 768px){.search-bar__container","color:"+e.sidebarHeaderTextColor,2)),e.onlineIndicator&&D(".sidebar--left .status .online--icon","fill:"+e.onlineIndicator,1),e.mentionBj&&(D(".sidebar--left .nav-pills__unread-indicator","background:"+e.mentionBj,1),D(".sidebar--left .badge","background:"+e.mentionBj,1)),e.mentionColor&&(D(".sidebar--left .nav-pills__unread-indicator","color:"+e.mentionColor,2),D(".sidebar--left .badge","color:"+e.mentionColor,2)),e.centerChannelBg&&(D(".app__content, .markdown__table, .markdown__table tbody tr, .command-box, .modal .modal-content, .mentions-name, .mentions--top .mentions-box","background:"+e.centerChannelBg,1),D("#post-list .post-list-holder-by-time","background:"+e.centerChannelBg,1),D("#post-create","background:"+e.centerChannelBg,1),D(".date-separator .separator__text, .new-separator .separator__text","background:"+e.centerChannelBg,1),D(".post-image__column .post-image__details, .search-help-popover .search-autocomplete__divider span","background:"+e.centerChannelBg,1),D(".sidebar--right, .dropdown-menu, .popover, .tip-overlay","background:"+e.centerChannelBg,1),D(".popover.bottom>.arrow:after","border-bottom-color:"+e.centerChannelBg,1),D(".popover.right>.arrow:after, .tip-overlay.tip-overlay--sidebar .arrow, .tip-overlay.tip-overlay--header .arrow","border-right-color:"+e.centerChannelBg,1),D(".popover.left>.arrow:after","border-left-color:"+e.centerChannelBg,1),D(".popover.top>.arrow:after, .tip-overlay.tip-overlay--chat .arrow","border-top-color:"+e.centerChannelBg,1),D(".search-bar__container .search__form .search-bar, .form-control","background:"+e.centerChannelBg,1),D(".attachment__content","background:"+e.centerChannelBg,1)),e.centerChannelColor&&(D(".app__content, .post-create__container .post-create-body .btn-file, .post-create__container .post-create-footer .msg-typing, .command-name, .modal .modal-content, .dropdown-menu, .popover, .mentions-name, .tip-overlay","color:"+e.centerChannelColor,1),D("#post-create","color:"+e.centerChannelColor,2),D(".channel-header__links a","fill:"+J(e.centerChannelColor,.7),1),D(".channel-header__links a:hover, .channel-header__links a:active","fill:"+e.centerChannelColor,2),D(".mentions--top, .command-box","box-shadow:"+J(e.centerChannelColor,.2)+" 1px -3px 12px",3),D(".mentions--top, .command-box","-webkit-box-shadow:"+J(e.centerChannelColor,.2)+" 1px -3px 12px",2),D(".mentions--top, .command-box","-moz-box-shadow:"+J(e.centerChannelColor,.2)+" 1px -3px 12px",1),D(".dropdown-menu, .popover ","box-shadow:"+J(e.centerChannelColor,.1)+" 0px 6px 12px",3),D(".dropdown-menu, .popover ","-webkit-box-shadow:"+J(e.centerChannelColor,.1)+" 0px 6px 12px",2),D(".dropdown-menu, .popover ","-moz-box-shadow:"+J(e.centerChannelColor,.1)+" 0px 6px 12px",1),D(".post-body hr, .loading-screen .loading__content .round, .tutorial__circles .circle","background:"+e.centerChannelColor,1),D(".channel-header .heading","color:"+e.centerChannelColor,1),D(".markdown__table tbody tr:nth-child(2n)","background:"+J(e.centerChannelColor,.07),1),D(".channel-header__info>div.dropdown .header-dropdown__icon","color:"+J(e.centerChannelColor,.8),1),D(".channel-header #member_popover","color:"+J(e.centerChannelColor,.8),1),D(".custom-textarea, .custom-textarea:focus, .preview-container .preview-div, .post-image__column .post-image__details, .sidebar--right .sidebar-right__body, .markdown__table th, .markdown__table td, .command-box, .modal .modal-content, .settings-modal .settings-table .settings-content .divider-light, .webhooks__container, .dropdown-menu, .modal .modal-header, .popover, .mentions--top .mentions-box","border-color:"+J(e.centerChannelColor,.2),1),D(".popover.bottom>.arrow","border-bottom-color:"+J(e.centerChannelColor,.25),1),D(".search-help-popover .search-autocomplete__divider span","color:"+J(e.centerChannelColor,.7),1),D(".popover.right>.arrow","border-right-color:"+J(e.centerChannelColor,.25),1),D(".popover.left>.arrow","border-left-color:"+J(e.centerChannelColor,.25),1),D(".popover.top>.arrow","border-top-color:"+J(e.centerChannelColor,.25),1),D(".command-name, .popover .popover-title","border-color:"+J(e.centerChannelColor,.2),1),D(".dropdown-menu .divider, .search-help-popover .search-autocomplete__divider:before","background:"+e.centerChannelColor,1),D(".custom-textarea","color:"+e.centerChannelColor,1),D(".post-image__column","border-color:"+J(e.centerChannelColor,.2),2),D(".post-image__column .post-image__details","color:"+e.centerChannelColor,2),D(".post-image__column a, .post-image__column a:hover, .post-image__column a:focus","color:"+e.centerChannelColor,1),D(".search-bar__container .search__form .search-bar, .form-control","color:"+e.centerChannelColor,2),D("@media(max-width: 768px){.search-bar__container .search__form .search-bar","background:"+J(e.centerChannelColor,.2)+"; color: inherit;",1),D(".input-group-addon, .search-bar__container .search__form, .form-control","border-color:"+J(e.centerChannelColor,.2),1),D(".form-control:focus","border-color:"+J(e.centerChannelColor,.3),1),D(".attachment .attachment__content","border-color:"+J(e.centerChannelColor,.3),1),D(".channel-intro .channel-intro__content, .webhooks__container","background:"+J(e.centerChannelColor,.05),1),D(".date-separator .separator__text","color:"+e.centerChannelColor,2),D(".date-separator .separator__hr, .modal-footer, .modal .custom-textarea, .post-right__container .post.post--root hr, .search-item-container","border-color:"+J(e.centerChannelColor,.2),1),D(".modal .custom-textarea:focus","border-color:"+J(e.centerChannelColor,.3),1),D(".channel-intro, .settings-modal .settings-table .settings-content .divider-dark, hr, .settings-modal .settings-table .settings-links","border-color:"+J(e.centerChannelColor,.2),1),D(".post.current--user .post-body, .post.post--comment.other--root.current--user .post-comment, pre","background:"+J(e.centerChannelColor,.07),1),D(".post.current--user .post-body, .post.post--comment.other--root.current--user .post-comment, .post.post--comment.other--root .post-comment, .post.same--root .post-body, .modal .more-table tbody>tr td, .member-div:first-child, .member-div, .access-history__table .access__report, .activity-log__table","border-color:"+J(e.centerChannelColor,.1),2),D("@media(max-width: 1440px){.post.same--root","border-color:"+J(e.centerChannelColor,.07),2),D("@media(max-width: 1440px){.post.same--root","border-color:"+J(e.centerChannelColor,.07),2),D("@media(max-width: 1800px){.inner__wrap.move--left .post.post--comment.same--root","border-color:"+J(e.centerChannelColor,.07),2),D(".post:hover, .modal .more-table tbody>tr:hover td, .sidebar--right .sidebar--right__header, .settings-modal .settings-table .settings-content .section-min:hover","background:"+J(e.centerChannelColor,.07),1),D(".date-separator.hovered--before:after, .date-separator.hovered--after:before, .new-separator.hovered--after:before, .new-separator.hovered--before:after","background:"+J(e.centerChannelColor,.07),1),D(".command-name:hover, .mentions-name:hover, .mentions-focus, .dropdown-menu>li>a:focus, .dropdown-menu>li>a:hover, .bot-indicator","background:"+J(e.centerChannelColor,.15),1),D("code","background:"+J(e.centerChannelColor,.1),1),D(".post.current--user:hover .post-body ","background: none;",1),D(".sidebar--right","color:"+e.centerChannelColor,2)),e.newMessageSeparator&&(D(".new-separator .separator__text","color:"+e.newMessageSeparator,1),D(".new-separator .separator__hr","border-color:"+J(e.newMessageSeparator,.5),1)),e.linkColor&&(D("a, a:focus, a:hover, .btn, .btn:focus, .btn:hover","color:"+e.linkColor,1),D(".post .comment-icon__container","fill:"+e.linkColor,1)),e.buttonBg&&(D(".btn.btn-primary, .tutorial__circles .circle.active","background:"+e.buttonBg,1),D(".btn.btn-primary:hover, .btn.btn-primary:active, .btn.btn-primary:focus","background:"+Y(e.buttonBg,-.25),1),D(".file-playback-controls","color:"+Y(e.buttonBg,-.25),1)),e.buttonColor&&D(".btn.btn-primary","color:"+e.buttonColor,2),e.mentionHighlightBg&&D(".mention-highlight, .search-highlight","background:"+e.mentionHighlightBg,1),e.mentionHighlightLink&&D(".mention-highlight .mention-link","color:"+e.mentionHighlightLink,1),e.codeTheme||(e.codeTheme=Ne.DEFAULT_CODE_THEME),L(e.codeTheme)}function D(e,t,a){var s=$("#css-modifier-container");0===s.length&&(s=$('<div id="css-modifier-container"></div>'),s.hide(),s.appendTo($("body")));var n=s.find('div[data-class="'+e+a+'"]');0===n.length&&(n=$('<div data-class="'+e+a+'"></div>'),n.appendTo(s)),n.html("<style>"+e+" {"+t+"}</style>")}function I(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}if(/^#[0-9A-F]{6}$/i.test(e))return e;var a=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t(a[1])+t(a[2])+t(a[3])}function L(e){var t="/static/css/highlight/"+e+".css",a=$("link.code_theme");if(t!==a.attr("href")){D("code.hljs","visibility: hidden");var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){a.attr("href",t),ie()?a.one("load",function(){D("code.hljs","visibility: visible")}):D("code.hljs","visibility: visible")},s.send()}}function A(e){if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var s=document.body.createTextRange();s.moveToElementText(e),s.collapse(!1),s.select()}}function U(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var a=e.createTextRange(),s=a.duplicate();return a.moveToBookmark(t.getBookmark()),s.setEndPoint("EndToStart",a),s.text.length}return 0}function F(e,t,a){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,a);else if(e.createTextRange){var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",a),s.moveStart("character",t),s.select()}}function H(e,t){F(e,t,t)}function B(e){var t;if("undefined"!=typeof document.selection){e.focus();var a=document.selection.createRange();t=a.text}else if("undefined"!=typeof e.selectionStart){var s=e.selectionStart,n=e.selectionEnd;t=e.value.substring(s,n)}return t}function q(e){var t="";if(e)if(e.length<3||e.length>15)t="Must be between 3 and 15 characters";else if(/^[a-z0-9\.\-\_]+$/.test(e))if(/[a-z]/.test(e.charAt(0))){for(var a=0;a<Ne.RESERVED_USERNAMES.length;a++)if(e===Ne.RESERVED_USERNAMES[a]){t="Cannot use a reserved word as a username.";break}}else t="First character must be a letter.";else t="Must contain only letters, numbers, and the symbols '.', '-', and '_'.";else t="This field is required";return t}function V(e){var t=window.location.href.split("/channels")[0];history.replaceState("data","",t+"/channels/"+e)}function z(e){return Ee.handleViewAction({type:ke.CLICK_CHANNEL,name:e.name,id:e.id}),V(e.name),we.getChannels(!0,!0,!0),we.getChannelExtraInfo(!0),we.getPosts(e.id),$(".inner__wrap").removeClass("move--right"),$(".sidebar--left").removeClass("move--right"),xe.trackPage(),!1}function G(){return screen.width<=768}function W(e){return"root_id"in e?""!==e.root_id:!1}function K(e){var t=_e.get(e).name.split("__"),a=ye.getCurrentId(),s={};if(2!==t.length||-1===t.indexOf(a))return s;for(var n in t)if(t[n]!==a){s=ye.getProfile(t[n]);break}return s}function Y(e,t){var a=e,s=t;a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),s=s||0;var n,r,i="#";for(r=0;3>r;r++)n=parseInt(a.substr(2*r,2),16),n=Math.round(Math.min(Math.max(0,n+n*s),255)).toString(16),i+=("00"+n).substr(n.length);return i}function J(e,t){var a=e;if("#"===a[0]&&(a=a.slice(1)),3===a.length){var s=a;a="",a+=s[0]+s[0],a+=s[1]+s[1],a+=s[2]+s[2]}var n=parseInt(a.substring(0,2),16),r=parseInt(a.substring(2,4),16),i=parseInt(a.substring(4,6),16);return"rgba("+n+","+r+","+i+","+t+")"}function Z(e){return e.first_name&&e.last_name?e.first_name+" "+e.last_name:e.first_name?e.first_name:e.last_name?e.last_name:""}function Q(e){if(e.nickname&&e.nickname.trim().length>0)return e.nickname;var t=Z(e);return t?t:e.username}function X(e){var t=ye.getProfile(e),a=Re.getPreference(Ne.Preferences.CATEGORY_DISPLAY_SETTINGS,"name_format",{value:"false"}).value,s="";return"nickname_full_name"===a?s=t.nickname||Z(t):"full_name"===a&&(s=Z(t)),s.trim().length||(s=t.username),s}function ee(){var e=window.location.origin;return e||(e=window.location.protocol+"//"+window.location.hostname,window.location.port&&(e+=":"+window.location.port)),e}function te(e){return e>1099511627776?Math.floor(e/1099511627776)+"TB":e>1073741824?Math.floor(e/1073741824)+"GB":e>1048576?Math.floor(e/1048576)+"MB":e>1024?Math.floor(e/1024)+"KB":e+"B"}function ae(e){var t=e;return-1!==t.indexOf("/api/v1/files/get")&&(t=e.split("/api/v1/files/get")[1]),t=ee()+"/api/v1/files/get"+t+"?"+ne()}function se(e){var t=e.split("/");return t[t.length-1]}function ne(){return t.window.mm_session_token_index>=0?"session_token_index="+t.window.mm_session_token_index:""}function re(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e=e.replace(/[xy]/g,function(e){var t,a=Math.floor(16*Math.random());return t="x"===e?a:3&a|8,t.toString(16)})}function ie(){return navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function le(){if(window.navigator&&window.navigator.userAgent){var e=window.navigator.userAgent;return e.indexOf("Trident/7.0")>0||e.indexOf("Trident/6.0")>0}return!1}function oe(){return window.navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("edge")>-1}function ce(e,t){var a=void 0;return a=t>e?e+"__"+t:t+"__"+e}function ue(e){var t=e.name.split("__"),a="";return a=t[0]===ye.getCurrentId()?t[1]:t[0]}function de(e,t,a){var s=new FormData;s.append("file",e,e.name),s.append("filesize",e.size),s.append("importFrom","slack"),xe.importSlack(s,t,a)}function he(){return window.location.href.split("/channels")[0]}function me(){var e=he();return e.length>35?e.substring(0,10)+"..."+e.substring(e.length-12,e.length)+"/":e+"/"}function pe(){return $(window).width()}function fe(){return $(window).height()}function ge(e,t,a){var s=this.getDirectChannelName(ye.getCurrentId(),e.id),n=_e.getByName(s),r=Re.setPreference(Ne.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,e.id,"true");we.savePreferences([r]),n?$.isFunction(t)&&t(n,!0):(n={name:s,last_post_at:0,total_msg_count:0,type:"D",display_name:e.username,teammate_id:e.id,status:ye.getStatus(e.id)},Se.createDirectChannel(n,e.id,function(e){we.getChannel(e.id),$.isFunction(t)&&t(e,!1)},function(){window.location.href=Ce.getCurrentTeamUrl()+"/channels/"+s,$.isFunction(a)&&a()}))}function be(e,t){var a="",s="";return e&&e.display_name&&(a=e.display_name.toLowerCase()),t&&t.display_name&&(s=t.display_name.toLowerCase()),s>a?-1:a>s?1:0}function ve(e){var t="Channel";return e===Ne.PRIVATE_CHANNEL&&(t="Group"),t}Object.defineProperty(a,"__esModule",{value:!0}),a.isEmail=s,a.cleanUpUrlable=n,a.isTestDomain=r,a.isChrome=i,a.isSafari=l,a.isInRole=o,a.isAdmin=c,a.isSystemAdmin=u,a.getDomainWithOutSub=d,a.getCookie=h,a.notifyMe=m,a.ding=p,a.getUrlParameter=f,a.getDateForUnixTicks=g,a.displayDate=b,a.displayTime=v,a.displayDateTime=E,a.displayCommentDateTime=_,a.getTimestamp=y,a.extractLinks=R,a.escapeRegExp=C,a.areStatesEqual=N,a.replaceHtmlEntities=k,a.insertHtmlEntities=S,a.searchForTerm=w,a.getFileType=x,a.getPreviewImagePathForFileType=T,a.getIconClassName=P,a.splitFileLocation=j,a.toTitleCase=M,a.applyTheme=O,a.changeCss=D,a.rgb2hex=I,a.updateCodeTheme=L,a.placeCaretAtEnd=A,a.getCaretPosition=U,a.setSelectionRange=F,a.setCaretPosition=H,a.getSelectedText=B,a.isValidUsername=q,a.updateAddressBar=V,a.switchChannel=z,a.isMobile=G,a.isComment=W,a.getDirectTeammate=K,a.changeColor=Y,a.changeOpacity=J,a.getFullName=Z,a.getDisplayName=Q,a.displayUsername=X,a.getWindowLocationOrigin=ee,a.fileSizeToString=te,a.getFileUrl=ae,a.getFileName=se,a.getSessionIndex=ne,a.generateId=re,a.isBrowserFirefox=ie,a.isBrowserIE=le,a.isBrowserEdge=oe,a.getDirectChannelName=ce,a.getUserIdFromChannelName=ue,a.importSlack=de,a.getTeamURLFromAddressBar=he,a.getShortenedTeamURL=me,a.windowWidth=pe,a.windowHeight=fe,a.openDirectChannelToUser=ge,a.sortByDisplayName=be,a.getChannelTerm=ve;var Ee=e("../dispatcher/app_dispatcher.jsx"),_e=e("../stores/channel_store.jsx"),ye=e("../stores/user_store.jsx"),Re=e("../stores/preference_store.jsx"),Ce=e("../stores/team_store.jsx"),Ne=e("../utils/constants.jsx"),ke=Ne.ActionTypes,Se=e("./client.jsx"),we=e("./async_client.jsx"),xe=e("./client.jsx"),Te=e("autolinker"),Pe=!0;Image.prototype.load=function(e,t){var a=this,s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){var e=s.getAllResponseHeaders(),t=e.match(/^Content-Type\:\s*(.*?)$/im),n=t[1]||"image/png",r=new Blob([this.response],{type:n});a.src=window.URL.createObjectURL(r)},s.onprogress=function(e){parseInt(a.completedPercentage=e.loaded/e.total*100,10),t&&t()},s.onloadstart=function(){a.completedPercentage=0},s.send()},Image.prototype.completedPercentage=0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":147,"../stores/channel_store.jsx":276,"../stores/preference_store.jsx":280,"../stores/team_store.jsx":283,"../stores/user_store.jsx":284,"../utils/constants.jsx":288,"./async_client.jsx":285,"./client.jsx":287,autolinker:"autolinker"}]},{},[1,2,3,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,128,129,145,146,147,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293]);
